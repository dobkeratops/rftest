<head><link href="../../css/shCore.css" rel="stylesheet" type="text/css"/><link href="../../css/shThemeDefault.css" rel="stylesheet" type="text/css"/><link href="../../css/sourcestyle.css" rel="stylesheet" type="text/css"/></head><body><div><maintext><div><fileblock><br/>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./../../index.html">(index&lt;-&nbsp;)</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./../../">&nbsp;&nbsp;&nbsp;&nbsp;./</a><c0><a href="./../../librustc/">librustc</a></c0><c1>/</c1><c0><a href="./../../librustc/back/">back</a></c0><c1>/</c1><c0><a href="./../../librustc/back/archive.rs.html">archive.rs</a></c0><br/><br/></fileblock></div><ln>&nbsp;&nbsp;&nbsp;1</ln><a id="1">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;Copyright&nbsp;2013-2014&nbsp;The&nbsp;Rust&nbsp;Project&nbsp;Developers.&nbsp;See&nbsp;the&nbsp;COPYRIGHT
</c40><br/><ln>&nbsp;&nbsp;&nbsp;2</ln><a id="2">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;file&nbsp;at&nbsp;the&nbsp;top-level&nbsp;directory&nbsp;of&nbsp;this&nbsp;distribution&nbsp;and&nbsp;at
</c40><br/><ln>&nbsp;&nbsp;&nbsp;3</ln><a id="3">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;http://rust-lang.org/COPYRIGHT.
</c40><br/><ln>&nbsp;&nbsp;&nbsp;4</ln><a id="4">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//
</c40><br/><ln>&nbsp;&nbsp;&nbsp;5</ln><a id="5">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;License,&nbsp;Version&nbsp;2.0&nbsp;&lt;LICENSE-APACHE&nbsp;or
</c40><br/><ln>&nbsp;&nbsp;&nbsp;6</ln><a id="6">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;http://www.apache.org/licenses/LICENSE-2.0&gt;&nbsp;or&nbsp;the&nbsp;MIT&nbsp;license
</c40><br/><ln>&nbsp;&nbsp;&nbsp;7</ln><a id="7">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;&lt;LICENSE-MIT&nbsp;or&nbsp;http://opensource.org/licenses/MIT&gt;,&nbsp;at&nbsp;your
</c40><br/><ln>&nbsp;&nbsp;&nbsp;8</ln><a id="8">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;option.&nbsp;This&nbsp;file&nbsp;may&nbsp;not&nbsp;be&nbsp;copied,&nbsp;modified,&nbsp;or&nbsp;distributed
</c40><br/><ln>&nbsp;&nbsp;&nbsp;9</ln><a id="9">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;except&nbsp;according&nbsp;to&nbsp;those&nbsp;terms.
</c40><br/><ln>&nbsp;&nbsp;10</ln><a id="10">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;11</ln><a id="11">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//!&nbsp;A&nbsp;helper&nbsp;class&nbsp;for&nbsp;dealing&nbsp;with&nbsp;static&nbsp;archives
</c40><br/><ln>&nbsp;&nbsp;12</ln><a id="12">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;13</ln><a id="13">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;back::link::</c0><c3>{</c3><c0>get_ar_prog</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;14</ln><a id="14">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;driver::session::Session</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;15</ln><a id="15">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;metadata::filesearch</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;16</ln><a id="16">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;lib::llvm::</c0><c3>{</c3><c0>ArchiveRef</c0><c3>,</c3><c0>&nbsp;llvm</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;17</ln><a id="17">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;18</ln><a id="18">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::cast</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;19</ln><a id="19">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::io</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;20</ln><a id="20">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::io::</c0><c3>{</c3><c0>fs</c0><c3>,</c3><c0>&nbsp;TempDir</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;21</ln><a id="21">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::libc</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;22</ln><a id="22">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::os</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;23</ln><a id="23">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::io::process::</c0><c3>{</c3><c0>ProcessConfig</c0><c3>,</c3><c0>&nbsp;Process</c0><c3>,</c3><c0>&nbsp;ProcessOutput</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;24</ln><a id="24">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::str</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;25</ln><a id="25">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::raw</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;26</ln><a id="26">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;syntax::abi</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;27</ln><a id="27">&nbsp;</a><a id="n[435359]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;28</ln><a id="28">&nbsp;</a><a id="n[435364, 435363, 435362]">&nbsp;</a><c21>pub</c21><c1><a href="#27_1_refs">&nbsp;</a></c1><c36>static</c36><c36><a href="#27_1_refs">&nbsp;METADATA_FILENAME:&nbsp;&amp;'static&nbsp;str&nbsp;=&nbsp;"rust.metadata.bin"</a></c36><c36>;
</c36><br/><ln>&nbsp;&nbsp;29</ln><a id="29">&nbsp;</a><a id="n[435365]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;30</ln><a id="30">&nbsp;</a><a id="n[]">&nbsp;</a><c21>pub</c21><c31><a href="#29_1_refs">&nbsp;</a></c31><c31>struct</c31><c31><a href="#29_1_refs">&nbsp;Archive</a></c31><c5><a href="#29_1_refs">&lt;'a&gt;</a></c5><c31><a href="#29_1_refs">&nbsp;</a></c31><c3>{</c3><c31><a href="#29_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;31</ln><a id="31">&nbsp;</a><a id="n[435369, 435366, 435370]">&nbsp;</a><c31><a href="#29_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#29_1_refs">&nbsp;</a></c31><c24><a href="#31_9_refs">sess:&nbsp;</a></c24><c8><a href="#31_9_refs">&amp;'a&nbsp;</a></c8><c8><a href="../../librustc/driver/session.rs.html#175">Session</a></c8><c3>,</c3><c31><a href="#29_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;32</ln><a id="32">&nbsp;</a><a id="n[435371, 435373]">&nbsp;</a><c31><a href="#29_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#29_1_refs">&nbsp;</a></c31><c24><a href="#32_9_refs">dst:&nbsp;</a></c24><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c3>,</c3><c31><a href="#29_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;33</ln><a id="33">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;34</ln><a id="34">&nbsp;</a><a id="n[435375]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;35</ln><a id="35">&nbsp;</a><a id="n[]">&nbsp;</a><c21>pub</c21><c31><a href="#34_1_refs">&nbsp;</a></c31><c31>struct</c31><c31><a href="#34_1_refs">&nbsp;ArchiveRO&nbsp;</a></c31><c3>{</c3><c31><a href="#34_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;36</ln><a id="36">&nbsp;</a><a id="n[435376, 435378]">&nbsp;</a><c31><a href="#34_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#34_1_refs">&nbsp;</a></c31><c24><a href="#36_9_refs">ptr:&nbsp;</a></c24><c8><a href="../../librustc/lib/llvm.rs.html#260">ArchiveRef</a></c8><c3>,</c3><c31><a href="#34_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;37</ln><a id="37">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;38</ln><a id="38">&nbsp;</a><a id="n[435379]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;39</ln><a id="39">&nbsp;</a><a id="n[435383, 435384, 435392, 435395, 435396, 435393, 435387, 435382, 435389, 435388]">&nbsp;</a><c30>fn</c30><c30><a href="#38_1_refs">&nbsp;run_ar</a></c30><c4>(</c4><c20><a href="#39_10_refs">sess</a></c20><c1><a href="#38_1_refs">:&nbsp;</a></c1><c8><a href="#38_1_refs">&amp;</a></c8><c8><a href="../../librustc/driver/session.rs.html#175">Session</a></c8><c3>,</c3><c1><a href="#38_1_refs">&nbsp;</a></c1><c20><a href="#39_26_refs">args</a></c20><c1><a href="#38_1_refs">:&nbsp;</a></c1><c8><a href="#38_1_refs">&amp;str</a></c8><c3>,</c3><c1><a href="#38_1_refs">&nbsp;</a></c1><c20><a href="#39_38_refs">cwd</a></c20><c1><a href="#38_1_refs">:&nbsp;</a></c1><c8><a href="../../libstd/option.rs.html#n104336">Option&lt;&amp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c8><a href="../../libstd/option.rs.html#n104336">&gt;</a></c8><c3>,</c3><c1><a href="#38_1_refs">
</a></c1><br/><ln>&nbsp;&nbsp;40</ln><a id="40">&nbsp;</a><a id="n[435685, 435401, 435405, 435403, 435400, 435402, 435399]">&nbsp;</a><c1><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#40_10_refs">paths</a></c20><c1><a href="#38_1_refs">:&nbsp;</a></c1><c8><a href="#38_1_refs">&amp;</a></c8><c3>[</c3><c8><a href="#38_1_refs">&amp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c3>]</c3><c4>)</c4><c1><a href="#38_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#38_1_refs">&nbsp;</a></c1><c8><a href="../../libstd/io/process.rs.html#n145644">ProcessOutput</a></c8><c1><a href="#38_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;41</ln><a id="41">&nbsp;</a><a id="n[435406, 435411, 435408, 435409, 435407, 435410, 435412]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#38_1_refs">&nbsp;</a></c22><c20><a href="#41_8_refs">ar</a></c20><c13><a href="#38_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../librustc/back/link.rs.html#735">get_ar_prog</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#39">sess</a></c26><c4>)</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;42</ln><a id="42">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;43</ln><a id="43">&nbsp;</a><a id="n[435413, 435424, 435414, 435430, 435415, 435423, 435429]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#38_1_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#43_8_refs">&nbsp;args</a></c20><c13><a href="#38_1_refs">&nbsp;=&nbsp;</a></c13><c22><a href="#38_1_refs">vec!</a></c22><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#39">args</a></c26><c10><a href="../../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>())</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;44</ln><a id="44">&nbsp;</a><a id="n[435434, 435433, 435442, 435432, 435431, 435444, 435445, 435440, 435447, 435439, 435435, 435443, 435437, 435446, 435438, 435441]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#38_1_refs">&nbsp;</a></c22><c20><a href="#44_8_refs">paths</a></c20><c13><a href="#38_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#40">paths</a></c26><c10><a href="../../libstd/slice.rs.html#n49192">.iter</a></c10><c4>()</c4><c10><a href="../../<std macros>.html#5">.map</a></c10><c4>(</c4><c1><a href="../../<std macros>.html#5">|</a></c1><c20><a href="#44_34_refs">p</a></c20><c8><a href="../../<std macros>.html#5">|</a></c8><c1><a href="../../<std macros>.html#5">&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#44">p</a></c26><c10><a href="../../librustc/middle/typeck/astconv.rs.html#142">.as_str</a></c10><c4>()</c4><c10><a href="../../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()</c4><c22><a href="../../libstd/str.rs.html#n66924">.to_owned</a></c22><c4>())</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;45</ln><a id="45">&nbsp;</a><a id="n[435448, 435450, 435449, 435451]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#43">args</a></c26><c13><a href="../../libstd/vec.rs.html#n57026">.extend</a></c13><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#44">paths</a></c26><c4>)</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;46</ln><a id="46">&nbsp;</a><a id="n[435517, 435567, 435533, 435491, 435498, 435544, 435523, 435538, 435499, 435520, 435548, 435487, 435497, 435547, 435503, 435507, 435493, 435484, 435541, 435532, 435536, 435494, 435539, 435502, 435508, 435504, 435545, 435546, 435551, 435525, 435516, 435529, 435500, 435515, 435528, 435531, 435485, 435513, 435564, 435486, 435512, 435514, 435542, 435550, 435540, 435505, 435521, 435526, 435506, 435518, 435522, 435537, 435534, 435530, 435527, 435510, 435549, 435501, 435524, 435490, 435509, 435488, 435535, 435489, 435511, 435543, 435519, 435492]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../libstd/fmt/rt.rs.html#n169505">"</a></c26><c3>{}</c3><c26><a href="../../libstd/fmt/rt.rs.html#n169505">&nbsp;</a></c26><c3>{}</c3><c26><a href="../../libstd/fmt/rt.rs.html#n169505">"</a></c26><c3>,</c3><c22><a href="#38_1_refs">&nbsp;</a></c22><c26><a href="../../libstd/fmt/mod.rs.html#n171474">ar</a></c26><c3>,</c3><c22><a href="#38_1_refs">&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#43">args</a></c26><c20><a href="#46_24_refs">.connect</a></c20><c4>(</c4><c12><a href="../../librustc/back/archive.rs.html#46">"&nbsp;"</a></c12><c4>))</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;47</ln><a id="47">&nbsp;</a><a id="n[435683, 435684, 435573]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c13><a href="#38_1_refs">&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#39">cwd</a></c26><c13><a href="#38_1_refs">&nbsp;</a></c13><c3>{</c3><c13><a href="#38_1_refs">
</a></c13><br/><ln>&nbsp;&nbsp;48</ln><a id="48">&nbsp;</a><a id="n[435622, 435656, 435610, 435640, 435654, 435629, 435623, 435672, 435635, 435608, 435620, 435648, 435613, 435637, 435679, 435631, 435641, 435575, 435642, 435624, 435618, 435653, 435636, 435646, 435611, 435638, 435614, 435669, 435612, 435647, 435574, 435619, 435630, 435621, 435644, 435633, 435651, 435628, 435634, 435649, 435643, 435652, 435627, 435609, 435645, 435655, 435617, 435625, 435626, 435650, 435639, 435632, 435678]">&nbsp;</a><c13><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#48_13_refs">p</a></c20><c4>)</c4><c13><a href="#38_1_refs">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="#38_1_refs">&nbsp;</a></c13><c3>{</c3><c22><a href="#38_1_refs">&nbsp;debug!</a></c22><c4>(</c4><c1><a href="../../libstd/fmt/rt.rs.html#n169463">"inside&nbsp;</a></c1><c3>{}</c3><c1><a href="../../libstd/fmt/rt.rs.html#n169463">"</a></c1><c3>,</c3><c22><a href="#38_1_refs">&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#48">p</a></c26><c26><a href="../../libstd/fmt/mod.rs.html#n171474">.display</a></c26><c4>())</c4><c3>;</c3><c22><a href="#38_1_refs">&nbsp;</a></c22><c3>}</c3><c13><a href="#38_1_refs">
</a></c13><br/><ln>&nbsp;&nbsp;49</ln><a id="49">&nbsp;</a><a id="n[435681, 435680, 435682]">&nbsp;</a><c13><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="../../libstd/option.rs.html#n104337">None</a></c20><c13><a href="#38_1_refs">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="#38_1_refs">&nbsp;</a></c13><c3>{}</c3><c13><a href="#38_1_refs">
</a></c13><br/><ln>&nbsp;&nbsp;50</ln><a id="50">&nbsp;</a><a id="n[]">&nbsp;</a><c13><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c3>}</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;51</ln><a id="51">&nbsp;</a><a id="n[436039, 435704, 435705, 435686]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#38_1_refs">&nbsp;</a></c21><c26><a href="../../libstd/io/process.rs.html#n146180">Process::configure</a></c26><c4>(</c4><c1><a href="../../libstd/io/process.rs.html#n145582">ProcessConfig&nbsp;</a></c1><c3>{</c3><c1><a href="../../libstd/io/process.rs.html#n145582">
</a></c1><br/><ln>&nbsp;&nbsp;52</ln><a id="52">&nbsp;</a><a id="n[435687, 435688]">&nbsp;</a><c1><a href="../../libstd/io/process.rs.html#n145582">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;program:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#41">ar</a></c26><c10><a href="../../libstd/str.rs.html#n64934">.as_slice</a></c10><c4>()</c4><c3>,</c3><c1><a href="../../libstd/io/process.rs.html#n145582">
</a></c1><br/><ln>&nbsp;&nbsp;53</ln><a id="53">&nbsp;</a><a id="n[435690, 435689]">&nbsp;</a><c1><a href="../../libstd/io/process.rs.html#n145582">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#43">args</a></c26><c10><a href="../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c1><a href="../../libstd/io/process.rs.html#n145582">
</a></c1><br/><ln>&nbsp;&nbsp;54</ln><a id="54">&nbsp;</a><a id="n[435700, 435696, 435691, 435697, 435694, 435698, 435693, 435695, 435701, 435699]">&nbsp;</a><c1><a href="../../libstd/io/process.rs.html#n145582">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cwd:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#39">cwd</a></c26><c10><a href="../../libstd/option.rs.html#n105129">.map</a></c10><c4>(</c4><c1><a href="../../libstd/io/process.rs.html#n145582">|</a></c1><c20><a href="#54_22_refs">a</a></c20><c8><a href="../../libstd/io/process.rs.html#n145582">|</a></c8><c1><a href="../../libstd/io/process.rs.html#n145582">&nbsp;</a></c1><c8><a href="../../libstd/io/process.rs.html#n145582">&amp;</a></c8><c5><a href="../../libstd/io/process.rs.html#n145582">*</a></c5><c26><a href="../../librustc/back/archive.rs.html#54">a</a></c26><c4>)</c4><c3>,</c3><c1><a href="../../libstd/io/process.rs.html#n145582">
</a></c1><br/><ln>&nbsp;&nbsp;55</ln><a id="55">&nbsp;</a><a id="n[435702, 435703]">&nbsp;</a><c1><a href="../../libstd/io/process.rs.html#n145582">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..&nbsp;</a></c1><c26><a href="../../libstd/io/process.rs.html#n146061">ProcessConfig::new</a></c26><c4>()</c4><c1><a href="../../libstd/io/process.rs.html#n145582">
</a></c1><br/><ln>&nbsp;&nbsp;56</ln><a id="56">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../../libstd/io/process.rs.html#n145582">&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c4>)</c4><c21><a href="#38_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#38_1_refs">
</a></c21><br/><ln>&nbsp;&nbsp;57</ln><a id="57">&nbsp;</a><a id="n[435706, 435947, 435707, 435945]">&nbsp;</a><c21><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../libstd/result.rs.html#n105797">Ok</a></c20><c4>(</c4><c20><a href="#57_11_refs">mut&nbsp;prog</a></c20><c4>)</c4><c21><a href="#38_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#38_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;58</ln><a id="58">&nbsp;</a><a id="n[435708, 435711, 435712, 435710, 435709, 435713]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#38_1_refs">&nbsp;</a></c22><c20><a href="#58_16_refs">o</a></c20><c13><a href="#38_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#57">prog</a></c26><c10><a href="../../libstd/io/process.rs.html#n146350">.wait_with_output</a></c10><c4>()</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;59</ln><a id="59">&nbsp;</a><a id="n[435943, 435714, 435942, 435715, 435944, 435717, 435716]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="#38_1_refs">&nbsp;</a></c13><c5><a href="#38_1_refs">!</a></c5><c26><a href="../../librustc/back/archive.rs.html#58">o</a></c26><c24><a href="../../libstd/io/process.rs.html#n145644">.status</a></c24><c10><a href="../../libstd/io/process.rs.html#n146027">.success</a></c10><c4>()</c4><c13><a href="#38_1_refs">&nbsp;</a></c13><c3>{</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;60</ln><a id="60">&nbsp;</a><a id="n[435724, 435762, 435807, 435789, 435788, 435806, 435736, 435766, 435733, 435718, 435740, 435748, 435754, 435745, 435772, 435720, 435767, 435814, 435799, 435761, 435730, 435780, 435757, 435759, 435741, 435797, 435749, 435747, 435728, 435744, 435769, 435732, 435810, 435719, 435737, 435738, 435816, 435784, 435801, 435776, 435813, 435782, 435763, 435787, 435796, 435723, 435729, 435742, 435750, 435771, 435751, 435764, 435795, 435753, 435760, 435743, 435770, 435790, 435765, 435752, 435800, 435758, 435774, 435783, 435786, 435739, 435779, 435781, 435808, 435775, 435815, 435803, 435755, 435802, 435805, 435798, 435722, 435778, 435768, 435773, 435746, 435804, 435721, 435756, 435777, 435785]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#39">sess</a></c26><c10><a href="../../librustc/driver/session.rs.html#211">.err</a></c10><c4>(</c4><c21><a href="../../librustc/driver/session.rs.html#211">format!</a></c21><c4>(</c4><c27><a href="../../libstd/fmt/parse.rs.html#n166363">"</a></c27><c3>{}</c3><c27><a href="../../libstd/fmt/parse.rs.html#n166363">&nbsp;</a></c27><c3>{}</c3><c27><a href="../../libstd/fmt/parse.rs.html#n166363">&nbsp;failed&nbsp;with:&nbsp;</a></c27><c3>{}</c3><c27><a href="../../libstd/fmt/parse.rs.html#n166363">"</a></c27><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#211">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#60">ar</a></c26><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#211">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#43">args</a></c26><c27><a href="../../libstd/str.rs.html#n59333">.connect</a></c27><c4>(</c4><c12><a href="../../libstd/str.rs.html#n59333">"&nbsp;"</a></c12><c4>)</c4><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#211">
</a></c21><br/><ln>&nbsp;&nbsp;61</ln><a id="61">&nbsp;</a><a id="n[435727, 435731, 435791, 435792, 435725, 435726, 435794, 435793]">&nbsp;</a><c21><a href="../../librustc/driver/session.rs.html#211">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#58">o</a></c26><c26><a href="../../librustc/back/archive.rs.html#61">.status</a></c26><c4>))</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;62</ln><a id="62">&nbsp;</a><a id="n[435819, 435824, 435864, 435848, 435844, 435831, 435837, 435845, 435836, 435839, 435838, 435817, 435869, 435840, 435877, 435834, 435859, 435852, 435858, 435853, 435855, 435861, 435847, 435860, 435827, 435823, 435862, 435854, 435846, 435874, 435851, 435863, 435830, 435832, 435835, 435818, 435876, 435820, 435871, 435856, 435826, 435850, 435825, 435841, 435868, 435842, 435875, 435866, 435857, 435843, 435867, 435822, 435821, 435833, 435849, 435865]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#39">sess</a></c26><c10><a href="../../librustc/driver/session.rs.html#235">.note</a></c10><c4>(</c4><c21><a href="../../librustc/driver/session.rs.html#235">format!</a></c21><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#62">"stdout&nbsp;---\n</a></c26><c3>{}</c3><c26><a href="../../librustc/back/archive.rs.html#62">"</a></c26><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#235">&nbsp;</a></c21><c26><a href="../../libstd/str.rs.html#n58909">str::from_utf8</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#58">o</a></c26><c24><a href="../../libstd/io/process.rs.html#n145644">.output</a></c24><c4>)</c4><c10><a href="../../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()))</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;63</ln><a id="63">&nbsp;</a><a id="n[435895, 435919, 435888, 435900, 435924, 435887, 435905, 435920, 435913, 435902, 435937, 435926, 435911, 435914, 435915, 435891, 435923, 435910, 435885, 435936, 435897, 435916, 435912, 435882, 435886, 435932, 435930, 435896, 435925, 435893, 435906, 435907, 435921, 435935, 435927, 435903, 435883, 435928, 435938, 435892, 435879, 435904, 435929, 435918, 435908, 435922, 435878, 435898, 435881, 435894, 435899, 435884, 435917, 435901, 435909, 435880]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#39">sess</a></c26><c13><a href="../../librustc/driver/session.rs.html#235">.note</a></c13><c4>(</c4><c21><a href="../../librustc/driver/session.rs.html#235">format!</a></c21><c4>(</c4><c13><a href="../../libstd/fmt/rt.rs.html#n169453">"stderr&nbsp;---\n</a></c13><c3>{}</c3><c13><a href="../../libstd/fmt/rt.rs.html#n169453">"</a></c13><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#235">&nbsp;</a></c21><c26><a href="../../libstd/str.rs.html#n58909">str::from_utf8</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#58">o</a></c26><c24><a href="../../libstd/io/process.rs.html#n145644">.error</a></c24><c4>)</c4><c5><a href="../../libstd/option.rs.html#n105073">.unwrap</a></c5><c4>()))</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;64</ln><a id="64">&nbsp;</a><a id="n[435939, 435940, 435941]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#39">sess</a></c26><c13><a href="../../librustc/driver/session.rs.html#220">.abort_if_errors</a></c13><c4>()</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;65</ln><a id="65">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;66</ln><a id="66">&nbsp;</a><a id="n[435946]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#58">o</a></c26><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;67</ln><a id="67">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>},</c3><c21><a href="#38_1_refs">
</a></c21><br/><ln>&nbsp;&nbsp;68</ln><a id="68">&nbsp;</a><a id="n[436037, 435948, 435949, 436038]">&nbsp;</a><c21><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../libstd/result.rs.html#n105801">Err</a></c20><c4>(</c4><c20><a href="#68_12_refs">e</a></c20><c4>)</c4><c21><a href="#38_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#38_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;69</ln><a id="69">&nbsp;</a><a id="n[435993, 435991, 435999, 435957, 436026, 435972, 435980, 436027, 435992, 435974, 436013, 435989, 435984, 435983, 435990, 435976, 435986, 435953, 436012, 435997, 435958, 435951, 435995, 436003, 435975, 436004, 436019, 435954, 435966, 436000, 435952, 435981, 435987, 435982, 436006, 435969, 436001, 435959, 436009, 435950, 435963, 435956, 436005, 435970, 435998, 436007, 436025, 435964, 436016, 435994, 435973, 436010, 435985, 436008, 435977, 435996, 435978, 435979, 436018, 435965, 435967, 436015, 436017, 436024, 436002, 435988, 435968, 435955, 435962, 436014, 436021, 435971, 436011]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#39">sess</a></c26><c13><a href="../../librustc/driver/session.rs.html#211">.err</a></c13><c4>(</c4><c21><a href="../../librustc/driver/session.rs.html#211">format!</a></c21><c4>(</c4><c20><a href="#69_29_refs">"could&nbsp;not&nbsp;exec&nbsp;`</a></c20><c3>{}</c3><c20><a href="#69_29_refs">`:&nbsp;</a></c20><c3>{}</c3><c20><a href="#69_29_refs">"</a></c20><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#211">&nbsp;</a></c21><c26><a href="../../libstd/fmt/mod.rs.html#n171474">ar</a></c26><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#211">&nbsp;</a></c21><c26><a href="../../libstd/fmt/mod.rs.html#n171474">e</a></c26><c4>))</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;70</ln><a id="70">&nbsp;</a><a id="n[436030, 436028, 436029]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#39">sess</a></c26><c10><a href="../../librustc/driver/session.rs.html#220">.abort_if_errors</a></c10><c4>()</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;71</ln><a id="71">&nbsp;</a><a id="n[436032]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fail!</a></c22><c4>(</c4><c12><a href="#38_1_refs">"rustc::back::archive::run_ar</a></c12><c4>()</c4><c12><a href="#38_1_refs">&nbsp;should&nbsp;not&nbsp;reach&nbsp;this&nbsp;point"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;72</ln><a id="72">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#38_1_refs">
</a></c21><br/><ln>&nbsp;&nbsp;73</ln><a id="73">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#38_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#38_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;74</ln><a id="74">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;75</ln><a id="75">&nbsp;</a><a id="n[436040]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;76</ln><a id="76">&nbsp;</a><a id="n[436044]">&nbsp;</a><c33>impl</c33><c5>&lt;'a&gt;</c5><c33>&nbsp;</c33><c33><a href="../../librustc/back/archive.rs.html#29">Archive</a></c33><c5><a href="../../librustc/back/archive.rs.html#29">&lt;'a&gt;</a></c5><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;&nbsp;77</ln><a id="77">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Initializes&nbsp;a&nbsp;new&nbsp;static&nbsp;archive&nbsp;with&nbsp;the&nbsp;given&nbsp;object&nbsp;file
</c42><br/><ln>&nbsp;&nbsp;78</ln><a id="78">&nbsp;</a><a id="n[436050, 436058, 436045, 436052, 436051, 436057, 436056]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#78_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#78_4_refs">&nbsp;create</a></c30><c5><a href="#78_4_refs">&lt;'b&gt;</a></c5><c4>(</c4><c20><a href="#78_22_refs">sess</a></c20><c18><a href="#78_4_refs">:&nbsp;</a></c18><c8><a href="#78_4_refs">&amp;'a&nbsp;</a></c8><c8><a href="../../librustc/driver/session.rs.html#175">Session</a></c8><c3>,</c3><c18><a href="#78_4_refs">&nbsp;</a></c18><c20><a href="#78_41_refs">dst</a></c20><c18><a href="#78_4_refs">:&nbsp;</a></c18><c8><a href="#78_4_refs">&amp;'b&nbsp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c3>,</c3><c18><a href="#78_4_refs">
</a></c18><br/><ln>&nbsp;&nbsp;79</ln><a id="79">&nbsp;</a><a id="n[436064, 436077, 436063, 436067, 436062]">&nbsp;</a><c18><a href="#78_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#79_22_refs">initial_object</a></c20><c18><a href="#78_4_refs">:&nbsp;</a></c18><c8><a href="#78_4_refs">&amp;'b&nbsp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c4>)</c4><c18><a href="#78_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#78_4_refs">&nbsp;</a></c18><c8><a href="../../librustc/back/archive.rs.html#29">Archive&lt;'a&gt;</a></c8><c18><a href="#78_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#78_4_refs">
</a></c22><br/><ln>&nbsp;&nbsp;80</ln><a id="80">&nbsp;</a><a id="n[436074, 436069, 436070, 436071, 436068, 436076, 436075, 436073, 436072]">&nbsp;</a><c22><a href="#78_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#78">sess</a></c26><c3>,</c3><c27><a href="#78_4_refs">&nbsp;</a></c27><c12><a href="#78_4_refs">"crus"</a></c12><c3>,</c3><c27><a href="#78_4_refs">&nbsp;</a></c27><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c27><a href="#78_4_refs">&nbsp;</a></c27><c3>[</c3><c26><a href="../../librustc/back/archive.rs.html#78">dst</a></c26><c3>,</c3><c1><a href="#78_4_refs">&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#79">initial_object</a></c26><c3>]</c3><c4>)</c4><c3>;</c3><c22><a href="#78_4_refs">
</a></c22><br/><ln>&nbsp;&nbsp;81</ln><a id="81">&nbsp;</a><a id="n[436080, 436079, 436081, 436078]">&nbsp;</a><c22><a href="#78_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c1><a href="../../librustc/back/archive.rs.html#29">Archive&nbsp;</a></c1><c3>{</c3><c1><a href="../../librustc/back/archive.rs.html#29">&nbsp;sess:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#78">sess</a></c26><c3>,</c3><c1><a href="../../librustc/back/archive.rs.html#29">&nbsp;dst:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#78">dst</a></c26><c10><a href="../../libstd/path/posix.rs.html#n154254">.clone</a></c10><c4>()</c4><c1><a href="../../librustc/back/archive.rs.html#29">&nbsp;</a></c1><c3>}</c3><c22><a href="#78_4_refs">
</a></c22><br/><ln>&nbsp;&nbsp;82</ln><a id="82">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#78_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;&nbsp;83</ln><a id="83">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;&nbsp;84</ln><a id="84">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Opens&nbsp;an&nbsp;existing&nbsp;static&nbsp;archive
</c42><br/><ln>&nbsp;&nbsp;85</ln><a id="85">&nbsp;</a><a id="n[436087, 436088, 436082, 436086, 436095, 436172, 436091, 436092]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#85_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#85_4_refs">&nbsp;open</a></c30><c4>(</c4><c20><a href="#85_16_refs">sess</a></c20><c18><a href="#85_4_refs">:&nbsp;</a></c18><c8><a href="#85_4_refs">&amp;'a&nbsp;</a></c8><c8><a href="../../librustc/driver/session.rs.html#175">Session</a></c8><c3>,</c3><c18><a href="#85_4_refs">&nbsp;</a></c18><c20><a href="#85_35_refs">dst</a></c20><c18><a href="#85_4_refs">:&nbsp;</a></c18><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c4>)</c4><c18><a href="#85_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#85_4_refs">&nbsp;</a></c18><c8><a href="../../librustc/back/archive.rs.html#29">Archive&lt;'a&gt;</a></c8><c18><a href="#85_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#85_4_refs">
</a></c22><br/><ln>&nbsp;&nbsp;86</ln><a id="86">&nbsp;</a><a id="n[436096, 436097]">&nbsp;</a><c22><a href="#85_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert!</a></c22><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#85">dst</a></c26><c10><a href="../../libstd/io/fs.rs.html#n141100">.exists</a></c10><c4>())</c4><c3>;</c3><c22><a href="#85_4_refs">
</a></c22><br/><ln>&nbsp;&nbsp;87</ln><a id="87">&nbsp;</a><a id="n[436174, 436175, 436173]">&nbsp;</a><c22><a href="#85_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c1><a href="../../librustc/back/archive.rs.html#29">Archive&nbsp;</a></c1><c3>{</c3><c1><a href="../../librustc/back/archive.rs.html#29">&nbsp;sess:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#85">sess</a></c26><c3>,</c3><c1><a href="../../librustc/back/archive.rs.html#29">&nbsp;dst:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#85">dst</a></c26><c1><a href="../../librustc/back/archive.rs.html#29">&nbsp;</a></c1><c3>}</c3><c22><a href="#85_4_refs">
</a></c22><br/><ln>&nbsp;&nbsp;88</ln><a id="88">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#85_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;&nbsp;89</ln><a id="89">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;&nbsp;90</ln><a id="90">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Read&nbsp;a&nbsp;file&nbsp;in&nbsp;the&nbsp;archive
</c42><br/><ln>&nbsp;&nbsp;91</ln><a id="91">&nbsp;</a><a id="n[436189, 436183, 436182, 436184, 436176, 436179, 436188, 436186]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;read</c30><c4>(</c4><c20><a href="#91_16_refs">&amp;self</a></c20><c3>,</c3><c18>&nbsp;</c18><c20><a href="#91_23_refs">file</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c4>)</c4><c18>&nbsp;</c18><c4>-&gt;</c4><c18>&nbsp;</c18><c8><a href="../../libstd/vec.rs.html#n56401">Vec&lt;u8&gt;</a></c8><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;&nbsp;92</ln><a id="92">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;Apparently&nbsp;if&nbsp;"ar&nbsp;p"&nbsp;is&nbsp;used&nbsp;on&nbsp;windows,&nbsp;it&nbsp;generates&nbsp;a&nbsp;corrupt&nbsp;file
</c40><br/><ln>&nbsp;&nbsp;93</ln><a id="93">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;which&nbsp;has&nbsp;bad&nbsp;headers&nbsp;and&nbsp;LLVM&nbsp;will&nbsp;immediately&nbsp;choke&nbsp;on&nbsp;it
</c40><br/><ln>&nbsp;&nbsp;94</ln><a id="94">&nbsp;</a><a id="n[436243, 436264, 436190]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c12>cfg!</c12><c4>(</c4><c12>windows</c12><c4>)</c4><c12>&nbsp;</c12><c3>{</c3><c22>
</c22><br/><ln>&nbsp;&nbsp;95</ln><a id="95">&nbsp;</a><a id="n[436198, 436194, 436197, 436191, 436195, 436196, 436192, 436193]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#95_16_refs">loc</a></c20><c16>&nbsp;=&nbsp;</c16><c26><a href="../../libstd/io/tempfile.rs.html#n139092">TempDir::new</a></c26><c4>(</c4><c12><a href="../../libstd/option.rs.html#n105073">"rsar"</a></c12><c4>)</c4><c10><a href="../../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;&nbsp;96</ln><a id="96">&nbsp;</a><a id="n[436199, 436204, 436203, 436206, 436200, 436207, 436202, 436205, 436201]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#96_16_refs">archive</a></c20><c13>&nbsp;=&nbsp;</c13><c26><a href="../../libstd/os.rs.html#n134062">os::make_absolute</a></c26><c4>(</c4><c5>&amp;</c5><c26><a href="../../librustc/back/archive.rs.html#91">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#32">.dst</a></c24><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;&nbsp;97</ln><a id="97">&nbsp;</a><a id="n[436210, 436212, 436215, 436208, 436214, 436224, 436223, 436209, 436217, 436222, 436216, 436211, 436213]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#91">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c27>&nbsp;</c27><c12>"x"</c12><c3>,</c3><c27>&nbsp;</c27><c26><a href="../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#95">loc</a></c26><c10><a href="../../libstd/io/tempfile.rs.html#n139124">.path</a></c10><c4>())</c4><c3>,</c3><c27>&nbsp;</c27><c3>[</c3><c5>&amp;</c5><c26><a href="../../librustc/back/archive.rs.html#96">archive</a></c26><c3>,</c3><c1>
</c1><br/><ln>&nbsp;&nbsp;98</ln><a id="98">&nbsp;</a><a id="n[436221, 436219, 436220, 436218]">&nbsp;</a><c1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c1><c5>&amp;</c5><c26><a href="../../libstd/path/posix.rs.html#n155452">Path::new</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#91">file</a></c26><c4>)</c4><c3>]</c3><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;&nbsp;99</ln><a id="99">&nbsp;</a><a id="n[436242, 436227, 436229, 436225, 436230]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#99_16_refs">result</a></c20><c16>:&nbsp;</c16><c8><a href="../../libstd/vec.rs.html#n56401">Vec&lt;u8&gt;</a></c8><c16>&nbsp;=
</c16><br/><ln>&nbsp;100</ln><a id="100">&nbsp;</a><a id="n[436238, 436234, 436236, 436240, 436239, 436231, 436232, 436235, 436233, 436241, 436237]">&nbsp;</a><c16>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c16><c26><a href="../../libstd/io/fs.rs.html#n140003">fs::File::open</a></c26><c4>(</c4><c5><a href="../../librustc/middle/typeck/check/mod.rs.html#4250">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#95">loc</a></c26><c10><a href="../../libstd/io/tempfile.rs.html#n139124">.path</a></c10><c4>()</c4><c10><a href="../../librustc/middle/typeck/astconv.rs.html#142">.join</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#91">file</a></c26><c4>))</c4><c10><a href="../../librustc/middle/typeck/check/mod.rs.html#4250">.read_to_end</a></c10><c4>()</c4><c10><a href="../../libstd/result.rs.html#n106923">
</a></c10><br/><ln>&nbsp;101</ln><a id="101">&nbsp;</a><a id="n[]">&nbsp;</a><c10><a href="../../libstd/result.rs.html#n106923">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.unwrap</a></c10><c4>()</c4><c10><a href="../../libstd/slice.rs.html#n50600">
</a></c10><br/><ln>&nbsp;102</ln><a id="102">&nbsp;</a><a id="n[]">&nbsp;</a><c10><a href="../../libstd/slice.rs.html#n50600">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.move_iter</a></c10><c4>()</c4><c10><a href="../../librustc/middle/typeck/check/mod.rs.html#4011">
</a></c10><br/><ln>&nbsp;103</ln><a id="103">&nbsp;</a><a id="n[]">&nbsp;</a><c10><a href="../../librustc/middle/typeck/check/mod.rs.html#4011">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect</a></c10><c4>()</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;104</ln><a id="104">&nbsp;</a><a id="n[436244]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../../librustc/back/archive.rs.html#99">result</a></c26><c22>
</c22><br/><ln>&nbsp;105</ln><a id="105">&nbsp;</a><a id="n[436245, 436263]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c21>&nbsp;else&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;106</ln><a id="106">&nbsp;</a><a id="n[436260, 436262, 436246, 436247, 436259, 436248, 436261]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#91">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c27><a href="../../libstd/io/process.rs.html#n145644">
</a></c27><br/><ln>&nbsp;107</ln><a id="107">&nbsp;</a><a id="n[436249]">&nbsp;</a><c27><a href="../../libstd/io/process.rs.html#n145644">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c12><a href="../../libstd/io/process.rs.html#n145644">"p"</a></c12><c3>,</c3><c27><a href="../../libstd/io/process.rs.html#n145644">
</a></c27><br/><ln>&nbsp;108</ln><a id="108">&nbsp;</a><a id="n[436250]">&nbsp;</a><c27><a href="../../libstd/io/process.rs.html#n145644">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c27><a href="../../libstd/io/process.rs.html#n145644">
</a></c27><br/><ln>&nbsp;109</ln><a id="109">&nbsp;</a><a id="n[436252, 436254, 436251, 436255, 436257, 436253, 436256, 436258]">&nbsp;</a><c27><a href="../../libstd/io/process.rs.html#n145644">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c3>[</c3><c5><a href="../../libstd/io/process.rs.html#n145644">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#91">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#32">.dst</a></c24><c3>,</c3><c1><a href="../../libstd/io/process.rs.html#n145644">&nbsp;</a></c1><c5><a href="../../libstd/io/process.rs.html#n145644">&amp;</a></c5><c26><a href="../../libstd/path/posix.rs.html#n155452">Path::new</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#91">file</a></c26><c4>)</c4><c3>]</c3><c4>)</c4><c24><a href="../../libstd/io/process.rs.html#n145644">.output</a></c24><c10><a href="../../libstd/slice.rs.html#n50600">.move_iter</a></c10><c4>()</c4><c10><a href="../../librustc/middle/typeck/check/mod.rs.html#4011">.collect</a></c10><c4>()</c4><c22>
</c22><br/><ln>&nbsp;110</ln><a id="110">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;111</ln><a id="111">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;112</ln><a id="112">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;113</ln><a id="113">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Adds&nbsp;all&nbsp;of&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;native&nbsp;library&nbsp;to&nbsp;this&nbsp;archive.&nbsp;This&nbsp;will
</c42><br/><ln>&nbsp;114</ln><a id="114">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;search&nbsp;in&nbsp;the&nbsp;relevant&nbsp;locations&nbsp;for&nbsp;a&nbsp;library&nbsp;named&nbsp;`name`.
</c42><br/><ln>&nbsp;115</ln><a id="115">&nbsp;</a><a id="n[436268, 436271, 436265, 436274, 436276, 436272, 436273, 436284]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#115_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#115_4_refs">&nbsp;add_native_library</a></c30><c4>(</c4><c20><a href="#115_30_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18><a href="#115_4_refs">&nbsp;</a></c18><c20><a href="#115_41_refs">name</a></c20><c18><a href="#115_4_refs">:&nbsp;</a></c18><c8><a href="#115_4_refs">&amp;str</a></c8><c4>)</c4><c18><a href="#115_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#115_4_refs">&nbsp;</a></c18><c8><a href="../../libstd/io/mod.rs.html#n148915">io::IoResult&lt;</a></c8><c4>()</c4><c8><a href="../../libstd/io/mod.rs.html#n148915">&gt;</a></c8><c18><a href="#115_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#115_4_refs">
</a></c22><br/><ln>&nbsp;116</ln><a id="116">&nbsp;</a><a id="n[436277, 436279, 436281, 436282, 436283, 436280, 436278]">&nbsp;</a><c22><a href="#115_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#115_4_refs">&nbsp;</a></c22><c20><a href="#116_12_refs">location</a></c20><c13><a href="#115_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#115">self</a></c26><c10><a href="../../librustc/back/archive.rs.html#198">.find_library</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#115">name</a></c26><c4>)</c4><c3>;</c3><c22><a href="#115_4_refs">
</a></c22><br/><ln>&nbsp;117</ln><a id="117">&nbsp;</a><a id="n[436290, 436287, 436286, 436285, 436288, 436289]">&nbsp;</a><c22><a href="#115_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#115">self</a></c26><c10><a href="../../librustc/back/archive.rs.html#161">.add_archive</a></c10><c4>(</c4><c5><a href="../../librustc/back/archive.rs.html#161">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#116">location</a></c26><c3>,</c3><c10><a href="../../librustc/back/archive.rs.html#161">&nbsp;</a></c10><c26><a href="../../librustc/back/archive.rs.html#115">name</a></c26><c3>,</c3><c10><a href="../../librustc/back/archive.rs.html#161">&nbsp;</a></c10><c3>[]</c3><c4>)</c4><c22><a href="#115_4_refs">
</a></c22><br/><ln>&nbsp;118</ln><a id="118">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#115_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;119</ln><a id="119">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;120</ln><a id="120">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Adds&nbsp;all&nbsp;of&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;rlib&nbsp;at&nbsp;the&nbsp;specified&nbsp;path&nbsp;to&nbsp;this
</c42><br/><ln>&nbsp;121</ln><a id="121">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;archive.
</c42><br/><ln>&nbsp;122</ln><a id="122">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///
</c42><br/><ln>&nbsp;123</ln><a id="123">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;This&nbsp;ignores&nbsp;adding&nbsp;the&nbsp;bytecode&nbsp;from&nbsp;the&nbsp;rlib,&nbsp;and&nbsp;if&nbsp;LTO&nbsp;is&nbsp;enabled
</c42><br/><ln>&nbsp;124</ln><a id="124">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;then&nbsp;the&nbsp;object&nbsp;file&nbsp;also&nbsp;isn't&nbsp;added.
</c42><br/><ln>&nbsp;125</ln><a id="125">&nbsp;</a><a id="n[436299, 436294, 436298, 436302, 436297, 436291, 436304, 436303]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#125_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#125_4_refs">&nbsp;add_rlib</a></c30><c4>(</c4><c20><a href="#125_20_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18><a href="#125_4_refs">&nbsp;</a></c18><c20><a href="#125_31_refs">rlib</a></c20><c18><a href="#125_4_refs">:&nbsp;</a></c18><c8><a href="#125_4_refs">&amp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c3>,</c3><c18><a href="#125_4_refs">&nbsp;</a></c18><c20><a href="#125_44_refs">name</a></c20><c18><a href="#125_4_refs">:&nbsp;</a></c18><c8><a href="#125_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#125_4_refs">
</a></c18><br/><ln>&nbsp;126</ln><a id="126">&nbsp;</a><a id="n[436311, 436459, 436308, 436307, 436309]">&nbsp;</a><c18><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#126_20_refs">lto</a></c20><c18><a href="#125_4_refs">:&nbsp;</a></c18><c8><a href="#125_4_refs">bool</a></c8><c4>)</c4><c18><a href="#125_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#125_4_refs">&nbsp;</a></c18><c8><a href="../../libstd/io/mod.rs.html#n148915">io::IoResult&lt;</a></c8><c4>()</c4><c8><a href="../../libstd/io/mod.rs.html#n148915">&gt;</a></c8><c18><a href="#125_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;127</ln><a id="127">&nbsp;</a><a id="n[436334, 436347, 436336, 436348, 436335, 436340, 436326, 436343, 436337, 436345, 436333, 436353, 436357, 436328, 436358, 436359, 436330, 436319, 436339, 436324, 436360, 436344, 436367, 436364, 436338, 436323, 436332, 436369, 436314, 436351, 436327, 436315, 436341, 436352, 436349, 436361, 436316, 436325, 436317, 436368, 436312, 436356, 436313, 436329, 436354, 436350, 436362, 436346, 436342, 436331, 436318, 436355, 436320]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#125_4_refs">&nbsp;</a></c22><c20><a href="#127_12_refs">object</a></c20><c16><a href="#125_4_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#125_4_refs">format!</a></c21><c4>(</c4><c1><a href="#127_29_refs">"</a></c1><c3>{}</c3><c1><a href="#127_29_refs">.o"</a></c1><c3>,</c3><c21><a href="#125_4_refs">&nbsp;</a></c21><c20><a href="#127_37_refs">name</a></c20><c4>)</c4><c3>;</c3><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;128</ln><a id="128">&nbsp;</a><a id="n[436402, 436412, 436384, 436394, 436386, 436378, 436420, 436395, 436411, 436375, 436399, 436413, 436372, 436404, 436427, 436389, 436392, 436415, 436417, 436407, 436410, 436373, 436403, 436385, 436416, 436398, 436409, 436419, 436381, 436391, 436426, 436371, 436377, 436387, 436374, 436376, 436382, 436383, 436397, 436370, 436405, 436393, 436401, 436406, 436418, 436400, 436414, 436408, 436425, 436422, 436390, 436396, 436388]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#125_4_refs">&nbsp;</a></c22><c20><a href="#128_12_refs">bytecode</a></c20><c16><a href="#125_4_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#125_4_refs">format!</a></c21><c4>(</c4><c12><a href="../../libstd/fmt/rt.rs.html#n169505">"</a></c12><c3>{}</c3><c12><a href="../../libstd/fmt/rt.rs.html#n169505">.bc"</a></c12><c3>,</c3><c21><a href="#125_4_refs">&nbsp;</a></c21><c27><a href="../../librustc/back/archive.rs.html#128">name</a></c27><c4>)</c4><c3>;</c3><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;129</ln><a id="129">&nbsp;</a><a id="n[436430, 436448, 436438, 436429, 436449, 436428, 436443, 436442]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#125_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#129_12_refs">&nbsp;ignore</a></c20><c16><a href="#125_4_refs">&nbsp;=&nbsp;</a></c16><c22><a href="#125_4_refs">vec!</a></c22><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#27">METADATA_FILENAME</a></c26><c3>,</c3><c22><a href="#125_4_refs">&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#128">bytecode</a></c26><c10><a href="../../libstd/str.rs.html#n64934">.as_slice</a></c10><c4>())</c4><c3>;</c3><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;130</ln><a id="130">&nbsp;</a><a id="n[436450, 436456, 436457, 436458]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="#125_4_refs">&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#126">lto</a></c26><c13><a href="#125_4_refs">&nbsp;</a></c13><c3>{</c3><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;131</ln><a id="131">&nbsp;</a><a id="n[436453, 436451, 436454, 436452, 436455]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#129">ignore</a></c26><c13><a href="../../libstd/vec.rs.html#n57406">.push</a></c13><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#127">object</a></c26><c10><a href="../../libstd/str.rs.html#n64934">.as_slice</a></c10><c4>())</c4><c3>;</c3><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;132</ln><a id="132">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;133</ln><a id="133">&nbsp;</a><a id="n[436464, 436461, 436460, 436463, 436462, 436465]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#125">self</a></c26><c10><a href="../../librustc/back/archive.rs.html#161">.add_archive</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#125">rlib</a></c26><c3>,</c3><c10><a href="../../librustc/back/archive.rs.html#161">&nbsp;</a></c10><c26><a href="../../librustc/back/archive.rs.html#125">name</a></c26><c3>,</c3><c10><a href="../../librustc/back/archive.rs.html#161">&nbsp;</a></c10><c26><a href="../../librustc/back/archive.rs.html#129">ignore</a></c26><c10><a href="../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>())</c4><c22><a href="#125_4_refs">
</a></c22><br/><ln>&nbsp;134</ln><a id="134">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#125_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;135</ln><a id="135">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;136</ln><a id="136">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Adds&nbsp;an&nbsp;arbitrary&nbsp;file&nbsp;to&nbsp;this&nbsp;archive
</c42><br/><ln>&nbsp;137</ln><a id="137">&nbsp;</a><a id="n[436473, 436477, 436469, 436466, 436479, 436472, 436478, 436503, 436474]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#137_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#137_4_refs">&nbsp;add_file</a></c30><c4>(</c4><c20><a href="#137_20_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18><a href="#137_4_refs">&nbsp;</a></c18><c20><a href="#137_31_refs">file</a></c20><c18><a href="#137_4_refs">:&nbsp;</a></c18><c8><a href="#137_4_refs">&amp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c3>,</c3><c18><a href="#137_4_refs">&nbsp;</a></c18><c20><a href="#137_44_refs">has_symbols</a></c20><c18><a href="#137_4_refs">:&nbsp;</a></c18><c8><a href="#137_4_refs">bool</a></c8><c4>)</c4><c18><a href="#137_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#137_4_refs">
</a></c22><br/><ln>&nbsp;138</ln><a id="138">&nbsp;</a><a id="n[436489, 436482, 436484, 436485, 436488, 436481, 436487, 436490, 436480, 436483, 436486]">&nbsp;</a><c22><a href="#137_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#137_4_refs">&nbsp;</a></c22><c20><a href="#138_12_refs">cmd</a></c20><c16><a href="#137_4_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#137_4_refs">if&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#137">has_symbols</a></c26><c21><a href="#137_4_refs">&nbsp;</a></c21><c3>{</c3><c12><a href="#137_4_refs">"r"</a></c12><c3>}</c3><c21><a href="#137_4_refs">&nbsp;else&nbsp;</a></c21><c3>{</c3><c12><a href="#137_4_refs">"rS"</a></c12><c3>};</c3><c22><a href="#137_4_refs">
</a></c22><br/><ln>&nbsp;139</ln><a id="139">&nbsp;</a><a id="n[436491, 436498, 436502, 436499, 436500, 436495, 436493, 436497, 436496, 436501, 436494, 436492]">&nbsp;</a><c22><a href="#137_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#137">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c27><a href="#137_4_refs">&nbsp;</a></c27><c26><a href="../../librustc/back/archive.rs.html#138">cmd</a></c26><c3>,</c3><c27><a href="#137_4_refs">&nbsp;</a></c27><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c27><a href="#137_4_refs">&nbsp;</a></c27><c3>[</c3><c5><a href="#137_4_refs">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#137">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#32">.dst</a></c24><c3>,</c3><c1><a href="#137_4_refs">&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#137">file</a></c26><c3>]</c3><c4>)</c4><c3>;</c3><c22><a href="#137_4_refs">
</a></c22><br/><ln>&nbsp;140</ln><a id="140">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#137_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;141</ln><a id="141">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;142</ln><a id="142">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Removes&nbsp;a&nbsp;file&nbsp;from&nbsp;this&nbsp;archive
</c42><br/><ln>&nbsp;143</ln><a id="143">&nbsp;</a><a id="n[436507, 436510, 436511, 436512, 436504, 436529, 436513]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#143_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#143_4_refs">&nbsp;remove_file</a></c30><c4>(</c4><c20><a href="#143_23_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18><a href="#143_4_refs">&nbsp;</a></c18><c20><a href="#143_34_refs">file</a></c20><c18><a href="#143_4_refs">:&nbsp;</a></c18><c8><a href="#143_4_refs">&amp;str</a></c8><c4>)</c4><c18><a href="#143_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#143_4_refs">
</a></c22><br/><ln>&nbsp;144</ln><a id="144">&nbsp;</a><a id="n[436522, 436525, 436527, 436518, 436514, 436517, 436521, 436519, 436516, 436526, 436520, 436523, 436515, 436524, 436528]">&nbsp;</a><c22><a href="#143_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#143">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c13><a href="#143_4_refs">&nbsp;</a></c13><c12><a href="#143_4_refs">"d"</a></c12><c3>,</c3><c13><a href="#143_4_refs">&nbsp;</a></c13><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c13><a href="#143_4_refs">&nbsp;</a></c13><c3>[</c3><c5><a href="#143_4_refs">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#143">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#32">.dst</a></c24><c3>,</c3><c1><a href="#143_4_refs">&nbsp;</a></c1><c5><a href="#143_4_refs">&amp;</a></c5><c26><a href="../../libstd/path/posix.rs.html#n155452">Path::new</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#143">file</a></c26><c4>)</c4><c3>]</c3><c4>)</c4><c3>;</c3><c22><a href="#143_4_refs">
</a></c22><br/><ln>&nbsp;145</ln><a id="145">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#143_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;146</ln><a id="146">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;147</ln><a id="147">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Updates&nbsp;all&nbsp;symbols&nbsp;in&nbsp;the&nbsp;archive&nbsp;(runs&nbsp;'ar&nbsp;s'&nbsp;over&nbsp;it)
</c42><br/><ln>&nbsp;148</ln><a id="148">&nbsp;</a><a id="n[436546, 436534, 436530, 436533]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#148_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#148_4_refs">&nbsp;update_symbols</a></c30><c4>(</c4><c20><a href="#148_26_refs">&amp;mut&nbsp;self</a></c20><c4>)</c4><c18><a href="#148_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#148_4_refs">
</a></c22><br/><ln>&nbsp;149</ln><a id="149">&nbsp;</a><a id="n[436544, 436541, 436537, 436535, 436540, 436543, 436536, 436545, 436539, 436542, 436538]">&nbsp;</a><c22><a href="#148_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#148">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c13><a href="#148_4_refs">&nbsp;</a></c13><c12><a href="#148_4_refs">"s"</a></c12><c3>,</c3><c13><a href="#148_4_refs">&nbsp;</a></c13><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c13><a href="#148_4_refs">&nbsp;</a></c13><c3>[</c3><c5><a href="#148_4_refs">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#148">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#32">.dst</a></c24><c3>]</c3><c4>)</c4><c3>;</c3><c22><a href="#148_4_refs">
</a></c22><br/><ln>&nbsp;150</ln><a id="150">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#148_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;151</ln><a id="151">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;152</ln><a id="152">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Lists&nbsp;all&nbsp;files&nbsp;in&nbsp;an&nbsp;archive
</c42><br/><ln>&nbsp;153</ln><a id="153">&nbsp;</a><a id="n[436555, 436550, 436579, 436553, 436547, 436552]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#153_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#153_4_refs">&nbsp;files</a></c30><c4>(</c4><c20><a href="#153_17_refs">&amp;self</a></c20><c4>)</c4><c18><a href="#153_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#153_4_refs">&nbsp;</a></c18><c8><a href="../../libstd/vec.rs.html#n56401">Vec&lt;~str&gt;</a></c8><c18><a href="#153_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#153_4_refs">
</a></c22><br/><ln>&nbsp;154</ln><a id="154">&nbsp;</a><a id="n[436564, 436562, 436569, 436561, 436556, 436565, 436563, 436559, 436567, 436560, 436557, 436558, 436566, 436568]">&nbsp;</a><c22><a href="#153_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#153_4_refs">&nbsp;</a></c22><c20><a href="#154_12_refs">output</a></c20><c16><a href="#153_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#153">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c27><a href="#153_4_refs">&nbsp;</a></c27><c12><a href="#153_4_refs">"t"</a></c12><c3>,</c3><c27><a href="#153_4_refs">&nbsp;</a></c27><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c27><a href="#153_4_refs">&nbsp;</a></c27><c3>[</c3><c5><a href="#153_4_refs">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#153">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#32">.dst</a></c24><c3>]</c3><c4>)</c4><c3>;</c3><c22><a href="#153_4_refs">
</a></c22><br/><ln>&nbsp;155</ln><a id="155">&nbsp;</a><a id="n[436570, 436571, 436574, 436573, 436572, 436575, 436577, 436576, 436578]">&nbsp;</a><c22><a href="#153_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#153_4_refs">&nbsp;</a></c22><c20><a href="#155_12_refs">output</a></c20><c13><a href="#153_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../libstd/str.rs.html#n58909">str::from_utf8</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#154">output</a></c26><c24><a href="../../libstd/io/process.rs.html#n145644">.output</a></c24><c4>)</c4><c10><a href="../../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()</c4><c3>;</c3><c22><a href="#153_4_refs">
</a></c22><br/><ln>&nbsp;156</ln><a id="156">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#153_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;use&nbsp;lines_any&nbsp;because&nbsp;windows&nbsp;delimits&nbsp;output&nbsp;with&nbsp;`\r\n`&nbsp;instead&nbsp;of
</c40><br/><ln>&nbsp;157</ln><a id="157">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#153_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;just&nbsp;`\n`
</c40><br/><ln>&nbsp;158</ln><a id="158">&nbsp;</a><a id="n[436589, 436584, 436587, 436590, 436591, 436581, 436588, 436583, 436586, 436580, 436585]">&nbsp;</a><c22><a href="#153_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#155">output</a></c26><c10><a href="../../libstd/str.rs.html#n65953">.lines_any</a></c10><c4>()</c4><c10><a href="../../<std macros>.html#5">.map</a></c10><c4>(</c4><c1><a href="../../<std macros>.html#5">|</a></c1><c20><a href="#158_32_refs">s</a></c20><c8><a href="../../<std macros>.html#5">|</a></c8><c1><a href="../../<std macros>.html#5">&nbsp;</a></c1><c8><a href="../../librustc/back/archive.rs.html#158">s</a></c8><c22><a href="../../libstd/str.rs.html#n66924">.to_owned</a></c22><c4>())</c4><c10><a href="../../<std macros>.html#4">.collect</a></c10><c4>()</c4><c22><a href="#153_4_refs">
</a></c22><br/><ln>&nbsp;159</ln><a id="159">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#153_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;160</ln><a id="160">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;161</ln><a id="161">&nbsp;</a><a id="n[436600, 436603, 436592, 436595, 436598, 436605, 436599, 436604]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#161_4_refs">&nbsp;add_archive</a></c30><c4>(</c4><c20><a href="#161_19_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18><a href="#161_4_refs">&nbsp;</a></c18><c20><a href="#161_30_refs">archive</a></c20><c18><a href="#161_4_refs">:&nbsp;</a></c18><c8><a href="#161_4_refs">&amp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c3>,</c3><c18><a href="#161_4_refs">&nbsp;</a></c18><c20><a href="#161_46_refs">name</a></c20><c18><a href="#161_4_refs">:&nbsp;</a></c18><c8><a href="#161_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#161_4_refs">
</a></c18><br/><ln>&nbsp;162</ln><a id="162">&nbsp;</a><a id="n[436613, 436611, 436612, 436866, 436615, 436608, 436610, 436609]">&nbsp;</a><c18><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#162_19_refs">skip</a></c20><c18><a href="#161_4_refs">:&nbsp;</a></c18><c8><a href="#161_4_refs">&amp;</a></c8><c3>[</c3><c8><a href="#161_4_refs">&amp;str</a></c8><c3>]</c3><c4>)</c4><c18><a href="#161_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#161_4_refs">&nbsp;</a></c18><c8><a href="../../libstd/io/mod.rs.html#n148915">io::IoResult&lt;</a></c8><c4>()</c4><c8><a href="../../libstd/io/mod.rs.html#n148915">&gt;</a></c8><c18><a href="#161_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;163</ln><a id="163">&nbsp;</a><a id="n[436622, 436619, 436616, 436621, 436623, 436617, 436618, 436620]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#161_4_refs">&nbsp;</a></c22><c20><a href="#163_12_refs">loc</a></c20><c13><a href="#161_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../libstd/io/tempfile.rs.html#n139092">TempDir::new</a></c26><c4>(</c4><c12><a href="../../libstd/option.rs.html#n105073">"rsar"</a></c12><c4>)</c4><c10><a href="../../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;164</ln><a id="164">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;165</ln><a id="165">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;First,&nbsp;extract&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;archive&nbsp;to&nbsp;a&nbsp;temporary&nbsp;directory
</c40><br/><ln>&nbsp;166</ln><a id="166">&nbsp;</a><a id="n[436624, 436625, 436630, 436627, 436629, 436628, 436626]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#161_4_refs">&nbsp;</a></c22><c20><a href="#166_12_refs">archive</a></c20><c13><a href="#161_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../libstd/os.rs.html#n134062">os::make_absolute</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#161">archive</a></c26><c4>)</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;167</ln><a id="167">&nbsp;</a><a id="n[436642, 436638, 436641, 436639, 436633, 436631, 436643, 436634, 436640, 436636, 436632, 436637, 436635]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#161">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c13><a href="#161_4_refs">&nbsp;</a></c13><c12><a href="#161_4_refs">"x"</a></c12><c3>,</c3><c13><a href="#161_4_refs">&nbsp;</a></c13><c26><a href="../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#163">loc</a></c26><c10><a href="../../libstd/io/tempfile.rs.html#n139124">.path</a></c10><c4>())</c4><c3>,</c3><c13><a href="#161_4_refs">&nbsp;</a></c13><c3>[</c3><c5><a href="#161_4_refs">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#166">archive</a></c26><c3>]</c3><c4>)</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;168</ln><a id="168">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;169</ln><a id="169">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Next,&nbsp;we&nbsp;must&nbsp;rename&nbsp;all&nbsp;of&nbsp;the&nbsp;inputs&nbsp;to&nbsp;"guaranteed&nbsp;unique&nbsp;names".
</c40><br/><ln>&nbsp;170</ln><a id="170">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;The&nbsp;reason&nbsp;for&nbsp;this&nbsp;is&nbsp;that&nbsp;archives&nbsp;are&nbsp;keyed&nbsp;off&nbsp;the&nbsp;name&nbsp;of&nbsp;the
</c40><br/><ln>&nbsp;171</ln><a id="171">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;files,&nbsp;so&nbsp;if&nbsp;two&nbsp;files&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;they&nbsp;will&nbsp;override&nbsp;one
</c40><br/><ln>&nbsp;172</ln><a id="172">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;another&nbsp;in&nbsp;the&nbsp;archive&nbsp;(bad).
</c40><br/><ln>&nbsp;173</ln><a id="173">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//
</c40><br/><ln>&nbsp;174</ln><a id="174">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;We&nbsp;skip&nbsp;any&nbsp;files&nbsp;explicitly&nbsp;desired&nbsp;for&nbsp;skipping,&nbsp;and&nbsp;we&nbsp;also&nbsp;skip
</c40><br/><ln>&nbsp;175</ln><a id="175">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;all&nbsp;SYMDEF&nbsp;files&nbsp;as&nbsp;these&nbsp;are&nbsp;just&nbsp;magical&nbsp;placeholders&nbsp;which&nbsp;get
</c40><br/><ln>&nbsp;176</ln><a id="176">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;re-created&nbsp;when&nbsp;we&nbsp;make&nbsp;a&nbsp;new&nbsp;archive&nbsp;anyway.
</c40><br/><ln>&nbsp;177</ln><a id="177">&nbsp;</a><a id="n[436660, 436645, 436644, 436650, 436648, 436661, 436649, 436646, 436647]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#161_4_refs">&nbsp;</a></c22><c20><a href="#177_12_refs">files</a></c20><c13><a href="#161_4_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#161_4_refs">try!</a></c21><c4>(</c4><c26><a href="../../libstd/io/fs.rs.html#n140532">fs::readdir</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#163">loc</a></c26><c10><a href="../../libstd/io/tempfile.rs.html#n139124">.path</a></c10><c4>()))</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;178</ln><a id="178">&nbsp;</a><a id="n[436667, 436664, 436665, 436662, 436663, 436666]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#161_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#178_12_refs">&nbsp;inputs</a></c20><c16><a href="#161_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../libstd/vec.rs.html#n56419">Vec::new</a></c26><c4>()</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;179</ln><a id="179">&nbsp;</a><a id="n[436818, 436675, 436821, 436676, 436671, 436674, 436816, 436819, 436670, 436673, 436817, 436677, 436678, 436669, 436668, 436820, 436672]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c22><a href="../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c20><a href="#179_12_refs">file</a></c20><c22><a href="../../libstd/option.rs.html#n104341">&nbsp;in&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#177">files</a></c26><c10><a href="../../libstd/slice.rs.html#n49192">.iter</a></c10><c4>()</c4><c22><a href="../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c3>{</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;180</ln><a id="180">&nbsp;</a><a id="n[436685, 436683, 436679, 436681, 436684, 436682, 436680]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;</a></c22><c20><a href="#180_16_refs">filename</a></c20><c16><a href="../../libstd/option.rs.html#n104337">&nbsp;=&nbsp;</a></c16><c26><a href="../../librustc/back/archive.rs.html#179">file</a></c26><c10><a href="../../librustc/middle/typeck/astconv.rs.html#142">.filename_str</a></c10><c4>()</c4><c10><a href="../../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()</c4><c3>;</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;181</ln><a id="181">&nbsp;</a><a id="n[436702, 436687, 436696, 436695, 436699, 436698, 436686, 436690, 436701, 436694, 436700, 436691, 436692, 436693, 436689, 436697]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../libstd/option.rs.html#n104337">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#162">skip</a></c26><c10><a href="../../libstd/slice.rs.html#n49192">.iter</a></c10><c4>()</c4><c10><a href="../../librustc/middle/typeck/check/mod.rs.html#3999">.any</a></c10><c4>(</c4><c1><a href="../../librustc/middle/typeck/check/mod.rs.html#3999">|</a></c1><c20><a href="#181_32_refs">s</a></c20><c8><a href="../../librustc/middle/typeck/check/mod.rs.html#3999">|</a></c8><c1><a href="../../librustc/middle/typeck/check/mod.rs.html#3999">&nbsp;</a></c1><c8><a href="../../libstd/option.rs.html#n104337">*</a></c8><c26><a href="../../librustc/back/archive.rs.html#181">s</a></c26><c22><a href="../../libstd/option.rs.html#n104337">&nbsp;==&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#180">filename</a></c26><c4>)</c4><c21><a href="../../libstd/option.rs.html#n104337">&nbsp;</a></c21><c3>{</c3><c22><a href="../../libstd/option.rs.html#n104337">&nbsp;continue&nbsp;</a></c22><c3>}</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;182</ln><a id="182">&nbsp;</a><a id="n[436704, 436703, 436705, 436708, 436706, 436709, 436707]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#180">filename</a></c26><c10><a href="../../libstd/str.rs.html#n65597">.contains</a></c10><c4>(</c4><c12><a href="#179_8_refs">".SYMDEF"</a></c12><c4>)</c4><c13><a href="../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c3>{</c3><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;continue&nbsp;</a></c22><c3>}</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;183</ln><a id="183">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;184</ln><a id="184">&nbsp;</a><a id="n[436776, 436712, 436788, 436750, 436713, 436763, 436744, 436781, 436733, 436714, 436768, 436732, 436749, 436751, 436752, 436783, 436739, 436770, 436771, 436747, 436710, 436748, 436719, 436775, 436727, 436715, 436718, 436767, 436787, 436745, 436772, 436736, 436761, 436717, 436762, 436755, 436742, 436766, 436734, 436720, 436729, 436721, 436728, 436741, 436754, 436716, 436774, 436738, 436779, 436730, 436737, 436725, 436731, 436724, 436758, 436773, 436740, 436726, 436753, 436769, 436743, 436760, 436735, 436756, 436786, 436711, 436780, 436765, 436746, 436764, 436777, 436759, 436757, 436778]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;</a></c22><c20><a href="#184_16_refs">filename</a></c20><c16><a href="../../libstd/option.rs.html#n104337">&nbsp;=&nbsp;</a></c16><c21><a href="../../libstd/option.rs.html#n104337">format!</a></c21><c4>(</c4><c27><a href="#184_35_refs">"r-</a></c27><c3>{}</c3><c27><a href="#184_35_refs">-</a></c27><c3>{}</c3><c27><a href="#184_35_refs">"</a></c27><c3>,</c3><c21><a href="../../libstd/option.rs.html#n104337">&nbsp;</a></c21><c26><a href="../../libstd/fmt/mod.rs.html#n171474">name</a></c26><c3>,</c3><c21><a href="../../libstd/option.rs.html#n104337">&nbsp;</a></c21><c26><a href="../../libstd/fmt/mod.rs.html#n171474">filename</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;185</ln><a id="185">&nbsp;</a><a id="n[436795, 436794, 436789, 436792, 436791, 436790, 436793]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;</a></c22><c20><a href="#185_16_refs">new_filename</a></c20><c16><a href="../../libstd/option.rs.html#n104337">&nbsp;=&nbsp;</a></c16><c26><a href="../../librustc/back/archive.rs.html#179">file</a></c26><c10><a href="../../librustc/middle/typeck/astconv.rs.html#142">.with_filename</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#184">filename</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;186</ln><a id="186">&nbsp;</a><a id="n[436798, 436799, 436800, 436797, 436796]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try!</a></c22><c4>(</c4><c26><a href="../../libstd/io/fs.rs.html#n140173">fs::rename</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#179">file</a></c26><c3>,</c3><c27><a href="#179_8_refs">&nbsp;</a></c27><c5><a href="../../libstd/option.rs.html#n104337">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#185">new_filename</a></c26><c4>))</c4><c3>;</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;187</ln><a id="187">&nbsp;</a><a id="n[436812, 436814, 436815, 436813]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#178">inputs</a></c26><c13><a href="../../libstd/vec.rs.html#n57406">.push</a></c13><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#185">new_filename</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;188</ln><a id="188">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;189</ln><a id="189">&nbsp;</a><a id="n[436830, 436828, 436822, 436831, 436826, 436832, 436824, 436827, 436825, 436829, 436823]">&nbsp;</a><c22><a href="../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="#161_4_refs">&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#178">inputs</a></c26><c10><a href="../../libstd/vec.rs.html#n57167">.len</a></c10><c4>()</c4><c5><a href="#161_4_refs">&nbsp;==&nbsp;</a></c5><c12><a href="#161_4_refs">0</a></c12><c13><a href="#161_4_refs">&nbsp;</a></c13><c3>{</c3><c22><a href="#161_4_refs">&nbsp;</a></c22><c1><a href="#161_4_refs">return&nbsp;</a></c1><c26><a href="../../libstd/result.rs.html#n105797">Ok</a></c26><c4>(())</c4><c22><a href="#161_4_refs">&nbsp;</a></c22><c3>}</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;190</ln><a id="190">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;191</ln><a id="191">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Finally,&nbsp;add&nbsp;all&nbsp;the&nbsp;renamed&nbsp;files&nbsp;to&nbsp;this&nbsp;archive
</c40><br/><ln>&nbsp;192</ln><a id="192">&nbsp;</a><a id="n[436843, 436844, 436845, 436851, 436835, 436834, 436850, 436833]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#161_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#192_12_refs">&nbsp;args</a></c20><c16><a href="#161_4_refs">&nbsp;=&nbsp;</a></c16><c22><a href="#161_4_refs">vec!</a></c22><c4>(</c4><c5><a href="#161_4_refs">&amp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#161">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#32">.dst</a></c24><c4>)</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;193</ln><a id="193">&nbsp;</a><a id="n[436855, 436853, 436856, 436852, 436854]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#192">args</a></c26><c13><a href="../../libstd/vec.rs.html#n57026">.extend</a></c13><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#178">inputs</a></c26><c10><a href="../../libstd/vec.rs.html#n57688">.iter</a></c10><c4>())</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;194</ln><a id="194">&nbsp;</a><a id="n[436860, 436861, 436862, 436865, 436863, 436864, 436858, 436859, 436857]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#38">run_ar</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#161">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c3>,</c3><c27><a href="#161_4_refs">&nbsp;</a></c27><c12><a href="#161_4_refs">"r"</a></c12><c3>,</c3><c27><a href="#161_4_refs">&nbsp;</a></c27><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c27><a href="#161_4_refs">&nbsp;</a></c27><c26><a href="../../librustc/back/archive.rs.html#192">args</a></c26><c10><a href="../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>())</c4><c3>;</c3><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;195</ln><a id="195">&nbsp;</a><a id="n[436869, 436868, 436867]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../libstd/result.rs.html#n105797">Ok</a></c26><c4>(())</c4><c22><a href="#161_4_refs">
</a></c22><br/><ln>&nbsp;196</ln><a id="196">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#161_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;197</ln><a id="197">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;198</ln><a id="198">&nbsp;</a><a id="n[436877, 436880, 436873, 437315, 436870, 436876, 436878]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#198_4_refs">&nbsp;find_library</a></c30><c4>(</c4><c20><a href="#198_20_refs">&amp;self</a></c20><c3>,</c3><c18><a href="#198_4_refs">&nbsp;</a></c18><c20><a href="#198_27_refs">name</a></c20><c18><a href="#198_4_refs">:&nbsp;</a></c18><c8><a href="#198_4_refs">&amp;str</a></c8><c4>)</c4><c18><a href="#198_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#198_4_refs">&nbsp;</a></c18><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c18><a href="#198_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;199</ln><a id="199">&nbsp;</a><a id="n[436898, 436886, 436887, 436889, 436882, 436884, 436888, 436899, 436881, 436885, 436883]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#198_4_refs">&nbsp;</a></c22><c4>(</c4><c20><a href="#199_13_refs">osprefix</a></c20><c3>,</c3><c20><a href="#198_4_refs">&nbsp;</a></c20><c20><a href="#199_23_refs">osext</a></c20><c4>)</c4><c16><a href="#198_4_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#198_4_refs">match&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#198">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c24><a href="../../librustc/driver/session.rs.html#177">.targ_cfg</a></c24><c24><a href="../../librustc/driver/session.rs.html#34">.os</a></c24><c21><a href="#198_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#198_4_refs">
</a></c21><br/><ln>&nbsp;200</ln><a id="200">&nbsp;</a><a id="n[436896, 436891, 436892, 436890, 436895, 436893, 436897, 436894]">&nbsp;</a><c21><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../libsyntax/abi.rs.html#n14460">abi::OsWin32</a></c20><c21><a href="#198_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#198_4_refs">&nbsp;</a></c21><c4>(</c4><c12><a href="#198_4_refs">""</a></c12><c3>,</c3><c14><a href="#198_4_refs">&nbsp;</a></c14><c12><a href="#198_4_refs">"lib"</a></c12><c4>)</c4><c3>,</c3><c21><a href="#198_4_refs">&nbsp;</a></c21><c20><a href="#198_4_refs">_</a></c20><c21><a href="#198_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#198_4_refs">&nbsp;</a></c21><c4>(</c4><c12><a href="#198_4_refs">"lib"</a></c12><c3>,</c3><c14><a href="#198_4_refs">&nbsp;</a></c14><c12><a href="#198_4_refs">"a"</a></c12><c4>)</c4><c3>,</c3><c21><a href="#198_4_refs">
</a></c21><br/><ln>&nbsp;201</ln><a id="201">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;202</ln><a id="202">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;On&nbsp;Windows,&nbsp;static&nbsp;libraries&nbsp;sometimes&nbsp;show&nbsp;up&nbsp;as&nbsp;libfoo.a&nbsp;and&nbsp;other
</c40><br/><ln>&nbsp;203</ln><a id="203">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;times&nbsp;show&nbsp;up&nbsp;as&nbsp;foo.lib
</c40><br/><ln>&nbsp;204</ln><a id="204">&nbsp;</a><a id="n[436978, 436944, 436907, 436921, 436964, 436909, 436949, 436972, 436910, 436955, 436943, 436937, 436966, 436954, 436940, 436913, 436941, 436905, 436950, 436924, 436919, 436958, 436981, 436923, 436935, 436974, 436939, 436936, 436900, 436992, 436983, 436922, 436933, 436947, 436971, 436925, 436929, 436948, 436928, 436991, 436931, 436926, 436962, 436930, 436942, 436977, 436952, 436993, 436914, 436968, 436917, 436967, 436965, 436984, 436973, 436945, 436963, 436938, 436918, 436946, 436904, 436953, 436902, 436934, 436932, 436982, 436906, 436970, 436986, 436927, 436976, 436959, 436979, 436911, 436961, 436901, 436903, 436975, 436980, 436912, 436969, 436985, 436957, 436920, 436951, 436908, 436988, 436960, 436956]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#198_4_refs">&nbsp;</a></c22><c20><a href="#204_12_refs">oslibname</a></c20><c13><a href="#198_4_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#198_4_refs">format!</a></c21><c4>(</c4><c1><a href="#204_32_refs">"</a></c1><c3>{}{}</c3><c1><a href="#204_32_refs">.</a></c1><c3>{}</c3><c1><a href="#204_32_refs">"</a></c1><c3>,</c3><c21><a href="#198_4_refs">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#199">osprefix</a></c26><c3>,</c3><c21><a href="#198_4_refs">&nbsp;</a></c21><c20><a href="#204_53_refs">name</a></c20><c3>,</c3><c21><a href="#198_4_refs">&nbsp;</a></c21><c5><a href="../../libstd/fmt/mod.rs.html#n171474">osext</a></c5><c4>)</c4><c3>;</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;205</ln><a id="205">&nbsp;</a><a id="n[437049, 437031, 437054, 437011, 437016, 437044, 437007, 437034, 437014, 437025, 437001, 437032, 437033, 437046, 437024, 437000, 436996, 437030, 437047, 436997, 437013, 437023, 437021, 437018, 437036, 437040, 437039, 437010, 437037, 437006, 436994, 437019, 437008, 437045, 437026, 437028, 437041, 437038, 437052, 437035, 437017, 436999, 437009, 437029, 436998, 437027, 437053, 437012, 437015, 437022, 436995, 437042, 437020, 437043, 437005, 437002]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#198_4_refs">&nbsp;</a></c22><c20><a href="#205_12_refs">unixlibname</a></c20><c16><a href="#198_4_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#198_4_refs">format!</a></c21><c4>(</c4><c1><a href="#205_34_refs">"lib</a></c1><c3>{}</c3><c1><a href="#205_34_refs">.a"</a></c1><c3>,</c3><c21><a href="#198_4_refs">&nbsp;</a></c21><c5><a href="../../librustc/back/archive.rs.html#198">name</a></c5><c4>)</c4><c3>;</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;206</ln><a id="206">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;207</ln><a id="207">&nbsp;</a><a id="n[437056, 437059, 437055, 437058, 437060, 437057]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#198_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#207_12_refs">&nbsp;rustpath</a></c20><c13><a href="#198_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../librustc/metadata/filesearch.rs.html#197">filesearch::rust_path</a></c26><c4>()</c4><c3>;</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;208</ln><a id="208">&nbsp;</a><a id="n[437067, 437063, 437062, 437061, 437064, 437065, 437066]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#207">rustpath</a></c26><c10><a href="../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#198">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c10><a href="../../librustc/driver/session.rs.html#317">.filesearch</a></c10><c4>()</c4><c10><a href="../../librustc/metadata/filesearch.rs.html#82">.get_target_lib_path</a></c10><c4>())</c4><c3>;</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;209</ln><a id="209">&nbsp;</a><a id="n[437070, 437074, 437076, 437075, 437068, 437069, 437071, 437072, 437073]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#198_4_refs">&nbsp;</a></c22><c20><a href="#209_12_refs">search</a></c20><c16><a href="#198_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../librustc/back/archive.rs.html#198">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c24><a href="../../librustc/driver/session.rs.html#178">.opts</a></c24><c24><a href="../../librustc/driver/session.rs.html#137">.addl_lib_search_paths</a></c24><c10><a href="../../libstd/cell.rs.html#n107602">.borrow</a></c10><c4>()</c4><c3>;</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;210</ln><a id="210">&nbsp;</a><a id="n[437083, 437079, 437081, 437086, 437084, 437251, 437077, 437250, 437249, 437085, 437252, 437253, 437087, 437080, 437089, 437090, 437082, 437088, 437078, 437229]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c1><a href="../../libstd/option.rs.html#n104341">&nbsp;</a></c1><c20><a href="#210_12_refs">path</a></c20><c1><a href="../../libstd/option.rs.html#n104341">&nbsp;in&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#209">search</a></c26><c10><a href="../../libcollections/hashmap.rs.html#n16969">.iter</a></c10><c4>()</c4><c10><a href="../../librustc/middle/typeck/check/mod.rs.html#4163">.chain</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#207">rustpath</a></c26><c10><a href="../../libstd/vec.rs.html#n57688">.iter</a></c10><c4>())</c4><c1><a href="../../libstd/option.rs.html#n104341">&nbsp;</a></c1><c3>{</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;211</ln><a id="211">&nbsp;</a><a id="n[437138, 437191, 437127, 437177, 437175, 437183, 437166, 437182, 437159, 437180, 437123, 437150, 437185, 437130, 437132, 437170, 437124, 437157, 437128, 437154, 437189, 437173, 437167, 437149, 437186, 437143, 437205, 437168, 437145, 437172, 437148, 437174, 437137, 437140, 437176, 437131, 437125, 437169, 437139, 437152, 437144, 437187, 437129, 437135, 437161, 437141, 437179, 437160, 437155, 437147, 437190, 437163, 437151, 437162, 437136, 437156, 437171, 437142, 437164, 437184, 437181, 437192, 437146, 437178, 437188, 437126, 437153, 437208, 437165, 437158]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../libstd/fmt/parse.rs.html#n166363">"looking&nbsp;for&nbsp;</a></c26><c3>{}</c3><c26><a href="../../libstd/fmt/parse.rs.html#n166363">&nbsp;inside&nbsp;</a></c26><c3>{}</c3><c26><a href="../../libstd/fmt/parse.rs.html#n166363">"</a></c26><c3>,</c3><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c26><a href="../../libstd/fmt/mod.rs.html#n171474">name</a></c26><c3>,</c3><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c26><a href="../../librustc/back/archive.rs.html#210">path</a></c26><c10><a href="../../librustc/middle/typeck/astconv.rs.html#142">.display</a></c10><c4>())</c4><c3>;</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;212</ln><a id="212">&nbsp;</a><a id="n[437219, 437221, 437216, 437218, 437217, 437220, 437214, 437215]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c20><a href="#212_16_refs">test</a></c20><c16><a href="../../libstd/iter.rs.html#n94107">&nbsp;=&nbsp;</a></c16><c26><a href="../../librustc/back/archive.rs.html#210">path</a></c26><c10><a href="../../librustc/middle/typeck/astconv.rs.html#142">.join</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#204">oslibname</a></c26><c10><a href="../../libstd/str.rs.html#n64934">.as_slice</a></c10><c4>())</c4><c3>;</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;213</ln><a id="213">&nbsp;</a><a id="n[437223, 437225, 437222, 437228, 437226, 437224, 437227]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#212">test</a></c26><c10><a href="../../libstd/io/fs.rs.html#n141100">.exists</a></c10><c4>()</c4><c21><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c21><c3>{</c3><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c1><a href="../../libstd/iter.rs.html#n94107">return&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#212">test</a></c26><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c3>}</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;214</ln><a id="214">&nbsp;</a><a id="n[437232, 437231, 437248, 437230, 437241]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#204">oslibname</a></c26><c5><a href="#210_8_refs">&nbsp;!=&nbsp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#205">unixlibname</a></c26><c21><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c21><c3>{</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;215</ln><a id="215">&nbsp;</a><a id="n[437235, 437234, 437237, 437239, 437236, 437238, 437240, 437233]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c20><a href="#215_20_refs">test</a></c20><c16><a href="../../libstd/iter.rs.html#n94107">&nbsp;=&nbsp;</a></c16><c26><a href="../../librustc/back/archive.rs.html#210">path</a></c26><c10><a href="../../librustc/middle/typeck/astconv.rs.html#142">.join</a></c10><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#205">unixlibname</a></c26><c10><a href="../../libstd/str.rs.html#n64934">.as_slice</a></c10><c4>())</c4><c3>;</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;216</ln><a id="216">&nbsp;</a><a id="n[437246, 437242, 437243, 437244, 437245, 437247]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#215">test</a></c26><c10><a href="../../libstd/io/fs.rs.html#n141100">.exists</a></c10><c4>()</c4><c21><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c21><c3>{</c3><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c1><a href="#210_8_refs">return&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#215">test</a></c26><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;</a></c22><c3>}</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;217</ln><a id="217">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../libstd/iter.rs.html#n94107">
</a></c22><br/><ln>&nbsp;218</ln><a id="218">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../../libstd/iter.rs.html#n94107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c1><a href="../../libstd/option.rs.html#n104341">
</a></c1><br/><ln>&nbsp;219</ln><a id="219">&nbsp;</a><a id="n[437278, 437287, 437302, 437272, 437271, 437298, 437265, 437313, 437260, 437277, 437299, 437274, 437269, 437268, 437254, 437270, 437273, 437297, 437283, 437267, 437303, 437261, 437285, 437276, 437301, 437295, 437294, 437258, 437280, 437304, 437311, 437279, 437266, 437305, 437312, 437293, 437306, 437255, 437296, 437300, 437288, 437308, 437281, 437284, 437286, 437314, 437264, 437282, 437275]">&nbsp;</a><c1><a href="../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#198">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#31">.sess</a></c24><c13><a href="../../librustc/driver/session.rs.html#205">.fatal</a></c13><c4>(</c4><c21><a href="../../librustc/driver/session.rs.html#205">format!</a></c21><c4>(</c4><c26><a href="../../libstd/fmt/rt.rs.html#n169505">"could&nbsp;not&nbsp;find&nbsp;native&nbsp;</a></c26><c36>static</c36><c36><a href="../../libstd/fmt/rt.rs.html#n169505">&nbsp;library&nbsp;`</a></c36><c3>{}</c3><c26><a href="../../libstd/fmt/rt.rs.html#n169505">`</a></c26><c3>,</c3><c26><a href="../../libstd/fmt/rt.rs.html#n169505">&nbsp;\
</a></c26><br/><ln>&nbsp;220</ln><a id="220">&nbsp;</a><a id="n[437257, 437291, 437290, 437259, 437292, 437289, 437256]">&nbsp;</a><c26><a href="../../libstd/fmt/rt.rs.html#n169505">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perhaps&nbsp;an&nbsp;-L&nbsp;flag&nbsp;is&nbsp;missing?"</a></c26><c3>,</c3><c21><a href="../../librustc/driver/session.rs.html#205">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#198">name</a></c26><c4>))</c4><c3>;</c3><c22><a href="#198_4_refs">
</a></c22><br/><ln>&nbsp;221</ln><a id="221">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#198_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;222</ln><a id="222">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;223</ln><a id="223">&nbsp;</a><a id="n[437316]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;224</ln><a id="224">&nbsp;</a><a id="n[437318]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../../librustc/back/archive.rs.html#34">ArchiveRO</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;225</ln><a id="225">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Opens&nbsp;a&nbsp;static&nbsp;archive&nbsp;for&nbsp;read-only&nbsp;purposes.&nbsp;This&nbsp;is&nbsp;more&nbsp;optimized
</c42><br/><ln>&nbsp;226</ln><a id="226">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;than&nbsp;the&nbsp;`open`&nbsp;method&nbsp;because&nbsp;it&nbsp;uses&nbsp;LLVM's&nbsp;internal&nbsp;`Archive`&nbsp;class
</c42><br/><ln>&nbsp;227</ln><a id="227">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;rather&nbsp;than&nbsp;shelling&nbsp;out&nbsp;to&nbsp;`ar`&nbsp;for&nbsp;everything.
</c42><br/><ln>&nbsp;228</ln><a id="228">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///
</c42><br/><ln>&nbsp;229</ln><a id="229">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;If&nbsp;this&nbsp;archive&nbsp;is&nbsp;used&nbsp;with&nbsp;a&nbsp;mutable&nbsp;method,&nbsp;then&nbsp;an&nbsp;error&nbsp;will&nbsp;be
</c42><br/><ln>&nbsp;230</ln><a id="230">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;raised.
</c42><br/><ln>&nbsp;231</ln><a id="231">&nbsp;</a><a id="n[437326, 437319, 437328, 437324, 437329, 437323, 437322]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#231_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#231_4_refs">&nbsp;open</a></c30><c4>(</c4><c20><a href="#231_16_refs">dst</a></c20><c18><a href="#231_4_refs">:&nbsp;</a></c18><c8><a href="#231_4_refs">&amp;</a></c8><c8><a href="../../libstd/path/posix.rs.html#n154239">Path</a></c8><c4>)</c4><c18><a href="#231_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#231_4_refs">&nbsp;</a></c18><c8><a href="../../libstd/option.rs.html#n104336">Option&lt;</a></c8><c8><a href="../../librustc/back/archive.rs.html#34">ArchiveRO</a></c8><c8><a href="../../libstd/option.rs.html#n104336">&gt;</a></c8><c18><a href="#231_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;232</ln><a id="232">&nbsp;</a><a id="n[437359, 437347]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>unsafe</c21><c22><a href="#231_4_refs">&nbsp;</a></c22><c3>{</c3><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;233</ln><a id="233">&nbsp;</a><a id="n[437345, 437346, 437333, 437332, 437337, 437335, 437336, 437331, 437338, 437343, 437339, 437330, 437344]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#231_4_refs">&nbsp;</a></c22><c20><a href="#233_16_refs">ar</a></c20><c16><a href="#231_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../librustc/back/archive.rs.html#231">dst</a></c26><c10><a href="../../librustc/middle/typeck/astconv.rs.html#143">.with_c_str</a></c10><c4>(</c4><c1><a href="../../librustc/middle/typeck/astconv.rs.html#143">|</a></c1><c20><a href="#233_37_refs">dst</a></c20><c8><a href="../../librustc/middle/typeck/astconv.rs.html#143">|</a></c8><c1><a href="../../librustc/middle/typeck/astconv.rs.html#143">&nbsp;</a></c1><c3>{</c3><c22><a href="../../librustc/middle/typeck/astconv.rs.html#143">
</a></c22><br/><ln>&nbsp;234</ln><a id="234">&nbsp;</a><a id="n[437342, 437340, 437341]">&nbsp;</a><c22><a href="../../librustc/middle/typeck/astconv.rs.html#143">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=521534">llvm::LLVMRustOpenArchive</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#233">dst</a></c26><c4>)</c4><c22><a href="../../librustc/middle/typeck/astconv.rs.html#143">
</a></c22><br/><ln>&nbsp;235</ln><a id="235">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../../librustc/middle/typeck/astconv.rs.html#143">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c3>;</c3><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;236</ln><a id="236">&nbsp;</a><a id="n[437348, 437358, 437350, 437349]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#231_4_refs">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#233">ar</a></c26><c10><a href="../../libstd/ptr.rs.html#n72007">.is_null</a></c10><c4>()</c4><c21><a href="#231_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;237</ln><a id="237">&nbsp;</a><a id="n[437351]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;238</ln><a id="238">&nbsp;</a><a id="n[437352, 437357]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#231_4_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#231_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;239</ln><a id="239">&nbsp;</a><a id="n[437355, 437356, 437353, 437354]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c1><a href="../../librustc/back/archive.rs.html#34">ArchiveRO&nbsp;</a></c1><c3>{</c3><c1><a href="../../librustc/back/archive.rs.html#34">&nbsp;ptr:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#233">ar</a></c26><c1><a href="../../librustc/back/archive.rs.html#34">&nbsp;</a></c1><c3>}</c3><c4>)</c4><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;240</ln><a id="240">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;241</ln><a id="241">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#231_4_refs">
</a></c22><br/><ln>&nbsp;242</ln><a id="242">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#231_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;243</ln><a id="243">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;244</ln><a id="244">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c42>///&nbsp;Reads&nbsp;a&nbsp;file&nbsp;in&nbsp;the&nbsp;archive
</c42><br/><ln>&nbsp;245</ln><a id="245">&nbsp;</a><a id="n[437370, 437374, 437378, 437360, 437375, 437368, 437377, 437369, 437373, 437365]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#245_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#245_4_refs">&nbsp;read</a></c30><c5><a href="#245_4_refs">&lt;'a&gt;</a></c5><c4>(</c4><c20><a href="#245_20_refs">&amp;'a&nbsp;self</a></c20><c3>,</c3><c18><a href="#245_4_refs">&nbsp;</a></c18><c20><a href="#245_30_refs">file</a></c20><c18><a href="#245_4_refs">:&nbsp;</a></c18><c8><a href="#245_4_refs">&amp;str</a></c8><c4>)</c4><c18><a href="#245_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#245_4_refs">&nbsp;</a></c18><c8><a href="../../libstd/option.rs.html#n104336">Option&lt;</a></c8><c8><a href="#245_4_refs">&amp;'a&nbsp;</a></c8><c3>[</c3><c8><a href="#245_4_refs">u8</a></c8><c3>]</c3><c8><a href="../../libstd/option.rs.html#n104336">&gt;</a></c8><c18><a href="#245_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;246</ln><a id="246">&nbsp;</a><a id="n[437426, 437408]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>unsafe</c21><c22><a href="#245_4_refs">&nbsp;</a></c22><c3>{</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;247</ln><a id="247">&nbsp;</a><a id="n[437384, 437385, 437386, 437380, 437381, 437379, 437382]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#245_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#247_16_refs">&nbsp;size</a></c20><c16><a href="#245_4_refs">&nbsp;=&nbsp;</a></c16><c12><a href="#245_4_refs">0</a></c12><c21><a href="#245_4_refs">&nbsp;as&nbsp;</a></c21><c8><a href="../../libstd/libc.rs.html#n127586">libc::size_t</a></c8><c3>;</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;248</ln><a id="248">&nbsp;</a><a id="n[437404, 437387, 437393, 437390, 437389, 437406, 437388, 437394, 437405, 437407, 437392, 437396, 437395]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#245_4_refs">&nbsp;</a></c22><c20><a href="#248_16_refs">ptr</a></c20><c13><a href="#245_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../librustc/back/archive.rs.html#245">file</a></c26><c10><a href="../../libstd/c_str.rs.html#n132053">.with_c_str</a></c10><c4>(</c4><c1><a href="../../libstd/c_str.rs.html#n132053">|</a></c1><c20><a href="#248_39_refs">file</a></c20><c8><a href="../../libstd/c_str.rs.html#n132053">|</a></c8><c1><a href="../../libstd/c_str.rs.html#n132053">&nbsp;</a></c1><c3>{</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;249</ln><a id="249">&nbsp;</a><a id="n[437399, 437398, 437402, 437397, 437403, 437401, 437400]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=521542">llvm::LLVMRustArchiveReadSection</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#245">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#36">.ptr</a></c24><c3>,</c3><c27><a href="#245_4_refs">&nbsp;</a></c27><c26><a href="../../librustc/back/archive.rs.html#248">file</a></c26><c3>,</c3><c27><a href="#245_4_refs">&nbsp;</a></c27><c5><a href="#245_4_refs">&amp;mut&nbsp;</a></c5><c26><a href="../../librustc/back/archive.rs.html#247">size</a></c26><c4>)</c4><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;250</ln><a id="250">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c3>;</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;251</ln><a id="251">&nbsp;</a><a id="n[437410, 437411, 437409, 437425]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#245_4_refs">&nbsp;</a></c21><c26><a href="../../librustc/back/archive.rs.html#248">ptr</a></c26><c10><a href="../../libstd/ptr.rs.html#n72007">.is_null</a></c10><c4>()</c4><c21><a href="#245_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;252</ln><a id="252">&nbsp;</a><a id="n[437412]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../libstd/option.rs.html#n104337">None</a></c26><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;253</ln><a id="253">&nbsp;</a><a id="n[437424, 437413]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#245_4_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#245_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;254</ln><a id="254">&nbsp;</a><a id="n[437422, 437423, 437415, 437414, 437421]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../libstd/cast.rs.html#n162150">cast::transmute</a></c26><c4>(</c4><c1><a href="../../libstd/raw.rs.html#n184366">raw::Slice&nbsp;</a></c1><c3>{</c3><c1><a href="../../libstd/raw.rs.html#n184366">
</a></c1><br/><ln>&nbsp;255</ln><a id="255">&nbsp;</a><a id="n[437416]">&nbsp;</a><c1><a href="../../libstd/raw.rs.html#n184366">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#248">ptr</a></c26><c3>,</c3><c1><a href="../../libstd/raw.rs.html#n184366">
</a></c1><br/><ln>&nbsp;256</ln><a id="256">&nbsp;</a><a id="n[437419, 437417, 437420]">&nbsp;</a><c1><a href="../../libstd/raw.rs.html#n184366">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len:&nbsp;</a></c1><c26><a href="../../librustc/back/archive.rs.html#247">size</a></c26><c21><a href="#245_4_refs">&nbsp;as&nbsp;</a></c21><c8><a href="#245_4_refs">uint</a></c8><c3>,</c3><c1><a href="../../libstd/raw.rs.html#n184366">
</a></c1><br/><ln>&nbsp;257</ln><a id="257">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../../libstd/raw.rs.html#n184366">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c4>))</c4><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;258</ln><a id="258">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;259</ln><a id="259">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#245_4_refs">
</a></c22><br/><ln>&nbsp;260</ln><a id="260">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#245_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;261</ln><a id="261">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;262</ln><a id="262">&nbsp;</a><a id="n[437427]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;263</ln><a id="263">&nbsp;</a><a id="n[437428, 437430]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../../libstd/ops.rs.html#n75082">Drop</a></c33><c33>&nbsp;for&nbsp;</c33><c33><a href="../../librustc/back/archive.rs.html#34">ArchiveRO</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;264</ln><a id="264">&nbsp;</a><a id="n[437434, 437435, 437436, 437431]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn&nbsp;drop</c30><c4>(</c4><c20><a href="#264_12_refs">&amp;mut&nbsp;self</a></c20><c4>)</c4><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;265</ln><a id="265">&nbsp;</a><a id="n[437442, 437443]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>unsafe</c21><c22>&nbsp;</c22><c3>{</c3><c22>
</c22><br/><ln>&nbsp;266</ln><a id="266">&nbsp;</a><a id="n[437437, 437441, 437440, 437438, 437439]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="c=0 n=521560">llvm::LLVMRustDestroyArchive</a></c26><c4>(</c4><c26><a href="../../librustc/back/archive.rs.html#264">self</a></c26><c24><a href="../../librustc/back/archive.rs.html#36">.ptr</a></c24><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;267</ln><a id="267">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;268</ln><a id="268">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;269</ln><a id="269">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><div class="refblock"><br/><a id="34_1_refs"><a href="#34"><c40>librustc/back/archive.rs:34:1-34:1&nbsp;-struct-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;struct&nbsp;ArchiveRO&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../librustc/back/archive.rs.html#239"><c40>239:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some(ArchiveRO&nbsp;{&nbsp;ptr:&nbsp;ar&nbsp;})
<br/></a><a href="../../librustc/back/archive.rs.html#231"><c40>231:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;open(dst:&nbsp;&amp;Path)&nbsp;-&gt;&nbsp;Option&lt;ArchiveRO&gt;&nbsp;{
<br/></a><a href="../../librustc/back/archive.rs.html#224"><c40>224:&nbsp;</c40>impl&nbsp;ArchiveRO&nbsp;{
<br/></a><a href="../../librustc/back/archive.rs.html#263"><c40>263:&nbsp;</c40>impl&nbsp;Drop&nbsp;for&nbsp;ArchiveRO&nbsp;{
<br/></a><a href="../../librustc/metadata/loader.rs.html"><c40>librustc/metadata/loader.rs:<br/></c40></a><a href="../../librustc/metadata/loader.rs.html#66"><c40>66:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;priv&nbsp;archive:&nbsp;ArchiveRO,
<br/></a><a href="../../librustc/metadata/loader.rs.html#367"><c40>367:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;new(ar:&nbsp;ArchiveRO)&nbsp;-&gt;&nbsp;Option&lt;ArchiveMetadata&gt;&nbsp;{
<br/></a><br/><br/><a id="29_1_refs"><a href="#29"><c40>librustc/back/archive.rs:29:1-29:1&nbsp;-struct-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;struct&nbsp;Archive&lt;'a&gt;&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../librustc/back/archive.rs.html#87"><c40>87:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive&nbsp;{&nbsp;sess:&nbsp;sess,&nbsp;dst:&nbsp;dst&nbsp;}
<br/></a><a href="../../librustc/back/archive.rs.html#76"><c40>76:&nbsp;</c40>impl&lt;'a&gt;&nbsp;Archive&lt;'a&gt;&nbsp;{
<br/></a><a href="../../librustc/back/archive.rs.html#79"><c40>79:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_object:&nbsp;&amp;'b&nbsp;Path)&nbsp;-&gt;&nbsp;Archive&lt;'a&gt;&nbsp;{
<br/></a><a href="../../librustc/back/archive.rs.html#81"><c40>81:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive&nbsp;{&nbsp;sess:&nbsp;sess,&nbsp;dst:&nbsp;dst.clone()&nbsp;}
<br/></a><a href="../../librustc/back/link.rs.html"><c40>librustc/back/link.rs:<br/></c40></a><a href="../../librustc/back/link.rs.html#884"><c40>884:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out_filename:&nbsp;&amp;Path)&nbsp;-&gt;&nbsp;Archive&lt;'a&gt;&nbsp;{
<br/></a><a href="../../librustc/back/archive.rs.html"><c40>librustc/back/archive.rs:<br/></c40></a><a href="../../librustc/back/archive.rs.html#85"><c40>85:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;open(sess:&nbsp;&amp;'a&nbsp;Session,&nbsp;dst:&nbsp;Path)&nbsp;-&gt;&nbsp;Archive&lt;'a&gt;&nbsp;{
<br/></a><br/><br/><a id="38_1_refs"><a href="#38"><c40>librustc/back/archive.rs:38:1-38:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>fn&nbsp;run_ar(sess:&nbsp;&amp;Session,&nbsp;args:&nbsp;&amp;str,&nbsp;cwd:&nbsp;Option&lt;&amp;Path&gt;,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../librustc/back/archive.rs.html#97"><c40>97:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(self.sess,&nbsp;"x",&nbsp;Some(loc.path()),&nbsp;[&amp;archive,
<br/></a><a href="../../librustc/back/archive.rs.html#167"><c40>167:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(self.sess,&nbsp;"x",&nbsp;Some(loc.path()),&nbsp;[&amp;archive]);
<br/></a><a href="../../librustc/back/archive.rs.html#194"><c40>194:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(self.sess,&nbsp;"r",&nbsp;None,&nbsp;args.as_slice());
<br/></a><a href="../../librustc/back/archive.rs.html#149"><c40>149:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(self.sess,&nbsp;"s",&nbsp;None,&nbsp;[&amp;self.dst]);
<br/></a><a href="../../librustc/back/archive.rs.html#139"><c40>139:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(self.sess,&nbsp;cmd,&nbsp;None,&nbsp;[&amp;self.dst,&nbsp;file]);
<br/></a><a href="../../librustc/back/archive.rs.html#144"><c40>144:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(self.sess,&nbsp;"d",&nbsp;None,&nbsp;[&amp;self.dst,&nbsp;&amp;Path::new(file)]);
<br/></a><a href="../../librustc/back/archive.rs.html#154"><c40>154:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;output&nbsp;=&nbsp;run_ar(self.sess,&nbsp;"t",&nbsp;None,&nbsp;[&amp;self.dst]);
<br/></a><a href="../../librustc/back/archive.rs.html#80"><c40>80:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(sess,&nbsp;"crus",&nbsp;None,&nbsp;[dst,&nbsp;initial_object]);
<br/></a><a href="../../librustc/back/archive.rs.html#106"><c40>106:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_ar(self.sess,
<br/></a><br/></div></maintext></div></body>