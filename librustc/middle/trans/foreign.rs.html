<head><link href="../../../css/shCore.css" rel="stylesheet" type="text/css"/><link href="../../../css/shThemeDefault.css" rel="stylesheet" type="text/css"/><link href="../../../css/sourcestyle.css" rel="stylesheet" type="text/css"/></head><body><div><maintext><div><fileblock><br/>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./../../../index.html">(index&lt;-&nbsp;)</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./../../../">&nbsp;&nbsp;&nbsp;&nbsp;./</a><c0><a href="./../../../librustc/">librustc</a></c0><c1>/</c1><c0><a href="./../../../librustc/middle/">middle</a></c0><c1>/</c1><c0><a href="./../../../librustc/middle/trans/">trans</a></c0><c1>/</c1><c0><a href="./../../../librustc/middle/trans/foreign.rs.html">foreign.rs</a></c0><br/><br/></fileblock></div><ln>&nbsp;&nbsp;&nbsp;1</ln><a id="1">&nbsp;</a>&nbsp;<c40>//&nbsp;Copyright&nbsp;2012-2013&nbsp;The&nbsp;Rust&nbsp;Project&nbsp;Developers.&nbsp;See&nbsp;the&nbsp;COPYRIGHT
</c40><br/><ln>&nbsp;&nbsp;&nbsp;2</ln><a id="2">&nbsp;</a>&nbsp;<c40>//&nbsp;file&nbsp;at&nbsp;the&nbsp;top-level&nbsp;directory&nbsp;of&nbsp;this&nbsp;distribution&nbsp;and&nbsp;at
</c40><br/><ln>&nbsp;&nbsp;&nbsp;3</ln><a id="3">&nbsp;</a>&nbsp;<c40>//&nbsp;http://rust-lang.org/COPYRIGHT.
</c40><br/><ln>&nbsp;&nbsp;&nbsp;4</ln><a id="4">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;&nbsp;&nbsp;5</ln><a id="5">&nbsp;</a>&nbsp;<c40>//&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;License,&nbsp;Version&nbsp;2.0&nbsp;&lt;LICENSE-APACHE&nbsp;or
</c40><br/><ln>&nbsp;&nbsp;&nbsp;6</ln><a id="6">&nbsp;</a>&nbsp;<c40>//&nbsp;http://www.apache.org/licenses/LICENSE-2.0&gt;&nbsp;or&nbsp;the&nbsp;MIT&nbsp;license
</c40><br/><ln>&nbsp;&nbsp;&nbsp;7</ln><a id="7">&nbsp;</a>&nbsp;<c40>//&nbsp;&lt;LICENSE-MIT&nbsp;or&nbsp;http://opensource.org/licenses/MIT&gt;,&nbsp;at&nbsp;your
</c40><br/><ln>&nbsp;&nbsp;&nbsp;8</ln><a id="8">&nbsp;</a>&nbsp;<c40>//&nbsp;option.&nbsp;This&nbsp;file&nbsp;may&nbsp;not&nbsp;be&nbsp;copied,&nbsp;modified,&nbsp;or&nbsp;distributed
</c40><br/><ln>&nbsp;&nbsp;&nbsp;9</ln><a id="9">&nbsp;</a>&nbsp;<c40>//&nbsp;except&nbsp;according&nbsp;to&nbsp;those&nbsp;terms.
</c40><br/><ln>&nbsp;&nbsp;10</ln><a id="10">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;&nbsp;11</ln><a id="11">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;&nbsp;12</ln><a id="12">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;back::</c0><c3>{</c3><c0>link</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;13</ln><a id="13">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;lib::llvm::llvm</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;14</ln><a id="14">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;lib::llvm::</c0><c3>{</c3><c0>ValueRef</c0><c3>,</c3><c0>&nbsp;CallConv</c0><c3>,</c3><c0>&nbsp;StructRetAttribute</c0><c3>,</c3><c0>&nbsp;Linkage</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;15</ln><a id="15">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;lib</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;16</ln><a id="16">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::base::push_ctxt</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;17</ln><a id="17">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::base</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;18</ln><a id="18">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::build::*</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;19</ln><a id="19">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::builder::noname</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;20</ln><a id="20">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::cabi</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;21</ln><a id="21">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::common::*</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;22</ln><a id="22">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::machine</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;23</ln><a id="23">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::type_::Type</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;24</ln><a id="24">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::type_of::*</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;25</ln><a id="25">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::trans::type_of</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;26</ln><a id="26">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::ty::FnSig</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;27</ln><a id="27">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;middle::ty</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;28</ln><a id="28">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;std::cmp</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;29</ln><a id="29">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;std::libc::c_uint</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;30</ln><a id="30">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;syntax::abi::</c0><c3>{</c3><c0>Cdecl</c0><c3>,</c3><c0>&nbsp;Aapcs</c0><c3>,</c3><c0>&nbsp;C</c0><c3>,</c3><c0>&nbsp;AbiSet</c0><c3>,</c3><c0>&nbsp;Win64</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;31</ln><a id="31">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;syntax::abi::</c0><c3>{</c3><c0>RustIntrinsic</c0><c3>,</c3><c0>&nbsp;Rust</c0><c3>,</c3><c0>&nbsp;Stdcall</c0><c3>,</c3><c0>&nbsp;Fastcall</c0><c3>,</c3><c0>&nbsp;System</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;32</ln><a id="32">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;syntax::codemap::Span</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;33</ln><a id="33">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;syntax::parse::token::</c0><c3>{</c3><c0>InternedString</c0><c3>,</c3><c0>&nbsp;special_idents</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;34</ln><a id="34">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;syntax::parse::token</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;35</ln><a id="35">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;syntax::</c0><c3>{</c3><c0>ast</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;36</ln><a id="36">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;syntax::</c0><c3>{</c3><c0>attr</c0><c3>,</c3><c0>&nbsp;ast_map</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;37</ln><a id="37">&nbsp;</a>&nbsp;<c21>use</c21><c0>&nbsp;util::ppaux::</c0><c3>{</c3><c0>Repr</c0><c3>,</c3><c0>&nbsp;UserString</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;38</ln><a id="38">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;&nbsp;39</ln><a id="39">&nbsp;</a>&nbsp;<c42>///////////////////////////////////////////////////////////////////////////
</c42><br/><ln>&nbsp;&nbsp;40</ln><a id="40">&nbsp;</a>&nbsp;<c40>//&nbsp;Type&nbsp;definitions
</c40><br/><ln>&nbsp;&nbsp;41</ln><a id="41">&nbsp;</a><a id="n87977">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;42</ln><a id="42">&nbsp;</a>&nbsp;<c31>struct</c31><c31><a href="#41_1_refs">&nbsp;ForeignTypes&nbsp;</a></c31><c3>{</c3><c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;43</ln><a id="43">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;Rust&nbsp;signature&nbsp;of&nbsp;the&nbsp;function
</c42><br/><ln>&nbsp;&nbsp;44</ln><a id="44">&nbsp;</a><a id="n87978"><a id="n87980">&nbsp;</a></a><c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#44_4_refs">fn_sig:&nbsp;</a></c24><c8><a href="../../../librustc/middle/ty.rs.html#447">ty::FnSig</a></c8><c3>,</c3><c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;45</ln><a id="45">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;46</ln><a id="46">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;Adapter&nbsp;object&nbsp;for&nbsp;handling&nbsp;native&nbsp;ABI&nbsp;rules&nbsp;(trust&nbsp;me,&nbsp;you
</c42><br/><ln>&nbsp;&nbsp;47</ln><a id="47">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;don't&nbsp;want&nbsp;to&nbsp;know)
</c42><br/><ln>&nbsp;&nbsp;48</ln><a id="48">&nbsp;</a><a id="n87981"><a id="n87983">&nbsp;</a></a><c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#48_4_refs">fn_ty:&nbsp;</a></c24><c8><a href="../../../librustc/middle/trans/cabi.rs.html#99">cabi::FnType</a></c8><c3>,</c3><c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;49</ln><a id="49">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;50</ln><a id="50">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;LLVM&nbsp;types&nbsp;that&nbsp;will&nbsp;appear&nbsp;on&nbsp;the&nbsp;foreign&nbsp;function
</c42><br/><ln>&nbsp;&nbsp;51</ln><a id="51">&nbsp;</a><a id="n87984"><a id="n87986">&nbsp;</a></a><c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#51_4_refs">llsig:&nbsp;</a></c24><c8><a href="../../../librustc/middle/trans/foreign.rs.html#56">LlvmSignature</a></c8><c3>,</c3><c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;52</ln><a id="52">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;53</ln><a id="53">&nbsp;</a>&nbsp;<c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;True&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;return&nbsp;value&nbsp;(not&nbsp;bottom,&nbsp;not&nbsp;unit)
</c42><br/><ln>&nbsp;&nbsp;54</ln><a id="54">&nbsp;</a><a id="n87989"><a id="n87987">&nbsp;</a></a><c31><a href="#41_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#54_4_refs">ret_def:&nbsp;</a></c24><c8><a href="#54_4_refs">bool</a></c8><c3>,</c3><c31><a href="#41_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;55</ln><a id="55">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;56</ln><a id="56">&nbsp;</a><a id="n87990">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;57</ln><a id="57">&nbsp;</a>&nbsp;<c31>struct</c31><c31><a href="#56_1_refs">&nbsp;LlvmSignature&nbsp;</a></c31><c3>{</c3><c31><a href="#56_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;58</ln><a id="58">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c40>//&nbsp;LLVM&nbsp;versions&nbsp;of&nbsp;the&nbsp;types&nbsp;of&nbsp;this&nbsp;function's&nbsp;arguments.
</c40><br/><ln>&nbsp;&nbsp;59</ln><a id="59">&nbsp;</a><a id="n87991"><a id="n87995"><a id="n87993">&nbsp;</a></a></a><c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#59_4_refs">llarg_tys:&nbsp;</a></c24><c8><a href="../../../libstd/vec.rs.html#n56401">Vec&lt;</a></c8><c8><a href="../../../librustc/middle/trans/type_.rs.html#27">Type</a></c8><c8><a href="../../../libstd/vec.rs.html#n56401">&gt;</a></c8><c31><a href="#56_1_refs">&nbsp;</a></c31><c3>,</c3><c31><a href="#56_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;60</ln><a id="60">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;61</ln><a id="61">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c40>//&nbsp;LLVM&nbsp;version&nbsp;of&nbsp;the&nbsp;type&nbsp;that&nbsp;this&nbsp;function&nbsp;returns.&nbsp;&nbsp;Note&nbsp;that
</c40><br/><ln>&nbsp;&nbsp;62</ln><a id="62">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c40>//&nbsp;this&nbsp;*may&nbsp;not&nbsp;be*&nbsp;the&nbsp;declared&nbsp;return&nbsp;type&nbsp;of&nbsp;the&nbsp;foreign
</c40><br/><ln>&nbsp;&nbsp;63</ln><a id="63">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c40>//&nbsp;function,&nbsp;because&nbsp;the&nbsp;foreign&nbsp;function&nbsp;may&nbsp;opt&nbsp;to&nbsp;return&nbsp;via&nbsp;an
</c40><br/><ln>&nbsp;&nbsp;64</ln><a id="64">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c40>//&nbsp;out&nbsp;pointer.
</c40><br/><ln>&nbsp;&nbsp;65</ln><a id="65">&nbsp;</a><a id="n87996"><a id="n87998">&nbsp;</a></a><c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#65_4_refs">llret_ty:&nbsp;</a></c24><c8><a href="../../../librustc/middle/trans/type_.rs.html#27">Type</a></c8><c3>,</c3><c31><a href="#56_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;66</ln><a id="66">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;67</ln><a id="67">&nbsp;</a>&nbsp;<c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c40>//&nbsp;True&nbsp;if&nbsp;*Rust*&nbsp;would&nbsp;use&nbsp;an&nbsp;outpointer&nbsp;for&nbsp;this&nbsp;function.
</c40><br/><ln>&nbsp;&nbsp;68</ln><a id="68">&nbsp;</a><a id="n87999"><a id="n88001">&nbsp;</a></a><c31><a href="#56_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#56_1_refs">sret:&nbsp;</a></c24><c8><a href="#56_1_refs">bool</a></c8><c3>,</c3><c31><a href="#56_1_refs">
</a></c31><br/><ln>&nbsp;&nbsp;69</ln><a id="69">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;70</ln><a id="70">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;&nbsp;71</ln><a id="71">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;&nbsp;72</ln><a id="72">&nbsp;</a>&nbsp;<c42>///////////////////////////////////////////////////////////////////////////
</c42><br/><ln>&nbsp;&nbsp;73</ln><a id="73">&nbsp;</a>&nbsp;<c40>//&nbsp;Calls&nbsp;to&nbsp;external&nbsp;functions
</c40><br/><ln>&nbsp;&nbsp;74</ln><a id="74">&nbsp;</a><a id="n88002">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;75</ln><a id="75">&nbsp;</a><a id="n88005"><a id="n88006"><a id="n88007">&nbsp;</a></a></a><c21>pub</c21><c1><a href="#74_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#74_1_refs">&nbsp;llvm_calling_convention</a></c30><c4>(</c4><c20><a href="#75_31_refs">ccx</a></c20><c1><a href="#74_1_refs">:&nbsp;</a></c1><c8><a href="#74_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#74_1_refs">
</a></c1><br/><ln>&nbsp;&nbsp;76</ln><a id="76">&nbsp;</a><a id="n88011"><a id="n88015"><a id="n88032"><a id="n88010"><a id="n88013">&nbsp;</a></a></a></a></a><c1><a href="#74_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#76_31_refs">abis</a></c20><c1><a href="#74_1_refs">:&nbsp;</a></c1><c8><a href="../../../libsyntax/abi.rs.html#n15045">AbiSet</a></c8><c4>)</c4><c1><a href="#74_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#74_1_refs">&nbsp;</a></c1><c8><a href="../../../libstd/option.rs.html#n104336">Option&lt;</a></c8><c8><a href="../../../librustc/lib/llvm.rs.html#30">CallConv</a></c8><c8><a href="../../../libstd/option.rs.html#n104336">&gt;</a></c8><c1><a href="#74_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#74_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;77</ln><a id="77">&nbsp;</a><a id="n88016"><a id="n88021"><a id="n88018"><a id="n88022"><a id="n88023"><a id="n88017"><a id="n88019"><a id="n88020">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#74_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#74_1_refs">&nbsp;</a></c22><c20><a href="#77_8_refs">os</a></c20><c13><a href="#74_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#75">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c24><a href="../../../librustc/driver/session.rs.html#177">.targ_cfg</a></c24><c24><a href="../../../librustc/driver/session.rs.html#34">.os</a></c24><c3>;</c3><c22><a href="#74_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;78</ln><a id="78">&nbsp;</a><a id="n88029"><a id="n88024"><a id="n88026"><a id="n88030"><a id="n88028"><a id="n88031"><a id="n88025"><a id="n88027">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#74_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#74_1_refs">&nbsp;</a></c22><c20><a href="#78_8_refs">arch</a></c20><c13><a href="#74_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#75">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c24><a href="../../../librustc/driver/session.rs.html#177">.targ_cfg</a></c24><c24><a href="../../../librustc/driver/session.rs.html#35">.arch</a></c24><c3>;</c3><c22><a href="#74_1_refs">
</a></c22><br/><ln>&nbsp;&nbsp;79</ln><a id="79">&nbsp;</a><a id="n88036"><a id="n88149"><a id="n88034"><a id="n88042"><a id="n88038"><a id="n88150"><a id="n88041"><a id="n88039"><a id="n88033"><a id="n88035"><a id="n88040"><a id="n88148">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#74_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#76">abis</a></c26><c10><a href="../../../libsyntax/abi.rs.html#n15724">.for_target</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#77">os</a></c26><c3>,</c3><c10><a href="../../../libsyntax/abi.rs.html#n15724">&nbsp;</a></c10><c26><a href="../../../librustc/middle/trans/foreign.rs.html#78">arch</a></c26><c4>)</c4><c10><a href="../../../libstd/option.rs.html#n105129">.map</a></c10><c4>(</c4><c1><a href="../../../libstd/option.rs.html#n105129">|</a></c1><c20><a href="#79_35_refs">abi</a></c20><c8><a href="../../../libstd/option.rs.html#n105129">|</a></c8><c1><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c1><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n105129">
</a></c22><br/><ln>&nbsp;&nbsp;80</ln><a id="80">&nbsp;</a><a id="n88147"><a id="n88043">&nbsp;</a></a><c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#79">abi</a></c26><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c3>{</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;81</ln><a id="81">&nbsp;</a><a id="n88044"><a id="n88085"><a id="n88086">&nbsp;</a></a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14588">RustIntrinsic</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n105129">
</a></c22><br/><ln>&nbsp;&nbsp;82</ln><a id="82">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Intrinsics&nbsp;are&nbsp;emitted&nbsp;by&nbsp;monomorphic&nbsp;fn
</c40><br/><ln>&nbsp;&nbsp;83</ln><a id="83">&nbsp;</a><a id="n88078"><a id="n88064"><a id="n88061"><a id="n88057"><a id="n88055"><a id="n88066"><a id="n88060"><a id="n88053"><a id="n88068"><a id="n88063"><a id="n88059"><a id="n88070"><a id="n88069"><a id="n88067"><a id="n88047"><a id="n88046"><a id="n88084"><a id="n88056"><a id="n88073"><a id="n88071"><a id="n88054"><a id="n88081"><a id="n88045"><a id="n88083"><a id="n88048"><a id="n88062"><a id="n88074"><a id="n88058"><a id="n88072"><a id="n88065"><a id="n88082"><a id="n88076"><a id="n88052"><a id="n88075"><a id="n88049">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#75">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c10><a href="../../../librustc/driver/session.rs.html#241">.bug</a></c10><c4>(</c4><c21><a href="../../../librustc/driver/session.rs.html#241">format!</a></c21><c4>(</c4><c1><a href="#83_39_refs">"asked&nbsp;to&nbsp;register&nbsp;intrinsic&nbsp;</a></c1><c30>fn</c30><c30><a href="#83_39_refs">"</a></c30><c30>));</c30><c30><a href="../../../libstd/option.rs.html#n105129">
</a></c30><br/><ln>&nbsp;&nbsp;84</ln><a id="84">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;85</ln><a id="85">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;86</ln><a id="86">&nbsp;</a><a id="n88128"><a id="n88129"><a id="n88087">&nbsp;</a></a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14585">Rust</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n105129">
</a></c22><br/><ln>&nbsp;&nbsp;87</ln><a id="87">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;FIXME(#3678)&nbsp;Implement&nbsp;linking&nbsp;to&nbsp;foreign&nbsp;fns&nbsp;with&nbsp;Rust&nbsp;ABI
</c40><br/><ln>&nbsp;&nbsp;88</ln><a id="88">&nbsp;</a><a id="n88089"><a id="n88088"><a id="n88126"><a id="n88127">&nbsp;</a></a></a></a><c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#75">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c13><a href="../../../librustc/driver/session.rs.html#247">.unimpl</a></c13><c4>(</c4><c13><a href="../../../librustc/driver/session.rs.html#247">
</a></c13><br/><ln>&nbsp;&nbsp;89</ln><a id="89">&nbsp;</a><a id="n88090"><a id="n88125"><a id="n88108"><a id="n88100"><a id="n88102"><a id="n88097"><a id="n88113"><a id="n88104"><a id="n88106"><a id="n88103"><a id="n88098"><a id="n88116"><a id="n88091"><a id="n88101"><a id="n88099"><a id="n88117"><a id="n88095"><a id="n88110"><a id="n88092"><a id="n88096"><a id="n88124"><a id="n88105"><a id="n88121"><a id="n88107"><a id="n88109"><a id="n88118"><a id="n88114"><a id="n88115"><a id="n88111"><a id="n88119"><a id="n88112">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c13><a href="../../../librustc/driver/session.rs.html#247">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c21><a href="../../../libstd/option.rs.html#n105129">format!</a></c21><c4>(</c4><c22><a href="#89_28_refs">"foreign&nbsp;functions&nbsp;with&nbsp;Rust&nbsp;ABI"</a></c22><c4>))</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n105129">
</a></c22><br/><ln>&nbsp;&nbsp;90</ln><a id="90">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;91</ln><a id="91">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;92</ln><a id="92">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c40>//&nbsp;It's&nbsp;the&nbsp;ABI's&nbsp;job&nbsp;to&nbsp;select&nbsp;this,&nbsp;not&nbsp;us.
</c40><br/><ln>&nbsp;&nbsp;93</ln><a id="93">&nbsp;</a><a id="n88133"><a id="n88131"><a id="n88130"><a id="n88132"><a id="n88134">&nbsp;</a></a></a></a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14587">System</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#75">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c10><a href="../../../librustc/driver/session.rs.html#241">.bug</a></c10><c4>(</c4><c12><a href="../../../libstd/option.rs.html#n105129">"system&nbsp;abi&nbsp;should&nbsp;be&nbsp;selected&nbsp;elsewhere"</a></c12><c4>)</c4><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;94</ln><a id="94">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;95</ln><a id="95">&nbsp;</a><a id="n88136"><a id="n88135">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14581">Stdcall</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/lib/llvm.rs.html#35">lib::llvm::X86StdcallCallConv</a></c26><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;96</ln><a id="96">&nbsp;</a><a id="n88137"><a id="n88138">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14582">Fastcall</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/lib/llvm.rs.html#36">lib::llvm::X86FastcallCallConv</a></c26><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;97</ln><a id="97">&nbsp;</a><a id="n88140"><a id="n88139">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14586">C</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/lib/llvm.rs.html#32">lib::llvm::CCallConv</a></c26><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;98</ln><a id="98">&nbsp;</a><a id="n88141"><a id="n88142">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14584">Win64</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/lib/llvm.rs.html#37">lib::llvm::X86_64_Win64</a></c26><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;&nbsp;99</ln><a id="99">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;100</ln><a id="100">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c40>//&nbsp;These&nbsp;API&nbsp;constants&nbsp;ought&nbsp;to&nbsp;be&nbsp;more&nbsp;specific...
</c40><br/><ln>&nbsp;101</ln><a id="101">&nbsp;</a><a id="n88143"><a id="n88144">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14580">Cdecl</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/lib/llvm.rs.html#32">lib::llvm::CCallConv</a></c26><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;102</ln><a id="102">&nbsp;</a><a id="n88146"><a id="n88145">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libsyntax/abi.rs.html#n14583">Aapcs</a></c20><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;</a></c21><c26><a href="../../../librustc/lib/llvm.rs.html#32">lib::llvm::CCallConv</a></c26><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n105129">
</a></c21><br/><ln>&nbsp;103</ln><a id="103">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n105129">
</a></c22><br/><ln>&nbsp;104</ln><a id="104">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n105129">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c22><a href="#74_1_refs">
</a></c22><br/><ln>&nbsp;105</ln><a id="105">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;106</ln><a id="106">&nbsp;</a><a id="n88151">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;107</ln><a id="107">&nbsp;</a><a id="n88156"><a id="n88158"><a id="n88155"><a id="n88154"><a id="n88160"><a id="n88161">&nbsp;</a></a></a></a></a></a><c21>pub</c21><c1><a href="#106_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#106_1_refs">&nbsp;llvm_linkage_by_name</a></c30><c4>(</c4><c20><a href="#107_28_refs">name</a></c20><c1><a href="#106_1_refs">:&nbsp;</a></c1><c8><a href="#106_1_refs">&amp;str</a></c8><c4>)</c4><c1><a href="#106_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#106_1_refs">&nbsp;</a></c1><c8><a href="../../../libstd/option.rs.html#n104336">Option&lt;</a></c8><c8><a href="../../../librustc/lib/llvm.rs.html#49">Linkage</a></c8><c8><a href="../../../libstd/option.rs.html#n104336">&gt;</a></c8><c1><a href="#106_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#106_1_refs">
</a></c22><br/><ln>&nbsp;108</ln><a id="108">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Use&nbsp;the&nbsp;names&nbsp;from&nbsp;src/llvm/docs/LangRef.rst&nbsp;here.&nbsp;Most&nbsp;types&nbsp;are&nbsp;only
</c40><br/><ln>&nbsp;109</ln><a id="109">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;applicable&nbsp;to&nbsp;variable&nbsp;declarations&nbsp;and&nbsp;may&nbsp;not&nbsp;really&nbsp;make&nbsp;sense&nbsp;for
</c40><br/><ln>&nbsp;110</ln><a id="110">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Rust&nbsp;code&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;but&nbsp;whitelist&nbsp;them&nbsp;anyway&nbsp;and&nbsp;trust&nbsp;that
</c40><br/><ln>&nbsp;111</ln><a id="111">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;the&nbsp;user&nbsp;knows&nbsp;what&nbsp;s/he's&nbsp;doing.&nbsp;Who&nbsp;knows,&nbsp;unanticipated&nbsp;use&nbsp;cases
</c40><br/><ln>&nbsp;112</ln><a id="112">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;may&nbsp;pop&nbsp;up&nbsp;in&nbsp;the&nbsp;future.
</c40><br/><ln>&nbsp;113</ln><a id="113">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//
</c40><br/><ln>&nbsp;114</ln><a id="114">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;ghost,&nbsp;dllimport,&nbsp;dllexport&nbsp;and&nbsp;linkonce_odr_autohide&nbsp;are&nbsp;not&nbsp;supported
</c40><br/><ln>&nbsp;115</ln><a id="115">&nbsp;</a>&nbsp;<c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;and&nbsp;don't&nbsp;have&nbsp;to&nbsp;be,&nbsp;LLVM&nbsp;treats&nbsp;them&nbsp;as&nbsp;no-ops.
</c40><br/><ln>&nbsp;116</ln><a id="116">&nbsp;</a><a id="n88220"><a id="n88162">&nbsp;</a></a><c22><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#107">name</a></c26><c21><a href="#106_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;117</ln><a id="117">&nbsp;</a><a id="n88166"><a id="n88163"><a id="n88165"><a id="n88167"><a id="n88164">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"appending"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#57">lib::llvm::AppendingLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;118</ln><a id="118">&nbsp;</a><a id="n88171"><a id="n88168"><a id="n88170"><a id="n88169"><a id="n88172">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"available_externally"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#52">lib::llvm::AvailableExternallyLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;119</ln><a id="119">&nbsp;</a><a id="n88176"><a id="n88174"><a id="n88175"><a id="n88173"><a id="n88177">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"common"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#61">lib::llvm::CommonLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;120</ln><a id="120">&nbsp;</a><a id="n88178"><a id="n88179"><a id="n88181"><a id="n88182"><a id="n88180">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"extern_weak"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#60">lib::llvm::ExternalWeakLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;121</ln><a id="121">&nbsp;</a><a id="n88183"><a id="n88185"><a id="n88184"><a id="n88186"><a id="n88187">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"external"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#51">lib::llvm::ExternalLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;122</ln><a id="122">&nbsp;</a><a id="n88190"><a id="n88189"><a id="n88191"><a id="n88188"><a id="n88192">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"internal"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#58">lib::llvm::InternalLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;123</ln><a id="123">&nbsp;</a><a id="n88197"><a id="n88195"><a id="n88193"><a id="n88196"><a id="n88194">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"linkonce"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#53">lib::llvm::LinkOnceAnyLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;124</ln><a id="124">&nbsp;</a><a id="n88198"><a id="n88199"><a id="n88200"><a id="n88202"><a id="n88201">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"linkonce_odr"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#54">lib::llvm::LinkOnceODRLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;125</ln><a id="125">&nbsp;</a><a id="n88207"><a id="n88204"><a id="n88205"><a id="n88203"><a id="n88206">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"private"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#59">lib::llvm::PrivateLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;126</ln><a id="126">&nbsp;</a><a id="n88211"><a id="n88210"><a id="n88212"><a id="n88209"><a id="n88208">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"weak"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#55">lib::llvm::WeakAnyLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;127</ln><a id="127">&nbsp;</a><a id="n88213"><a id="n88216"><a id="n88217"><a id="n88215"><a id="n88214">&nbsp;</a></a></a></a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">"weak_odr"</a></c20><c12><a href="#106_1_refs">&nbsp;</a></c12><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#56">lib::llvm::WeakODRLinkage</a></c26><c4>)</c4><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;128</ln><a id="128">&nbsp;</a><a id="n88218"><a id="n88219">&nbsp;</a></a><c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#106_1_refs">_</a></c20><c21><a href="#106_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#106_1_refs">&nbsp;</a></c21><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c21><a href="#106_1_refs">
</a></c21><br/><ln>&nbsp;129</ln><a id="129">&nbsp;</a>&nbsp;<c21><a href="#106_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#106_1_refs">
</a></c22><br/><ln>&nbsp;130</ln><a id="130">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;131</ln><a id="131">&nbsp;</a><a id="n88221">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;132</ln><a id="132">&nbsp;</a><a id="n88224"><a id="n88226"><a id="n88225">&nbsp;</a></a></a><c21>pub</c21><c1><a href="#131_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#131_1_refs">&nbsp;register_static</a></c30><c4>(</c4><c20><a href="#132_23_refs">ccx</a></c20><c1><a href="#131_1_refs">:&nbsp;</a></c1><c8><a href="#131_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#131_1_refs">
</a></c1><br/><ln>&nbsp;133</ln><a id="133">&nbsp;</a><a id="n88229"><a id="n88259"><a id="n88230"><a id="n88231"><a id="n88233">&nbsp;</a></a></a></a></a><c1><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#133_23_refs">foreign_item</a></c20><c1><a href="#131_1_refs">:&nbsp;</a></c1><c8><a href="#131_1_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n70566">ast::ForeignItem</a></c8><c4>)</c4><c1><a href="#131_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#131_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c1><a href="#131_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;134</ln><a id="134">&nbsp;</a><a id="n88238"><a id="n88237"><a id="n88240"><a id="n88236"><a id="n88242"><a id="n88235"><a id="n88234"><a id="n88239"><a id="n88243"><a id="n88241">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#134_8_refs">ty</a></c20><c13><a href="#131_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/ty.rs.html#2728">ty::node_id_to_type</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>()</c4><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#133">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.id</a></c24><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;135</ln><a id="135">&nbsp;</a><a id="n88250"><a id="n88248"><a id="n88251"><a id="n88245"><a id="n88247"><a id="n88249"><a id="n88244"><a id="n88246">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#135_8_refs">llty</a></c20><c16><a href="#131_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/type_of.rs.html#169">type_of::type_of</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#134">ty</a></c26><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;136</ln><a id="136">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;137</ln><a id="137">&nbsp;</a><a id="n88253"><a id="n88252"><a id="n88256"><a id="n88255"><a id="n88254"><a id="n88258"><a id="n88257">&nbsp;</a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#137_8_refs">ident</a></c20><c13><a href="#131_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#801">link_name</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#133">foreign_item</a></c26><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;138</ln><a id="138">&nbsp;</a><a id="n88263"><a id="n88261"><a id="n88265"><a id="n88408"><a id="n88262"><a id="n88260">&nbsp;</a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#131_1_refs">&nbsp;</a></c21><c26><a href="../../../libsyntax/attr.rs.html#n2997">attr::first_attr_value_str_by_name</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#133">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.attrs</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#131_1_refs">
</a></c27><br/><ln>&nbsp;139</ln><a id="139">&nbsp;</a><a id="n88264">&nbsp;</a><c27><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c12><a href="#131_1_refs">"linkage"</a></c12><c4>)</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;140</ln><a id="140">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c40>//&nbsp;If&nbsp;this&nbsp;is&nbsp;a&nbsp;static&nbsp;with&nbsp;a&nbsp;linkage&nbsp;specified,&nbsp;then&nbsp;we&nbsp;need&nbsp;to&nbsp;handle
</c40><br/><ln>&nbsp;141</ln><a id="141">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c40>//&nbsp;it&nbsp;a&nbsp;little&nbsp;specially.&nbsp;The&nbsp;typesystem&nbsp;prevents&nbsp;things&nbsp;like&nbsp;&amp;T&nbsp;and
</c40><br/><ln>&nbsp;142</ln><a id="142">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c40>//&nbsp;extern&nbsp;"C"&nbsp;fn()&nbsp;from&nbsp;being&nbsp;non-null,&nbsp;so&nbsp;we&nbsp;can't&nbsp;just&nbsp;declare&nbsp;a
</c40><br/><ln>&nbsp;143</ln><a id="143">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c40>//&nbsp;static&nbsp;and&nbsp;call&nbsp;it&nbsp;a&nbsp;day.&nbsp;Some&nbsp;linkages&nbsp;(like&nbsp;weak)&nbsp;will&nbsp;make&nbsp;it&nbsp;such
</c40><br/><ln>&nbsp;144</ln><a id="144">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c40>//&nbsp;that&nbsp;the&nbsp;static&nbsp;actually&nbsp;has&nbsp;a&nbsp;null&nbsp;value.
</c40><br/><ln>&nbsp;145</ln><a id="145">&nbsp;</a><a id="n88267"><a id="n88386"><a id="n88266"><a id="n88316">&nbsp;</a></a></a></a><c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#145_13_refs">name</a></c20><c4>)</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;146</ln><a id="146">&nbsp;</a><a id="n88274"><a id="n88271"><a id="n88289"><a id="n88269"><a id="n88272"><a id="n88268"><a id="n88273"><a id="n88270"><a id="n88288">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#146_16_refs">linkage</a></c20><c16><a href="#131_1_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#131_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#106">llvm_linkage_by_name</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#145">name</a></c26><c10><a href="../../../libsyntax/parse/token.rs.html#n123571">.get</a></c10><c4>())</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;147</ln><a id="147">&nbsp;</a><a id="n88277"><a id="n88276"><a id="n88275">&nbsp;</a></a></a><c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#147_21_refs">linkage</a></c20><c4>)</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#147">linkage</a></c26><c3>,</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;148</ln><a id="148">&nbsp;</a><a id="n88287"><a id="n88286"><a id="n88278">&nbsp;</a></a></a><c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#131_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;149</ln><a id="149">&nbsp;</a><a id="n88279"><a id="n88282"><a id="n88281"><a id="n88280"><a id="n88285"><a id="n88284">&nbsp;</a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c10><a href="../../../librustc/driver/session.rs.html#202">.span_fatal</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#133">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.span</a></c24><c3>,</c3><c10><a href="../../../librustc/driver/session.rs.html#202">
</a></c10><br/><ln>&nbsp;150</ln><a id="150">&nbsp;</a><a id="n88283">&nbsp;</a><c10><a href="../../../librustc/driver/session.rs.html#202">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c10><c12><a href="../../../librustc/driver/session.rs.html#202">"invalid&nbsp;linkage&nbsp;specified"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;151</ln><a id="151">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;152</ln><a id="152">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;153</ln><a id="153">&nbsp;</a><a id="n88292"><a id="n88290"><a id="n88295"><a id="n88294"><a id="n88315"><a id="n88291"><a id="n88314"><a id="n88296"><a id="n88293">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#153_16_refs">llty2</a></c20><c13><a href="#131_1_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#131_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/ty.rs.html#395">ty::get</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#134">ty</a></c26><c4>)</c4><c24><a href="../../../librustc/middle/ty.rs.html#375">.sty</a></c24><c21><a href="#131_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;154</ln><a id="154">&nbsp;</a><a id="n88302"><a id="n88298"><a id="n88300"><a id="n88301"><a id="n88297"><a id="n88299"><a id="n88303">&nbsp;</a></a></a></a></a></a></a><c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../librustc/middle/ty.rs.html#739">ty::ty_ptr</a></c20><c4>(</c4><c20><a href="#154_27_refs">ref&nbsp;mt</a></c20><c4>)</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/type_of.rs.html#169">type_of::type_of</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#154">mt</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#128">.ty</a></c24><c4>)</c4><c3>,</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;155</ln><a id="155">&nbsp;</a><a id="n88313"><a id="n88304"><a id="n88312">&nbsp;</a></a></a><c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#131_1_refs">_</a></c20><c21><a href="#131_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;156</ln><a id="156">&nbsp;</a><a id="n88310"><a id="n88311"><a id="n88307"><a id="n88306"><a id="n88308"><a id="n88305">&nbsp;</a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c13><a href="../../../librustc/driver/session.rs.html#202">.span_fatal</a></c13><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#133">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.span</a></c24><c3>,</c3><c13><a href="../../../librustc/driver/session.rs.html#202">
</a></c13><br/><ln>&nbsp;157</ln><a id="157">&nbsp;</a><a id="n88309">&nbsp;</a><c13><a href="../../../librustc/driver/session.rs.html#202">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c12><a href="../../../librustc/driver/session.rs.html#202">"must&nbsp;have&nbsp;</a></c12><c35>type</c35><c35><a href="../../../librustc/driver/session.rs.html#202">&nbsp;`*T`&nbsp;or&nbsp;`*mut&nbsp;T`"</a></c35><c35>);</c35><c35><a href="#131_1_refs">
</a></c35><br/><ln>&nbsp;158</ln><a id="158">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;159</ln><a id="159">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;160</ln><a id="160">&nbsp;</a><a id="n88383"><a id="n88385">&nbsp;</a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>unsafe</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;161</ln><a id="161">&nbsp;</a><a id="n88324"><a id="n88338"><a id="n88323"><a id="n88320"><a id="n88327"><a id="n88317"><a id="n88319"><a id="n88321"><a id="n88318"><a id="n88337"><a id="n88326"><a id="n88325"><a id="n88335"><a id="n88336">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#161_20_refs">g1</a></c20><c16><a href="#131_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#137">ident</a></c26><c10><a href="../../../libsyntax/parse/token.rs.html#n123571">.get</a></c10><c4>()</c4><c10><a href="../../../libstd/c_str.rs.html#n132053">.with_c_str</a></c10><c4>(</c4><c1><a href="../../../libstd/c_str.rs.html#n132053">|</a></c1><c20><a href="#161_49_refs">buf</a></c20><c8><a href="#131_1_refs">|</a></c8><c1><a href="../../../libstd/c_str.rs.html#n132053">&nbsp;</a></c1><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;162</ln><a id="162">&nbsp;</a><a id="n88330"><a id="n88328"><a id="n88332"><a id="n88333"><a id="n88334"><a id="n88331"><a id="n88329">&nbsp;</a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517080">llvm::LLVMAddGlobal</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#40">.llmod</a></c24><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#153">llty2</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#161">buf</a></c26><c4>)</c4><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;163</ln><a id="163">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;164</ln><a id="164">&nbsp;</a><a id="n88343"><a id="n88342"><a id="n88341"><a id="n88340"><a id="n88339">&nbsp;</a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/lib/llvm.rs.html#1785">lib::llvm::SetLinkage</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#161">g1</a></c26><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#146">linkage</a></c26><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;165</ln><a id="165">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;166</ln><a id="166">&nbsp;</a><a id="n88350"><a id="n88347"><a id="n88344"><a id="n88346"><a id="n88351"><a id="n88345"><a id="n88348"><a id="n88349">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#166_20_refs">real_name</a></c20><c13><a href="#131_1_refs">&nbsp;=&nbsp;</a></c13><c12><a href="#131_1_refs">"_rust_extern_with_linkage_"</a></c12><c5><a href="#131_1_refs">&nbsp;+&nbsp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#137">ident</a></c26><c10><a href="../../../libsyntax/parse/token.rs.html#n123571">.get</a></c10><c4>()</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;167</ln><a id="167">&nbsp;</a><a id="n88369"><a id="n88361"><a id="n88360"><a id="n88357"><a id="n88354"><a id="n88370"><a id="n88359"><a id="n88372"><a id="n88352"><a id="n88355"><a id="n88371"><a id="n88353"><a id="n88358">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#131_1_refs">&nbsp;</a></c22><c20><a href="#167_20_refs">g2</a></c20><c16><a href="#131_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#166">real_name</a></c26><c10><a href="../../../libstd/c_str.rs.html#n132053">.with_c_str</a></c10><c4>(</c4><c1><a href="#131_1_refs">|</a></c1><c20><a href="#167_47_refs">buf</a></c20><c8><a href="#131_1_refs">|</a></c8><c1><a href="#131_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;168</ln><a id="168">&nbsp;</a><a id="n88366"><a id="n88362"><a id="n88364"><a id="n88365"><a id="n88368"><a id="n88367"><a id="n88363">&nbsp;</a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517080">llvm::LLVMAddGlobal</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#40">.llmod</a></c24><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#135">llty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#167">buf</a></c26><c4>)</c4><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;169</ln><a id="169">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;170</ln><a id="170">&nbsp;</a><a id="n88373"><a id="n88374"><a id="n88375"><a id="n88376"><a id="n88377">&nbsp;</a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/lib/llvm.rs.html#1785">lib::llvm::SetLinkage</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#167">g2</a></c26><c3>,</c3><c13><a href="#131_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/lib/llvm.rs.html#58">lib::llvm::InternalLinkage</a></c26><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;171</ln><a id="171">&nbsp;</a><a id="n88382"><a id="n88378"><a id="n88380"><a id="n88381"><a id="n88379">&nbsp;</a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517169">llvm::LLVMSetInitializer</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#167">g2</a></c26><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#161">g1</a></c26><c4>)</c4><c3>;</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;172</ln><a id="172">&nbsp;</a><a id="n88384">&nbsp;</a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#167">g2</a></c26><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;173</ln><a id="173">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;174</ln><a id="174">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;175</ln><a id="175">&nbsp;</a><a id="n88388"><a id="n88407"><a id="n88387">&nbsp;</a></a></a><c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#131_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#131_1_refs">&nbsp;</a></c21><c22><a href="#131_1_refs">unsafe&nbsp;</a></c22><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;176</ln><a id="176">&nbsp;</a><a id="n88393"><a id="n88394"><a id="n88404"><a id="n88406"><a id="n88396"><a id="n88405"><a id="n88395"><a id="n88392"><a id="n88389"><a id="n88390">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#137">ident</a></c26><c10><a href="../../../libsyntax/parse/token.rs.html#n123571">.get</a></c10><c4>()</c4><c10><a href="../../../libstd/c_str.rs.html#n132053">.with_c_str</a></c10><c4>(</c4><c1><a href="../../../libstd/c_str.rs.html#n132053">|</a></c1><c20><a href="#176_36_refs">buf</a></c20><c8><a href="../../../libstd/c_str.rs.html#n132053">|</a></c8><c1><a href="../../../libstd/c_str.rs.html#n132053">&nbsp;</a></c1><c3>{</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;177</ln><a id="177">&nbsp;</a><a id="n88399"><a id="n88402"><a id="n88401"><a id="n88397"><a id="n88398"><a id="n88403"><a id="n88400">&nbsp;</a></a></a></a></a></a></a><c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517080">llvm::LLVMAddGlobal</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#132">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#40">.llmod</a></c24><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#135">llty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#131_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#176">buf</a></c26><c4>)</c4><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;178</ln><a id="178">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;179</ln><a id="179">&nbsp;</a>&nbsp;<c22><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#131_1_refs">
</a></c21><br/><ln>&nbsp;180</ln><a id="180">&nbsp;</a>&nbsp;<c21><a href="#131_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#131_1_refs">
</a></c22><br/><ln>&nbsp;181</ln><a id="181">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;182</ln><a id="182">&nbsp;</a><a id="n88409">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;183</ln><a id="183">&nbsp;</a><a id="n88413"><a id="n88417"><a id="n88414"><a id="n88418"><a id="n88412">&nbsp;</a></a></a></a></a><c21>pub</c21><c1><a href="#182_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#182_1_refs">&nbsp;register_foreign_item_fn</a></c30><c4>(</c4><c20><a href="#183_32_refs">ccx</a></c20><c1><a href="#182_1_refs">:&nbsp;</a></c1><c8><a href="#182_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#182_1_refs">&nbsp;</a></c1><c20><a href="#183_52_refs">abis</a></c20><c1><a href="#182_1_refs">:&nbsp;</a></c1><c8><a href="../../../libsyntax/abi.rs.html#n15045">AbiSet</a></c8><c3>,</c3><c1><a href="#182_1_refs">
</a></c1><br/><ln>&nbsp;184</ln><a id="184">&nbsp;</a><a id="n88796"><a id="n88422"><a id="n88425"><a id="n88423"><a id="n88421">&nbsp;</a></a></a></a></a><c1><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#184_32_refs">foreign_item</a></c20><c1><a href="#182_1_refs">:&nbsp;</a></c1><c8><a href="#182_1_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n70566">ast::ForeignItem</a></c8><c4>)</c4><c1><a href="#182_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#182_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c1><a href="#182_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;185</ln><a id="185">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c41>/*!
</c41><br/><ln>&nbsp;186</ln><a id="186">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Registers&nbsp;a&nbsp;foreign&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;library.
</c41><br/><ln>&nbsp;187</ln><a id="187">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Just&nbsp;adds&nbsp;a&nbsp;LLVM&nbsp;global.
</c41><br/><ln>&nbsp;188</ln><a id="188">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</c41><br/><ln>&nbsp;189</ln><a id="189">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;190</ln><a id="190">&nbsp;</a><a id="n88503"><a id="n88532"><a id="n88551"><a id="n88525"><a id="n88494"><a id="n88518"><a id="n88517"><a id="n88528"><a id="n88554"><a id="n88558"><a id="n88490"><a id="n88491"><a id="n88508"><a id="n88504"><a id="n88524"><a id="n88547"><a id="n88487"><a id="n88513"><a id="n88552"><a id="n88500"><a id="n88529"><a id="n88495"><a id="n88488"><a id="n88496"><a id="n88556"><a id="n88522"><a id="n88509"><a id="n88527"><a id="n88533"><a id="n88521"><a id="n88492"><a id="n88497"><a id="n88516"><a id="n88481"><a id="n88519"><a id="n88514"><a id="n88523"><a id="n88506"><a id="n88550"><a id="n88548"><a id="n88501"><a id="n88530"><a id="n88511"><a id="n88493"><a id="n88555"><a id="n88483"><a id="n88507"><a id="n88489"><a id="n88575"><a id="n88502"><a id="n88553"><a id="n88512"><a id="n88473"><a id="n88572"><a id="n88499"><a id="n88549"><a id="n88486"><a id="n88520"><a id="n88505"><a id="n88531"><a id="n88557"><a id="n88510"><a id="n88526"><a id="n88559"><a id="n88485"><a id="n88482"><a id="n88498"><a id="n88546"><a id="n88477"><a id="n88484"><a id="n88515"><a id="n88478">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c1><a href="#190_11_refs">"register_foreign_item_fn</a></c1><c4>(</c4><c1><a href="#190_11_refs">abis=</a></c1><c3>{},</c3><c1><a href="#190_11_refs">&nbsp;\
</a></c1><br/><ln>&nbsp;191</ln><a id="191">&nbsp;</a>&nbsp;<c1><a href="#190_11_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path=</a></c1><c3>{},</c3><c1><a href="#190_11_refs">&nbsp;\
</a></c1><br/><ln>&nbsp;192</ln><a id="192">&nbsp;</a>&nbsp;<c1><a href="#190_11_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreign_item.id=</a></c1><c3>{}</c3><c4>)</c4><c1><a href="#190_11_refs">"</a></c1><c3>,</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;193</ln><a id="193">&nbsp;</a><a id="n88460"><a id="n88537"><a id="n88534"><a id="n88458"><a id="n88462"><a id="n88536"><a id="n88535"><a id="n88459"><a id="n88461"><a id="n88474">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">abis</a></c26><c20><a href="#193_11_refs">.repr</a></c20><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>())</c4><c3>,</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;194</ln><a id="194">&nbsp;</a><a id="n88463"><a id="n88538"><a id="n88541"><a id="n88467"><a id="n88540"><a id="n88469"><a id="n88464"><a id="n88465"><a id="n88466"><a id="n88475"><a id="n88539"><a id="n88468">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#101">.tcx</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#285">.map</a></c24><c10><a href="../../../libsyntax/ast_map.rs.html#n76624">.path_to_str</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#184">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.id</a></c24><c4>)</c4><c3>,</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;195</ln><a id="195">&nbsp;</a><a id="n88476"><a id="n88542"><a id="n88470"><a id="n88543"><a id="n88545"><a id="n88472"><a id="n88471"><a id="n88544">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#184">foreign_item</a></c26><c26><a href="../../../librustc/middle/trans/foreign.rs.html#195">.id</a></c26><c4>)</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;196</ln><a id="196">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;197</ln><a id="197">&nbsp;</a><a id="n88585"><a id="n88661"><a id="n88587"><a id="n88660"><a id="n88583"><a id="n88586"><a id="n88584"><a id="n88582"><a id="n88581">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#182_1_refs">&nbsp;</a></c22><c20><a href="#197_8_refs">cc</a></c20><c16><a href="#182_1_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#182_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#74">llvm_calling_convention</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c3>,</c3><c27><a href="#182_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">abis</a></c26><c4>)</c4><c21><a href="#182_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#182_1_refs">
</a></c21><br/><ln>&nbsp;198</ln><a id="198">&nbsp;</a><a id="n88589"><a id="n88590"><a id="n88588">&nbsp;</a></a></a><c21><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#198_13_refs">cc</a></c20><c4>)</c4><c21><a href="#182_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#182_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#198">cc</a></c26><c3>,</c3><c21><a href="#182_1_refs">
</a></c21><br/><ln>&nbsp;199</ln><a id="199">&nbsp;</a><a id="n88658"><a id="n88659"><a id="n88591">&nbsp;</a></a></a><c21><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#182_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#182_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;200</ln><a id="200">&nbsp;</a><a id="n88595"><a id="n88592"><a id="n88594"><a id="n88593"><a id="n88656"><a id="n88657">&nbsp;</a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c13><a href="../../../librustc/driver/session.rs.html#202">.span_fatal</a></c13><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#184">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.span</a></c24><c3>,</c3><c13><a href="../../../librustc/driver/session.rs.html#202">
</a></c13><br/><ln>&nbsp;201</ln><a id="201">&nbsp;</a><a id="n88641"><a id="n88609"><a id="n88647"><a id="n88615"><a id="n88619"><a id="n88643"><a id="n88646"><a id="n88637"><a id="n88627"><a id="n88624"><a id="n88623"><a id="n88608"><a id="n88645"><a id="n88644"><a id="n88613"><a id="n88618"><a id="n88639"><a id="n88631"><a id="n88603"><a id="n88611"><a id="n88626"><a id="n88655"><a id="n88628"><a id="n88642"><a id="n88604"><a id="n88610"><a id="n88654"><a id="n88651"><a id="n88625"><a id="n88636"><a id="n88620"><a id="n88612"><a id="n88607"><a id="n88614"><a id="n88616"><a id="n88638"><a id="n88649"><a id="n88622"><a id="n88640"><a id="n88617"><a id="n88630"><a id="n88621"><a id="n88629"><a id="n88648"><a id="n88601">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c13><a href="../../../librustc/driver/session.rs.html#202">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c21><a href="#182_1_refs">format!</a></c21><c4>(</c4><c14><a href="../../../libstd/option.rs.html#n104337">"ABI&nbsp;`</a></c14><c3>{}</c3><c14><a href="../../../libstd/option.rs.html#n104337">`&nbsp;has&nbsp;no&nbsp;suitable&nbsp;calling&nbsp;convention&nbsp;\
</a></c14><br/><ln>&nbsp;202</ln><a id="202">&nbsp;</a>&nbsp;<c14><a href="../../../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c14><c21>for</c21><c14><a href="../../../libstd/option.rs.html#n104337">&nbsp;target&nbsp;architecture"</a></c14><c3>,</c3><c21><a href="#182_1_refs">
</a></c21><br/><ln>&nbsp;203</ln><a id="203">&nbsp;</a><a id="n88632"><a id="n88634"><a id="n88599"><a id="n88635"><a id="n88600"><a id="n88602"><a id="n88597"><a id="n88633"><a id="n88596"><a id="n88598">&nbsp;</a></a></a></a></a></a></a></a></a></a><c21><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">abis</a></c26><c26><a href="../../../libstd/fmt/mod.rs.html#n169877">.user_string</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>())))</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;204</ln><a id="204">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#182_1_refs">
</a></c21><br/><ln>&nbsp;205</ln><a id="205">&nbsp;</a>&nbsp;<c21><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;206</ln><a id="206">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;207</ln><a id="207">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Register&nbsp;the&nbsp;function&nbsp;as&nbsp;a&nbsp;C&nbsp;extern&nbsp;fn
</c40><br/><ln>&nbsp;208</ln><a id="208">&nbsp;</a><a id="n88664"><a id="n88662"><a id="n88665"><a id="n88663"><a id="n88666"><a id="n88667"><a id="n88668">&nbsp;</a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#182_1_refs">&nbsp;</a></c22><c20><a href="#208_8_refs">lname</a></c20><c13><a href="#182_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#801">link_name</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#184">foreign_item</a></c26><c4>)</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;209</ln><a id="209">&nbsp;</a><a id="n88677"><a id="n88675"><a id="n88674"><a id="n88671"><a id="n88672"><a id="n88670"><a id="n88673"><a id="n88676"><a id="n88669">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#182_1_refs">&nbsp;</a></c22><c20><a href="#209_8_refs">tys</a></c20><c16><a href="#182_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#828">foreign_types_for_id</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c3>,</c3><c27><a href="#182_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#184">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.id</a></c24><c4>)</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;210</ln><a id="210">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;211</ln><a id="211">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;calling&nbsp;convention&nbsp;is&nbsp;right&nbsp;for&nbsp;variadic&nbsp;functions
</c40><br/><ln>&nbsp;212</ln><a id="212">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;(should've&nbsp;been&nbsp;caught&nbsp;if&nbsp;not&nbsp;in&nbsp;typeck)
</c40><br/><ln>&nbsp;213</ln><a id="213">&nbsp;</a><a id="n88680"><a id="n88678"><a id="n88760"><a id="n88758"><a id="n88679"><a id="n88759">&nbsp;</a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#182_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#209">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#44">.fn_sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#452">.variadic</a></c24><c21><a href="#182_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;214</ln><a id="214">&nbsp;</a><a id="n88683"><a id="n88681"><a id="n88682">&nbsp;</a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert!</a></c22><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#197">cc</a></c26><c5><a href="#182_1_refs">&nbsp;==&nbsp;</a></c5><c26><a href="../../../librustc/lib/llvm.rs.html#32">lib::llvm::CCallConv</a></c26><c4>)</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;215</ln><a id="215">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;216</ln><a id="216">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;217</ln><a id="217">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Create&nbsp;the&nbsp;LLVM&nbsp;value&nbsp;for&nbsp;the&nbsp;C&nbsp;extern&nbsp;fn
</c40><br/><ln>&nbsp;218</ln><a id="218">&nbsp;</a><a id="n88764"><a id="n88767"><a id="n88761"><a id="n88762"><a id="n88769"><a id="n88766"><a id="n88763"><a id="n88765"><a id="n88768">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#182_1_refs">&nbsp;</a></c22><c20><a href="#218_8_refs">llfn_ty</a></c20><c13><a href="#182_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#865">lltype_for_fn_from_foreign_types</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c3>,</c3><c27><a href="#182_1_refs">&nbsp;</a></c27><c5><a href="#182_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#209">tys</a></c26><c4>)</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;219</ln><a id="219">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;220</ln><a id="220">&nbsp;</a><a id="n88771"><a id="n88775"><a id="n88788"><a id="n88776"><a id="n88778"><a id="n88772"><a id="n88777"><a id="n88789"><a id="n88770"><a id="n88774"><a id="n88773">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#182_1_refs">&nbsp;</a></c22><c20><a href="#220_8_refs">llfn</a></c20><c16><a href="#182_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/base.rs.html#217">base::get_extern_fn</a></c26><c4>(</c4><c5><a href="#182_1_refs">&amp;mut&nbsp;*</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#45">.externs</a></c24><c10><a href="../../../libstd/cell.rs.html#n107663">.borrow_mut</a></c10><c4>()</c4><c3>,</c3><c27><a href="#182_1_refs">
</a></c27><br/><ln>&nbsp;221</ln><a id="221">&nbsp;</a><a id="n88780"><a id="n88779">&nbsp;</a></a><c27><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#183">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#40">.llmod</a></c24><c3>,</c3><c27><a href="#182_1_refs">
</a></c27><br/><ln>&nbsp;222</ln><a id="222">&nbsp;</a><a id="n88782"><a id="n88781">&nbsp;</a></a><c27><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#208">lname</a></c26><c10><a href="../../../libsyntax/parse/token.rs.html#n123571">.get</a></c10><c4>()</c4><c3>,</c3><c27><a href="#182_1_refs">
</a></c27><br/><ln>&nbsp;223</ln><a id="223">&nbsp;</a><a id="n88783">&nbsp;</a><c27><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#197">cc</a></c26><c3>,</c3><c27><a href="#182_1_refs">
</a></c27><br/><ln>&nbsp;224</ln><a id="224">&nbsp;</a><a id="n88784">&nbsp;</a><c27><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#218">llfn_ty</a></c26><c3>,</c3><c27><a href="#182_1_refs">
</a></c27><br/><ln>&nbsp;225</ln><a id="225">&nbsp;</a><a id="n88786"><a id="n88787"><a id="n88785">&nbsp;</a></a></a><c27><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#209">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#44">.fn_sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c4>)</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;226</ln><a id="226">&nbsp;</a><a id="n88793"><a id="n88794"><a id="n88790"><a id="n88795"><a id="n88791"><a id="n88792">&nbsp;</a></a></a></a></a></a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#912">add_argument_attributes</a></c26><c4>(</c4><c5><a href="#182_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#209">tys</a></c26><c3>,</c3><c13><a href="#182_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#220">llfn</a></c26><c4>)</c4><c3>;</c3><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;227</ln><a id="227">&nbsp;</a>&nbsp;<c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;228</ln><a id="228">&nbsp;</a><a id="n88797">&nbsp;</a><c22><a href="#182_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#220">llfn</a></c26><c22><a href="#182_1_refs">
</a></c22><br/><ln>&nbsp;229</ln><a id="229">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;230</ln><a id="230">&nbsp;</a><a id="n88798">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;231</ln><a id="231">&nbsp;</a>&nbsp;<c21>pub</c21><c1><a href="#230_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#230_1_refs">&nbsp;trans_native_call</a></c30><c5><a href="#230_1_refs">&lt;'a&gt;</a></c5><c4>(</c4><c1><a href="#230_1_refs">
</a></c1><br/><ln>&nbsp;232</ln><a id="232">&nbsp;</a><a id="n88805"><a id="n88804"><a id="n88803">&nbsp;</a></a></a><c1><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#232_25_refs">bcx</a></c20><c1><a href="#230_1_refs">:&nbsp;</a></c1><c8><a href="#230_1_refs">&amp;'a&nbsp;</a></c8><c8><a href="../../../librustc/middle/trans/common.rs.html#401">Block&lt;'a&gt;</a></c8><c3>,</c3><c1><a href="#230_1_refs">
</a></c1><br/><ln>&nbsp;233</ln><a id="233">&nbsp;</a><a id="n88808"><a id="n88809">&nbsp;</a></a><c1><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#233_25_refs">callee_ty</a></c20><c1><a href="#230_1_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/middle/ty.rs.html#387">ty::t</a></c8><c3>,</c3><c1><a href="#230_1_refs">
</a></c1><br/><ln>&nbsp;234</ln><a id="234">&nbsp;</a><a id="n88812"><a id="n88813">&nbsp;</a></a><c1><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#234_25_refs">llfn</a></c20><c1><a href="#230_1_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c3>,</c3><c1><a href="#230_1_refs">
</a></c1><br/><ln>&nbsp;235</ln><a id="235">&nbsp;</a><a id="n88817"><a id="n88816">&nbsp;</a></a><c1><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#235_25_refs">llretptr</a></c20><c1><a href="#230_1_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c3>,</c3><c1><a href="#230_1_refs">
</a></c1><br/><ln>&nbsp;236</ln><a id="236">&nbsp;</a><a id="n88822"><a id="n88823"><a id="n88821"><a id="n88820">&nbsp;</a></a></a></a><c1><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#236_25_refs">llargs_rust</a></c20><c1><a href="#230_1_refs">:&nbsp;</a></c1><c8><a href="#230_1_refs">&amp;</a></c8><c3>[</c3><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c3>],</c3><c1><a href="#230_1_refs">
</a></c1><br/><ln>&nbsp;237</ln><a id="237">&nbsp;</a><a id="n88828"><a id="n88829"><a id="n88826">&nbsp;</a></a></a><c1><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#237_25_refs">passed_arg_tys</a></c20><c1><a href="#230_1_refs">:&nbsp;</a></c1><c8><a href="../../../libstd/vec.rs.html#n56401">Vec&lt;</a></c8><c8><a href="../../../librustc/middle/ty.rs.html#387">ty::t</a></c8><c8><a href="../../../libstd/vec.rs.html#n56401">&gt;</a></c8><c1><a href="#230_1_refs">&nbsp;</a></c1><c4>)</c4><c1><a href="#230_1_refs">
</a></c1><br/><ln>&nbsp;238</ln><a id="238">&nbsp;</a><a id="n88833"><a id="n88834"><a id="n90524">&nbsp;</a></a></a><c1><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#230_1_refs">&nbsp;</a></c1><c8><a href="#230_1_refs">&amp;'a&nbsp;</a></c8><c8><a href="../../../librustc/middle/trans/common.rs.html#401">Block&lt;'a&gt;</a></c8><c1><a href="#230_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;239</ln><a id="239">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c41>/*!
</c41><br/><ln>&nbsp;240</ln><a id="240">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Prepares&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;native&nbsp;function.&nbsp;This&nbsp;requires&nbsp;adapting
</c41><br/><ln>&nbsp;241</ln><a id="241">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;from&nbsp;the&nbsp;Rust&nbsp;argument&nbsp;passing&nbsp;rules&nbsp;to&nbsp;the&nbsp;native&nbsp;rules.
</c41><br/><ln>&nbsp;242</ln><a id="242">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</c41><br/><ln>&nbsp;243</ln><a id="243">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;#&nbsp;Parameters
</c41><br/><ln>&nbsp;244</ln><a id="244">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</c41><br/><ln>&nbsp;245</ln><a id="245">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;`callee_ty`:&nbsp;Rust&nbsp;type&nbsp;for&nbsp;the&nbsp;function&nbsp;we&nbsp;are&nbsp;calling
</c41><br/><ln>&nbsp;246</ln><a id="246">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;`llfn`:&nbsp;the&nbsp;function&nbsp;pointer&nbsp;we&nbsp;are&nbsp;calling
</c41><br/><ln>&nbsp;247</ln><a id="247">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;`llretptr`:&nbsp;where&nbsp;to&nbsp;store&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;the&nbsp;function
</c41><br/><ln>&nbsp;248</ln><a id="248">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;`llargs_rust`:&nbsp;a&nbsp;list&nbsp;of&nbsp;the&nbsp;argument&nbsp;values,&nbsp;prepared
</c41><br/><ln>&nbsp;249</ln><a id="249">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;as&nbsp;they&nbsp;would&nbsp;be&nbsp;if&nbsp;calling&nbsp;a&nbsp;Rust&nbsp;function
</c41><br/><ln>&nbsp;250</ln><a id="250">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;-&nbsp;`passed_arg_tys`:&nbsp;Rust&nbsp;type&nbsp;for&nbsp;the&nbsp;arguments.&nbsp;Normally&nbsp;we
</c41><br/><ln>&nbsp;251</ln><a id="251">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;can&nbsp;derive&nbsp;these&nbsp;from&nbsp;callee_ty&nbsp;but&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;variadic
</c41><br/><ln>&nbsp;252</ln><a id="252">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;functions&nbsp;passed_arg_tys&nbsp;will&nbsp;include&nbsp;the&nbsp;Rust&nbsp;type&nbsp;of&nbsp;all
</c41><br/><ln>&nbsp;253</ln><a id="253">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;the&nbsp;arguments&nbsp;including&nbsp;the&nbsp;ones&nbsp;not&nbsp;specified&nbsp;in&nbsp;the&nbsp;fn's&nbsp;signature.
</c41><br/><ln>&nbsp;254</ln><a id="254">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</c41><br/><ln>&nbsp;255</ln><a id="255">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;256</ln><a id="256">&nbsp;</a><a id="n88838"><a id="n88837"><a id="n88836"><a id="n88841"><a id="n88840"><a id="n88839">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#256_8_refs">ccx</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c10><a href="../../../librustc/middle/trans/common.rs.html#441">.ccx</a></c10><c4>()</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;257</ln><a id="257">&nbsp;</a><a id="n88844"><a id="n88846"><a id="n88845"><a id="n88847"><a id="n88843"><a id="n88842">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#257_8_refs">tcx</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c10><a href="../../../librustc/middle/trans/common.rs.html#442">.tcx</a></c10><c4>()</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;258</ln><a id="258">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;259</ln><a id="259">&nbsp;</a><a id="n88935"><a id="n88915"><a id="n88933"><a id="n88942"><a id="n88904"><a id="n88938"><a id="n88922"><a id="n88980"><a id="n88923"><a id="n88910"><a id="n88919"><a id="n88929"><a id="n88996"><a id="n88931"><a id="n88928"><a id="n88968"><a id="n88944"><a id="n88949"><a id="n88920"><a id="n88921"><a id="n88918"><a id="n88898"><a id="n88971"><a id="n88951"><a id="n88945"><a id="n88940"><a id="n88975"><a id="n88907"><a id="n88946"><a id="n88969"><a id="n88908"><a id="n88937"><a id="n88952"><a id="n88976"><a id="n88899"><a id="n88974"><a id="n88914"><a id="n88934"><a id="n88947"><a id="n88950"><a id="n88911"><a id="n88993"><a id="n88979"><a id="n88902"><a id="n88953"><a id="n88925"><a id="n88932"><a id="n88906"><a id="n88903"><a id="n88954"><a id="n88913"><a id="n88941"><a id="n88972"><a id="n88970"><a id="n88978"><a id="n88973"><a id="n88917"><a id="n88943"><a id="n88948"><a id="n88936"><a id="n88905"><a id="n88916"><a id="n88912"><a id="n88939"><a id="n88926"><a id="n88977"><a id="n88930"><a id="n88894"><a id="n88909"><a id="n88967"><a id="n88924"><a id="n88927">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../../libstd/fmt/rt.rs.html#n169505">"trans_native_call</a></c26><c4>(</c4><c26><a href="../../../libstd/fmt/rt.rs.html#n169505">callee_ty=</a></c26><c3>{},</c3><c26><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;\
</a></c26><br/><ln>&nbsp;260</ln><a id="260">&nbsp;</a>&nbsp;<c26><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llfn=</a></c26><c3>{},</c3><c26><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;\
</a></c26><br/><ln>&nbsp;261</ln><a id="261">&nbsp;</a>&nbsp;<c26><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llretptr=</a></c26><c3>{}</c3><c4>)</c4><c26><a href="../../../libstd/fmt/rt.rs.html#n169505">"</a></c26><c3>,</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;262</ln><a id="262">&nbsp;</a><a id="n88880"><a id="n88956"><a id="n88895"><a id="n88883"><a id="n88957"><a id="n88958"><a id="n88955"><a id="n88881"><a id="n88882">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#233">callee_ty</a></c26><c10><a href="../../../librustc/util/ppaux.rs.html#637">.repr</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#257">tcx</a></c26><c4>)</c4><c3>,</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;263</ln><a id="263">&nbsp;</a><a id="n88884"><a id="n88888"><a id="n88962"><a id="n88960"><a id="n88886"><a id="n88961"><a id="n88885"><a id="n88896"><a id="n88887"><a id="n88959">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../libstd/fmt/mod.rs.html#n171474">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#234">llfn</a></c26><c4>)</c4><c3>,</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;264</ln><a id="264">&nbsp;</a><a id="n88892"><a id="n88891"><a id="n88965"><a id="n88966"><a id="n88893"><a id="n88964"><a id="n88963"><a id="n88889"><a id="n88897"><a id="n88890">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c20><a href="#264_11_refs">.val_to_str</a></c20><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#235">llretptr</a></c26><c4>))</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;265</ln><a id="265">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;266</ln><a id="266">&nbsp;</a><a id="n89024"><a id="n89005"><a id="n89010"><a id="n89007"><a id="n89006"><a id="n89004"><a id="n89025"><a id="n89009"><a id="n89002"><a id="n89008"><a id="n89003">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c4>(</c4><c20><a href="#266_9_refs">fn_abis</a></c20><c3>,</c3><c20><a href="#230_1_refs">&nbsp;</a></c20><c20><a href="#266_18_refs">fn_sig</a></c20><c4>)</c4><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#230_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/ty.rs.html#395">ty::get</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#233">callee_ty</a></c26><c4>)</c4><c24><a href="../../../librustc/middle/ty.rs.html#375">.sty</a></c24><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;267</ln><a id="267">&nbsp;</a><a id="n89013"><a id="n89018"><a id="n89011"><a id="n89014"><a id="n89016"><a id="n89015"><a id="n89017"><a id="n89012">&nbsp;</a></a></a></a></a></a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../librustc/middle/ty.rs.html#741">ty::ty_bare_fn</a></c20><c4>(</c4><c20><a href="#267_23_refs">ref&nbsp;fn_ty</a></c20><c4>)</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#267">fn_ty</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#421">.abis</a></c24><c3>,</c3><c14><a href="#230_1_refs">&nbsp;</a></c14><c26><a href="../../../librustc/middle/trans/foreign.rs.html#267">fn_ty</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#422">.sig</a></c24><c10><a href="../../../librustc/middle/ty.rs.html#447">.clone</a></c10><c4>())</c4><c3>,</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;268</ln><a id="268">&nbsp;</a><a id="n89023"><a id="n89021"><a id="n89022"><a id="n89019"><a id="n89020">&nbsp;</a></a></a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#230_1_refs">_</a></c20><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c10><a href="../../../librustc/driver/session.rs.html#241">.bug</a></c10><c4>(</c4><c12><a href="../../../librustc/driver/session.rs.html#241">"trans_native_call&nbsp;called&nbsp;on&nbsp;non-function&nbsp;</a></c12><c35>type</c35><c35><a href="../../../librustc/driver/session.rs.html#241">"</a></c35><c35>)</c35><c35><a href="#230_1_refs">
</a></c35><br/><ln>&nbsp;269</ln><a id="269">&nbsp;</a>&nbsp;<c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;270</ln><a id="270">&nbsp;</a><a id="n89027"><a id="n89036"><a id="n89030"><a id="n89033"><a id="n89029"><a id="n89035"><a id="n89026"><a id="n89031"><a id="n89032"><a id="n89034"><a id="n89028">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#270_8_refs">llsig</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#809">foreign_signature</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c5><a href="#230_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#266">fn_sig</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#237">passed_arg_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>())</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;271</ln><a id="271">&nbsp;</a><a id="n89039"><a id="n89045"><a id="n89038"><a id="n89047"><a id="n89046"><a id="n89040"><a id="n89042"><a id="n89041"><a id="n89043"><a id="n89037"><a id="n89044">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#271_8_refs">ret_def</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c5><a href="#230_1_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/common.rs.html#91">return_type_is_void</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c10><a href="../../../librustc/middle/trans/common.rs.html#441">.ccx</a></c10><c4>()</c4><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#266">fn_sig</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;272</ln><a id="272">&nbsp;</a><a id="n89059"><a id="n89050"><a id="n89052"><a id="n89048"><a id="n89060"><a id="n89051"><a id="n89049">&nbsp;</a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#272_8_refs">fn_type</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/cabi.rs.html#107">cabi::compute_abi_info</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;273</ln><a id="273">&nbsp;</a><a id="n89053"><a id="n89054"><a id="n89055">&nbsp;</a></a></a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#270">llsig</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#59">.llarg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;274</ln><a id="274">&nbsp;</a><a id="n89056"><a id="n89057">&nbsp;</a></a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#270">llsig</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#65">.llret_ty</a></c24><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;275</ln><a id="275">&nbsp;</a><a id="n89058">&nbsp;</a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#271">ret_def</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;276</ln><a id="276">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;277</ln><a id="277">&nbsp;</a><a id="n89067"><a id="n89068"><a id="n89061"><a id="n89065"><a id="n89066"><a id="n89069"><a id="n89063"><a id="n89064"><a id="n89070">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#277_8_refs">arg_tys</a></c20><c13><a href="#230_1_refs">:&nbsp;</a></c13><c8><a href="#230_1_refs">&amp;</a></c8><c3>[</c3><c8><a href="../../../librustc/middle/trans/cabi.rs.html#36">cabi::ArgType</a></c8><c3>]</c3><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#272">fn_type</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#102">.arg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;278</ln><a id="278">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;279</ln><a id="279">&nbsp;</a><a id="n89072"><a id="n89076"><a id="n89073"><a id="n89075"><a id="n89071"><a id="n89074">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#279_8_refs">&nbsp;llargs_foreign</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../libstd/vec.rs.html#n56419">Vec::new</a></c26><c4>()</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;280</ln><a id="280">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;281</ln><a id="281">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;If&nbsp;the&nbsp;foreign&nbsp;ABI&nbsp;expects&nbsp;return&nbsp;value&nbsp;by&nbsp;pointer,&nbsp;supply&nbsp;the
</c40><br/><ln>&nbsp;282</ln><a id="282">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;pointer&nbsp;that&nbsp;Rust&nbsp;gave&nbsp;us.&nbsp;Sometimes&nbsp;we&nbsp;have&nbsp;to&nbsp;bitcast
</c40><br/><ln>&nbsp;283</ln><a id="283">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;because&nbsp;foreign&nbsp;fns&nbsp;return&nbsp;slightly&nbsp;different&nbsp;(but&nbsp;equivalent)
</c40><br/><ln>&nbsp;284</ln><a id="284">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;views&nbsp;on&nbsp;the&nbsp;same&nbsp;type&nbsp;(e.g.,&nbsp;i64&nbsp;in&nbsp;place&nbsp;of&nbsp;{i32,i32}).
</c40><br/><ln>&nbsp;285</ln><a id="285">&nbsp;</a><a id="n89111"><a id="n89078"><a id="n89110"><a id="n89077"><a id="n89080"><a id="n89079">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#272">fn_type</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;286</ln><a id="286">&nbsp;</a><a id="n89082"><a id="n89081"><a id="n89109"><a id="n89083">&nbsp;</a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#272">fn_type</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#42">.cast</a></c24><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;287</ln><a id="287">&nbsp;</a><a id="n89100"><a id="n89101"><a id="n89084"><a id="n89085">&nbsp;</a></a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#287_17_refs">ty</a></c20><c4>)</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;288</ln><a id="288">&nbsp;</a><a id="n89087"><a id="n89086"><a id="n89088"><a id="n89095">&nbsp;</a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#288_20_refs">llcastedretptr</a></c20><c13><a href="#230_1_refs">&nbsp;=
</a></c13><br/><ln>&nbsp;289</ln><a id="289">&nbsp;</a><a id="n89090"><a id="n89092"><a id="n89091"><a id="n89094"><a id="n89089"><a id="n89093">&nbsp;</a></a></a></a></a></a><c13><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/build.rs.html#549">BitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#235">llretptr</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#287">ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>())</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;290</ln><a id="290">&nbsp;</a><a id="n89098"><a id="n89099"><a id="n89096"><a id="n89097">&nbsp;</a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#279">llargs_foreign</a></c26><c13><a href="../../../libstd/vec.rs.html#n57406">.push</a></c13><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#288">llcastedretptr</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;291</ln><a id="291">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;292</ln><a id="292">&nbsp;</a><a id="n89102"><a id="n89108"><a id="n89107">&nbsp;</a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;293</ln><a id="293">&nbsp;</a><a id="n89106"><a id="n89105"><a id="n89103"><a id="n89104">&nbsp;</a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#279">llargs_foreign</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#235">llretptr</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;294</ln><a id="294">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;295</ln><a id="295">&nbsp;</a>&nbsp;<c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;296</ln><a id="296">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;297</ln><a id="297">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;298</ln><a id="298">&nbsp;</a><a id="n89115"><a id="n89125"><a id="n89126"><a id="n89754"><a id="n89124"><a id="n89120"><a id="n89113"><a id="n89112"><a id="n89122"><a id="n89119"><a id="n89118"><a id="n89758"><a id="n89114"><a id="n89116"><a id="n89753"><a id="n89117"><a id="n89755"><a id="n89123"><a id="n89756"><a id="n89121"><a id="n89757">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c21><a href="#298_4_refs">&nbsp;</a></c21><c4>(</c4><c20><a href="#298_9_refs">i</a></c20><c3>,</c3><c20><a href="#230_1_refs">&nbsp;&amp;</a></c20><c20><a href="#298_13_refs">llarg_rust</a></c20><c4>)</c4><c21><a href="#298_4_refs">&nbsp;in&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#236">llargs_rust</a></c26><c10><a href="../../../libstd/slice.rs.html#n49192">.iter</a></c10><c4>()</c4><c10><a href="../../../librustc/middle/typeck/check/mod.rs.html#3998">.enumerate</a></c10><c4>()</c4><c21><a href="#298_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;299</ln><a id="299">&nbsp;</a><a id="n89128"><a id="n89129"><a id="n89127"><a id="n89130"><a id="n89131">&nbsp;</a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c21>mut</c21><c20><a href="#299_12_refs">&nbsp;llarg_rust</a></c20><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">llarg_rust</a></c26><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;300</ln><a id="300">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;301</ln><a id="301">&nbsp;</a><a id="n89133"><a id="n89132"><a id="n89138"><a id="n89140"><a id="n89139"><a id="n89135"><a id="n89134">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#277">arg_tys</a></c26><c3>[</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">i</a></c26><c3>]</c3><c10><a href="../../../librustc/middle/trans/cabi.rs.html#90">.is_ignore</a></c10><c4>()</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;302</ln><a id="302">&nbsp;</a><a id="n89137"><a id="n89136">&nbsp;</a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c13><a href="../../../libstd/option.rs.html#n104341">continue</a></c13><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;303</ln><a id="303">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;304</ln><a id="304">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;305</ln><a id="305">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Does&nbsp;Rust&nbsp;pass&nbsp;this&nbsp;argument&nbsp;by&nbsp;pointer?
</c40><br/><ln>&nbsp;306</ln><a id="306">&nbsp;</a><a id="n89141"><a id="n89150"><a id="n89142"><a id="n89144"><a id="n89145"><a id="n89143"><a id="n89151">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c20><a href="#306_12_refs">rust_indirect</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/type_of.rs.html#24">type_of::arg_is_indirect</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;307</ln><a id="307">&nbsp;</a><a id="n89147"><a id="n89146"><a id="n89148"><a id="n89149">&nbsp;</a></a></a></a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c5><a href="#230_1_refs">*</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#237">passed_arg_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n57648">.get</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">i</a></c26><c4>))</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;308</ln><a id="308">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;309</ln><a id="309">&nbsp;</a><a id="n89228"><a id="n89260"><a id="n89253"><a id="n89291"><a id="n89249"><a id="n89226"><a id="n89243"><a id="n89258"><a id="n89251"><a id="n89298"><a id="n89239"><a id="n89210"><a id="n89266"><a id="n89271"><a id="n89263"><a id="n89264"><a id="n89221"><a id="n89218"><a id="n89294"><a id="n89217"><a id="n89261"><a id="n89225"><a id="n89238"><a id="n89231"><a id="n89245"><a id="n89233"><a id="n89296"><a id="n89268"><a id="n89212"><a id="n89292"><a id="n89250"><a id="n89302"><a id="n89234"><a id="n89295"><a id="n89213"><a id="n89299"><a id="n89229"><a id="n89232"><a id="n89300"><a id="n89236"><a id="n89255"><a id="n89267"><a id="n89254"><a id="n89222"><a id="n89223"><a id="n89248"><a id="n89252"><a id="n89272"><a id="n89207"><a id="n89259"><a id="n89257"><a id="n89262"><a id="n89301"><a id="n89303"><a id="n89244"><a id="n89241"><a id="n89224"><a id="n89215"><a id="n89230"><a id="n89242"><a id="n89270"><a id="n89273"><a id="n89290"><a id="n89219"><a id="n89216"><a id="n89211"><a id="n89235"><a id="n89214"><a id="n89220"><a id="n89237"><a id="n89269"><a id="n89227"><a id="n89256"><a id="n89206"><a id="n89246"><a id="n89293"><a id="n89319"><a id="n89247"><a id="n89240"><a id="n89265"><a id="n89297"><a id="n89316"><a id="n89201">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c14><a href="../../../librustc/middle/trans/foreign.rs.html#309">"argument&nbsp;</a></c14><c3>{},</c3><c14><a href="../../../librustc/middle/trans/foreign.rs.html#309">&nbsp;llarg_rust=</a></c14><c3>{},</c3><c14><a href="../../../librustc/middle/trans/foreign.rs.html#309">&nbsp;rust_indirect=</a></c14><c3>{},</c3><c14><a href="../../../librustc/middle/trans/foreign.rs.html#309">&nbsp;arg_ty=</a></c14><c3>{}</c3><c14><a href="../../../librustc/middle/trans/foreign.rs.html#309">"</a></c14><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;310</ln><a id="310">&nbsp;</a><a id="n89277"><a id="n89274"><a id="n89184"><a id="n89185"><a id="n89202"><a id="n89276"><a id="n89275">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../libstd/fmt/mod.rs.html#n169877">i</a></c26><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;311</ln><a id="311">&nbsp;</a><a id="n89203"><a id="n89278"><a id="n89281"><a id="n89280"><a id="n89186"><a id="n89279"><a id="n89190"><a id="n89189"><a id="n89188"><a id="n89187">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c10><a href="../../../librustc/lib/llvm.rs.html#1855">.val_to_str</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c4>)</c4><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;312</ln><a id="312">&nbsp;</a><a id="n89282"><a id="n89192"><a id="n89283"><a id="n89204"><a id="n89285"><a id="n89191"><a id="n89284">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#312">rust_indirect</a></c26><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;313</ln><a id="313">&nbsp;</a><a id="n89286"><a id="n89289"><a id="n89196"><a id="n89193"><a id="n89200"><a id="n89199"><a id="n89195"><a id="n89288"><a id="n89194"><a id="n89287"><a id="n89205"><a id="n89198"><a id="n89197">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c20><a href="#313_15_refs">.type_to_str</a></c20><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#277">arg_tys</a></c26><c3>[</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">i</a></c26><c3>]</c3><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c4>))</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;314</ln><a id="314">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;315</ln><a id="315">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Ensure&nbsp;that&nbsp;we&nbsp;always&nbsp;have&nbsp;the&nbsp;Rust&nbsp;value&nbsp;indirectly,
</c40><br/><ln>&nbsp;316</ln><a id="316">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;because&nbsp;it&nbsp;makes&nbsp;bitcasting&nbsp;easier.
</c40><br/><ln>&nbsp;317</ln><a id="317">&nbsp;</a><a id="n89354"><a id="n89325"><a id="n89352"><a id="n89353"><a id="n89326">&nbsp;</a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c5><a href="../../../libstd/option.rs.html#n104341">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#306">rust_indirect</a></c26><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;318</ln><a id="318">&nbsp;</a><a id="n89327"><a id="n89329"><a id="n89341"><a id="n89328">&nbsp;</a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c20><a href="#318_16_refs">scratch</a></c20><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;=
</a></c13><br/><ln>&nbsp;319</ln><a id="319">&nbsp;</a><a id="n89340"><a id="n89331"><a id="n89330">&nbsp;</a></a></a><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/base.rs.html#1132">base::alloca</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="../../../libstd/option.rs.html#n104341">
</a></c27><br/><ln>&nbsp;320</ln><a id="320">&nbsp;</a><a id="n89336"><a id="n89333"><a id="n89337"><a id="n89334"><a id="n89338"><a id="n89332"><a id="n89335">&nbsp;</a></a></a></a></a></a></a><c27><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/type_of.rs.html#169">type_of::type_of</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c27><c5><a href="../../../libstd/option.rs.html#n104341">*</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#237">passed_arg_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n57648">.get</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">i</a></c26><c4>))</c4><c3>,</c3><c27><a href="../../../libstd/option.rs.html#n104341">
</a></c27><br/><ln>&nbsp;321</ln><a id="321">&nbsp;</a><a id="n89339">&nbsp;</a><c27><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c12><a href="../../../libstd/option.rs.html#n104341">"__arg"</a></c12><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;322</ln><a id="322">&nbsp;</a><a id="n89344"><a id="n89346"><a id="n89343"><a id="n89347"><a id="n89342"><a id="n89345">&nbsp;</a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/build.rs.html#399">Store</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c3>,</c3><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#318">scratch</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;323</ln><a id="323">&nbsp;</a><a id="n89350"><a id="n89348"><a id="n89351"><a id="n89349">&nbsp;</a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#318">scratch</a></c26><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;324</ln><a id="324">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;325</ln><a id="325">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;326</ln><a id="326">&nbsp;</a><a id="n89405"><a id="n89434"><a id="n89433"><a id="n89432"><a id="n89421"><a id="n89404"><a id="n89420"><a id="n89417"><a id="n89395"><a id="n89419"><a id="n89399"><a id="n89418"><a id="n89394"><a id="n89409"><a id="n89436"><a id="n89412"><a id="n89428"><a id="n89408"><a id="n89429"><a id="n89438"><a id="n89406"><a id="n89439"><a id="n89402"><a id="n89400"><a id="n89427"><a id="n89440"><a id="n89422"><a id="n89401"><a id="n89403"><a id="n89431"><a id="n89453"><a id="n89430"><a id="n89416"><a id="n89407"><a id="n89398"><a id="n89410"><a id="n89435"><a id="n89392"><a id="n89411"><a id="n89413"><a id="n89437"><a id="n89456"><a id="n89415"><a id="n89414">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c27><a href="../../../libstd/fmt/rt.rs.html#n169453">"llarg_rust=</a></c27><c3>{}</c3><c27><a href="../../../libstd/fmt/rt.rs.html#n169453">&nbsp;</a></c27><c4>(</c4><c27><a href="../../../libstd/fmt/rt.rs.html#n169453">after&nbsp;indirection</a></c27><c4>)</c4><c27><a href="../../../libstd/fmt/rt.rs.html#n169453">"</a></c27><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;327</ln><a id="327">&nbsp;</a><a id="n89387"><a id="n89389"><a id="n89390"><a id="n89425"><a id="n89388"><a id="n89424"><a id="n89393"><a id="n89391"><a id="n89426"><a id="n89423">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../libstd/fmt/mod.rs.html#n171474">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c4>))</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;328</ln><a id="328">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;329</ln><a id="329">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Check&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;do&nbsp;any&nbsp;casting
</c40><br/><ln>&nbsp;330</ln><a id="330">&nbsp;</a><a id="n89464"><a id="n89463"><a id="n89462"><a id="n89465"><a id="n89479"><a id="n89478">&nbsp;</a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#277">arg_tys</a></c26><c3>[</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">i</a></c26><c3>]</c3><c24><a href="../../../librustc/middle/trans/cabi.rs.html#42">.cast</a></c24><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c21><a href="../../../libstd/option.rs.html#n104341">
</a></c21><br/><ln>&nbsp;331</ln><a id="331">&nbsp;</a><a id="n89466"><a id="n89471"><a id="n89467"><a id="n89469"><a id="n89473"><a id="n89474"><a id="n89470"><a id="n89472"><a id="n89468"><a id="n89475">&nbsp;</a></a></a></a></a></a></a></a></a></a><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#331_17_refs">ty</a></c20><c4>)</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c5><a href="../../../libstd/option.rs.html#n104341">&nbsp;=&nbsp;</a></c5><c26><a href="../../../librustc/middle/trans/build.rs.html#549">BitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c3>,</c3><c27><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#331">ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>())</c4><c3>,</c3><c21><a href="../../../libstd/option.rs.html#n104341">
</a></c21><br/><ln>&nbsp;332</ln><a id="332">&nbsp;</a><a id="n89477"><a id="n89476">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c4>()</c4><c21><a href="../../../libstd/option.rs.html#n104341">
</a></c21><br/><ln>&nbsp;333</ln><a id="333">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;334</ln><a id="334">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;335</ln><a id="335">&nbsp;</a><a id="n89547"><a id="n89526"><a id="n89532"><a id="n89528"><a id="n89529"><a id="n89525"><a id="n89540"><a id="n89544"><a id="n89578"><a id="n89531"><a id="n89539"><a id="n89561"><a id="n89543"><a id="n89558"><a id="n89520"><a id="n89538"><a id="n89542"><a id="n89556"><a id="n89565"><a id="n89524"><a id="n89564"><a id="n89535"><a id="n89537"><a id="n89552"><a id="n89533"><a id="n89554"><a id="n89519"><a id="n89530"><a id="n89557"><a id="n89536"><a id="n89523"><a id="n89559"><a id="n89563"><a id="n89546"><a id="n89555"><a id="n89534"><a id="n89581"><a id="n89553"><a id="n89527"><a id="n89517"><a id="n89541"><a id="n89562"><a id="n89545"><a id="n89560">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#335">"llarg_rust=</a></c26><c3>{}</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#335">&nbsp;</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#335">after&nbsp;casting</a></c26><c4>)</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#335">"</a></c26><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;336</ln><a id="336">&nbsp;</a><a id="n89549"><a id="n89516"><a id="n89518"><a id="n89515"><a id="n89512"><a id="n89548"><a id="n89514"><a id="n89551"><a id="n89550"><a id="n89513">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#336">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c4>))</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;337</ln><a id="337">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;338</ln><a id="338">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Finally,&nbsp;load&nbsp;the&nbsp;value&nbsp;if&nbsp;needed&nbsp;for&nbsp;the&nbsp;foreign&nbsp;ABI
</c40><br/><ln>&nbsp;339</ln><a id="339">&nbsp;</a><a id="n89588"><a id="n89589"><a id="n89594"><a id="n89591"><a id="n89592"><a id="n89587"><a id="n89590"><a id="n89593">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c20><a href="#339_12_refs">foreign_indirect</a></c20><c16><a href="../../../libstd/option.rs.html#n104341">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#277">arg_tys</a></c26><c3>[</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">i</a></c26><c3>]</c3><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;340</ln><a id="340">&nbsp;</a><a id="n89598"><a id="n89599"><a id="n89596"><a id="n89595"><a id="n89597"><a id="n89607"><a id="n89608">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c20><a href="#340_12_refs">llarg_foreign</a></c20><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;=&nbsp;</a></c13><c21><a href="../../../libstd/option.rs.html#n104341">if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#339">foreign_indirect</a></c26><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;341</ln><a id="341">&nbsp;</a><a id="n89600">&nbsp;</a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;342</ln><a id="342">&nbsp;</a><a id="n89601"><a id="n89606">&nbsp;</a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c21>else</c21><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;343</ln><a id="343">&nbsp;</a><a id="n89605"><a id="n89602"><a id="n89603"><a id="n89604">&nbsp;</a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/build.rs.html#345">Load</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#299">llarg_rust</a></c26><c4>)</c4><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;344</ln><a id="344">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;345</ln><a id="345">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;346</ln><a id="346">&nbsp;</a><a id="n89656"><a id="n89665"><a id="n89658"><a id="n89711"><a id="n89680"><a id="n89710"><a id="n89728"><a id="n89673"><a id="n89678"><a id="n89706"><a id="n89690"><a id="n89684"><a id="n89676"><a id="n89672"><a id="n89688"><a id="n89663"><a id="n89701"><a id="n89655"><a id="n89682"><a id="n89712"><a id="n89681"><a id="n89703"><a id="n89651"><a id="n89685"><a id="n89664"><a id="n89675"><a id="n89689"><a id="n89699"><a id="n89669"><a id="n89702"><a id="n89687"><a id="n89679"><a id="n89707"><a id="n89708"><a id="n89648"><a id="n89671"><a id="n89666"><a id="n89668"><a id="n89670"><a id="n89700"><a id="n89661"><a id="n89683"><a id="n89660"><a id="n89704"><a id="n89709"><a id="n89667"><a id="n89662"><a id="n89652"><a id="n89725"><a id="n89674"><a id="n89659"><a id="n89657"><a id="n89686"><a id="n89677"><a id="n89705">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c22><a href="../../../librustc/middle/trans/foreign.rs.html#346">"argument&nbsp;</a></c22><c3>{},</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#346">&nbsp;llarg_foreign=</a></c22><c3>{}</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#346">"</a></c22><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;347</ln><a id="347">&nbsp;</a><a id="n89641"><a id="n89650"><a id="n89692"><a id="n89691"><a id="n89642"><a id="n89696"><a id="n89694"><a id="n89698"><a id="n89646"><a id="n89645"><a id="n89695"><a id="n89697"><a id="n89644"><a id="n89693"><a id="n89647"><a id="n89649"><a id="n89643">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c20><a href="#347_15_refs">i</a></c20><c3>,</c3><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c5><a href="../../../librustc/middle/trans/foreign.rs.html#347">.val_to_str</a></c5><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#340">llarg_foreign</a></c26><c4>))</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;348</ln><a id="348">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;349</ln><a id="349">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;fill&nbsp;padding&nbsp;with&nbsp;undef&nbsp;value
</c40><br/><ln>&nbsp;350</ln><a id="350">&nbsp;</a><a id="n89734"><a id="n89735"><a id="n89747"><a id="n89737"><a id="n89748"><a id="n89736">&nbsp;</a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#277">arg_tys</a></c26><c3>[</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#298">i</a></c26><c3>]</c3><c24><a href="../../../librustc/middle/trans/cabi.rs.html#44">.pad</a></c24><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c3>{</c3><c13><a href="../../../libstd/option.rs.html#n104341">
</a></c13><br/><ln>&nbsp;351</ln><a id="351">&nbsp;</a><a id="n89739"><a id="n89738"><a id="n89744"><a id="n89741"><a id="n89740"><a id="n89742"><a id="n89743">&nbsp;</a></a></a></a></a></a></a><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#351_17_refs">ty</a></c20><c4>)</c4><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#279">llargs_foreign</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/common.rs.html#526">C_undef</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#351">ty</a></c26><c4>))</c4><c3>,</c3><c13><a href="../../../libstd/option.rs.html#n104341">
</a></c13><br/><ln>&nbsp;352</ln><a id="352">&nbsp;</a><a id="n89745"><a id="n89746">&nbsp;</a></a><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c4>()</c4><c13><a href="../../../libstd/option.rs.html#n104341">
</a></c13><br/><ln>&nbsp;353</ln><a id="353">&nbsp;</a>&nbsp;<c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;354</ln><a id="354">&nbsp;</a><a id="n89749"><a id="n89751"><a id="n89752"><a id="n89750">&nbsp;</a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#279">llargs_foreign</a></c26><c13><a href="../../../libstd/vec.rs.html#n57406">.push</a></c13><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#340">llarg_foreign</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;355</ln><a id="355">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#298_4_refs">
</a></c21><br/><ln>&nbsp;356</ln><a id="356">&nbsp;</a>&nbsp;<c21><a href="#298_4_refs">
</a></c21><br/><ln>&nbsp;357</ln><a id="357">&nbsp;</a><a id="n89760"><a id="n89764"><a id="n89759"><a id="n89836"><a id="n89761"><a id="n89763"><a id="n89765"><a id="n89762"><a id="n89837">&nbsp;</a></a></a></a></a></a></a></a></a><c21><a href="#298_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#357_8_refs">cc</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#230_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#74">llvm_calling_convention</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#266">fn_abis</a></c26><c4>)</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;358</ln><a id="358">&nbsp;</a><a id="n89768"><a id="n89766"><a id="n89767">&nbsp;</a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#358_13_refs">cc</a></c20><c4>)</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#358">cc</a></c26><c3>,</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;359</ln><a id="359">&nbsp;</a><a id="n89769"><a id="n89834"><a id="n89835">&nbsp;</a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;360</ln><a id="360">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;FIXME(#8357)&nbsp;We&nbsp;really&nbsp;ought&nbsp;to&nbsp;report&nbsp;a&nbsp;span&nbsp;here
</c40><br/><ln>&nbsp;361</ln><a id="361">&nbsp;</a><a id="n89770"><a id="n89832"><a id="n89833"><a id="n89771">&nbsp;</a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c13><a href="../../../librustc/driver/session.rs.html#205">.fatal</a></c13><c4>(</c4><c13><a href="../../../librustc/driver/session.rs.html#205">
</a></c13><br/><ln>&nbsp;362</ln><a id="362">&nbsp;</a><a id="n89830"><a id="n89786"><a id="n89793"><a id="n89801"><a id="n89820"><a id="n89804"><a id="n89819"><a id="n89790"><a id="n89779"><a id="n89816"><a id="n89831"><a id="n89802"><a id="n89800"><a id="n89805"><a id="n89791"><a id="n89785"><a id="n89817"><a id="n89780"><a id="n89798"><a id="n89806"><a id="n89777"><a id="n89788"><a id="n89818"><a id="n89825"><a id="n89814"><a id="n89807"><a id="n89792"><a id="n89797"><a id="n89823"><a id="n89784"><a id="n89803"><a id="n89789"><a id="n89822"><a id="n89815"><a id="n89787"><a id="n89795"><a id="n89812"><a id="n89794"><a id="n89783"><a id="n89824"><a id="n89813"><a id="n89799"><a id="n89827"><a id="n89796"><a id="n89821">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c13><a href="../../../librustc/driver/session.rs.html#205">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c21><a href="#230_1_refs">format!</a></c21><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#362">"ABI&nbsp;string&nbsp;`</a></c26><c3>{}</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#362">`&nbsp;has&nbsp;no&nbsp;suitable&nbsp;ABI&nbsp;\
</a></c26><br/><ln>&nbsp;363</ln><a id="363">&nbsp;</a>&nbsp;<c26><a href="../../../librustc/middle/trans/foreign.rs.html#362">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c26><c21>for</c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#362">&nbsp;target&nbsp;architecture"</a></c26><c3>,</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;364</ln><a id="364">&nbsp;</a><a id="n89772"><a id="n89775"><a id="n89774"><a id="n89809"><a id="n89810"><a id="n89773"><a id="n89776"><a id="n89811"><a id="n89778"><a id="n89808">&nbsp;</a></a></a></a></a></a></a></a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#266">fn_abis</a></c26><c26><a href="../../../libstd/fmt/mod.rs.html#n171474">.user_string</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>())))</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;365</ln><a id="365">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;366</ln><a id="366">&nbsp;</a>&nbsp;<c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;367</ln><a id="367">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;368</ln><a id="368">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;A&nbsp;function&nbsp;pointer&nbsp;is&nbsp;called&nbsp;without&nbsp;the&nbsp;declaration&nbsp;available,&nbsp;so&nbsp;we&nbsp;have&nbsp;to&nbsp;apply
</c40><br/><ln>&nbsp;369</ln><a id="369">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;any&nbsp;attributes&nbsp;with&nbsp;ABI&nbsp;implications&nbsp;directly&nbsp;to&nbsp;the&nbsp;call&nbsp;instruction.&nbsp;Right&nbsp;now,&nbsp;the
</c40><br/><ln>&nbsp;370</ln><a id="370">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;only&nbsp;attribute&nbsp;we&nbsp;need&nbsp;to&nbsp;worry&nbsp;about&nbsp;is&nbsp;`sret`.
</c40><br/><ln>&nbsp;371</ln><a id="371">&nbsp;</a><a id="n89841"><a id="n89844"><a id="n89840"><a id="n89838"><a id="n89853"><a id="n89843"><a id="n89839"><a id="n89842"><a id="n89854">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#371_8_refs">sret_attr</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#230_1_refs">if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#272">fn_type</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;372</ln><a id="372">&nbsp;</a><a id="n89848"><a id="n89847"><a id="n89849"><a id="n89845"><a id="n89846">&nbsp;</a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>((</c4><c12><a href="#230_1_refs">1</a></c12><c3>,</c3><c14><a href="#230_1_refs">&nbsp;</a></c14><c26><a href="../../../librustc/lib/llvm.rs.html#70">StructRetAttribute</a></c26><c4>))</c4><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;373</ln><a id="373">&nbsp;</a><a id="n89852"><a id="n89850">&nbsp;</a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#230_1_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;374</ln><a id="374">&nbsp;</a><a id="n89851">&nbsp;</a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;375</ln><a id="375">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;376</ln><a id="376">&nbsp;</a><a id="n89860"><a id="n89856"><a id="n89857"><a id="n89855"><a id="n89858"><a id="n89859">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#376_8_refs">attrs</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#371">sret_attr</a></c26><c10><a href="../../../libstd/option.rs.html#n105002">.as_slice</a></c10><c4>()</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;377</ln><a id="377">&nbsp;</a><a id="n89863"><a id="n89872"><a id="n89864"><a id="n89871"><a id="n89862"><a id="n89861"><a id="n89865">&nbsp;</a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#377_8_refs">llforeign_retval</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/build.rs.html#685">CallWithConv</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;378</ln><a id="378">&nbsp;</a><a id="n89866">&nbsp;</a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#234">llfn</a></c26><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;379</ln><a id="379">&nbsp;</a><a id="n89867"><a id="n89868">&nbsp;</a></a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#279">llargs_foreign</a></c26><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;380</ln><a id="380">&nbsp;</a><a id="n89869">&nbsp;</a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#357">cc</a></c26><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;381</ln><a id="381">&nbsp;</a><a id="n89870">&nbsp;</a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#376">attrs</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;382</ln><a id="382">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;383</ln><a id="383">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;If&nbsp;the&nbsp;function&nbsp;we&nbsp;just&nbsp;called&nbsp;does&nbsp;not&nbsp;use&nbsp;an&nbsp;outpointer,
</c40><br/><ln>&nbsp;384</ln><a id="384">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;store&nbsp;the&nbsp;result&nbsp;into&nbsp;the&nbsp;rust&nbsp;outpointer.&nbsp;Cast&nbsp;the&nbsp;outpointer
</c40><br/><ln>&nbsp;385</ln><a id="385">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;type&nbsp;to&nbsp;match&nbsp;because&nbsp;some&nbsp;ABIs&nbsp;will&nbsp;use&nbsp;a&nbsp;different&nbsp;type&nbsp;than
</c40><br/><ln>&nbsp;386</ln><a id="386">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;the&nbsp;Rust&nbsp;type.&nbsp;e.g.,&nbsp;a&nbsp;{u32,u32}&nbsp;struct&nbsp;could&nbsp;be&nbsp;returned&nbsp;as
</c40><br/><ln>&nbsp;387</ln><a id="387">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;u64.
</c40><br/><ln>&nbsp;388</ln><a id="388">&nbsp;</a><a id="n89877"><a id="n89876"><a id="n89875"><a id="n90520"><a id="n90519"><a id="n89873"><a id="n89878"><a id="n90316"><a id="n89874">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#271">ret_def</a></c26><c1><a href="#230_1_refs">&nbsp;&amp;&amp;&nbsp;</a></c1><c5><a href="#230_1_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#272">fn_type</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;389</ln><a id="389">&nbsp;</a><a id="n89879"><a id="n89881"><a id="n89883"><a id="n89880"><a id="n89882"><a id="n89884">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#389_12_refs">llrust_ret_ty</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#270">llsig</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#65">.llret_ty</a></c24><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;390</ln><a id="390">&nbsp;</a><a id="n89886"><a id="n89889"><a id="n89890"><a id="n89898"><a id="n89885"><a id="n89899"><a id="n89888"><a id="n89887">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#390_12_refs">llforeign_ret_ty</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#230_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#272">fn_type</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#42">.cast</a></c24><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;391</ln><a id="391">&nbsp;</a><a id="n89893"><a id="n89891"><a id="n89892">&nbsp;</a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#391_17_refs">ty</a></c20><c4>)</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#391">ty</a></c26><c3>,</c3><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;392</ln><a id="392">&nbsp;</a><a id="n89896"><a id="n89894"><a id="n89897"><a id="n89895">&nbsp;</a></a></a></a><c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#230_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#272">fn_type</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c21><a href="#230_1_refs">
</a></c21><br/><ln>&nbsp;393</ln><a id="393">&nbsp;</a>&nbsp;<c21><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;394</ln><a id="394">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;395</ln><a id="395">&nbsp;</a><a id="n89981"><a id="n89947"><a id="n89971"><a id="n89961"><a id="n89978"><a id="n89943"><a id="n89982"><a id="n89979"><a id="n89955"><a id="n89960"><a id="n89962"><a id="n89998"><a id="n89948"><a id="n89965"><a id="n89995"><a id="n89945"><a id="n89936"><a id="n89944"><a id="n89954"><a id="n89968"><a id="n89949"><a id="n89973"><a id="n89964"><a id="n89958"><a id="n89953"><a id="n89939"><a id="n89933"><a id="n89972"><a id="n89980"><a id="n89935"><a id="n89977"><a id="n89974"><a id="n89940"><a id="n89950"><a id="n89932"><a id="n89963"><a id="n89934"><a id="n89946"><a id="n89976"><a id="n89951"><a id="n89975"><a id="n89959"><a id="n89969"><a id="n89957"><a id="n89967"><a id="n89952"><a id="n89956"><a id="n89938"><a id="n89937"><a id="n89970"><a id="n89966">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c16><a href="../../../libstd/fmt/rt.rs.html#n169479">"llretptr=</a></c16><c3>{}</c3><c16><a href="../../../libstd/fmt/rt.rs.html#n169479">"</a></c16><c3>,</c3><c22><a href="#230_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../libstd/fmt/mod.rs.html#n169877">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#235">llretptr</a></c26><c4>))</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;396</ln><a id="396">&nbsp;</a><a id="n90039"><a id="n90070"><a id="n90055"><a id="n90065"><a id="n90080"><a id="n90052"><a id="n90044"><a id="n90078"><a id="n90067"><a id="n90081"><a id="n90069"><a id="n90079"><a id="n90060"><a id="n90036"><a id="n90056"><a id="n90053"><a id="n90085"><a id="n90059"><a id="n90038"><a id="n90083"><a id="n90058"><a id="n90084"><a id="n90047"><a id="n90082"><a id="n90099"><a id="n90064"><a id="n90040"><a id="n90057"><a id="n90042"><a id="n90049"><a id="n90073"><a id="n90074"><a id="n90072"><a id="n90077"><a id="n90043"><a id="n90075"><a id="n90051"><a id="n90062"><a id="n90061"><a id="n90054"><a id="n90086"><a id="n90071"><a id="n90048"><a id="n90068"><a id="n90037"><a id="n90102"><a id="n90066"><a id="n90063"><a id="n90041"><a id="n90050"><a id="n90076">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c16><a href="../../../libstd/fmt/rt.rs.html#n169453">"llforeign_retval=</a></c16><c3>{}</c3><c16><a href="../../../libstd/fmt/rt.rs.html#n169453">"</a></c16><c3>,</c3><c22><a href="#230_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#396">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#377">llforeign_retval</a></c26><c4>))</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;397</ln><a id="397">&nbsp;</a><a id="n90148"><a id="n90167"><a id="n90179"><a id="n90170"><a id="n90206"><a id="n90166"><a id="n90186"><a id="n90160"><a id="n90146"><a id="n90178"><a id="n90162"><a id="n90163"><a id="n90158"><a id="n90183"><a id="n90173"><a id="n90189"><a id="n90164"><a id="n90143"><a id="n90151"><a id="n90140"><a id="n90190"><a id="n90175"><a id="n90188"><a id="n90184"><a id="n90141"><a id="n90171"><a id="n90177"><a id="n90187"><a id="n90156"><a id="n90144"><a id="n90153"><a id="n90185"><a id="n90203"><a id="n90181"><a id="n90168"><a id="n90145"><a id="n90169"><a id="n90174"><a id="n90161"><a id="n90165"><a id="n90180"><a id="n90157"><a id="n90159"><a id="n90152"><a id="n90176"><a id="n90154"><a id="n90172"><a id="n90142"><a id="n90155"><a id="n90182"><a id="n90147">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c20><a href="#397_15_refs">"llrust_ret_ty=</a></c20><c3>{}</c3><c20><a href="#397_15_refs">"</a></c20><c3>,</c3><c22><a href="#230_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c27><a href="../../../libstd/fmt/mod.rs.html#n169877">.type_to_str</a></c27><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#389">llrust_ret_ty</a></c26><c4>))</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;398</ln><a id="398">&nbsp;</a><a id="n90285"><a id="n90282"><a id="n90245"><a id="n90250"><a id="n90244"><a id="n90268"><a id="n90257"><a id="n90256"><a id="n90284"><a id="n90258"><a id="n90288"><a id="n90273"><a id="n90249"><a id="n90263"><a id="n90266"><a id="n90293"><a id="n90307"><a id="n90287"><a id="n90272"><a id="n90274"><a id="n90280"><a id="n90251"><a id="n90277"><a id="n90310"><a id="n90275"><a id="n90290"><a id="n90260"><a id="n90292"><a id="n90270"><a id="n90271"><a id="n90267"><a id="n90248"><a id="n90261"><a id="n90278"><a id="n90252"><a id="n90276"><a id="n90264"><a id="n90294"><a id="n90246"><a id="n90247"><a id="n90283"><a id="n90269"><a id="n90289"><a id="n90262"><a id="n90286"><a id="n90281"><a id="n90265"><a id="n90255"><a id="n90291"><a id="n90259"><a id="n90279">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c12><a href="../../../libstd/fmt/rt.rs.html#n169447">"llforeign_ret_ty=</a></c12><c3>{}</c3><c12><a href="../../../libstd/fmt/rt.rs.html#n169447">"</a></c12><c3>,</c3><c22><a href="#230_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#398">.type_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#390">llforeign_ret_ty</a></c26><c4>))</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;399</ln><a id="399">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;400</ln><a id="400">&nbsp;</a><a id="n90319"><a id="n90326"><a id="n90518"><a id="n90318"><a id="n90317">&nbsp;</a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#230_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#389">llrust_ret_ty</a></c26><c5><a href="#230_1_refs">&nbsp;==&nbsp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#390">llforeign_ret_ty</a></c26><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;401</ln><a id="401">&nbsp;</a><a id="n90325"><a id="n90322"><a id="n90321"><a id="n90320"><a id="n90324"><a id="n90323">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/build.rs.html#399">Store</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#377">llforeign_retval</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#235">llretptr</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;402</ln><a id="402">&nbsp;</a><a id="n90517"><a id="n90516">&nbsp;</a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#230_1_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#230_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;403</ln><a id="403">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;The&nbsp;actual&nbsp;return&nbsp;type&nbsp;is&nbsp;a&nbsp;struct,&nbsp;but&nbsp;the&nbsp;ABI
</c40><br/><ln>&nbsp;404</ln><a id="404">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;adaptation&nbsp;code&nbsp;has&nbsp;cast&nbsp;it&nbsp;into&nbsp;some&nbsp;scalar&nbsp;type.&nbsp;&nbsp;The
</c40><br/><ln>&nbsp;405</ln><a id="405">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;code&nbsp;that&nbsp;follows&nbsp;is&nbsp;the&nbsp;only&nbsp;reliable&nbsp;way&nbsp;I&nbsp;have
</c40><br/><ln>&nbsp;406</ln><a id="406">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;found&nbsp;to&nbsp;do&nbsp;a&nbsp;transform&nbsp;like&nbsp;i64&nbsp;-&gt;&nbsp;{i32,i32}.
</c40><br/><ln>&nbsp;407</ln><a id="407">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Basically&nbsp;we&nbsp;dump&nbsp;the&nbsp;data&nbsp;onto&nbsp;the&nbsp;stack&nbsp;then&nbsp;memcpy&nbsp;it.
</c40><br/><ln>&nbsp;408</ln><a id="408">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//
</c40><br/><ln>&nbsp;409</ln><a id="409">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Other&nbsp;approaches&nbsp;I&nbsp;tried:
</c40><br/><ln>&nbsp;410</ln><a id="410">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;-&nbsp;Casting&nbsp;rust&nbsp;ret&nbsp;pointer&nbsp;to&nbsp;the&nbsp;foreign&nbsp;type&nbsp;and&nbsp;using&nbsp;Store
</c40><br/><ln>&nbsp;411</ln><a id="411">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;is&nbsp;(a)&nbsp;unsafe&nbsp;if&nbsp;size&nbsp;of&nbsp;foreign&nbsp;type&nbsp;&gt;&nbsp;size&nbsp;of&nbsp;rust&nbsp;type&nbsp;and
</c40><br/><ln>&nbsp;412</ln><a id="412">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;(b)&nbsp;runs&nbsp;afoul&nbsp;of&nbsp;strict&nbsp;aliasing&nbsp;rules,&nbsp;yielding&nbsp;invalid
</c40><br/><ln>&nbsp;413</ln><a id="413">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;assembly&nbsp;under&nbsp;-O&nbsp;(specifically,&nbsp;the&nbsp;store&nbsp;gets&nbsp;removed).
</c40><br/><ln>&nbsp;414</ln><a id="414">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;-&nbsp;Truncating&nbsp;foreign&nbsp;type&nbsp;to&nbsp;correct&nbsp;integral&nbsp;type&nbsp;and&nbsp;then
</c40><br/><ln>&nbsp;415</ln><a id="415">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;bitcasting&nbsp;to&nbsp;the&nbsp;struct&nbsp;type&nbsp;yields&nbsp;invalid&nbsp;cast&nbsp;errors.
</c40><br/><ln>&nbsp;416</ln><a id="416">&nbsp;</a><a id="n90329"><a id="n90333"><a id="n90334"><a id="n90331"><a id="n90330"><a id="n90327"><a id="n90335"><a id="n90328"><a id="n90332">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#416_16_refs">llscratch</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/base.rs.html#1132">base::alloca</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#390">llforeign_ret_ty</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c12><a href="#230_1_refs">"__cast"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;417</ln><a id="417">&nbsp;</a><a id="n90337"><a id="n90338"><a id="n90341"><a id="n90336"><a id="n90340"><a id="n90339">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/build.rs.html#399">Store</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#377">llforeign_retval</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#416">llscratch</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;418</ln><a id="418">&nbsp;</a><a id="n90344"><a id="n90347"><a id="n90352"><a id="n90342"><a id="n90343"><a id="n90351"><a id="n90346"><a id="n90345"><a id="n90349"><a id="n90348"><a id="n90353"><a id="n90350">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#418_16_refs">llscratch_i8</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/build.rs.html#549">BitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#416">llscratch</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/type_.rs.html#68">Type::i8</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c4>)</c4><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>())</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;419</ln><a id="419">&nbsp;</a><a id="n90357"><a id="n90359"><a id="n90362"><a id="n90354"><a id="n90364"><a id="n90356"><a id="n90355"><a id="n90360"><a id="n90358"><a id="n90363"><a id="n90361"><a id="n90365">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#419_16_refs">llretptr_i8</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/build.rs.html#549">BitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#235">llretptr</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/type_.rs.html#68">Type::i8</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c4>)</c4><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>())</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;420</ln><a id="420">&nbsp;</a><a id="n90368"><a id="n90371"><a id="n90367"><a id="n90369"><a id="n90366"><a id="n90373"><a id="n90372"><a id="n90370">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#420_16_refs">llrust_size</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/machine.rs.html#23">machine::llsize_of_store</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#389">llrust_ret_ty</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;421</ln><a id="421">&nbsp;</a><a id="n90378"><a id="n90375"><a id="n90374"><a id="n90376"><a id="n90381"><a id="n90379"><a id="n90380"><a id="n90377">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#421_16_refs">llforeign_align</a></c20><c13><a href="#230_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/machine.rs.html#100">machine::llalign_of_min</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#390">llforeign_ret_ty</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;422</ln><a id="422">&nbsp;</a><a id="n90389"><a id="n90388"><a id="n90382"><a id="n90386"><a id="n90383"><a id="n90385"><a id="n90384"><a id="n90387">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#422_16_refs">llrust_align</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/machine.rs.html#100">machine::llalign_of_min</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#389">llrust_ret_ty</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;423</ln><a id="423">&nbsp;</a><a id="n90397"><a id="n90396"><a id="n90395"><a id="n90392"><a id="n90394"><a id="n90393"><a id="n90390"><a id="n90391">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#230_1_refs">&nbsp;</a></c22><c20><a href="#423_16_refs">llalign</a></c20><c16><a href="#230_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../libstd/cmp.rs.html#n76193">cmp::min</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#421">llforeign_align</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#422">llrust_align</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;424</ln><a id="424">&nbsp;</a><a id="n90471"><a id="n90475"><a id="n90459"><a id="n90450"><a id="n90445"><a id="n90443"><a id="n90463"><a id="n90456"><a id="n90470"><a id="n90464"><a id="n90493"><a id="n90465"><a id="n90451"><a id="n90467"><a id="n90466"><a id="n90446"><a id="n90431"><a id="n90438"><a id="n90476"><a id="n90473"><a id="n90434"><a id="n90453"><a id="n90441"><a id="n90452"><a id="n90468"><a id="n90469"><a id="n90447"><a id="n90442"><a id="n90454"><a id="n90449"><a id="n90472"><a id="n90462"><a id="n90433"><a id="n90439"><a id="n90440"><a id="n90448"><a id="n90455"><a id="n90435"><a id="n90430"><a id="n90432"><a id="n90474"><a id="n90460"><a id="n90457"><a id="n90477"><a id="n90490"><a id="n90444"><a id="n90458"><a id="n90461">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c8><a href="../../../libstd/fmt/rt.rs.html#n169461">"llrust_size=</a></c8><c3>{</c3><c8><a href="../../../libstd/fmt/rt.rs.html#n169461">:?</a></c8><c3>}</c3><c8><a href="../../../libstd/fmt/rt.rs.html#n169461">"</a></c8><c3>,</c3><c22><a href="#230_1_refs">&nbsp;</a></c22><c26><a href="../../../libstd/fmt/mod.rs.html#n170067">llrust_size</a></c26><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;425</ln><a id="425">&nbsp;</a><a id="n90500"><a id="n90502"><a id="n90499"><a id="n90515"><a id="n90501"><a id="n90514">&nbsp;</a></a></a></a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/base.rs.html#1062">base::call_memcpy</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#419">llretptr_i8</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#418">llscratch_i8</a></c26><c3>,</c3><c27><a href="#230_1_refs">
</a></c27><br/><ln>&nbsp;426</ln><a id="426">&nbsp;</a><a id="n90507"><a id="n90510"><a id="n90509"><a id="n90513"><a id="n90512"><a id="n90508"><a id="n90505"><a id="n90504"><a id="n90503">&nbsp;</a></a></a></a></a></a></a></a></a><c27><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/common.rs.html#572">C_uint</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#256">ccx</a></c26><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#420">llrust_size</a></c26><c21><a href="#230_1_refs">&nbsp;as&nbsp;</a></c21><c8><a href="#230_1_refs">uint</a></c8><c4>)</c4><c3>,</c3><c27><a href="#230_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#423">llalign</a></c26><c21><a href="#230_1_refs">&nbsp;as&nbsp;</a></c21><c8><a href="#230_1_refs">u32</a></c8><c4>)</c4><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;427</ln><a id="427">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;428</ln><a id="428">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;429</ln><a id="429">&nbsp;</a>&nbsp;<c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;430</ln><a id="430">&nbsp;</a><a id="n90521"><a id="n90522"><a id="n90523">&nbsp;</a></a></a><c22><a href="#230_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>return</c21><c13><a href="#230_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#232">bcx</a></c26><c3>;</c3><c22><a href="#230_1_refs">
</a></c22><br/><ln>&nbsp;431</ln><a id="431">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;432</ln><a id="432">&nbsp;</a><a id="n90525">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;433</ln><a id="433">&nbsp;</a><a id="n90544"><a id="n90528"><a id="n90535"><a id="n90530"><a id="n90533"><a id="n90529"><a id="n90536"><a id="n90534">&nbsp;</a></a></a></a></a></a></a></a><c21>pub</c21><c1><a href="#432_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#432_1_refs">&nbsp;trans_foreign_mod</a></c30><c4>(</c4><c20><a href="#433_25_refs">ccx</a></c20><c1><a href="#432_1_refs">:&nbsp;</a></c1><c8><a href="#432_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#432_1_refs">&nbsp;</a></c1><c20><a href="#433_45_refs">foreign_mod</a></c20><c1><a href="#432_1_refs">:&nbsp;</a></c1><c8><a href="#432_1_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n60768">ast::ForeignMod</a></c8><c4>)</c4><c1><a href="#432_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#432_1_refs">
</a></c22><br/><ln>&nbsp;434</ln><a id="434">&nbsp;</a><a id="n90540"><a id="n90538"><a id="n90543"><a id="n90539"><a id="n90541"><a id="n90537"><a id="n90542">&nbsp;</a></a></a></a></a></a></a><c22><a href="#432_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#432_1_refs">&nbsp;</a></c22><c20><a href="#432_1_refs">_icx</a></c20><c16><a href="#432_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/base.rs.html#121">push_ctxt</a></c26><c4>(</c4><c12><a href="#432_1_refs">"foreign::trans_foreign_mod"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#432_1_refs">
</a></c22><br/><ln>&nbsp;435</ln><a id="435">&nbsp;</a><a id="n90547"><a id="n90549"><a id="n90557"><a id="n90552"><a id="n90545"><a id="n90556"><a id="n90610"><a id="n90555"><a id="n90606"><a id="n90607"><a id="n90550"><a id="n90554"><a id="n90546"><a id="n90548"><a id="n90551"><a id="n90609"><a id="n90553"><a id="n90608">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#432_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c21><a href="../../../libstd/option.rs.html#n104337">&nbsp;</a></c21><c20><a href="../../../libstd/slice.rs.html#n55129">&amp;</a></c20><c20><a href="#435_9_refs">foreign_item</a></c20><c21><a href="../../../libstd/option.rs.html#n104337">&nbsp;in&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#433">foreign_mod</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n60768">.items</a></c24><c10><a href="../../../libstd/vec.rs.html#n57688">.iter</a></c10><c4>()</c4><c21><a href="../../../libstd/option.rs.html#n104337">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;436</ln><a id="436">&nbsp;</a><a id="n90559"><a id="n90587"><a id="n90558"><a id="n90588">&nbsp;</a></a></a></a><c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#435">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.node</a></c24><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c3>{</c3><c13><a href="../../../libstd/slice.rs.html#n55129">
</a></c13><br/><ln>&nbsp;437</ln><a id="437">&nbsp;</a><a id="n90560"><a id="n90583"><a id="n90567">&nbsp;</a></a></a><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="../../../libsyntax/ast.rs.html#n71134">ast::ForeignItemFn</a></c20><c4>(</c4><c20><a href="../../../libsyntax/ast.rs.html#n71134">..</a></c20><c4>)</c4><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c3>{</c3><c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;438</ln><a id="438">&nbsp;</a><a id="n90561"><a id="n90566"><a id="n90562"><a id="n90563"><a id="n90564"><a id="n90565">&nbsp;</a></a></a></a></a></a><c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c22><c20><a href="#438_20_refs">abis</a></c20><c13><a href="#435_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#433">foreign_mod</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n60768">.abis</a></c24><c3>;</c3><c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;439</ln><a id="439">&nbsp;</a><a id="n90572"><a id="n90581"><a id="n90573"><a id="n90574"><a id="n90569"><a id="n90568"><a id="n90582"><a id="n90570"><a id="n90571">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c21><c5><a href="../../../libstd/slice.rs.html#n55129">!</a></c5><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#438">abis</a></c26><c10><a href="../../../libsyntax/abi.rs.html#n15579">.is_rust</a></c10><c4>()</c4><c1><a href="#435_4_refs">&nbsp;||&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#438">abis</a></c26><c10><a href="../../../libsyntax/abi.rs.html#n15607">.is_intrinsic</a></c10><c4>())</c4><c21><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c21><c3>{</c3><c22><a href="#435_4_refs">
</a></c22><br/><ln>&nbsp;440</ln><a id="440">&nbsp;</a><a id="n90580"><a id="n90576"><a id="n90578"><a id="n90577"><a id="n90575"><a id="n90579">&nbsp;</a></a></a></a></a></a><c22><a href="#435_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#182">register_foreign_item_fn</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#433">ccx</a></c26><c3>,</c3><c27><a href="#435_4_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#438">abis</a></c26><c3>,</c3><c27><a href="#435_4_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#435">foreign_item</a></c26><c4>)</c4><c3>;</c3><c22><a href="#435_4_refs">
</a></c22><br/><ln>&nbsp;441</ln><a id="441">&nbsp;</a>&nbsp;<c22><a href="#435_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;442</ln><a id="442">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c13><a href="../../../libstd/slice.rs.html#n55129">
</a></c13><br/><ln>&nbsp;443</ln><a id="443">&nbsp;</a><a id="n90584"><a id="n90585"><a id="n90586">&nbsp;</a></a></a><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="#435_4_refs">_</a></c20><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c13><c3>{}</c3><c13><a href="../../../libstd/slice.rs.html#n55129">
</a></c13><br/><ln>&nbsp;444</ln><a id="444">&nbsp;</a>&nbsp;<c13><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c3>}</c3><c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;445</ln><a id="445">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;446</ln><a id="446">&nbsp;</a><a id="n90591"><a id="n90590"><a id="n90593"><a id="n90594"><a id="n90595"><a id="n90589"><a id="n90592">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c22><c20><a href="#446_12_refs">lname</a></c20><c16><a href="../../../libstd/slice.rs.html#n55129">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#801">link_name</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#435">foreign_item</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;447</ln><a id="447">&nbsp;</a><a id="n90598"><a id="n90596"><a id="n90600"><a id="n90597"><a id="n90599"><a id="n90605"><a id="n90604">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#433">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#50">.item_symbols</a></c24><c10><a href="../../../libstd/cell.rs.html#n107663">.borrow_mut</a></c10><c4>()</c4><c10><a href="../../../librustc/middle/trans/common.rs.html#818">.insert</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#435">foreign_item</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.id</a></c24><c3>,</c3><c10><a href="../../../librustc/middle/trans/common.rs.html#818">
</a></c10><br/><ln>&nbsp;448</ln><a id="448">&nbsp;</a><a id="n90603"><a id="n90601"><a id="n90602">&nbsp;</a></a></a><c10><a href="../../../librustc/middle/trans/common.rs.html#818">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c10><c26><a href="../../../librustc/middle/trans/foreign.rs.html#446">lname</a></c26><c10><a href="../../../libsyntax/parse/token.rs.html#n123571">.get</a></c10><c4>()</c4><c10><a href="../../../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>())</c4><c3>;</c3><c22><a href="../../../libstd/slice.rs.html#n55129">
</a></c22><br/><ln>&nbsp;449</ln><a id="449">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/slice.rs.html#n55129">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="../../../libstd/option.rs.html#n104337">
</a></c21><br/><ln>&nbsp;450</ln><a id="450">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;451</ln><a id="451">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;452</ln><a id="452">&nbsp;</a>&nbsp;<c42>///////////////////////////////////////////////////////////////////////////
</c42><br/><ln>&nbsp;453</ln><a id="453">&nbsp;</a>&nbsp;<c40>//&nbsp;Rust&nbsp;functions&nbsp;with&nbsp;foreign&nbsp;ABIs
</c40><br/><ln>&nbsp;454</ln><a id="454">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;455</ln><a id="455">&nbsp;</a>&nbsp;<c40>//&nbsp;These&nbsp;are&nbsp;normal&nbsp;Rust&nbsp;functions&nbsp;defined&nbsp;with&nbsp;foreign&nbsp;ABIs.&nbsp;&nbsp;For
</c40><br/><ln>&nbsp;456</ln><a id="456">&nbsp;</a>&nbsp;<c40>//&nbsp;now,&nbsp;and&nbsp;perhaps&nbsp;forever,&nbsp;we&nbsp;translate&nbsp;these&nbsp;using&nbsp;a&nbsp;"layer&nbsp;of
</c40><br/><ln>&nbsp;457</ln><a id="457">&nbsp;</a>&nbsp;<c40>//&nbsp;indirection".&nbsp;That&nbsp;is,&nbsp;given&nbsp;a&nbsp;Rust&nbsp;declaration&nbsp;like:
</c40><br/><ln>&nbsp;458</ln><a id="458">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;459</ln><a id="459">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extern&nbsp;"C"&nbsp;fn&nbsp;foo(i:&nbsp;u32)&nbsp;-&gt;&nbsp;u32&nbsp;{&nbsp;...&nbsp;}
</c40><br/><ln>&nbsp;460</ln><a id="460">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;461</ln><a id="461">&nbsp;</a>&nbsp;<c40>//&nbsp;we&nbsp;will&nbsp;generate&nbsp;a&nbsp;function&nbsp;like:
</c40><br/><ln>&nbsp;462</ln><a id="462">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;463</ln><a id="463">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;foo(T&nbsp;i)&nbsp;{
</c40><br/><ln>&nbsp;464</ln><a id="464">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;r;
</c40><br/><ln>&nbsp;465</ln><a id="465">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foo0(&amp;r,&nbsp;NULL,&nbsp;i);
</c40><br/><ln>&nbsp;466</ln><a id="466">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;
</c40><br/><ln>&nbsp;467</ln><a id="467">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</c40><br/><ln>&nbsp;468</ln><a id="468">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;469</ln><a id="469">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[inline_always]
</c40><br/><ln>&nbsp;470</ln><a id="470">&nbsp;</a>&nbsp;<c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;foo0(uint32_t&nbsp;*r,&nbsp;void&nbsp;*env,&nbsp;uint32_t&nbsp;i)&nbsp;{&nbsp;...&nbsp;}
</c40><br/><ln>&nbsp;471</ln><a id="471">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;472</ln><a id="472">&nbsp;</a>&nbsp;<c40>//&nbsp;Here&nbsp;the&nbsp;(internal)&nbsp;`foo0`&nbsp;function&nbsp;follows&nbsp;the&nbsp;Rust&nbsp;ABI&nbsp;as&nbsp;normal,
</c40><br/><ln>&nbsp;473</ln><a id="473">&nbsp;</a>&nbsp;<c40>//&nbsp;where&nbsp;the&nbsp;`foo`&nbsp;function&nbsp;follows&nbsp;the&nbsp;C&nbsp;ABI.&nbsp;We&nbsp;rely&nbsp;on&nbsp;LLVM&nbsp;to
</c40><br/><ln>&nbsp;474</ln><a id="474">&nbsp;</a>&nbsp;<c40>//&nbsp;inline&nbsp;the&nbsp;one&nbsp;into&nbsp;the&nbsp;other.&nbsp;Of&nbsp;course&nbsp;we&nbsp;could&nbsp;just&nbsp;generate&nbsp;the
</c40><br/><ln>&nbsp;475</ln><a id="475">&nbsp;</a>&nbsp;<c40>//&nbsp;correct&nbsp;code&nbsp;in&nbsp;the&nbsp;first&nbsp;place,&nbsp;but&nbsp;this&nbsp;is&nbsp;much&nbsp;simpler.
</c40><br/><ln>&nbsp;476</ln><a id="476">&nbsp;</a><a id="n90611">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;477</ln><a id="477">&nbsp;</a><a id="n90614"><a id="n90615"><a id="n90616">&nbsp;</a></a></a><c21>pub</c21><c1><a href="#476_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#476_1_refs">&nbsp;register_rust_fn_with_foreign_abi</a></c30><c4>(</c4><c20><a href="#477_41_refs">ccx</a></c20><c1><a href="#476_1_refs">:&nbsp;</a></c1><c8><a href="#476_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#476_1_refs">
</a></c1><br/><ln>&nbsp;478</ln><a id="478">&nbsp;</a><a id="n90620"><a id="n90619">&nbsp;</a></a><c1><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#478_41_refs">sp</a></c20><c1><a href="#476_1_refs">:&nbsp;</a></c1><c8><a href="../../../libsyntax/codemap.rs.html#n10620">Span</a></c8><c3>,</c3><c1><a href="#476_1_refs">
</a></c1><br/><ln>&nbsp;479</ln><a id="479">&nbsp;</a><a id="n90625"><a id="n90623"><a id="n90624">&nbsp;</a></a></a><c1><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#479_41_refs">sym</a></c20><c1><a href="#476_1_refs">:&nbsp;</a></c1><c8><a href="#476_1_refs">~str</a></c8><c3>,</c3><c1><a href="#476_1_refs">
</a></c1><br/><ln>&nbsp;480</ln><a id="480">&nbsp;</a><a id="n90628"><a id="n90629">&nbsp;</a></a><c1><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#480_41_refs">node_id</a></c20><c1><a href="#476_1_refs">:&nbsp;</a></c1><c8><a href="../../../libsyntax/ast.rs.html#n18432">ast::NodeId</a></c8><c4>)</c4><c1><a href="#476_1_refs">
</a></c1><br/><ln>&nbsp;481</ln><a id="481">&nbsp;</a><a id="n90873"><a id="n90631">&nbsp;</a></a><c1><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#476_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c1><a href="#476_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;482</ln><a id="482">&nbsp;</a><a id="n90637"><a id="n90636"><a id="n90638"><a id="n90633"><a id="n90634"><a id="n90635"><a id="n90632">&nbsp;</a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#476_1_refs">&nbsp;</a></c22><c20><a href="#476_1_refs">_icx</a></c20><c16><a href="#476_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/base.rs.html#121">push_ctxt</a></c26><c4>(</c4><c12><a href="#476_1_refs">"foreign::register_foreign_fn"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;483</ln><a id="483">&nbsp;</a>&nbsp;<c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;484</ln><a id="484">&nbsp;</a><a id="n90646"><a id="n90644"><a id="n90643"><a id="n90645"><a id="n90641"><a id="n90640"><a id="n90639"><a id="n90642">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#476_1_refs">&nbsp;</a></c22><c20><a href="#484_8_refs">tys</a></c20><c16><a href="#476_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#828">foreign_types_for_id</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#477">ccx</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#480">node_id</a></c26><c4>)</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;485</ln><a id="485">&nbsp;</a><a id="n90652"><a id="n90650"><a id="n90647"><a id="n90654"><a id="n90651"><a id="n90648"><a id="n90653"><a id="n90649"><a id="n90655">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#476_1_refs">&nbsp;</a></c22><c20><a href="#485_8_refs">llfn_ty</a></c20><c13><a href="#476_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#865">lltype_for_fn_from_foreign_types</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#477">ccx</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c5><a href="#476_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#484">tys</a></c26><c4>)</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;486</ln><a id="486">&nbsp;</a><a id="n90657"><a id="n90659"><a id="n90663"><a id="n90661"><a id="n90660"><a id="n90656"><a id="n90658"><a id="n90664"><a id="n90662">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#476_1_refs">&nbsp;</a></c22><c20><a href="#486_8_refs">t</a></c20><c13><a href="#476_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/ty.rs.html#2728">ty::node_id_to_type</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#477">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>()</c4><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#480">node_id</a></c26><c4>)</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;487</ln><a id="487">&nbsp;</a><a id="n90701"><a id="n90666"><a id="n90673"><a id="n90671"><a id="n90669"><a id="n90700"><a id="n90667"><a id="n90672"><a id="n90665"><a id="n90668"><a id="n90670">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#476_1_refs">&nbsp;</a></c22><c4>(</c4><c20><a href="#487_9_refs">cconv</a></c20><c3>,</c3><c20><a href="#476_1_refs">&nbsp;</a></c20><c20><a href="#487_16_refs">output</a></c20><c4>)</c4><c16><a href="#476_1_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#476_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/ty.rs.html#395">ty::get</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#486">t</a></c26><c4>)</c4><c24><a href="../../../librustc/middle/ty.rs.html#375">.sty</a></c24><c21><a href="#476_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#476_1_refs">
</a></c21><br/><ln>&nbsp;488</ln><a id="488">&nbsp;</a><a id="n90675"><a id="n90674"><a id="n90693"><a id="n90685">&nbsp;</a></a></a></a><c21><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../librustc/middle/ty.rs.html#741">ty::ty_bare_fn</a></c20><c4>(</c4><c20><a href="#488_23_refs">ref&nbsp;fn_ty</a></c20><c4>)</c4><c21><a href="#476_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#476_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;489</ln><a id="489">&nbsp;</a><a id="n90680"><a id="n90676"><a id="n90679"><a id="n90681"><a id="n90677"><a id="n90683"><a id="n90682"><a id="n90684"><a id="n90678">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#476_1_refs">&nbsp;</a></c22><c20><a href="#489_16_refs">c</a></c20><c13><a href="#476_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#74">llvm_calling_convention</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#477">ccx</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#488">fn_ty</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#421">.abis</a></c24><c4>)</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;490</ln><a id="490">&nbsp;</a><a id="n90687"><a id="n90691"><a id="n90689"><a id="n90688"><a id="n90690"><a id="n90692"><a id="n90686">&nbsp;</a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#489">c</a></c26><c10><a href="../../../libstd/option.rs.html#n105091">.unwrap_or</a></c10><c4>(</c4><c26><a href="../../../librustc/lib/llvm.rs.html#32">lib::llvm::CCallConv</a></c26><c4>)</c4><c3>,</c3><c14><a href="#476_1_refs">&nbsp;</a></c14><c26><a href="../../../librustc/middle/trans/foreign.rs.html#488">fn_ty</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#422">.sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c4>)</c4><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;491</ln><a id="491">&nbsp;</a>&nbsp;<c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#476_1_refs">
</a></c21><br/><ln>&nbsp;492</ln><a id="492">&nbsp;</a><a id="n90694"><a id="n90696"><a id="n90699">&nbsp;</a></a></a><c21><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#476_1_refs">_</a></c20><c21><a href="#476_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#476_1_refs">&nbsp;</a></c21><c27><a href="#476_1_refs">fail!</a></c27><c4>(</c4><c12><a href="#476_1_refs">"expected&nbsp;bare&nbsp;</a></c12><c30>fn</c30><c30><a href="#476_1_refs">&nbsp;in&nbsp;register_rust_fn_with_foreign_abi"</a></c30><c30>)</c30><c30><a href="#476_1_refs">
</a></c30><br/><ln>&nbsp;493</ln><a id="493">&nbsp;</a>&nbsp;<c27><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c3>};</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;494</ln><a id="494">&nbsp;</a><a id="n90702"><a id="n90709"><a id="n90713"><a id="n90714"><a id="n90711"><a id="n90704"><a id="n90705"><a id="n90707"><a id="n90703"><a id="n90708"><a id="n90706"><a id="n90710"><a id="n90712">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#476_1_refs">&nbsp;</a></c22><c20><a href="#494_8_refs">llfn</a></c20><c13><a href="#476_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/base.rs.html#1786">base::register_fn_llvmty</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#477">ccx</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#478">sp</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#479">sym</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#480">node_id</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#487">cconv</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#485">llfn_ty</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#487">output</a></c26><c4>)</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;495</ln><a id="495">&nbsp;</a><a id="n90718"><a id="n90717"><a id="n90716"><a id="n90720"><a id="n90715"><a id="n90719">&nbsp;</a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#912">add_argument_attributes</a></c26><c4>(</c4><c5><a href="#476_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#484">tys</a></c26><c3>,</c3><c27><a href="#476_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#494">llfn</a></c26><c4>)</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;496</ln><a id="496">&nbsp;</a><a id="n90813"><a id="n90804"><a id="n90864"><a id="n90805"><a id="n90849"><a id="n90798"><a id="n90843"><a id="n90818"><a id="n90824"><a id="n90823"><a id="n90812"><a id="n90799"><a id="n90791"><a id="n90780"><a id="n90847"><a id="n90778"><a id="n90840"><a id="n90793"><a id="n90801"><a id="n90802"><a id="n90795"><a id="n90844"><a id="n90773"><a id="n90803"><a id="n90786"><a id="n90782"><a id="n90789"><a id="n90807"><a id="n90788"><a id="n90822"><a id="n90781"><a id="n90867"><a id="n90816"><a id="n90808"><a id="n90785"><a id="n90774"><a id="n90841"><a id="n90821"><a id="n90777"><a id="n90814"><a id="n90817"><a id="n90779"><a id="n90769"><a id="n90810"><a id="n90796"><a id="n90848"><a id="n90820"><a id="n90790"><a id="n90838"><a id="n90825"><a id="n90851"><a id="n90811"><a id="n90775"><a id="n90797"><a id="n90815"><a id="n90845"><a id="n90792"><a id="n90839"><a id="n90765"><a id="n90787"><a id="n90806"><a id="n90783"><a id="n90809"><a id="n90842"><a id="n90850"><a id="n90800"><a id="n90776"><a id="n90770"><a id="n90846"><a id="n90794"><a id="n90784"><a id="n90819">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">"register_rust_fn_with_foreign_abi</a></c12><c4>(</c4><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">node_id=</a></c12><c3>{</c3><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">:?</a></c12><c3>},</c3><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;llfn_ty=</a></c12><c3>{},</c3><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;llfn=</a></c12><c3>{}</c3><c4>)</c4><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">"</a></c12><c3>,</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;497</ln><a id="497">&nbsp;</a><a id="n90756"><a id="n90836"><a id="n90768"><a id="n90828"><a id="n90837"><a id="n90767"><a id="n90753"><a id="n90757"><a id="n90831"><a id="n90760"><a id="n90834"><a id="n90833"><a id="n90754"><a id="n90755"><a id="n90758"><a id="n90761"><a id="n90829"><a id="n90826"><a id="n90830"><a id="n90835"><a id="n90762"><a id="n90759"><a id="n90766"><a id="n90764"><a id="n90832"><a id="n90827"><a id="n90763">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../libstd/fmt/mod.rs.html#n170067">node_id</a></c26><c3>,</c3><c22><a href="#476_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#477">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#497">.type_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#485">llfn_ty</a></c26><c4>)</c4><c3>,</c3><c22><a href="#476_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#477">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c10><a href="../../../librustc/lib/llvm.rs.html#1855">.val_to_str</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#494">llfn</a></c26><c4>))</c4><c3>;</c3><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;498</ln><a id="498">&nbsp;</a><a id="n90874">&nbsp;</a><c22><a href="#476_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#494">llfn</a></c26><c22><a href="#476_1_refs">
</a></c22><br/><ln>&nbsp;499</ln><a id="499">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;500</ln><a id="500">&nbsp;</a><a id="n90875">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;501</ln><a id="501">&nbsp;</a><a id="n90879"><a id="n90878"><a id="n90880">&nbsp;</a></a></a><c21>pub</c21><c1><a href="#500_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#500_1_refs">&nbsp;trans_rust_fn_with_foreign_abi</a></c30><c4>(</c4><c20><a href="#501_38_refs">ccx</a></c20><c1><a href="#500_1_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#500_1_refs">
</a></c1><br/><ln>&nbsp;502</ln><a id="502">&nbsp;</a><a id="n90885"><a id="n90883"><a id="n90884">&nbsp;</a></a></a><c1><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#502_38_refs">decl</a></c20><c1><a href="#500_1_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n57969">ast::FnDecl</a></c8><c3>,</c3><c1><a href="#500_1_refs">
</a></c1><br/><ln>&nbsp;503</ln><a id="503">&nbsp;</a><a id="n90889"><a id="n90888"><a id="n90890">&nbsp;</a></a></a><c1><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#503_38_refs">body</a></c20><c1><a href="#500_1_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n27095">ast::Block</a></c8><c3>,</c3><c1><a href="#500_1_refs">
</a></c1><br/><ln>&nbsp;504</ln><a id="504">&nbsp;</a><a id="n90894"><a id="n90896"><a id="n90895"><a id="n90893">&nbsp;</a></a></a></a><c1><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#504_38_refs">attrs</a></c20><c1><a href="#500_1_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c3>[</c3><c8><a href="../../../libsyntax/ast.rs.html#n64946">ast::Attribute</a></c8><c3>],</c3><c1><a href="#500_1_refs">
</a></c1><br/><ln>&nbsp;505</ln><a id="505">&nbsp;</a><a id="n90900"><a id="n90899">&nbsp;</a></a><c1><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#505_38_refs">llwrapfn</a></c20><c1><a href="#500_1_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c3>,</c3><c1><a href="#500_1_refs">
</a></c1><br/><ln>&nbsp;506</ln><a id="506">&nbsp;</a><a id="n90904"><a id="n90903"><a id="n90905"><a id="n93012">&nbsp;</a></a></a></a><c1><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#506_38_refs">id</a></c20><c1><a href="#500_1_refs">:&nbsp;</a></c1><c8><a href="../../../libsyntax/ast.rs.html#n18432">ast::NodeId</a></c8><c4>)</c4><c1><a href="#500_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;507</ln><a id="507">&nbsp;</a><a id="n90908"><a id="n90909"><a id="n90906"><a id="n90910"><a id="n90912"><a id="n90911"><a id="n90907">&nbsp;</a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#500_1_refs">_icx</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/base.rs.html#121">push_ctxt</a></c26><c4>(</c4><c12><a href="#500_1_refs">"foreign::build_foreign_fn"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;508</ln><a id="508">&nbsp;</a><a id="n90918"><a id="n90913"><a id="n90914"><a id="n90917"><a id="n90916"><a id="n90915"><a id="n90920"><a id="n90919">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#508_8_refs">tys</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#828">foreign_types_for_id</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#501">ccx</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#506">id</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;509</ln><a id="509">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;510</ln><a id="510">&nbsp;</a><a id="n90941"><a id="n90943"><a id="n90942">&nbsp;</a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>unsafe</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c3>{</c3><c22><a href="#500_1_refs">&nbsp;</a></c22><c40>//&nbsp;unsafe&nbsp;because&nbsp;we&nbsp;call&nbsp;LLVM&nbsp;operations
</c40><br/><ln>&nbsp;511</ln><a id="511">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Build&nbsp;up&nbsp;the&nbsp;Rust&nbsp;function&nbsp;(`foo0`&nbsp;above).
</c40><br/><ln>&nbsp;512</ln><a id="512">&nbsp;</a><a id="n90929"><a id="n90922"><a id="n90923"><a id="n90926"><a id="n90927"><a id="n90931"><a id="n90930"><a id="n90924"><a id="n90925"><a id="n90928"><a id="n90921">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#512_12_refs">llrustfn</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">build_rust_fn</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#501">ccx</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#502">decl</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#503">body</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#504">attrs</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#506">id</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;513</ln><a id="513">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;514</ln><a id="514">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Build&nbsp;up&nbsp;the&nbsp;foreign&nbsp;wrapper&nbsp;(`foo`&nbsp;above).
</c40><br/><ln>&nbsp;515</ln><a id="515">&nbsp;</a><a id="n90933"><a id="n90940"><a id="n90934"><a id="n90932"><a id="n90935"><a id="n90939"><a id="n90936"><a id="n90937"><a id="n90938">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>return</c21><c1><a href="#500_1_refs">&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">build_wrap_fn</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#501">ccx</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#512">llrustfn</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#505">llwrapfn</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c5><a href="#500_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#508">tys</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;516</ln><a id="516">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;517</ln><a id="517">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;518</ln><a id="518">&nbsp;</a><a id="n90947"><a id="n90949"><a id="n90948"><a id="n91398"><a id="n90944">&nbsp;</a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c30>fn</c30><c30><a href="#518_4_refs">&nbsp;build_rust_fn</a></c30><c4>(</c4><c20><a href="#518_21_refs">ccx</a></c20><c1><a href="#518_4_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#518_4_refs">
</a></c1><br/><ln>&nbsp;519</ln><a id="519">&nbsp;</a><a id="n90954"><a id="n90953"><a id="n90952">&nbsp;</a></a></a><c1><a href="#518_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#519_21_refs">decl</a></c20><c1><a href="#518_4_refs">:&nbsp;</a></c1><c8><a href="#518_4_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n57969">ast::FnDecl</a></c8><c3>,</c3><c1><a href="#518_4_refs">
</a></c1><br/><ln>&nbsp;520</ln><a id="520">&nbsp;</a><a id="n90957"><a id="n90959"><a id="n90958">&nbsp;</a></a></a><c1><a href="#518_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#520_21_refs">body</a></c20><c1><a href="#518_4_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n27095">ast::Block</a></c8><c3>,</c3><c1><a href="#518_4_refs">
</a></c1><br/><ln>&nbsp;521</ln><a id="521">&nbsp;</a><a id="n90962"><a id="n90965"><a id="n90964"><a id="n90963">&nbsp;</a></a></a></a><c1><a href="#518_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#521_21_refs">attrs</a></c20><c1><a href="#518_4_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c3>[</c3><c8><a href="../../../libsyntax/ast.rs.html#n64946">ast::Attribute</a></c8><c3>],</c3><c1><a href="#518_4_refs">
</a></c1><br/><ln>&nbsp;522</ln><a id="522">&nbsp;</a><a id="n90968"><a id="n90969">&nbsp;</a></a><c1><a href="#518_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#522_21_refs">id</a></c20><c1><a href="#518_4_refs">:&nbsp;</a></c1><c8><a href="../../../libsyntax/ast.rs.html#n18432">ast::NodeId</a></c8><c4>)</c4><c1><a href="#518_4_refs">
</a></c1><br/><ln>&nbsp;523</ln><a id="523">&nbsp;</a><a id="n91396"><a id="n90971">&nbsp;</a></a><c1><a href="#518_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#518_4_refs">&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c1><a href="#518_4_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;524</ln><a id="524">&nbsp;</a><a id="n90977"><a id="n90975"><a id="n90976"><a id="n90974"><a id="n90972"><a id="n90973"><a id="n90978">&nbsp;</a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#500_1_refs">_icx</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/base.rs.html#121">push_ctxt</a></c26><c4>(</c4><c12><a href="#500_1_refs">"foreign::foreign::build_rust_fn"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;525</ln><a id="525">&nbsp;</a><a id="n90983"><a id="n90984"><a id="n90982"><a id="n90980"><a id="n90979"><a id="n90981">&nbsp;</a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#525_12_refs">tcx</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>()</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;526</ln><a id="526">&nbsp;</a><a id="n90989"><a id="n90986"><a id="n90985"><a id="n90987"><a id="n90990"><a id="n90992"><a id="n90991"><a id="n90988">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#526_12_refs">t</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/ty.rs.html#2728">ty::node_id_to_type</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#525">tcx</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#522">id</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;527</ln><a id="527">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;528</ln><a id="528">&nbsp;</a><a id="n90997"><a id="n90996"><a id="n91003"><a id="n91001"><a id="n91027"><a id="n90993"><a id="n91004"><a id="n90994"><a id="n91025"><a id="n91015"><a id="n90995"><a id="n90998"><a id="n91024"><a id="n91026"><a id="n91002"><a id="n90999">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#528_12_refs">ps</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#101">.tcx</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#285">.map</a></c24><c10><a href="../../../libsyntax/ast_map.rs.html#n76598">.with_path</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#522">id</a></c26><c3>,</c3><c10><a href="../../../libsyntax/ast_map.rs.html#n76598">&nbsp;</a></c10><c1><a href="#500_1_refs">|</a></c1><c20><a href="#528_44_refs">path</a></c20><c8><a href="#500_1_refs">|</a></c8><c1><a href="#500_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;529</ln><a id="529">&nbsp;</a><a id="n91013"><a id="n91005"><a id="n91014"><a id="n91007"><a id="n91009"><a id="n91006"><a id="n91008"><a id="n91010"><a id="n91012"><a id="n91011">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#529_16_refs">abi</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../libsyntax/ast_map.rs.html#n74801">ast_map::PathName</a></c26><c4>(</c4><c26><a href="../../../libsyntax/parse/token.rs.html#n122534">special_idents::clownshoe_abi</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n16508">.name</a></c24><c4>))</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;530</ln><a id="530">&nbsp;</a><a id="n91021"><a id="n91016"><a id="n91019"><a id="n91017"><a id="n91022"><a id="n91023"><a id="n91020"><a id="n91018">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/back/link.rs.html#610">link::mangle</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#528">path</a></c26><c10><a href="../../../<std macros>.html#4">.chain</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#529">abi</a></c26><c10><a href="../../../libstd/option.rs.html#n105300">.move_iter</a></c10><c4>())</c4><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c4>)</c4><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;531</ln><a id="531">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;532</ln><a id="532">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;533</ln><a id="533">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Compute&nbsp;the&nbsp;type&nbsp;that&nbsp;the&nbsp;function&nbsp;would&nbsp;have&nbsp;if&nbsp;it&nbsp;were&nbsp;just&nbsp;a
</c40><br/><ln>&nbsp;534</ln><a id="534">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;normal&nbsp;Rust&nbsp;function.&nbsp;This&nbsp;will&nbsp;be&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;wrappee&nbsp;fn.
</c40><br/><ln>&nbsp;535</ln><a id="535">&nbsp;</a><a id="n91032"><a id="n91033"><a id="n91031"><a id="n91034"><a id="n91215"><a id="n91030"><a id="n91028"><a id="n91214"><a id="n91029">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#535_12_refs">f</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#500_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/ty.rs.html#395">ty::get</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#526">t</a></c26><c4>)</c4><c24><a href="../../../librustc/middle/ty.rs.html#375">.sty</a></c24><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;536</ln><a id="536">&nbsp;</a><a id="n91035"><a id="n91036"><a id="n91122"><a id="n91120">&nbsp;</a></a></a></a><c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../librustc/middle/ty.rs.html#741">ty::ty_bare_fn</a></c20><c4>(</c4><c20><a href="#536_27_refs">ref&nbsp;f</a></c20><c4>)</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;537</ln><a id="537">&nbsp;</a><a id="n91038"><a id="n91043"><a id="n91044"><a id="n91041"><a id="n91039"><a id="n91040"><a id="n91042"><a id="n91045"><a id="n91037">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert!</a></c22><c4>(</c4><c5><a href="#500_1_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#536">f</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#421">.abis</a></c24><c10><a href="../../../libsyntax/abi.rs.html#n15579">.is_rust</a></c10><c4>()</c4><c1><a href="#500_1_refs">&nbsp;&amp;&amp;&nbsp;</a></c1><c5><a href="#500_1_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#536">f</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#421">.abis</a></c24><c10><a href="../../../libsyntax/abi.rs.html#n15607">.is_intrinsic</a></c10><c4>())</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;538</ln><a id="538">&nbsp;</a><a id="n91121">&nbsp;</a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#536">f</a></c26><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;539</ln><a id="539">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;540</ln><a id="540">&nbsp;</a><a id="n91212"><a id="n91123"><a id="n91213">&nbsp;</a></a></a><c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#500_1_refs">_</a></c20><c21><a href="#500_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;541</ln><a id="541">&nbsp;</a><a id="n91191"><a id="n91167"><a id="n91143"><a id="n91160"><a id="n91178"><a id="n91166"><a id="n91140"><a id="n91179"><a id="n91170"><a id="n91154"><a id="n91165"><a id="n91173"><a id="n91152"><a id="n91176"><a id="n91150"><a id="n91194"><a id="n91146"><a id="n91199"><a id="n91177"><a id="n91200"><a id="n91172"><a id="n91190"><a id="n91149"><a id="n91151"><a id="n91157"><a id="n91208"><a id="n91145"><a id="n91198"><a id="n91162"><a id="n91171"><a id="n91156"><a id="n91159"><a id="n91161"><a id="n91125"><a id="n91203"><a id="n91193"><a id="n91201"><a id="n91147"><a id="n91174"><a id="n91155"><a id="n91181"><a id="n91195"><a id="n91205"><a id="n91148"><a id="n91202"><a id="n91153"><a id="n91144"><a id="n91192"><a id="n91197"><a id="n91180"><a id="n91210"><a id="n91168"><a id="n91211"><a id="n91139"><a id="n91164"><a id="n91136"><a id="n91158"><a id="n91196"><a id="n91209"><a id="n91163"><a id="n91169"><a id="n91175"><a id="n91124">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c13><a href="../../../librustc/driver/session.rs.html#241">.bug</a></c13><c4>(</c4><c21><a href="../../../librustc/driver/session.rs.html#241">format!</a></c21><c4>(</c4><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">"build_rust_fn:&nbsp;extern&nbsp;</a></c12><c30>fn</c30><c30><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;</a></c30><c3>{}</c3><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;has&nbsp;ty&nbsp;</a></c12><c3>{},</c3><c12><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;\
</a></c12><br/><ln>&nbsp;542</ln><a id="542">&nbsp;</a>&nbsp;<c12><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expected&nbsp;a&nbsp;bare&nbsp;</a></c12><c30>fn</c30><c30><a href="../../../libstd/fmt/rt.rs.html#n169505">&nbsp;ty"</a></c30><c30>,</c30><c30><a href="../../../librustc/driver/session.rs.html#241">
</a></c30><br/><ln>&nbsp;543</ln><a id="543">&nbsp;</a><a id="n91128"><a id="n91183"><a id="n91182"><a id="n91129"><a id="n91184"><a id="n91131"><a id="n91126"><a id="n91137"><a id="n91127"><a id="n91130"><a id="n91185">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c21><a href="../../../librustc/driver/session.rs.html#241">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#101">.tcx</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#285">.map</a></c24><c27><a href="../../../libsyntax/ast_map.rs.html#n76624">.path_to_str</a></c27><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#522">id</a></c26><c4>)</c4><c3>,</c3><c21><a href="../../../librustc/driver/session.rs.html#241">
</a></c21><br/><ln>&nbsp;544</ln><a id="544">&nbsp;</a><a id="n91133"><a id="n91132"><a id="n91187"><a id="n91186"><a id="n91138"><a id="n91135"><a id="n91134"><a id="n91188"><a id="n91189">&nbsp;</a></a></a></a></a></a></a></a></a><c21><a href="../../../librustc/driver/session.rs.html#241">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#526">t</a></c26><c27><a href="../../../librustc/middle/trans/foreign.rs.html#544">.repr</a></c27><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#525">tcx</a></c26><c4>)))</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;545</ln><a id="545">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;546</ln><a id="546">&nbsp;</a>&nbsp;<c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;547</ln><a id="547">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;548</ln><a id="548">&nbsp;</a><a id="n91260"><a id="n91304"><a id="n91278"><a id="n91265"><a id="n91264"><a id="n91315"><a id="n91356"><a id="n91275"><a id="n91312"><a id="n91283"><a id="n91294"><a id="n91340"><a id="n91301"><a id="n91336"><a id="n91277"><a id="n91332"><a id="n91337"><a id="n91280"><a id="n91311"><a id="n91307"><a id="n91335"><a id="n91287"><a id="n91305"><a id="n91343"><a id="n91333"><a id="n91297"><a id="n91317"><a id="n91274"><a id="n91296"><a id="n91268"><a id="n91281"><a id="n91284"><a id="n91308"><a id="n91276"><a id="n91282"><a id="n91295"><a id="n91279"><a id="n91313"><a id="n91316"><a id="n91342"><a id="n91273"><a id="n91272"><a id="n91291"><a id="n91309"><a id="n91292"><a id="n91314"><a id="n91334"><a id="n91303"><a id="n91302"><a id="n91288"><a id="n91359"><a id="n91286"><a id="n91341"><a id="n91330"><a id="n91298"><a id="n91289"><a id="n91285"><a id="n91306"><a id="n91270"><a id="n91300"><a id="n91293"><a id="n91331"><a id="n91310"><a id="n91269"><a id="n91290"><a id="n91299"><a id="n91339"><a id="n91338"><a id="n91271">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../../libstd/fmt/rt.rs.html#n169453">"build_rust_fn:&nbsp;path=</a></c26><c3>{}</c3><c26><a href="../../../libstd/fmt/rt.rs.html#n169453">&nbsp;id=</a></c26><c3>{}</c3><c26><a href="../../../libstd/fmt/rt.rs.html#n169453">&nbsp;t=</a></c26><c3>{}</c3><c26><a href="../../../libstd/fmt/rt.rs.html#n169453">"</a></c26><c3>,</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;549</ln><a id="549">&nbsp;</a><a id="n91249"><a id="n91320"><a id="n91318"><a id="n91321"><a id="n91319"><a id="n91253"><a id="n91252"><a id="n91251"><a id="n91261"><a id="n91248"><a id="n91250">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#101">.tcx</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#285">.map</a></c24><c20><a href="#549_15_refs">.path_to_str</a></c20><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#522">id</a></c26><c4>)</c4><c3>,</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;550</ln><a id="550">&nbsp;</a><a id="n91322"><a id="n91262"><a id="n91328"><a id="n91323"><a id="n91258"><a id="n91327"><a id="n91255"><a id="n91256"><a id="n91257"><a id="n91259"><a id="n91263"><a id="n91254"><a id="n91325"><a id="n91326"><a id="n91329"><a id="n91324">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#550">id</a></c26><c3>,</c3><c22><a href="#500_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#526">t</a></c26><c27><a href="../../../libstd/fmt/mod.rs.html#n171474">.repr</a></c27><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#525">tcx</a></c26><c4>))</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;551</ln><a id="551">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;552</ln><a id="552">&nbsp;</a><a id="n91368"><a id="n91380"><a id="n91379"><a id="n91365"><a id="n91367"><a id="n91369"><a id="n91366">&nbsp;</a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#552_12_refs">llfn</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/base.rs.html#295">base::decl_internal_rust_fn</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">ccx</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;553</ln><a id="553">&nbsp;</a><a id="n91370">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c12><a href="#500_1_refs">false</a></c12><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;554</ln><a id="554">&nbsp;</a><a id="n91373"><a id="n91372"><a id="n91374"><a id="n91371">&nbsp;</a></a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#535">f</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#422">.sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#450">.inputs</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;555</ln><a id="555">&nbsp;</a><a id="n91375"><a id="n91377"><a id="n91376">&nbsp;</a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#535">f</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#422">.sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;556</ln><a id="556">&nbsp;</a><a id="n91378">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#528">ps</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;557</ln><a id="557">&nbsp;</a><a id="n91384"><a id="n91382"><a id="n91383"><a id="n91385"><a id="n91381">&nbsp;</a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/base.rs.html#477">base::set_llvm_fn_attrs</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#521">attrs</a></c26><c3>,</c3><c13><a href="#500_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#552">llfn</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;558</ln><a id="558">&nbsp;</a><a id="n91395"><a id="n91394"><a id="n91393"><a id="n91388"><a id="n91390"><a id="n91386"><a id="n91392"><a id="n91387"><a id="n91391"><a id="n91389">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/base.rs.html#1510">base::trans_fn</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#518">ccx</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#519">decl</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#520">body</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#552">llfn</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#522">id</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c3>[]</c3><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;559</ln><a id="559">&nbsp;</a><a id="n91397">&nbsp;</a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#552">llfn</a></c26><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;560</ln><a id="560">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;561</ln><a id="561">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;562</ln><a id="562">&nbsp;</a><a id="n91403"><a id="n91404"><a id="n93011"><a id="n91399"><a id="n91402">&nbsp;</a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>unsafe</c21><c1><a href="#562_4_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#562_4_refs">&nbsp;build_wrap_fn</a></c30><c4>(</c4><c20><a href="#562_28_refs">ccx</a></c20><c1><a href="#562_4_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#562_4_refs">
</a></c1><br/><ln>&nbsp;563</ln><a id="563">&nbsp;</a><a id="n91408"><a id="n91407">&nbsp;</a></a><c1><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#563_28_refs">llrustfn</a></c20><c1><a href="#562_4_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c3>,</c3><c1><a href="#562_4_refs">
</a></c1><br/><ln>&nbsp;564</ln><a id="564">&nbsp;</a><a id="n91412"><a id="n91411">&nbsp;</a></a><c1><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#564_28_refs">llwrapfn</a></c20><c1><a href="#562_4_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c3>,</c3><c1><a href="#562_4_refs">
</a></c1><br/><ln>&nbsp;565</ln><a id="565">&nbsp;</a><a id="n91416"><a id="n91415"><a id="n91418"><a id="n91417"><a id="n92865">&nbsp;</a></a></a></a></a><c1><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#565_28_refs">tys</a></c20><c1><a href="#562_4_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/foreign.rs.html#41">ForeignTypes</a></c8><c4>)</c4><c1><a href="#562_4_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;566</ln><a id="566">&nbsp;</a><a id="n91422"><a id="n91420"><a id="n91425"><a id="n91419"><a id="n91421"><a id="n91424">&nbsp;</a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#500_1_refs">_icx</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/base.rs.html#121">push_ctxt</a></c26><c4>(</c4><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;567</ln><a id="567">&nbsp;</a><a id="n91423">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c12><a href="#500_1_refs">"foreign::trans_rust_fn_with_foreign_abi::build_wrap_fn"</a></c12><c4>)</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;568</ln><a id="568">&nbsp;</a><a id="n91428"><a id="n91429"><a id="n91426"><a id="n91430"><a id="n91427"><a id="n91431">&nbsp;</a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#568_12_refs">tcx</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>()</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;569</ln><a id="569">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;570</ln><a id="570">&nbsp;</a><a id="n91484"><a id="n91500"><a id="n91474"><a id="n91529"><a id="n91482"><a id="n91514"><a id="n91498"><a id="n91538"><a id="n91507"><a id="n91535"><a id="n91485"><a id="n91509"><a id="n91541"><a id="n91488"><a id="n91499"><a id="n91534"><a id="n91478"><a id="n91510"><a id="n91531"><a id="n91493"><a id="n91518"><a id="n91486"><a id="n91517"><a id="n91492"><a id="n91501"><a id="n91504"><a id="n91536"><a id="n91481"><a id="n91483"><a id="n91515"><a id="n91540"><a id="n91505"><a id="n91557"><a id="n91502"><a id="n91491"><a id="n91513"><a id="n91487"><a id="n91506"><a id="n91494"><a id="n91503"><a id="n91516"><a id="n91477"><a id="n91497"><a id="n91511"><a id="n91528"><a id="n91489"><a id="n91512"><a id="n91532"><a id="n91533"><a id="n91530"><a id="n91495"><a id="n91519"><a id="n91539"><a id="n91554"><a id="n91496"><a id="n91490"><a id="n91508"><a id="n91537">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#570">"build_wrap_fn</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#570">llrustfn=</a></c26><c3>{},</c3><c26><a href="../../../librustc/middle/trans/foreign.rs.html#570">&nbsp;llwrapfn=</a></c26><c3>{}</c3><c4>)</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#570">"</a></c26><c3>,</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;571</ln><a id="571">&nbsp;</a><a id="n91520"><a id="n91465"><a id="n91521"><a id="n91466"><a id="n91468"><a id="n91464"><a id="n91467"><a id="n91523"><a id="n91475"><a id="n91522">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#571">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#563">llrustfn</a></c26><c4>)</c4><c3>,</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;572</ln><a id="572">&nbsp;</a><a id="n91470"><a id="n91472"><a id="n91524"><a id="n91476"><a id="n91525"><a id="n91473"><a id="n91469"><a id="n91527"><a id="n91526"><a id="n91471">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#572">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#564">llwrapfn</a></c26><c4>))</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;573</ln><a id="573">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;574</ln><a id="574">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Avoid&nbsp;all&nbsp;the&nbsp;Rust&nbsp;generation&nbsp;stuff&nbsp;and&nbsp;just&nbsp;generate&nbsp;raw
</c40><br/><ln>&nbsp;575</ln><a id="575">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;LLVM&nbsp;here.
</c40><br/><ln>&nbsp;576</ln><a id="576">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//
</c40><br/><ln>&nbsp;577</ln><a id="577">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;We&nbsp;want&nbsp;to&nbsp;generate&nbsp;code&nbsp;like&nbsp;this:
</c40><br/><ln>&nbsp;578</ln><a id="578">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//
</c40><br/><ln>&nbsp;579</ln><a id="579">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;foo(T&nbsp;i)&nbsp;{
</c40><br/><ln>&nbsp;580</ln><a id="580">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;r;
</c40><br/><ln>&nbsp;581</ln><a id="581">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foo0(&amp;r,&nbsp;NULL,&nbsp;i);
</c40><br/><ln>&nbsp;582</ln><a id="582">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r;
</c40><br/><ln>&nbsp;583</ln><a id="583">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</c40><br/><ln>&nbsp;584</ln><a id="584">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;585</ln><a id="585">&nbsp;</a><a id="n91564"><a id="n91563"><a id="n91565"><a id="n91580">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#585_12_refs">the_block</a></c20><c13><a href="#562_4_refs">&nbsp;=
</a></c13><br/><ln>&nbsp;586</ln><a id="586">&nbsp;</a><a id="n91566"><a id="n91579">&nbsp;</a></a><c13><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c12><a href="#562_4_refs">"the&nbsp;block"</a></c12><c10><a href="../../../libstd/c_str.rs.html#n132053">.with_c_str</a></c10><c4>(</c4><c10><a href="../../../libstd/c_str.rs.html#n132053">
</a></c10><br/><ln>&nbsp;587</ln><a id="587">&nbsp;</a><a id="n91575"><a id="n91568"><a id="n91578"><a id="n91577"><a id="n91570"><a id="n91574"><a id="n91573"><a id="n91572"><a id="n91571"><a id="n91569"><a id="n91576">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c10><a href="../../../libstd/c_str.rs.html#n132053">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c10><c1><a href="#500_1_refs">|</a></c1><c20><a href="#587_17_refs">s</a></c20><c8><a href="#500_1_refs">|</a></c8><c1><a href="#500_1_refs">&nbsp;</a></c1><c8><a href="#500_1_refs">llvm</a></c8><c26><a href="c=0 n=517604">::LLVMAppendBasicBlockInContext</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#41">.llcx</a></c24><c3>,</c3><c22><a href="#500_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#564">llwrapfn</a></c26><c3>,</c3><c22><a href="#500_1_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#587">s</a></c26><c4>))</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;588</ln><a id="588">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;589</ln><a id="589">&nbsp;</a><a id="n91583"><a id="n91587"><a id="n91581"><a id="n91582"><a id="n91584"><a id="n91586"><a id="n91585">&nbsp;</a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#589_12_refs">builder</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#106">.builder</a></c24><c24><a href="../../../librustc/middle/trans/common.rs.html#173">.b</a></c24><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;590</ln><a id="590">&nbsp;</a><a id="n91588"><a id="n91592"><a id="n91590"><a id="n91591"><a id="n91589">&nbsp;</a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517876">llvm::LLVMPositionBuilderAtEnd</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#585">the_block</a></c26><c4>)</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;591</ln><a id="591">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;592</ln><a id="592">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Array&nbsp;for&nbsp;the&nbsp;arguments&nbsp;we&nbsp;will&nbsp;pass&nbsp;to&nbsp;the&nbsp;rust&nbsp;function.
</c40><br/><ln>&nbsp;593</ln><a id="593">&nbsp;</a><a id="n91593"><a id="n91594"><a id="n91595"><a id="n91598"><a id="n91596"><a id="n91597">&nbsp;</a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#593_12_refs">&nbsp;llrust_args</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../libstd/vec.rs.html#n56419">Vec::new</a></c26><c4>()</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;594</ln><a id="594">&nbsp;</a><a id="n91604"><a id="n91603"><a id="n91599"><a id="n91602"><a id="n91601">&nbsp;</a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#594_12_refs">&nbsp;next_foreign_arg_counter</a></c20><c16><a href="#500_1_refs">:&nbsp;</a></c16><c8><a href="../../../libstd/libc.rs.html#n127571">c_uint</a></c8><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c12><a href="#500_1_refs">0</a></c12><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;595</ln><a id="595">&nbsp;</a><a id="n91613"><a id="n91636"><a id="n91634"><a id="n91635"><a id="n91616"><a id="n91618"><a id="n91612"><a id="n91608"><a id="n91630"><a id="n91619"><a id="n91611"><a id="n91605"><a id="n91617">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#595_12_refs">next_foreign_arg</a></c20><c16><a href="#500_1_refs">:&nbsp;</a></c16><c8><a href="#500_1_refs">|pad:&nbsp;bool|&nbsp;</a></c8><c4>-&gt;</c4><c8><a href="#500_1_refs">&nbsp;</a></c8><c8><a href="../../../libstd/libc.rs.html#n127571">c_uint</a></c8><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c1><a href="#500_1_refs">|</a></c1><c20><a href="#595_55_refs">pad</a></c20><c1><a href="#500_1_refs">:&nbsp;</a></c1><c8><a href="#500_1_refs">bool</a></c8><c1><a href="#500_1_refs">|&nbsp;</a></c1><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;596</ln><a id="596">&nbsp;</a><a id="n91628"><a id="n91627"><a id="n91620"><a id="n91621"><a id="n91629"><a id="n91622">&nbsp;</a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#594">next_foreign_arg_counter</a></c26><c13><a href="#500_1_refs">&nbsp;+=&nbsp;</a></c13><c21><a href="#500_1_refs">if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#595">pad</a></c26><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;597</ln><a id="597">&nbsp;</a><a id="n91623">&nbsp;</a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c12><a href="#500_1_refs">2</a></c12><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;598</ln><a id="598">&nbsp;</a><a id="n91624"><a id="n91626">&nbsp;</a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#500_1_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;599</ln><a id="599">&nbsp;</a><a id="n91625">&nbsp;</a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c12><a href="#500_1_refs">1</a></c12><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;600</ln><a id="600">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;601</ln><a id="601">&nbsp;</a><a id="n91632"><a id="n91631"><a id="n91633">&nbsp;</a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#594">next_foreign_arg_counter</a></c26><c5><a href="#500_1_refs">&nbsp;-&nbsp;</a></c5><c12><a href="#500_1_refs">1</a></c12><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;602</ln><a id="602">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;603</ln><a id="603">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;604</ln><a id="604">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;out&nbsp;pointer&nbsp;on&nbsp;the&nbsp;foreign&nbsp;function
</c40><br/><ln>&nbsp;605</ln><a id="605">&nbsp;</a><a id="n91658"><a id="n91639"><a id="n91659"><a id="n91637"><a id="n91640"><a id="n91638">&nbsp;</a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#605_12_refs">foreign_outptr</a></c20><c16><a href="#562_4_refs">&nbsp;=&nbsp;</a></c16><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;606</ln><a id="606">&nbsp;</a><a id="n91645"><a id="n91657"><a id="n91641"><a id="n91644"><a id="n91643"><a id="n91642">&nbsp;</a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#500_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;607</ln><a id="607">&nbsp;</a><a id="n91646"><a id="n91648"><a id="n91652"><a id="n91653"><a id="n91651"><a id="n91647"><a id="n91649"><a id="n91650">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="c=0 n=517440">llvm::LLVMGetParam</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#564">llwrapfn</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#595">next_foreign_arg</a></c26><c4>(</c4><c12><a href="#500_1_refs">false</a></c12><c4>)))</c4><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;608</ln><a id="608">&nbsp;</a><a id="n91656"><a id="n91654">&nbsp;</a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#500_1_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;609</ln><a id="609">&nbsp;</a><a id="n91655">&nbsp;</a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;610</ln><a id="610">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;611</ln><a id="611">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;612</ln><a id="612">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;613</ln><a id="613">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Push&nbsp;Rust&nbsp;return&nbsp;pointer,&nbsp;using&nbsp;null&nbsp;if&nbsp;it&nbsp;will&nbsp;be&nbsp;unused.
</c40><br/><ln>&nbsp;614</ln><a id="614">&nbsp;</a><a id="n91661"><a id="n91662"><a id="n91669"><a id="n91660">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#614_12_refs">rust_uses_outptr</a></c20><c16><a href="#500_1_refs">&nbsp;=
</a></c16><br/><ln>&nbsp;615</ln><a id="615">&nbsp;</a><a id="n91666"><a id="n91668"><a id="n91667"><a id="n91665"><a id="n91663"><a id="n91664">&nbsp;</a></a></a></a></a></a><c16><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/type_of.rs.html#28">type_of::return_uses_outptr</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#44">.fn_sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c4>)</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;616</ln><a id="616">&nbsp;</a><a id="n91676"><a id="n91670"><a id="n91674"><a id="n91672"><a id="n91675">&nbsp;</a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#616_12_refs">return_alloca</a></c20><c16><a href="#500_1_refs">:&nbsp;</a></c16><c8><a href="../../../libstd/option.rs.html#n104336">Option&lt;</a></c8><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c8><a href="../../../libstd/option.rs.html#n104336">&gt;</a></c8><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;617</ln><a id="617">&nbsp;</a><a id="n91680"><a id="n91683"><a id="n91679"><a id="n91681"><a id="n91677"><a id="n91678"><a id="n91682">&nbsp;</a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#617_12_refs">llrust_ret_ty</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#51">.llsig</a></c24><c24><a href="../../../librustc/middle/trans/foreign.rs.html#65">.llret_ty</a></c24><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;618</ln><a id="618">&nbsp;</a><a id="n91684"><a id="n91688"><a id="n91686"><a id="n91689"><a id="n91685"><a id="n91687">&nbsp;</a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#618_12_refs">llrust_retptr_ty</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#617">llrust_ret_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>()</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;619</ln><a id="619">&nbsp;</a><a id="n92122"><a id="n91690"><a id="n91691"><a id="n92123">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="#500_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#614">rust_uses_outptr</a></c26><c13><a href="#500_1_refs">&nbsp;</a></c13><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;620</ln><a id="620">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Rust&nbsp;expects&nbsp;to&nbsp;use&nbsp;an&nbsp;outpointer.&nbsp;If&nbsp;the&nbsp;foreign&nbsp;fn
</c40><br/><ln>&nbsp;621</ln><a id="621">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;also&nbsp;uses&nbsp;an&nbsp;outpointer,&nbsp;we&nbsp;can&nbsp;reuse&nbsp;it,&nbsp;but&nbsp;the&nbsp;types
</c40><br/><ln>&nbsp;622</ln><a id="622">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;may&nbsp;vary,&nbsp;so&nbsp;cast&nbsp;first&nbsp;to&nbsp;the&nbsp;Rust&nbsp;type.&nbsp;If&nbsp;the
</c40><br/><ln>&nbsp;623</ln><a id="623">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;foreign&nbsp;fn&nbsp;does&nbsp;NOT&nbsp;use&nbsp;an&nbsp;outpointer,&nbsp;we&nbsp;will&nbsp;have&nbsp;to
</c40><br/><ln>&nbsp;624</ln><a id="624">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;alloca&nbsp;some&nbsp;scratch&nbsp;space&nbsp;on&nbsp;the&nbsp;stack.
</c40><br/><ln>&nbsp;625</ln><a id="625">&nbsp;</a><a id="n91692"><a id="n92115">&nbsp;</a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#500_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#605">foreign_outptr</a></c26><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;626</ln><a id="626">&nbsp;</a><a id="n91928"><a id="n91694"><a id="n91927"><a id="n91693">&nbsp;</a></a></a></a><c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#626_21_refs">llforeign_outptr</a></c20><c4>)</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;627</ln><a id="627">&nbsp;</a><a id="n91771"><a id="n91767"><a id="n91759"><a id="n91745"><a id="n91746"><a id="n91732"><a id="n91744"><a id="n91793"><a id="n91735"><a id="n91741"><a id="n91772"><a id="n91777"><a id="n91751"><a id="n91765"><a id="n91747"><a id="n91768"><a id="n91773"><a id="n91755"><a id="n91743"><a id="n91748"><a id="n91740"><a id="n91775"><a id="n91753"><a id="n91734"><a id="n91750"><a id="n91776"><a id="n91739"><a id="n91752"><a id="n91749"><a id="n91769"><a id="n91756"><a id="n91742"><a id="n91770"><a id="n91766"><a id="n91764"><a id="n91758"><a id="n91754"><a id="n91790"><a id="n91774"><a id="n91738"><a id="n91757">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c16><a href="../../../libstd/fmt/rt.rs.html#n169447">"out&nbsp;pointer</a></c16><c3>,</c3><c16><a href="../../../libstd/fmt/rt.rs.html#n169447">&nbsp;foreign=</a></c16><c3>{}</c3><c16><a href="../../../libstd/fmt/rt.rs.html#n169447">"</a></c16><c3>,</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;628</ln><a id="628">&nbsp;</a><a id="n91763"><a id="n91730"><a id="n91728"><a id="n91727"><a id="n91762"><a id="n91733"><a id="n91731"><a id="n91760"><a id="n91729"><a id="n91761">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../libstd/fmt/mod.rs.html#n169877">.val_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#626">llforeign_outptr</a></c26><c4>))</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;629</ln><a id="629">&nbsp;</a><a id="n91799"><a id="n91801"><a id="n91800"><a id="n91811">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#629_24_refs">llrust_retptr</a></c20><c13><a href="#500_1_refs">&nbsp;=
</a></c13><br/><ln>&nbsp;630</ln><a id="630">&nbsp;</a><a id="n91810"><a id="n91803"><a id="n91802">&nbsp;</a></a></a><c13><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="c=0 n=519222">llvm::LLVMBuildBitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;631</ln><a id="631">&nbsp;</a><a id="n91804">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#626">llforeign_outptr</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;632</ln><a id="632">&nbsp;</a><a id="n91805"><a id="n91807"><a id="n91806">&nbsp;</a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#617">llrust_ret_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>()</c4><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;633</ln><a id="633">&nbsp;</a><a id="n91809"><a id="n91808">&nbsp;</a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;634</ln><a id="634">&nbsp;</a><a id="n91888"><a id="n91852"><a id="n91857"><a id="n91855"><a id="n91879"><a id="n91892"><a id="n91868"><a id="n91874"><a id="n91867"><a id="n91885"><a id="n91860"><a id="n91876"><a id="n91872"><a id="n91896"><a id="n91862"><a id="n91913"><a id="n91875"><a id="n91858"><a id="n91910"><a id="n91851"><a id="n91886"><a id="n91893"><a id="n91861"><a id="n91866"><a id="n91865"><a id="n91889"><a id="n91895"><a id="n91871"><a id="n91884"><a id="n91870"><a id="n91887"><a id="n91859"><a id="n91856"><a id="n91890"><a id="n91864"><a id="n91869"><a id="n91863"><a id="n91877"><a id="n91897"><a id="n91894"><a id="n91891"><a id="n91878"><a id="n91873"><a id="n91849">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c14><a href="../../../libstd/fmt/mod.rs.html#n169654">"out&nbsp;pointer</a></c14><c3>,</c3><c14><a href="../../../libstd/fmt/mod.rs.html#n169654">&nbsp;foreign=</a></c14><c3>{}</c3><c14><a href="../../../libstd/fmt/mod.rs.html#n169654">&nbsp;</a></c14><c4>(</c4><c14><a href="../../../libstd/fmt/mod.rs.html#n169654">casted</a></c14><c4>)</c4><c14><a href="../../../libstd/fmt/mod.rs.html#n169654">"</a></c14><c3>,</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;635</ln><a id="635">&nbsp;</a><a id="n91882"><a id="n91844"><a id="n91880"><a id="n91881"><a id="n91847"><a id="n91850"><a id="n91848"><a id="n91846"><a id="n91845"><a id="n91883">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c27><a href="#635_27_refs">.val_to_str</a></c27><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#629">llrust_retptr</a></c26><c4>))</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;636</ln><a id="636">&nbsp;</a><a id="n91920"><a id="n91922"><a id="n91919"><a id="n91921">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#593">llrust_args</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#629">llrust_retptr</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;637</ln><a id="637">&nbsp;</a><a id="n91923"><a id="n91925"><a id="n91926"><a id="n91924">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#616">return_alloca</a></c26><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;638</ln><a id="638">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;639</ln><a id="639">&nbsp;</a>&nbsp;<c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;640</ln><a id="640">&nbsp;</a><a id="n92114"><a id="n91929"><a id="n92113">&nbsp;</a></a></a><c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#500_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;641</ln><a id="641">&nbsp;</a><a id="n91949"><a id="n91932"><a id="n91933"><a id="n91930"><a id="n91948"><a id="n91931">&nbsp;</a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#641_24_refs">slot</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;642</ln><a id="642">&nbsp;</a><a id="n91934"><a id="n91947">&nbsp;</a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c12><a href="#500_1_refs">"return_alloca"</a></c12><c10><a href="../../../libstd/c_str.rs.html#n132053">.with_c_str</a></c10><c4>(</c4><c10><a href="../../../libstd/c_str.rs.html#n132053">
</a></c10><br/><ln>&nbsp;643</ln><a id="643">&nbsp;</a><a id="n91939"><a id="n91937"><a id="n91946"><a id="n91940"><a id="n91945"><a id="n91936"><a id="n91938"><a id="n91941">&nbsp;</a></a></a></a></a></a></a></a><c10><a href="../../../libstd/c_str.rs.html#n132053">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c10><c1><a href="#500_1_refs">|</a></c1><c20><a href="#643_29_refs">s</a></c20><c8><a href="#500_1_refs">|</a></c8><c1><a href="#500_1_refs">&nbsp;</a></c1><c8><a href="c=0 n=518820">llvm</a></c8><c26><a href="c=0 n=518820">::LLVMBuildAlloca</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;644</ln><a id="644">&nbsp;</a><a id="n91943"><a id="n91942">&nbsp;</a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#617">llrust_ret_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;645</ln><a id="645">&nbsp;</a><a id="n91944">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#643">s</a></c26><c4>))</c4><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;646</ln><a id="646">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;647</ln><a id="647">&nbsp;</a><a id="n92036"><a id="n92051"><a id="n92039"><a id="n92014"><a id="n92020"><a id="n92047"><a id="n92017"><a id="n92021"><a id="n92008"><a id="n92072"><a id="n92029"><a id="n92077"><a id="n92030"><a id="n92034"><a id="n92071"><a id="n92052"><a id="n92025"><a id="n92046"><a id="n92023"><a id="n92003"><a id="n92045"><a id="n92074"><a id="n92037"><a id="n92016"><a id="n92069"><a id="n92031"><a id="n92054"><a id="n92019"><a id="n92053"><a id="n92038"><a id="n91998"><a id="n92070"><a id="n92006"><a id="n92012"><a id="n92080"><a id="n92075"><a id="n92026"><a id="n92073"><a id="n92015"><a id="n92078"><a id="n92024"><a id="n92013"><a id="n92022"><a id="n92079"><a id="n92032"><a id="n92049"><a id="n92042"><a id="n92050"><a id="n92028"><a id="n92055"><a id="n92097"><a id="n92035"><a id="n92007"><a id="n92041"><a id="n92010"><a id="n92048"><a id="n92027"><a id="n92043"><a id="n92018"><a id="n92081"><a id="n92033"><a id="n92068"><a id="n92076"><a id="n92094"><a id="n92011"><a id="n92009"><a id="n92044"><a id="n92040"><a id="n92002">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c20><a href="../../../libstd/fmt/rt.rs.html#n169461">"out&nbsp;pointer</a></c20><c3>,</c3><c20><a href="../../../libstd/fmt/rt.rs.html#n169461">&nbsp;\
</a></c20><br/><ln>&nbsp;648</ln><a id="648">&nbsp;</a>&nbsp;<c20><a href="../../../libstd/fmt/rt.rs.html#n169461">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allocad=</a></c20><c3>{},</c3><c20><a href="../../../libstd/fmt/rt.rs.html#n169461">&nbsp;\
</a></c20><br/><ln>&nbsp;649</ln><a id="649">&nbsp;</a>&nbsp;<c20><a href="../../../libstd/fmt/rt.rs.html#n169461">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llrust_ret_ty=</a></c20><c3>{},</c3><c20><a href="../../../libstd/fmt/rt.rs.html#n169461">&nbsp;\
</a></c20><br/><ln>&nbsp;650</ln><a id="650">&nbsp;</a>&nbsp;<c20><a href="../../../libstd/fmt/rt.rs.html#n169461">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_ty=</a></c20><c3>{}</c3><c20><a href="../../../libstd/fmt/rt.rs.html#n169461">"</a></c20><c3>,</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;651</ln><a id="651">&nbsp;</a><a id="n92058"><a id="n91982"><a id="n91983"><a id="n91986"><a id="n91985"><a id="n91984"><a id="n91999"><a id="n92056"><a id="n92057"><a id="n92059">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c27><a href="../../../libstd/fmt/mod.rs.html#n169877">.val_to_str</a></c27><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#641">slot</a></c26><c4>)</c4><c3>,</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;652</ln><a id="652">&nbsp;</a><a id="n91991"><a id="n91988"><a id="n92062"><a id="n92063"><a id="n91990"><a id="n92000"><a id="n92060"><a id="n91989"><a id="n92061"><a id="n91987">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../libstd/fmt/mod.rs.html#n169877">.type_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#617">llrust_ret_ty</a></c26><c4>)</c4><c3>,</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;653</ln><a id="653">&nbsp;</a><a id="n92064"><a id="n91993"><a id="n92065"><a id="n92066"><a id="n91996"><a id="n92001"><a id="n91992"><a id="n92067"><a id="n91995"><a id="n91997"><a id="n91994">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#44">.fn_sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c5><a href="#653_27_refs">.repr</a></c5><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#568">tcx</a></c26><c4>))</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;654</ln><a id="654">&nbsp;</a><a id="n92103"><a id="n92106"><a id="n92104"><a id="n92105">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#593">llrust_args</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#641">slot</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;655</ln><a id="655">&nbsp;</a><a id="n92108"><a id="n92111"><a id="n92109"><a id="n92112"><a id="n92110"><a id="n92107">&nbsp;</a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#616">return_alloca</a></c26><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#641">slot</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;656</ln><a id="656">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;657</ln><a id="657">&nbsp;</a>&nbsp;<c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;658</ln><a id="658">&nbsp;</a><a id="n92120"><a id="n92121">&nbsp;</a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c13><a href="#500_1_refs">&nbsp;</a></c13><c21>else</c21><c13><a href="#500_1_refs">&nbsp;</a></c13><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;659</ln><a id="659">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Rust&nbsp;does&nbsp;not&nbsp;expect&nbsp;an&nbsp;outpointer.&nbsp;If&nbsp;the&nbsp;foreign&nbsp;fn
</c40><br/><ln>&nbsp;660</ln><a id="660">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;does&nbsp;use&nbsp;an&nbsp;outpointer,&nbsp;then&nbsp;we&nbsp;will&nbsp;do&nbsp;a&nbsp;store&nbsp;of&nbsp;the
</c40><br/><ln>&nbsp;661</ln><a id="661">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;value&nbsp;that&nbsp;the&nbsp;Rust&nbsp;fn&nbsp;returns.
</c40><br/><ln>&nbsp;662</ln><a id="662">&nbsp;</a><a id="n92117"><a id="n92118"><a id="n92116"><a id="n92119">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#616">return_alloca</a></c26><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../libstd/option.rs.html#n104337">None</a></c26><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;663</ln><a id="663">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;664</ln><a id="664">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;665</ln><a id="665">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Build&nbsp;up&nbsp;the&nbsp;arguments&nbsp;to&nbsp;the&nbsp;call&nbsp;to&nbsp;the&nbsp;rust&nbsp;function.
</c40><br/><ln>&nbsp;666</ln><a id="666">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Careful&nbsp;to&nbsp;adapt&nbsp;for&nbsp;cases&nbsp;where&nbsp;the&nbsp;native&nbsp;convention&nbsp;uses
</c40><br/><ln>&nbsp;667</ln><a id="667">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;a&nbsp;pointer&nbsp;and&nbsp;Rust&nbsp;does&nbsp;not&nbsp;or&nbsp;vice&nbsp;versa.
</c40><br/><ln>&nbsp;668</ln><a id="668">&nbsp;</a><a id="n92131"><a id="n92135"><a id="n92132"><a id="n92722"><a id="n92134"><a id="n92723"><a id="n92138"><a id="n92136"><a id="n92726"><a id="n92127"><a id="n92139"><a id="n92725"><a id="n92128"><a id="n92124"><a id="n92130"><a id="n92133"><a id="n92125"><a id="n92724"><a id="n92129"><a id="n92137"><a id="n92126"><a id="n92721">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c1><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c1><c20><a href="#668_12_refs">i</a></c20><c1><a href="../../../libstd/option.rs.html#n104341">&nbsp;in&nbsp;</a></c1><c26><a href="../../../libstd/iter.rs.html#n97679">range</a></c26><c4>(</c4><c12><a href="../../../libstd/option.rs.html#n104341">0</a></c12><c3>,</c3><c27><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#44">.fn_sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#450">.inputs</a></c24><c10><a href="../../../libstd/vec.rs.html#n57167">.len</a></c10><c4>())</c4><c1><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c1><c3>{</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;669</ln><a id="669">&nbsp;</a><a id="n92144"><a id="n92147"><a id="n92142"><a id="n92146"><a id="n92140"><a id="n92141"><a id="n92149"><a id="n92145"><a id="n92148"><a id="n92143">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c20><a href="#669_16_refs">rust_ty</a></c20><c13><a href="#668_8_refs">&nbsp;=&nbsp;</a></c13><c5><a href="#668_8_refs">*</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#44">.fn_sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#450">.inputs</a></c24><c10><a href="../../../libstd/vec.rs.html#n57648">.get</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#668">i</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;670</ln><a id="670">&nbsp;</a><a id="n92157"><a id="n92158"><a id="n92152"><a id="n92154"><a id="n92156"><a id="n92153"><a id="n92150"><a id="n92159"><a id="n92151"><a id="n92155">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c20><a href="#670_16_refs">llrust_ty</a></c20><c13><a href="#668_8_refs">&nbsp;=&nbsp;</a></c13><c5><a href="../../../libstd/iter.rs.html#n97724">*</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#51">.llsig</a></c24><c24><a href="../../../librustc/middle/trans/foreign.rs.html#59">.llarg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n57648">.get</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#668">i</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;671</ln><a id="671">&nbsp;</a><a id="n92162"><a id="n92164"><a id="n92165"><a id="n92166"><a id="n92160"><a id="n92163"><a id="n92161"><a id="n92167">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c20><a href="#671_16_refs">rust_indirect</a></c20><c13><a href="#668_8_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/type_of.rs.html#24">type_of::arg_is_indirect</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c3>,</c3><c27><a href="#668_8_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#669">rust_ty</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;672</ln><a id="672">&nbsp;</a><a id="n92177"><a id="n92173"><a id="n92175"><a id="n92170"><a id="n92171"><a id="n92176"><a id="n92169"><a id="n92172"><a id="n92168"><a id="n92174">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c20><a href="#672_16_refs">llforeign_arg_ty</a></c20><c16><a href="../../../libstd/iter.rs.html#n97724">&nbsp;=&nbsp;</a></c16><c5><a href="../../../libstd/iter.rs.html#n97724">*</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#102">.arg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n57648">.get</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#668">i</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;673</ln><a id="673">&nbsp;</a><a id="n92182"><a id="n92181"><a id="n92180"><a id="n92179"><a id="n92178"><a id="n92183">&nbsp;</a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c20><a href="#673_16_refs">foreign_indirect</a></c20><c13><a href="#668_8_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#672">llforeign_arg_ty</a></c26><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;674</ln><a id="674">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;675</ln><a id="675">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;skip&nbsp;padding
</c40><br/><ln>&nbsp;676</ln><a id="676">&nbsp;</a><a id="n92188"><a id="n92185"><a id="n92186"><a id="n92189"><a id="n92184"><a id="n92192"><a id="n92191"><a id="n92190"><a id="n92187">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c20><a href="#676_16_refs">foreign_index</a></c20><c13><a href="#668_8_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#595">next_foreign_arg</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#672">llforeign_arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#44">.pad</a></c24><c10><a href="../../../libstd/option.rs.html#n104931">.is_some</a></c10><c4>())</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;677</ln><a id="677">&nbsp;</a><a id="n92193"><a id="n92198"><a id="n92199"><a id="n92194"><a id="n92200"><a id="n92197"><a id="n92195"><a id="n92196">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#677_16_refs">&nbsp;llforeign_arg</a></c20><c13><a href="../../../libstd/iter.rs.html#n97724">&nbsp;=&nbsp;</a></c13><c26><a href="c=0 n=517440">llvm::LLVMGetParam</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#564">llwrapfn</a></c26><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#676">foreign_index</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;678</ln><a id="678">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;679</ln><a id="679">&nbsp;</a><a id="n92279"><a id="n92258"><a id="n92257"><a id="n92253"><a id="n92247"><a id="n92294"><a id="n92265"><a id="n92298"><a id="n92300"><a id="n92243"><a id="n92259"><a id="n92271"><a id="n92303"><a id="n92304"><a id="n92261"><a id="n92240"><a id="n92278"><a id="n92305"><a id="n92320"><a id="n92256"><a id="n92283"><a id="n92273"><a id="n92302"><a id="n92270"><a id="n92295"><a id="n92274"><a id="n92277"><a id="n92264"><a id="n92262"><a id="n92252"><a id="n92248"><a id="n92260"><a id="n92285"><a id="n92299"><a id="n92255"><a id="n92263"><a id="n92296"><a id="n92251"><a id="n92275"><a id="n92284"><a id="n92282"><a id="n92266"><a id="n92269"><a id="n92307"><a id="n92276"><a id="n92297"><a id="n92280"><a id="n92268"><a id="n92267"><a id="n92306"><a id="n92272"><a id="n92249"><a id="n92254"><a id="n92281"><a id="n92250"><a id="n92301"><a id="n92244"><a id="n92323">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c22><a href="#679_19_refs">"llforeign_arg&nbsp;\\#</a></c22><c3>{}</c3><c22><a href="#679_19_refs">:&nbsp;</a></c22><c3>{}</c3><c22><a href="#679_19_refs">"</a></c22><c3>,</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;680</ln><a id="680">&nbsp;</a><a id="n92236"><a id="n92288"><a id="n92234"><a id="n92242"><a id="n92290"><a id="n92291"><a id="n92241"><a id="n92235"><a id="n92289"><a id="n92293"><a id="n92292"><a id="n92239"><a id="n92286"><a id="n92233"><a id="n92287"><a id="n92238"><a id="n92237">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../libstd/fmt/mod.rs.html#n169877">i</a></c26><c3>,</c3><c22><a href="#668_8_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c10><a href="../../../librustc/lib/llvm.rs.html#1855">.val_to_str</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c4>))</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;681</ln><a id="681">&nbsp;</a><a id="n92418"><a id="n92419"><a id="n92388"><a id="n92379"><a id="n92401"><a id="n92372"><a id="n92425"><a id="n92429"><a id="n92381"><a id="n92400"><a id="n92396"><a id="n92390"><a id="n92404"><a id="n92369"><a id="n92421"><a id="n92399"><a id="n92428"><a id="n92424"><a id="n92427"><a id="n92373"><a id="n92420"><a id="n92384"><a id="n92402"><a id="n92406"><a id="n92375"><a id="n92377"><a id="n92378"><a id="n92387"><a id="n92442"><a id="n92386"><a id="n92374"><a id="n92391"><a id="n92380"><a id="n92416"><a id="n92397"><a id="n92376"><a id="n92394"><a id="n92407"><a id="n92389"><a id="n92385"><a id="n92383"><a id="n92403"><a id="n92395"><a id="n92422"><a id="n92426"><a id="n92368"><a id="n92405"><a id="n92382"><a id="n92417"><a id="n92445"><a id="n92423"><a id="n92398"><a id="n92365"><a id="n92392"><a id="n92393">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../../libstd/fmt/rt.rs.html#n169507">"rust_indirect&nbsp;=&nbsp;</a></c26><c3>{},</c3><c26><a href="../../../libstd/fmt/rt.rs.html#n169507">&nbsp;foreign_indirect&nbsp;=&nbsp;</a></c26><c3>{}</c3><c26><a href="../../../libstd/fmt/rt.rs.html#n169507">"</a></c26><c3>,</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;682</ln><a id="682">&nbsp;</a><a id="n92367"><a id="n92409"><a id="n92411"><a id="n92414"><a id="n92415"><a id="n92364"><a id="n92363"><a id="n92408"><a id="n92362"><a id="n92413"><a id="n92366"><a id="n92410"><a id="n92412"><a id="n92361">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#671">rust_indirect</a></c26><c3>,</c3><c22><a href="#668_8_refs">&nbsp;</a></c22><c26><a href="../../../libstd/fmt/mod.rs.html#n171474">foreign_indirect</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;683</ln><a id="683">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;684</ln><a id="684">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Ensure&nbsp;that&nbsp;the&nbsp;foreign&nbsp;argument&nbsp;is&nbsp;indirect&nbsp;(by
</c40><br/><ln>&nbsp;685</ln><a id="685">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;pointer).&nbsp;&nbsp;It&nbsp;makes&nbsp;adapting&nbsp;types&nbsp;easier,&nbsp;since&nbsp;we&nbsp;can
</c40><br/><ln>&nbsp;686</ln><a id="686">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;always&nbsp;just&nbsp;bitcast&nbsp;pointers.
</c40><br/><ln>&nbsp;687</ln><a id="687">&nbsp;</a><a id="n92476"><a id="n92478"><a id="n92452"><a id="n92477"><a id="n92451">&nbsp;</a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#668_8_refs">&nbsp;</a></c21><c5><a href="#668_8_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#673">foreign_indirect</a></c26><c21><a href="#668_8_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;688</ln><a id="688">&nbsp;</a><a id="n92465"><a id="n92455"><a id="n92453"><a id="n92454">&nbsp;</a></a></a></a><c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c22><c20><a href="#688_20_refs">lltemp</a></c20><c16><a href="../../../libstd/iter.rs.html#n97724">&nbsp;=
</a></c16><br/><ln>&nbsp;689</ln><a id="689">&nbsp;</a><a id="n92456"><a id="n92464">&nbsp;</a></a><c16><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c16><c26><a href="c=0 n=518820">llvm::LLVMBuildAlloca</a></c26><c4>(</c4><c27><a href="../../../libstd/iter.rs.html#n97724">
</a></c27><br/><ln>&nbsp;690</ln><a id="690">&nbsp;</a><a id="n92457"><a id="n92463"><a id="n92459"><a id="n92461"><a id="n92462"><a id="n92460"><a id="n92458">&nbsp;</a></a></a></a></a></a></a><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/common.rs.html#513">val_ty</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c4>)</c4><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;691</ln><a id="691">&nbsp;</a><a id="n92466"><a id="n92470"><a id="n92471">&nbsp;</a></a></a><c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=518883">llvm::LLVMBuildStore</a></c26><c4>(</c4><c13><a href="../../../libstd/iter.rs.html#n97724">
</a></c13><br/><ln>&nbsp;692</ln><a id="692">&nbsp;</a><a id="n92468"><a id="n92469"><a id="n92467">&nbsp;</a></a></a><c13><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c13><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c3>,</c3><c13><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#688">lltemp</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;693</ln><a id="693">&nbsp;</a><a id="n92473"><a id="n92474"><a id="n92472"><a id="n92475">&nbsp;</a></a></a></a><c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c13><a href="../../../libstd/iter.rs.html#n97724">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#688">lltemp</a></c26><c3>;</c3><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;694</ln><a id="694">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;695</ln><a id="695">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;696</ln><a id="696">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;If&nbsp;the&nbsp;types&nbsp;in&nbsp;the&nbsp;ABI&nbsp;and&nbsp;the&nbsp;Rust&nbsp;types&nbsp;don't&nbsp;match,
</c40><br/><ln>&nbsp;697</ln><a id="697">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;bitcast&nbsp;the&nbsp;llforeign_arg&nbsp;pointer&nbsp;so&nbsp;it&nbsp;matches&nbsp;the&nbsp;types
</c40><br/><ln>&nbsp;698</ln><a id="698">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Rust&nbsp;expects.
</c40><br/><ln>&nbsp;699</ln><a id="699">&nbsp;</a><a id="n92479"><a id="n92570"><a id="n92572"><a id="n92481"><a id="n92480"><a id="n92571">&nbsp;</a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#668_8_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#672">llforeign_arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#42">.cast</a></c24><c10><a href="../../../libstd/option.rs.html#n104931">.is_some</a></c10><c4>()</c4><c21><a href="#668_8_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;700</ln><a id="700">&nbsp;</a><a id="n92482"><a id="n92483">&nbsp;</a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert!</a></c22><c4>(</c4><c5><a href="../../../libstd/iter.rs.html#n97724">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#673">foreign_indirect</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;701</ln><a id="701">&nbsp;</a><a id="n92567"><a id="n92558"><a id="n92569"><a id="n92568"><a id="n92559">&nbsp;</a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c5><a href="#668_8_refs">&nbsp;=&nbsp;</a></c5><c26><a href="c=0 n=519222">llvm::LLVMBuildBitCast</a></c26><c4>(</c4><c27><a href="../../../libstd/iter.rs.html#n97724">
</a></c27><br/><ln>&nbsp;702</ln><a id="702">&nbsp;</a><a id="n92560"><a id="n92561">&nbsp;</a></a><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">
</a></c27><br/><ln>&nbsp;703</ln><a id="703">&nbsp;</a><a id="n92563"><a id="n92564"><a id="n92562"><a id="n92565"><a id="n92566">&nbsp;</a></a></a></a></a><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#670">llrust_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>()</c4><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;704</ln><a id="704">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;705</ln><a id="705">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;706</ln><a id="706">&nbsp;</a><a id="n92573"><a id="n92588"><a id="n92575"><a id="n92576"><a id="n92577"><a id="n92587"><a id="n92574">&nbsp;</a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#668_8_refs">&nbsp;</a></c22><c20><a href="#706_16_refs">llrust_arg</a></c20><c13><a href="../../../libstd/iter.rs.html#n97724">&nbsp;=&nbsp;</a></c13><c21><a href="../../../libstd/iter.rs.html#n97724">if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#671">rust_indirect</a></c26><c21><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;707</ln><a id="707">&nbsp;</a><a id="n92578">&nbsp;</a><c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;708</ln><a id="708">&nbsp;</a><a id="n92579"><a id="n92586">&nbsp;</a></a><c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c21><c21>else</c21><c21><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;709</ln><a id="709">&nbsp;</a><a id="n92583"><a id="n92582"><a id="n92584"><a id="n92581"><a id="n92585"><a id="n92580">&nbsp;</a></a></a></a></a></a><c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=518867">llvm::LLVMBuildLoad</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#677">llforeign_arg</a></c26><c3>,</c3><c27><a href="../../../libstd/iter.rs.html#n97724">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c22><a href="../../../libstd/iter.rs.html#n97724">
</a></c22><br/><ln>&nbsp;710</ln><a id="710">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/iter.rs.html#n97724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;711</ln><a id="711">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;712</ln><a id="712">&nbsp;</a><a id="n92689"><a id="n92693"><a id="n92666"><a id="n92650"><a id="n92653"><a id="n92649"><a id="n92628"><a id="n92643"><a id="n92662"><a id="n92690"><a id="n92647"><a id="n92655"><a id="n92672"><a id="n92673"><a id="n92708"><a id="n92645"><a id="n92639"><a id="n92638"><a id="n92631"><a id="n92692"><a id="n92652"><a id="n92644"><a id="n92686"><a id="n92688"><a id="n92656"><a id="n92684"><a id="n92635"><a id="n92665"><a id="n92636"><a id="n92668"><a id="n92664"><a id="n92648"><a id="n92660"><a id="n92683"><a id="n92687"><a id="n92670"><a id="n92640"><a id="n92691"><a id="n92642"><a id="n92632"><a id="n92694"><a id="n92663"><a id="n92667"><a id="n92682"><a id="n92651"><a id="n92641"><a id="n92659"><a id="n92685"><a id="n92657"><a id="n92671"><a id="n92646"><a id="n92637"><a id="n92658"><a id="n92661"><a id="n92695"><a id="n92711"><a id="n92654"><a id="n92669">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c1><a href="../../../libstd/fmt/parse.rs.html#n166363">"llrust_arg&nbsp;\\#</a></c1><c3>{}</c3><c1><a href="../../../libstd/fmt/parse.rs.html#n166363">:&nbsp;</a></c1><c3>{}</c3><c1><a href="../../../libstd/fmt/parse.rs.html#n166363">"</a></c1><c3>,</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;713</ln><a id="713">&nbsp;</a><a id="n92676"><a id="n92681"><a id="n92621"><a id="n92677"><a id="n92630"><a id="n92623"><a id="n92627"><a id="n92678"><a id="n92629"><a id="n92680"><a id="n92674"><a id="n92675"><a id="n92622"><a id="n92679"><a id="n92626"><a id="n92624"><a id="n92625">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c5><a href="../../../libstd/fmt/mod.rs.html#n169877">i</a></c5><c3>,</c3><c22><a href="#668_8_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c10><a href="../../../librustc/lib/llvm.rs.html#1855">.val_to_str</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#706">llrust_arg</a></c26><c4>))</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;714</ln><a id="714">&nbsp;</a><a id="n92720"><a id="n92718"><a id="n92719"><a id="n92717">&nbsp;</a></a></a></a><c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#593">llrust_args</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#706">llrust_arg</a></c26><c4>)</c4><c3>;</c3><c22><a href="#668_8_refs">
</a></c22><br/><ln>&nbsp;715</ln><a id="715">&nbsp;</a>&nbsp;<c22><a href="#668_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c1><a href="../../../libstd/option.rs.html#n104341">
</a></c1><br/><ln>&nbsp;716</ln><a id="716">&nbsp;</a>&nbsp;<c1><a href="../../../libstd/option.rs.html#n104341">
</a></c1><br/><ln>&nbsp;717</ln><a id="717">&nbsp;</a>&nbsp;<c1><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c40>//&nbsp;Perform&nbsp;the&nbsp;call&nbsp;itself
</c40><br/><ln>&nbsp;718</ln><a id="718">&nbsp;</a><a id="n92780"><a id="n92765"><a id="n92763"><a id="n92802"><a id="n92777"><a id="n92807"><a id="n92773"><a id="n92796"><a id="n92759"><a id="n92801"><a id="n92776"><a id="n92785"><a id="n92799"><a id="n92766"><a id="n92762"><a id="n92781"><a id="n92790"><a id="n92788"><a id="n92761"><a id="n92792"><a id="n92803"><a id="n92794"><a id="n92771"><a id="n92822"><a id="n92805"><a id="n92789"><a id="n92775"><a id="n92825"><a id="n92786"><a id="n92793"><a id="n92791"><a id="n92779"><a id="n92782"><a id="n92804"><a id="n92778"><a id="n92783"><a id="n92808"><a id="n92809"><a id="n92770"><a id="n92784"><a id="n92797"><a id="n92764"><a id="n92767"><a id="n92787"><a id="n92800"><a id="n92772"><a id="n92795"><a id="n92774"><a id="n92760"><a id="n92806"><a id="n92798">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c1><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug</a></c1><c22><a href="#562_4_refs">!</a></c22><c4>(</c4><c13><a href="#718_15_refs">"calling&nbsp;llrustfn&nbsp;=&nbsp;</a></c13><c3>{}</c3><c13><a href="#718_15_refs">"</a></c13><c3>,</c3><c22><a href="#562_4_refs">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#562">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c27><a href="../../../libstd/fmt/mod.rs.html#n169877">.val_to_str</a></c27><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#563">llrustfn</a></c26><c4>))</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;719</ln><a id="719">&nbsp;</a><a id="n92833"><a id="n92847"><a id="n92838"><a id="n92834"><a id="n92832"><a id="n92836"><a id="n92835"><a id="n92846"><a id="n92831"><a id="n92837">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#719_12_refs">llrust_ret_val</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="c=0 n=519450">llvm::LLVMBuildCall</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#563">llrustfn</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#593">llrust_args</a></c26><c10><a href="../../../libstd/vec.rs.html#n58344">.as_ptr</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;720</ln><a id="720">&nbsp;</a><a id="n92845"><a id="n92844"><a id="n92839"><a id="n92842"><a id="n92840"><a id="n92843">&nbsp;</a></a></a></a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#593">llrust_args</a></c26><c10><a href="../../../libstd/vec.rs.html#n57167">.len</a></c10><c4>()</c4><c21><a href="#500_1_refs">&nbsp;as&nbsp;</a></c21><c8><a href="../../../libstd/libc.rs.html#n127571">c_uint</a></c8><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;721</ln><a id="721">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;722</ln><a id="722">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Get&nbsp;the&nbsp;return&nbsp;value&nbsp;where&nbsp;the&nbsp;foreign&nbsp;fn&nbsp;expects&nbsp;it.
</c40><br/><ln>&nbsp;723</ln><a id="723">&nbsp;</a><a id="n92864"><a id="n92849"><a id="n92852"><a id="n92863"><a id="n92854"><a id="n92851"><a id="n92848"><a id="n92853"><a id="n92850">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#723_12_refs">llforeign_ret_ty</a></c20><c16><a href="#500_1_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#500_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#42">.cast</a></c24><c21><a href="#500_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;724</ln><a id="724">&nbsp;</a><a id="n92855"><a id="n92856"><a id="n92857">&nbsp;</a></a></a><c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#724_17_refs">ty</a></c20><c4>)</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#724">ty</a></c26><c3>,</c3><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;725</ln><a id="725">&nbsp;</a><a id="n92859"><a id="n92858"><a id="n92862"><a id="n92861"><a id="n92860">&nbsp;</a></a></a></a></a><c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#500_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#500_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c21><a href="#500_1_refs">
</a></c21><br/><ln>&nbsp;726</ln><a id="726">&nbsp;</a>&nbsp;<c21><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;727</ln><a id="727">&nbsp;</a><a id="n92866"><a id="n93010">&nbsp;</a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#562_4_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#605">foreign_outptr</a></c26><c21><a href="#562_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;728</ln><a id="728">&nbsp;</a><a id="n92867"><a id="n92875"><a id="n92868"><a id="n92876"><a id="n92869"><a id="n92870">&nbsp;</a></a></a></a></a></a><c21><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#562_4_refs">&nbsp;if&nbsp;</a></c21><c5><a href="#562_4_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#565">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#54">.ret_def</a></c24><c21><a href="#562_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#562_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;729</ln><a id="729">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Function&nbsp;returns&nbsp;`()`&nbsp;or&nbsp;`bot`,&nbsp;which&nbsp;in&nbsp;Rust&nbsp;is&nbsp;the&nbsp;LLVM
</c40><br/><ln>&nbsp;730</ln><a id="730">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;type&nbsp;"{}"&nbsp;but&nbsp;in&nbsp;foreign&nbsp;ABIs&nbsp;is&nbsp;"Void".
</c40><br/><ln>&nbsp;731</ln><a id="731">&nbsp;</a><a id="n92872"><a id="n92874"><a id="n92873"><a id="n92871">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517963">llvm::LLVMBuildRetVoid</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c4>)</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;732</ln><a id="732">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;733</ln><a id="733">&nbsp;</a>&nbsp;<c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;734</ln><a id="734">&nbsp;</a><a id="n92913"><a id="n92914"><a id="n92877"><a id="n92878">&nbsp;</a></a></a></a><c21><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#562_4_refs">&nbsp;if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#614">rust_uses_outptr</a></c26><c21><a href="#562_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#562_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;735</ln><a id="735">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Rust&nbsp;uses&nbsp;an&nbsp;outpointer,&nbsp;but&nbsp;the&nbsp;foreign&nbsp;ABI&nbsp;does&nbsp;not.&nbsp;Load.
</c40><br/><ln>&nbsp;736</ln><a id="736">&nbsp;</a><a id="n92879"><a id="n92883"><a id="n92880"><a id="n92882"><a id="n92884"><a id="n92881">&nbsp;</a></a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#736_20_refs">llrust_outptr</a></c20><c13><a href="#500_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#616">return_alloca</a></c26><c10><a href="../../../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;737</ln><a id="737">&nbsp;</a><a id="n92886"><a id="n92897"><a id="n92887"><a id="n92885">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#737_20_refs">llforeign_outptr_casted</a></c20><c16><a href="#500_1_refs">&nbsp;=
</a></c16><br/><ln>&nbsp;738</ln><a id="738">&nbsp;</a><a id="n92888"><a id="n92896"><a id="n92889">&nbsp;</a></a></a><c16><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c16><c26><a href="c=0 n=519222">llvm::LLVMBuildBitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;739</ln><a id="739">&nbsp;</a><a id="n92890">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#736">llrust_outptr</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;740</ln><a id="740">&nbsp;</a><a id="n92892"><a id="n92891"><a id="n92893">&nbsp;</a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#723">llforeign_ret_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>()</c4><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;741</ln><a id="741">&nbsp;</a><a id="n92894"><a id="n92895">&nbsp;</a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;742</ln><a id="742">&nbsp;</a><a id="n92907"><a id="n92898"><a id="n92899"><a id="n92900">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#742_20_refs">llforeign_retval</a></c20><c16><a href="#500_1_refs">&nbsp;=
</a></c16><br/><ln>&nbsp;743</ln><a id="743">&nbsp;</a><a id="n92905"><a id="n92906"><a id="n92901"><a id="n92902"><a id="n92903"><a id="n92904">&nbsp;</a></a></a></a></a></a><c16><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c16><c26><a href="c=0 n=518867">llvm::LLVMBuildLoad</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#737">llforeign_outptr_casted</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;744</ln><a id="744">&nbsp;</a><a id="n92908"><a id="n92909"><a id="n92912"><a id="n92910"><a id="n92911">&nbsp;</a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517970">llvm::LLVMBuildRet</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#742">llforeign_retval</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;745</ln><a id="745">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;746</ln><a id="746">&nbsp;</a>&nbsp;<c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;747</ln><a id="747">&nbsp;</a><a id="n92916"><a id="n92965"><a id="n92917"><a id="n92915"><a id="n92918"><a id="n92964">&nbsp;</a></a></a></a></a></a><c21><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#562_4_refs">&nbsp;if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#723">llforeign_ret_ty</a></c26><c5><a href="#562_4_refs">&nbsp;!=&nbsp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#617">llrust_ret_ty</a></c26><c21><a href="#562_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#562_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;748</ln><a id="748">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Neither&nbsp;ABI&nbsp;uses&nbsp;an&nbsp;outpointer,&nbsp;but&nbsp;the&nbsp;types&nbsp;don't
</c40><br/><ln>&nbsp;749</ln><a id="749">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;quite&nbsp;match.&nbsp;Must&nbsp;cast.&nbsp;Probably&nbsp;we&nbsp;should&nbsp;try&nbsp;and
</c40><br/><ln>&nbsp;750</ln><a id="750">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;examine&nbsp;the&nbsp;types&nbsp;and&nbsp;use&nbsp;a&nbsp;concrete&nbsp;llvm&nbsp;cast,&nbsp;but
</c40><br/><ln>&nbsp;751</ln><a id="751">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;right&nbsp;now&nbsp;we&nbsp;just&nbsp;use&nbsp;a&nbsp;temp&nbsp;memory&nbsp;location&nbsp;and
</c40><br/><ln>&nbsp;752</ln><a id="752">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;bitcast&nbsp;the&nbsp;pointer,&nbsp;which&nbsp;is&nbsp;the&nbsp;same&nbsp;thing&nbsp;the
</c40><br/><ln>&nbsp;753</ln><a id="753">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;old&nbsp;wrappers&nbsp;used&nbsp;to&nbsp;do.
</c40><br/><ln>&nbsp;754</ln><a id="754">&nbsp;</a><a id="n92919"><a id="n92929"><a id="n92921"><a id="n92920">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#754_20_refs">lltemp</a></c20><c13><a href="#500_1_refs">&nbsp;=
</a></c13><br/><ln>&nbsp;755</ln><a id="755">&nbsp;</a><a id="n92928"><a id="n92922">&nbsp;</a></a><c13><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="c=0 n=518820">llvm::LLVMBuildAlloca</a></c26><c4>(</c4><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;756</ln><a id="756">&nbsp;</a><a id="n92925"><a id="n92923"><a id="n92927"><a id="n92926"><a id="n92924">&nbsp;</a></a></a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#723">llforeign_ret_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;757</ln><a id="757">&nbsp;</a><a id="n92932"><a id="n92942"><a id="n92931"><a id="n92930">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#757_20_refs">lltemp_casted</a></c20><c16><a href="#500_1_refs">&nbsp;=
</a></c16><br/><ln>&nbsp;758</ln><a id="758">&nbsp;</a><a id="n92933"><a id="n92934"><a id="n92941">&nbsp;</a></a></a><c16><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c16><c26><a href="c=0 n=519222">llvm::LLVMBuildBitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;759</ln><a id="759">&nbsp;</a><a id="n92935">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#754">lltemp</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;760</ln><a id="760">&nbsp;</a><a id="n92936"><a id="n92938"><a id="n92937">&nbsp;</a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#617">llrust_ret_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>()</c4><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;761</ln><a id="761">&nbsp;</a><a id="n92940"><a id="n92939">&nbsp;</a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;762</ln><a id="762">&nbsp;</a><a id="n92943"><a id="n92947"><a id="n92948">&nbsp;</a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=518883">llvm::LLVMBuildStore</a></c26><c4>(</c4><c13><a href="#500_1_refs">
</a></c13><br/><ln>&nbsp;763</ln><a id="763">&nbsp;</a><a id="n92945"><a id="n92946"><a id="n92944">&nbsp;</a></a></a><c13><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c13><a href="#500_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#719">llrust_ret_val</a></c26><c3>,</c3><c13><a href="#500_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#757">lltemp_casted</a></c26><c4>)</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;764</ln><a id="764">&nbsp;</a><a id="n92951"><a id="n92958"><a id="n92949"><a id="n92950">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#562_4_refs">&nbsp;</a></c22><c20><a href="#764_20_refs">llforeign_retval</a></c20><c16><a href="#562_4_refs">&nbsp;=
</a></c16><br/><ln>&nbsp;765</ln><a id="765">&nbsp;</a><a id="n92953"><a id="n92956"><a id="n92955"><a id="n92954"><a id="n92957"><a id="n92952">&nbsp;</a></a></a></a></a></a><c16><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c16><c26><a href="c=0 n=518867">llvm::LLVMBuildLoad</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#562_4_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#754">lltemp</a></c26><c3>,</c3><c27><a href="#562_4_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;766</ln><a id="766">&nbsp;</a><a id="n92962"><a id="n92961"><a id="n92959"><a id="n92960"><a id="n92963">&nbsp;</a></a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517970">llvm::LLVMBuildRet</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c13><a href="#500_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#764">llforeign_retval</a></c26><c4>)</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;767</ln><a id="767">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;768</ln><a id="768">&nbsp;</a>&nbsp;<c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;769</ln><a id="769">&nbsp;</a><a id="n92972"><a id="n92973"><a id="n92966">&nbsp;</a></a></a><c21><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#562_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#562_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;770</ln><a id="770">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Neither&nbsp;ABI&nbsp;uses&nbsp;an&nbsp;outpointer,&nbsp;and&nbsp;the&nbsp;types
</c40><br/><ln>&nbsp;771</ln><a id="771">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;match.&nbsp;Easy&nbsp;peasy.
</c40><br/><ln>&nbsp;772</ln><a id="772">&nbsp;</a><a id="n92967"><a id="n92971"><a id="n92968"><a id="n92969"><a id="n92970">&nbsp;</a></a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517970">llvm::LLVMBuildRet</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#719">llrust_ret_val</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;773</ln><a id="773">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;774</ln><a id="774">&nbsp;</a>&nbsp;<c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;775</ln><a id="775">&nbsp;</a><a id="n93000"><a id="n92975"><a id="n92976"><a id="n92974"><a id="n93001"><a id="n92977">&nbsp;</a></a></a></a></a></a><c21><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#775_17_refs">llforeign_outptr</a></c20><c4>)</c4><c21><a href="#562_4_refs">&nbsp;if&nbsp;</a></c21><c5><a href="#562_4_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#614">rust_uses_outptr</a></c26><c21><a href="#562_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#562_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;776</ln><a id="776">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Foreign&nbsp;ABI&nbsp;requires&nbsp;an&nbsp;out&nbsp;pointer,&nbsp;but&nbsp;Rust&nbsp;doesn't.
</c40><br/><ln>&nbsp;777</ln><a id="777">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Store&nbsp;Rust&nbsp;return&nbsp;value.
</c40><br/><ln>&nbsp;778</ln><a id="778">&nbsp;</a><a id="n92989"><a id="n92978"><a id="n92980"><a id="n92979">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#500_1_refs">&nbsp;</a></c22><c20><a href="#778_20_refs">llforeign_outptr_casted</a></c20><c16><a href="#500_1_refs">&nbsp;=
</a></c16><br/><ln>&nbsp;779</ln><a id="779">&nbsp;</a><a id="n92988"><a id="n92982"><a id="n92981">&nbsp;</a></a></a><c16><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c16><c26><a href="c=0 n=519222">llvm::LLVMBuildBitCast</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;780</ln><a id="780">&nbsp;</a><a id="n92983">&nbsp;</a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#775">llforeign_outptr</a></c26><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;781</ln><a id="781">&nbsp;</a><a id="n92984"><a id="n92985">&nbsp;</a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#618">llrust_retptr_ty</a></c26><c10><a href="../../../librustc/middle/trans/type_.rs.html#48">.to_ref</a></c10><c4>()</c4><c3>,</c3><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;782</ln><a id="782">&nbsp;</a><a id="n92987"><a id="n92986">&nbsp;</a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/builder.rs.html#31">noname</a></c26><c4>())</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;783</ln><a id="783">&nbsp;</a><a id="n92990"><a id="n92995"><a id="n92994">&nbsp;</a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=518883">llvm::LLVMBuildStore</a></c26><c4>(</c4><c27><a href="#500_1_refs">
</a></c27><br/><ln>&nbsp;784</ln><a id="784">&nbsp;</a><a id="n92993"><a id="n92991"><a id="n92992">&nbsp;</a></a></a><c27><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#719">llrust_ret_val</a></c26><c3>,</c3><c27><a href="#500_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#778">llforeign_outptr_casted</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;785</ln><a id="785">&nbsp;</a><a id="n92996"><a id="n92997"><a id="n92998"><a id="n92999">&nbsp;</a></a></a></a><c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517963">llvm::LLVMBuildRetVoid</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c4>)</c4><c3>;</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;786</ln><a id="786">&nbsp;</a>&nbsp;<c22><a href="#500_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;787</ln><a id="787">&nbsp;</a>&nbsp;<c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;788</ln><a id="788">&nbsp;</a><a id="n93003"><a id="n93002"><a id="n93009"><a id="n93008">&nbsp;</a></a></a></a><c21><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="../../../libstd/option.rs.html#n104341">_</a></c20><c4>)</c4><c21><a href="#562_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#562_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;789</ln><a id="789">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;Both&nbsp;ABIs&nbsp;use&nbsp;outpointers.&nbsp;Easy&nbsp;peasy.
</c40><br/><ln>&nbsp;790</ln><a id="790">&nbsp;</a><a id="n93006"><a id="n93004"><a id="n93005"><a id="n93007">&nbsp;</a></a></a></a><c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517963">llvm::LLVMBuildRetVoid</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#589">builder</a></c26><c4>)</c4><c3>;</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;791</ln><a id="791">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#562_4_refs">
</a></c21><br/><ln>&nbsp;792</ln><a id="792">&nbsp;</a>&nbsp;<c21><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#562_4_refs">
</a></c22><br/><ln>&nbsp;793</ln><a id="793">&nbsp;</a>&nbsp;<c22><a href="#562_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#500_1_refs">
</a></c22><br/><ln>&nbsp;794</ln><a id="794">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;795</ln><a id="795">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;796</ln><a id="796">&nbsp;</a>&nbsp;<c42>///////////////////////////////////////////////////////////////////////////
</c42><br/><ln>&nbsp;797</ln><a id="797">&nbsp;</a>&nbsp;<c40>//&nbsp;General&nbsp;ABI&nbsp;Support
</c40><br/><ln>&nbsp;798</ln><a id="798">&nbsp;</a>&nbsp;<c40>//
</c40><br/><ln>&nbsp;799</ln><a id="799">&nbsp;</a>&nbsp;<c40>//&nbsp;This&nbsp;code&nbsp;is&nbsp;kind&nbsp;of&nbsp;a&nbsp;confused&nbsp;mess&nbsp;and&nbsp;needs&nbsp;to&nbsp;be&nbsp;reworked&nbsp;given
</c40><br/><ln>&nbsp;800</ln><a id="800">&nbsp;</a>&nbsp;<c40>//&nbsp;the&nbsp;massive&nbsp;simplifications&nbsp;that&nbsp;have&nbsp;occurred.
</c40><br/><ln>&nbsp;801</ln><a id="801">&nbsp;</a><a id="n93013">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;802</ln><a id="802">&nbsp;</a><a id="n93020"><a id="n93016"><a id="n93018"><a id="n93017"><a id="n93021">&nbsp;</a></a></a></a></a><c21>pub</c21><c1><a href="#801_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#801_1_refs">&nbsp;link_name</a></c30><c4>(</c4><c20><a href="#802_17_refs">i</a></c20><c1><a href="#801_1_refs">:&nbsp;</a></c1><c8><a href="#801_1_refs">&amp;</a></c8><c8><a href="../../../libsyntax/ast.rs.html#n70566">ast::ForeignItem</a></c8><c4>)</c4><c1><a href="#801_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#801_1_refs">&nbsp;</a></c1><c8><a href="../../../libsyntax/parse/token.rs.html#n123184">InternedString</a></c8><c1><a href="#801_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#801_1_refs">
</a></c22><br/><ln>&nbsp;803</ln><a id="803">&nbsp;</a><a id="n93023"><a id="n93025"><a id="n93022"><a id="n93037"><a id="n93027"><a id="n93024">&nbsp;</a></a></a></a></a></a><c22><a href="#801_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#801_1_refs">&nbsp;</a></c21><c26><a href="../../../libsyntax/attr.rs.html#n2997">attr::first_attr_value_str_by_name</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#802">i</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.attrs</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#801_1_refs">
</a></c27><br/><ln>&nbsp;804</ln><a id="804">&nbsp;</a><a id="n93026">&nbsp;</a><c27><a href="#801_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c12><a href="#801_1_refs">"link_name"</a></c12><c4>)</c4><c21><a href="#801_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#801_1_refs">
</a></c21><br/><ln>&nbsp;805</ln><a id="805">&nbsp;</a><a id="n93031"><a id="n93029"><a id="n93030"><a id="n93032"><a id="n93028">&nbsp;</a></a></a></a></a><c21><a href="#801_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#801_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#801_1_refs">&nbsp;</a></c21><c26><a href="../../../libsyntax/parse/token.rs.html#n123800">token::get_ident</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#802">i</a></c26><c24><a href="../../../libsyntax/ast.rs.html#n70566">.ident</a></c24><c4>)</c4><c3>,</c3><c21><a href="#801_1_refs">
</a></c21><br/><ln>&nbsp;806</ln><a id="806">&nbsp;</a><a id="n93033"><a id="n93036"><a id="n93035"><a id="n93034">&nbsp;</a></a></a></a><c21><a href="#801_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#806_13_refs">ln</a></c20><c4>)</c4><c21><a href="#801_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#801_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#806">ln</a></c26><c10><a href="../../../libsyntax/parse/token.rs.html#n123527">.clone</a></c10><c4>()</c4><c3>,</c3><c21><a href="#801_1_refs">
</a></c21><br/><ln>&nbsp;807</ln><a id="807">&nbsp;</a>&nbsp;<c21><a href="#801_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#801_1_refs">
</a></c22><br/><ln>&nbsp;808</ln><a id="808">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;809</ln><a id="809">&nbsp;</a><a id="n93038">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;810</ln><a id="810">&nbsp;</a><a id="n93048"><a id="n93046"><a id="n93053"><a id="n93047"><a id="n93041"><a id="n93054"><a id="n93052"><a id="n93051"><a id="n93042"><a id="n93043">&nbsp;</a></a></a></a></a></a></a></a></a></a><c30>fn</c30><c30><a href="#809_1_refs">&nbsp;foreign_signature</a></c30><c4>(</c4><c20><a href="#810_21_refs">ccx</a></c20><c1><a href="#809_1_refs">:&nbsp;</a></c1><c8><a href="#809_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#809_1_refs">&nbsp;</a></c1><c20><a href="#810_41_refs">fn_sig</a></c20><c1><a href="#809_1_refs">:&nbsp;</a></c1><c8><a href="#809_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/ty.rs.html#447">ty::FnSig</a></c8><c3>,</c3><c1><a href="#809_1_refs">&nbsp;</a></c1><c20><a href="#810_61_refs">arg_tys</a></c20><c1><a href="#809_1_refs">:&nbsp;</a></c1><c8><a href="#809_1_refs">&amp;</a></c8><c3>[</c3><c8><a href="../../../librustc/middle/ty.rs.html#387">ty::t</a></c8><c3>]</c3><c4>)</c4><c1><a href="#809_1_refs">
</a></c1><br/><ln>&nbsp;811</ln><a id="811">&nbsp;</a><a id="n93056"><a id="n93085">&nbsp;</a></a><c1><a href="#809_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#809_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/middle/trans/foreign.rs.html#56">LlvmSignature</a></c8><c1><a href="#809_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#809_1_refs">
</a></c22><br/><ln>&nbsp;812</ln><a id="812">&nbsp;</a>&nbsp;<c22><a href="#809_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c41>/*!
</c41><br/><ln>&nbsp;813</ln><a id="813">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;ForeignSignature&nbsp;is&nbsp;the&nbsp;LLVM&nbsp;types&nbsp;of&nbsp;the&nbsp;arguments/return&nbsp;type
</c41><br/><ln>&nbsp;814</ln><a id="814">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;of&nbsp;a&nbsp;function.&nbsp;&nbsp;Note&nbsp;that&nbsp;these&nbsp;LLVM&nbsp;types&nbsp;are&nbsp;not&nbsp;quite&nbsp;the&nbsp;same
</c41><br/><ln>&nbsp;815</ln><a id="815">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;as&nbsp;the&nbsp;LLVM&nbsp;types&nbsp;would&nbsp;be&nbsp;for&nbsp;a&nbsp;native&nbsp;Rust&nbsp;function&nbsp;because&nbsp;foreign
</c41><br/><ln>&nbsp;816</ln><a id="816">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;functions&nbsp;just&nbsp;plain&nbsp;ignore&nbsp;modes.&nbsp;&nbsp;They&nbsp;also&nbsp;don't&nbsp;pass&nbsp;aggregate
</c41><br/><ln>&nbsp;817</ln><a id="817">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;values&nbsp;by&nbsp;pointer&nbsp;like&nbsp;we&nbsp;do.
</c41><br/><ln>&nbsp;818</ln><a id="818">&nbsp;</a>&nbsp;<c41>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</c41><br/><ln>&nbsp;819</ln><a id="819">&nbsp;</a>&nbsp;<c22><a href="#809_1_refs">
</a></c22><br/><ln>&nbsp;820</ln><a id="820">&nbsp;</a><a id="n93073"><a id="n93061"><a id="n93058"><a id="n93075"><a id="n93071"><a id="n93074"><a id="n93057"><a id="n93059"><a id="n93066"><a id="n93068"><a id="n93070"><a id="n93065"><a id="n93060"><a id="n93067"><a id="n93064"><a id="n93072"><a id="n93069"><a id="n93063">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#809_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#809_1_refs">&nbsp;</a></c22><c20><a href="#820_8_refs">llarg_tys</a></c20><c16><a href="#809_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#810">arg_tys</a></c26><c10><a href="../../../libstd/slice.rs.html#n49192">.iter</a></c10><c4>()</c4><c10><a href="../../../<std macros>.html#5">.map</a></c10><c4>(</c4><c1><a href="../../../<std macros>.html#5">|</a></c1><c20><a href="../../../<std macros>.html#5">&amp;</a></c20><c20><a href="#820_41_refs">arg</a></c20><c8><a href="../../../<std macros>.html#5">|</a></c8><c1><a href="../../../<std macros>.html#5">&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/type_of.rs.html#169">type_of</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#810">ccx</a></c26><c3>,</c3><c22><a href="../../../<std macros>.html#5">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#820">arg</a></c26><c4>))</c4><c10><a href="../../../<std macros>.html#4">.collect</a></c10><c4>()</c4><c3>;</c3><c22><a href="#809_1_refs">
</a></c22><br/><ln>&nbsp;821</ln><a id="821">&nbsp;</a><a id="n93080"><a id="n93083"><a id="n93076"><a id="n93082"><a id="n93081"><a id="n93084"><a id="n93077"><a id="n93079"><a id="n93078">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#809_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#809_1_refs">&nbsp;</a></c22><c20><a href="#821_8_refs">llret_ty</a></c20><c13><a href="#809_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/type_of.rs.html#169">type_of::type_of</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#810">ccx</a></c26><c3>,</c3><c27><a href="#809_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#810">fn_sig</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c4>)</c4><c3>;</c3><c22><a href="#809_1_refs">
</a></c22><br/><ln>&nbsp;822</ln><a id="822">&nbsp;</a><a id="n93093">&nbsp;</a><c22><a href="#809_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">LlvmSignature&nbsp;</a></c1><c3>{</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">
</a></c1><br/><ln>&nbsp;823</ln><a id="823">&nbsp;</a><a id="n93086">&nbsp;</a><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llarg_tys:&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#820">llarg_tys</a></c26><c3>,</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">
</a></c1><br/><ln>&nbsp;824</ln><a id="824">&nbsp;</a><a id="n93087">&nbsp;</a><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llret_ty:&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#821">llret_ty</a></c26><c3>,</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">
</a></c1><br/><ln>&nbsp;825</ln><a id="825">&nbsp;</a><a id="n93092"><a id="n93090"><a id="n93089"><a id="n93091"><a id="n93088">&nbsp;</a></a></a></a></a><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sret:&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/type_of.rs.html#28">type_of::return_uses_outptr</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#810">ccx</a></c26><c3>,</c3><c27><a href="../../../librustc/middle/trans/foreign.rs.html#56">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#810">fn_sig</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c4>)</c4><c3>,</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">
</a></c1><br/><ln>&nbsp;826</ln><a id="826">&nbsp;</a>&nbsp;<c1><a href="../../../librustc/middle/trans/foreign.rs.html#56">&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c22><a href="#809_1_refs">
</a></c22><br/><ln>&nbsp;827</ln><a id="827">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;828</ln><a id="828">&nbsp;</a><a id="n93094">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;829</ln><a id="829">&nbsp;</a><a id="n93097"><a id="n93099"><a id="n93098">&nbsp;</a></a></a><c30>fn</c30><c30><a href="#828_1_refs">&nbsp;foreign_types_for_id</a></c30><c4>(</c4><c20><a href="#829_24_refs">ccx</a></c20><c1><a href="#828_1_refs">:&nbsp;</a></c1><c8><a href="#828_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#828_1_refs">
</a></c1><br/><ln>&nbsp;830</ln><a id="830">&nbsp;</a><a id="n93106"><a id="n93105"><a id="n93102"><a id="n93103">&nbsp;</a></a></a></a><c1><a href="#828_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#830_24_refs">id</a></c20><c1><a href="#828_1_refs">:&nbsp;</a></c1><c8><a href="../../../libsyntax/ast.rs.html#n18432">ast::NodeId</a></c8><c4>)</c4><c1><a href="#828_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#828_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/middle/trans/foreign.rs.html#41">ForeignTypes</a></c8><c1><a href="#828_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#828_1_refs">
</a></c22><br/><ln>&nbsp;831</ln><a id="831">&nbsp;</a><a id="n93113"><a id="n93114"><a id="n93107"><a id="n93110"><a id="n93112"><a id="n93109"><a id="n93111"><a id="n93108">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#828_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#833">foreign_types_for_fn_ty</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#829">ccx</a></c26><c3>,</c3><c27><a href="#828_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/ty.rs.html#2728">ty::node_id_to_type</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#829">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>()</c4><c3>,</c3><c27><a href="#828_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#830">id</a></c26><c4>))</c4><c22><a href="#828_1_refs">
</a></c22><br/><ln>&nbsp;832</ln><a id="832">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;833</ln><a id="833">&nbsp;</a><a id="n93115">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;834</ln><a id="834">&nbsp;</a><a id="n93119"><a id="n93120"><a id="n93118">&nbsp;</a></a></a><c30>fn</c30><c30><a href="#833_1_refs">&nbsp;foreign_types_for_fn_ty</a></c30><c4>(</c4><c20><a href="#834_27_refs">ccx</a></c20><c1><a href="#833_1_refs">:&nbsp;</a></c1><c8><a href="#833_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#833_1_refs">
</a></c1><br/><ln>&nbsp;835</ln><a id="835">&nbsp;</a><a id="n93126"><a id="n93418"><a id="n93124"><a id="n93123">&nbsp;</a></a></a></a><c1><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#835_27_refs">ty</a></c20><c1><a href="#833_1_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/middle/ty.rs.html#387">ty::t</a></c8><c4>)</c4><c1><a href="#833_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#833_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/middle/trans/foreign.rs.html#41">ForeignTypes</a></c8><c1><a href="#833_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;836</ln><a id="836">&nbsp;</a><a id="n93144"><a id="n93128"><a id="n93130"><a id="n93145"><a id="n93129"><a id="n93131"><a id="n93133"><a id="n93127"><a id="n93132">&nbsp;</a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#833_1_refs">&nbsp;</a></c22><c20><a href="#836_8_refs">fn_sig</a></c20><c16><a href="#833_1_refs">&nbsp;=&nbsp;</a></c16><c21><a href="#833_1_refs">match&nbsp;</a></c21><c26><a href="../../../librustc/middle/ty.rs.html#395">ty::get</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#835">ty</a></c26><c4>)</c4><c24><a href="../../../librustc/middle/ty.rs.html#375">.sty</a></c24><c21><a href="#833_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#833_1_refs">
</a></c21><br/><ln>&nbsp;837</ln><a id="837">&nbsp;</a><a id="n93138"><a id="n93135"><a id="n93134"><a id="n93137"><a id="n93136">&nbsp;</a></a></a></a></a><c21><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../librustc/middle/ty.rs.html#741">ty::ty_bare_fn</a></c20><c4>(</c4><c20><a href="#837_23_refs">ref&nbsp;fn_ty</a></c20><c4>)</c4><c21><a href="#833_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#833_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#837">fn_ty</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#422">.sig</a></c24><c10><a href="../../../librustc/middle/ty.rs.html#447">.clone</a></c10><c4>()</c4><c3>,</c3><c21><a href="#833_1_refs">
</a></c21><br/><ln>&nbsp;838</ln><a id="838">&nbsp;</a><a id="n93143"><a id="n93141"><a id="n93142"><a id="n93139"><a id="n93140">&nbsp;</a></a></a></a></a><c21><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#833_1_refs">_</a></c20><c21><a href="#833_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#833_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#227">.sess</a></c10><c4>()</c4><c10><a href="../../../librustc/driver/session.rs.html#241">.bug</a></c10><c4>(</c4><c12><a href="../../../librustc/driver/session.rs.html#241">"foreign_types_for_fn_ty&nbsp;called&nbsp;on&nbsp;non-function&nbsp;</a></c12><c35>type</c35><c35><a href="../../../librustc/driver/session.rs.html#241">"</a></c35><c35>)</c35><c35><a href="#833_1_refs">
</a></c35><br/><ln>&nbsp;839</ln><a id="839">&nbsp;</a>&nbsp;<c21><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;840</ln><a id="840">&nbsp;</a><a id="n93157"><a id="n93154"><a id="n93146"><a id="n93153"><a id="n93152"><a id="n93151"><a id="n93150"><a id="n93149"><a id="n93148"><a id="n93156"><a id="n93155"><a id="n93147">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#833_1_refs">&nbsp;</a></c22><c20><a href="#840_8_refs">llsig</a></c20><c16><a href="#833_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#809">foreign_signature</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c3>,</c3><c27><a href="#833_1_refs">&nbsp;</a></c27><c5><a href="#833_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#836">fn_sig</a></c26><c3>,</c3><c27><a href="#833_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#836">fn_sig</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#450">.inputs</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>())</c4><c3>;</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;841</ln><a id="841">&nbsp;</a><a id="n93163"><a id="n93166"><a id="n93159"><a id="n93167"><a id="n93161"><a id="n93160"><a id="n93158"><a id="n93162"><a id="n93165"><a id="n93164">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#833_1_refs">&nbsp;</a></c22><c20><a href="#841_8_refs">ret_def</a></c20><c16><a href="#833_1_refs">&nbsp;=&nbsp;</a></c16><c5><a href="#833_1_refs">!</a></c5><c26><a href="../../../librustc/middle/trans/common.rs.html#91">return_type_is_void</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c3>,</c3><c27><a href="#833_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#836">fn_sig</a></c26><c24><a href="../../../librustc/middle/ty.rs.html#451">.output</a></c24><c4>)</c4><c3>;</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;842</ln><a id="842">&nbsp;</a><a id="n93168"><a id="n93179"><a id="n93169"><a id="n93180"><a id="n93170"><a id="n93171"><a id="n93172">&nbsp;</a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#833_1_refs">&nbsp;</a></c22><c20><a href="#842_8_refs">fn_ty</a></c20><c13><a href="#833_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/cabi.rs.html#107">cabi::compute_abi_info</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c3>,</c3><c27><a href="#833_1_refs">
</a></c27><br/><ln>&nbsp;843</ln><a id="843">&nbsp;</a><a id="n93175"><a id="n93173"><a id="n93174">&nbsp;</a></a></a><c27><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#840">llsig</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#59">.llarg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#833_1_refs">
</a></c27><br/><ln>&nbsp;844</ln><a id="844">&nbsp;</a><a id="n93176"><a id="n93177">&nbsp;</a></a><c27><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#840">llsig</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#65">.llret_ty</a></c24><c3>,</c3><c27><a href="#833_1_refs">
</a></c27><br/><ln>&nbsp;845</ln><a id="845">&nbsp;</a><a id="n93178">&nbsp;</a><c27><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#841">ret_def</a></c26><c4>)</c4><c3>;</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;846</ln><a id="846">&nbsp;</a><a id="n93295"><a id="n93354"><a id="n93304"><a id="n93338"><a id="n93315"><a id="n93343"><a id="n93318"><a id="n93357"><a id="n93327"><a id="n93344"><a id="n93263"><a id="n93278"><a id="n93326"><a id="n93307"><a id="n93316"><a id="n93342"><a id="n93392"><a id="n93273"><a id="n93291"><a id="n93325"><a id="n93277"><a id="n93312"><a id="n93282"><a id="n93270"><a id="n93383"><a id="n93281"><a id="n93317"><a id="n93345"><a id="n93395"><a id="n93331"><a id="n93412"><a id="n93272"><a id="n93300"><a id="n93319"><a id="n93288"><a id="n93293"><a id="n93294"><a id="n93358"><a id="n93306"><a id="n93346"><a id="n93353"><a id="n93286"><a id="n93387"><a id="n93328"><a id="n93409"><a id="n93287"><a id="n93271"><a id="n93384"><a id="n93264"><a id="n93297"><a id="n93352"><a id="n93274"><a id="n93336"><a id="n93308"><a id="n93284"><a id="n93337"><a id="n93332"><a id="n93389"><a id="n93311"><a id="n93269"><a id="n93309"><a id="n93356"><a id="n93335"><a id="n93305"><a id="n93283"><a id="n93285"><a id="n93275"><a id="n93330"><a id="n93347"><a id="n93302"><a id="n93396"><a id="n93289"><a id="n93301"><a id="n93351"><a id="n93267"><a id="n93339"><a id="n93355"><a id="n93296"><a id="n93256"><a id="n93385"><a id="n93341"><a id="n93324"><a id="n93333"><a id="n93280"><a id="n93393"><a id="n93391"><a id="n93314"><a id="n93329"><a id="n93349"><a id="n93323"><a id="n93279"><a id="n93340"><a id="n93386"><a id="n93298"><a id="n93320"><a id="n93268"><a id="n93394"><a id="n93350"><a id="n93299"><a id="n93388"><a id="n93334"><a id="n93310"><a id="n93292"><a id="n93321"><a id="n93313"><a id="n93390"><a id="n93348"><a id="n93276"><a id="n93303"><a id="n93322"><a id="n93290">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">"foreign_types_for_fn_ty</a></c26><c4>(</c4><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">\
</a></c26><br/><ln>&nbsp;847</ln><a id="847">&nbsp;</a>&nbsp;<c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ty=</a></c26><c3>{},</c3><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;\
</a></c26><br/><ln>&nbsp;848</ln><a id="848">&nbsp;</a>&nbsp;<c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llsig=</a></c26><c3>{}</c3><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;</a></c26><c4>-&gt;</c4><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;</a></c26><c3>{},</c3><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;\
</a></c26><br/><ln>&nbsp;849</ln><a id="849">&nbsp;</a>&nbsp;<c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn_ty=</a></c26><c3>{}</c3><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;</a></c26><c4>-&gt;</c4><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;</a></c26><c3>{},</c3><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;\
</a></c26><br/><ln>&nbsp;850</ln><a id="850">&nbsp;</a>&nbsp;<c26><a href="../../../libstd/fmt/parse.rs.html#n166363">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret_def=</a></c26><c3>{}</c3><c26><a href="../../../libstd/fmt/parse.rs.html#n166363">"</a></c26><c3>,</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;851</ln><a id="851">&nbsp;</a><a id="n93360"><a id="n93362"><a id="n93359"><a id="n93361"><a id="n93213"><a id="n93214"><a id="n93216"><a id="n93215"><a id="n93257"><a id="n93217">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#835">ty</a></c26><c5><a href="#851_11_refs">.repr</a></c5><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c10><a href="../../../librustc/middle/trans/context.rs.html#223">.tcx</a></c10><c4>())</c4><c3>,</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;852</ln><a id="852">&nbsp;</a><a id="n93221"><a id="n93365"><a id="n93224"><a id="n93363"><a id="n93223"><a id="n93218"><a id="n93219"><a id="n93366"><a id="n93222"><a id="n93220"><a id="n93258"><a id="n93364">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../libstd/fmt/mod.rs.html#n169877">.types_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#840">llsig</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#59">.llarg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>())</c4><c3>,</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;853</ln><a id="853">&nbsp;</a><a id="n93229"><a id="n93370"><a id="n93367"><a id="n93259"><a id="n93230"><a id="n93368"><a id="n93228"><a id="n93225"><a id="n93369"><a id="n93227"><a id="n93226">&nbsp;</a></a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#853">.type_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#840">llsig</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#65">.llret_ty</a></c24><c4>)</c4><c3>,</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;854</ln><a id="854">&nbsp;</a><a id="n93243"><a id="n93232"><a id="n93373"><a id="n93239"><a id="n93236"><a id="n93241"><a id="n93246"><a id="n93234"><a id="n93240"><a id="n93374"><a id="n93231"><a id="n93238"><a id="n93242"><a id="n93237"><a id="n93372"><a id="n93245"><a id="n93233"><a id="n93371"><a id="n93260"><a id="n93244">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c20><a href="#854_11_refs">.types_to_str</a></c20><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#842">fn_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#102">.arg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n58129">.map</a></c10><c4>(</c4><c1><a href="../../../libstd/vec.rs.html#n58129">|</a></c1><c20><a href="#854_50_refs">t</a></c20><c8><a href="../../../libstd/vec.rs.html#n58129">|</a></c8><c1><a href="../../../libstd/vec.rs.html#n58129">&nbsp;</a></c1><c8><a href="../../../librustc/middle/trans/foreign.rs.html#854">t</a></c8><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c4>)</c4><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>())</c4><c3>,</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;855</ln><a id="855">&nbsp;</a><a id="n93252"><a id="n93261"><a id="n93250"><a id="n93248"><a id="n93247"><a id="n93378"><a id="n93376"><a id="n93375"><a id="n93249"><a id="n93253"><a id="n93251"><a id="n93377">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#834">ccx</a></c26><c24><a href="../../../librustc/middle/trans/context.rs.html#44">.tn</a></c24><c26><a href="../../../librustc/middle/trans/foreign.rs.html#855">.type_to_str</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#842">fn_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c4>)</c4><c3>,</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;856</ln><a id="856">&nbsp;</a><a id="n93379"><a id="n93254"><a id="n93262"><a id="n93380"><a id="n93382"><a id="n93255"><a id="n93381">&nbsp;</a></a></a></a></a></a></a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#856">ret_def</a></c26><c4>)</c4><c3>;</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;857</ln><a id="857">&nbsp;</a>&nbsp;<c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;858</ln><a id="858">&nbsp;</a><a id="n93423">&nbsp;</a><c22><a href="#833_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">ForeignTypes&nbsp;</a></c1><c3>{</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">
</a></c1><br/><ln>&nbsp;859</ln><a id="859">&nbsp;</a><a id="n93419">&nbsp;</a><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn_sig:&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#836">fn_sig</a></c26><c3>,</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">
</a></c1><br/><ln>&nbsp;860</ln><a id="860">&nbsp;</a><a id="n93420">&nbsp;</a><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llsig:&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#840">llsig</a></c26><c3>,</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">
</a></c1><br/><ln>&nbsp;861</ln><a id="861">&nbsp;</a><a id="n93421">&nbsp;</a><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret_def:&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#841">ret_def</a></c26><c3>,</c3><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">
</a></c1><br/><ln>&nbsp;862</ln><a id="862">&nbsp;</a><a id="n93422">&nbsp;</a><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn_ty:&nbsp;</a></c1><c26><a href="../../../librustc/middle/trans/foreign.rs.html#842">fn_ty</a></c26><c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">
</a></c1><br/><ln>&nbsp;863</ln><a id="863">&nbsp;</a>&nbsp;<c1><a href="../../../librustc/middle/trans/foreign.rs.html#41">&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c22><a href="#833_1_refs">
</a></c22><br/><ln>&nbsp;864</ln><a id="864">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;865</ln><a id="865">&nbsp;</a><a id="n93424">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;866</ln><a id="866">&nbsp;</a><a id="n93434"><a id="n93427"><a id="n93428"><a id="n93429"><a id="n93542"><a id="n93433"><a id="n93436"><a id="n93432">&nbsp;</a></a></a></a></a></a></a></a><c30>fn</c30><c30><a href="#865_1_refs">&nbsp;lltype_for_fn_from_foreign_types</a></c30><c4>(</c4><c20><a href="#866_36_refs">ccx</a></c20><c1><a href="#865_1_refs">:&nbsp;</a></c1><c8><a href="#865_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#865_1_refs">&nbsp;</a></c1><c20><a href="#866_56_refs">tys</a></c20><c1><a href="#865_1_refs">:&nbsp;</a></c1><c8><a href="#865_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/foreign.rs.html#41">ForeignTypes</a></c8><c4>)</c4><c1><a href="#865_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#865_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/middle/trans/type_.rs.html#27">Type</a></c8><c1><a href="#865_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;867</ln><a id="867">&nbsp;</a><a id="n93442"><a id="n93441"><a id="n93439"><a id="n93440"><a id="n93438"><a id="n93437">&nbsp;</a></a></a></a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#865_1_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#867_8_refs">&nbsp;llargument_tys</a></c20><c16><a href="#865_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../libstd/vec.rs.html#n56419">Vec::new</a></c26><c4>()</c4><c3>;</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;868</ln><a id="868">&nbsp;</a>&nbsp;<c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;869</ln><a id="869">&nbsp;</a><a id="n93445"><a id="n93449"><a id="n93448"><a id="n93446"><a id="n93447"><a id="n93443"><a id="n93444">&nbsp;</a></a></a></a></a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#865_1_refs">&nbsp;</a></c22><c20><a href="#869_8_refs">ret_ty</a></c20><c16><a href="#865_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/foreign.rs.html#866">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c3>;</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;870</ln><a id="870">&nbsp;</a><a id="n93450"><a id="n93452"><a id="n93453"><a id="n93477"><a id="n93476"><a id="n93461"><a id="n93454"><a id="n93451">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#865_1_refs">&nbsp;</a></c22><c20><a href="#870_8_refs">llreturn_ty</a></c20><c13><a href="#865_1_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#865_1_refs">if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#869">ret_ty</a></c26><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c21><a href="#865_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;871</ln><a id="871">&nbsp;</a><a id="n93455"><a id="n93458"><a id="n93460"><a id="n93456"><a id="n93459"><a id="n93457">&nbsp;</a></a></a></a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#867">llargument_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#869">ret_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>())</c4><c3>;</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;872</ln><a id="872">&nbsp;</a><a id="n93462"><a id="n93463"><a id="n93464">&nbsp;</a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/type_.rs.html#52">Type::void</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#866">ccx</a></c26><c4>)</c4><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;873</ln><a id="873">&nbsp;</a><a id="n93465"><a id="n93475">&nbsp;</a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#865_1_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#865_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;874</ln><a id="874">&nbsp;</a><a id="n93474"><a id="n93467"><a id="n93466">&nbsp;</a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#865_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#869">ret_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#42">.cast</a></c24><c21><a href="#865_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#865_1_refs">
</a></c21><br/><ln>&nbsp;875</ln><a id="875">&nbsp;</a><a id="n93469"><a id="n93470"><a id="n93468">&nbsp;</a></a></a><c21><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#875_17_refs">ty</a></c20><c4>)</c4><c21><a href="#865_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#865_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#875">ty</a></c26><c3>,</c3><c21><a href="#865_1_refs">
</a></c21><br/><ln>&nbsp;876</ln><a id="876">&nbsp;</a><a id="n93473"><a id="n93471"><a id="n93472">&nbsp;</a></a></a><c21><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#865_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#865_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#869">ret_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c21><a href="#865_1_refs">
</a></c21><br/><ln>&nbsp;877</ln><a id="877">&nbsp;</a>&nbsp;<c21><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;878</ln><a id="878">&nbsp;</a>&nbsp;<c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;879</ln><a id="879">&nbsp;</a>&nbsp;<c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;880</ln><a id="880">&nbsp;</a><a id="n93482"><a id="n93540"><a id="n93481"><a id="n93480"><a id="n93478"><a id="n93538"><a id="n93484"><a id="n93485"><a id="n93489"><a id="n93486"><a id="n93483"><a id="n93539"><a id="n93479"><a id="n93487"><a id="n93488"><a id="n93536"><a id="n93491"><a id="n93541"><a id="n93490"><a id="n93537">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c20><a href="../../../libstd/option.rs.html#n104341">&amp;</a></c20><c20><a href="#880_9_refs">arg_ty</a></c20><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;in&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#866">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#102">.arg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n57688">.iter</a></c10><c4>()</c4><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;881</ln><a id="881">&nbsp;</a><a id="n93497"><a id="n93496"><a id="n93498"><a id="n93492"><a id="n93493">&nbsp;</a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#880">arg_ty</a></c26><c10><a href="../../../librustc/middle/trans/cabi.rs.html#90">.is_ignore</a></c10><c4>()</c4><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c3>{</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c22><br/><ln>&nbsp;882</ln><a id="882">&nbsp;</a><a id="n93494"><a id="n93495">&nbsp;</a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">continue</a></c13><c3>;</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c22><br/><ln>&nbsp;883</ln><a id="883">&nbsp;</a>&nbsp;<c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;884</ln><a id="884">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;add&nbsp;padding
</c40><br/><ln>&nbsp;885</ln><a id="885">&nbsp;</a><a id="n93500"><a id="n93508"><a id="n93509"><a id="n93499">&nbsp;</a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#880">arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#44">.pad</a></c24><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c3>{</c3><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c13><br/><ln>&nbsp;886</ln><a id="886">&nbsp;</a><a id="n93505"><a id="n93504"><a id="n93501"><a id="n93502"><a id="n93503">&nbsp;</a></a></a></a></a><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#886_17_refs">ty</a></c20><c4>)</c4><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#867">llargument_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#886">ty</a></c26><c4>)</c4><c3>,</c3><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c13><br/><ln>&nbsp;887</ln><a id="887">&nbsp;</a><a id="n93506"><a id="n93507">&nbsp;</a></a><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c4>=&gt;</c4><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c13><c4>()</c4><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c13><br/><ln>&nbsp;888</ln><a id="888">&nbsp;</a>&nbsp;<c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;889</ln><a id="889">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;890</ln><a id="890">&nbsp;</a><a id="n93530"><a id="n93512"><a id="n93514"><a id="n93510"><a id="n93513"><a id="n93531"><a id="n93515"><a id="n93511">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/option.rs.html#n104337">&nbsp;</a></c22><c20><a href="#890_12_refs">llarg_ty</a></c20><c13><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;=&nbsp;</a></c13><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">if&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#880">arg_ty</a></c26><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c22><br/><ln>&nbsp;891</ln><a id="891">&nbsp;</a><a id="n93517"><a id="n93518"><a id="n93516">&nbsp;</a></a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#880">arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c10><a href="../../../librustc/middle/trans/type_.rs.html#258">.ptr_to</a></c10><c4>()</c4><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c22><br/><ln>&nbsp;892</ln><a id="892">&nbsp;</a><a id="n93529"><a id="n93519">&nbsp;</a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c21>else</c21><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c22><br/><ln>&nbsp;893</ln><a id="893">&nbsp;</a><a id="n93520"><a id="n93528"><a id="n93521">&nbsp;</a></a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#880">arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#42">.cast</a></c24><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c3>{</c3><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c21><br/><ln>&nbsp;894</ln><a id="894">&nbsp;</a><a id="n93522"><a id="n93523"><a id="n93524">&nbsp;</a></a></a><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#894_21_refs">ty</a></c20><c4>)</c4><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#894">ty</a></c26><c3>,</c3><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c21><br/><ln>&nbsp;895</ln><a id="895">&nbsp;</a><a id="n93525"><a id="n93526"><a id="n93527">&nbsp;</a></a></a><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#880">arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#40">.ty</a></c24><c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c21><br/><ln>&nbsp;896</ln><a id="896">&nbsp;</a>&nbsp;<c21><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">
</a></c22><br/><ln>&nbsp;897</ln><a id="897">&nbsp;</a>&nbsp;<c22><a href="../../../librustc/middle/trans/foreign.rs.html#880">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="../../../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;898</ln><a id="898">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;899</ln><a id="899">&nbsp;</a><a id="n93533"><a id="n93535"><a id="n93532"><a id="n93534">&nbsp;</a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#867">llargument_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n57406">.push</a></c10><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#890">llarg_ty</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;900</ln><a id="900">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c13><a href="../../../libstd/option.rs.html#n104341">
</a></c13><br/><ln>&nbsp;901</ln><a id="901">&nbsp;</a>&nbsp;<c13><a href="../../../libstd/option.rs.html#n104341">
</a></c13><br/><ln>&nbsp;902</ln><a id="902">&nbsp;</a><a id="n93561"><a id="n93545"><a id="n93546"><a id="n93543"><a id="n93544">&nbsp;</a></a></a></a></a><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c21>if</c21><c21><a href="#865_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#866">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#44">.fn_sig</a></c24><c24><a href="../../../librustc/middle/ty.rs.html#452">.variadic</a></c24><c21><a href="#865_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;903</ln><a id="903">&nbsp;</a><a id="n93550"><a id="n93551"><a id="n93547"><a id="n93549"><a id="n93548"><a id="n93552">&nbsp;</a></a></a></a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/type_.rs.html#148">Type::variadic_func</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#867">llargument_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#865_1_refs">&nbsp;</a></c27><c5><a href="#865_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#870">llreturn_ty</a></c26><c4>)</c4><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;904</ln><a id="904">&nbsp;</a><a id="n93553"><a id="n93560">&nbsp;</a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#865_1_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#865_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;905</ln><a id="905">&nbsp;</a><a id="n93554"><a id="n93558"><a id="n93559"><a id="n93555"><a id="n93557"><a id="n93556">&nbsp;</a></a></a></a></a></a><c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/type_.rs.html#142">Type::func</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#867">llargument_tys</a></c26><c10><a href="../../../libstd/vec.rs.html#n58540">.as_slice</a></c10><c4>()</c4><c3>,</c3><c27><a href="#865_1_refs">&nbsp;</a></c27><c5><a href="#865_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#870">llreturn_ty</a></c26><c4>)</c4><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;906</ln><a id="906">&nbsp;</a>&nbsp;<c22><a href="#865_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#865_1_refs">
</a></c22><br/><ln>&nbsp;907</ln><a id="907">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;908</ln><a id="908">&nbsp;</a><a id="n93562">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;909</ln><a id="909">&nbsp;</a><a id="n93570"><a id="n93573"><a id="n93567"><a id="n93571"><a id="n93565"><a id="n93574"><a id="n93566">&nbsp;</a></a></a></a></a></a></a><c21>pub</c21><c1><a href="#908_1_refs">&nbsp;</a></c1><c30>fn</c30><c30><a href="#908_1_refs">&nbsp;lltype_for_foreign_fn</a></c30><c4>(</c4><c20><a href="#909_29_refs">ccx</a></c20><c1><a href="#908_1_refs">:&nbsp;</a></c1><c8><a href="#908_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/context.rs.html#38">CrateContext</a></c8><c3>,</c3><c1><a href="#908_1_refs">&nbsp;</a></c1><c20><a href="#909_49_refs">ty</a></c20><c1><a href="#908_1_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/middle/ty.rs.html#387">ty::t</a></c8><c4>)</c4><c1><a href="#908_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#908_1_refs">&nbsp;</a></c1><c8><a href="../../../librustc/middle/trans/type_.rs.html#27">Type</a></c8><c1><a href="#908_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#908_1_refs">
</a></c22><br/><ln>&nbsp;910</ln><a id="910">&nbsp;</a><a id="n93575"><a id="n93579"><a id="n93576"><a id="n93580"><a id="n93577"><a id="n93581"><a id="n93582"><a id="n93578">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#908_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#865">lltype_for_fn_from_foreign_types</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#909">ccx</a></c26><c3>,</c3><c27><a href="#908_1_refs">&nbsp;</a></c27><c5><a href="#908_1_refs">&amp;</a></c5><c26><a href="../../../librustc/middle/trans/foreign.rs.html#833">foreign_types_for_fn_ty</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#909">ccx</a></c26><c3>,</c3><c27><a href="#908_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#909">ty</a></c26><c4>))</c4><c22><a href="#908_1_refs">
</a></c22><br/><ln>&nbsp;911</ln><a id="911">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;912</ln><a id="912">&nbsp;</a><a id="n93583">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;913</ln><a id="913">&nbsp;</a><a id="n93588"><a id="n93587"><a id="n93586">&nbsp;</a></a></a><c30>fn</c30><c30><a href="#912_1_refs">&nbsp;add_argument_attributes</a></c30><c4>(</c4><c20><a href="#913_27_refs">tys</a></c20><c1><a href="#912_1_refs">:&nbsp;</a></c1><c8><a href="#912_1_refs">&amp;</a></c8><c8><a href="../../../librustc/middle/trans/foreign.rs.html#41">ForeignTypes</a></c8><c3>,</c3><c1><a href="#912_1_refs">
</a></c1><br/><ln>&nbsp;914</ln><a id="914">&nbsp;</a><a id="n93591"><a id="n93592"><a id="n93641"><a id="n93593">&nbsp;</a></a></a></a><c1><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c20><a href="#914_27_refs">llfn</a></c20><c1><a href="#912_1_refs">:&nbsp;</a></c1><c8><a href="../../../librustc/lib/llvm.rs.html#234">ValueRef</a></c8><c4>)</c4><c1><a href="#912_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;915</ln><a id="915">&nbsp;</a><a id="n93597"><a id="n93595"><a id="n93598"><a id="n93596"><a id="n93594">&nbsp;</a></a></a></a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#912_1_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#915_8_refs">&nbsp;i</a></c20><c16><a href="#912_1_refs">&nbsp;=&nbsp;</a></c16><c12><a href="#912_1_refs">0</a></c12><c3>;</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;916</ln><a id="916">&nbsp;</a>&nbsp;<c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;917</ln><a id="917">&nbsp;</a><a id="n93601"><a id="n93599"><a id="n93602"><a id="n93639"><a id="n93640"><a id="n93600"><a id="n93638">&nbsp;</a></a></a></a></a></a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="#912_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#913">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c10><a href="../../../librustc/middle/trans/cabi.rs.html#86">.is_indirect</a></c10><c4>()</c4><c13><a href="#912_1_refs">&nbsp;</a></c13><c3>{</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;918</ln><a id="918">&nbsp;</a><a id="n93604"><a id="n93633"><a id="n93603"><a id="n93606"><a id="n93605"><a id="n93632">&nbsp;</a></a></a></a></a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#912_1_refs">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#913">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#105">.ret_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#46">.attr</a></c24><c21><a href="#912_1_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#912_1_refs">
</a></c21><br/><ln>&nbsp;919</ln><a id="919">&nbsp;</a><a id="n93617"><a id="n93607"><a id="n93628"><a id="n93608">&nbsp;</a></a></a></a><c21><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#919_17_refs">attr</a></c20><c4>)</c4><c21><a href="#912_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#912_1_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;920</ln><a id="920">&nbsp;</a><a id="n93610"><a id="n93614"><a id="n93609"><a id="n93615"><a id="n93613"><a id="n93611"><a id="n93612"><a id="n93616">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#912_1_refs">&nbsp;</a></c22><c20><a href="#920_20_refs">llarg</a></c20><c13><a href="#912_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/common.rs.html#663">get_param</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#914">llfn</a></c26><c3>,</c3><c27><a href="#912_1_refs">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#915">i</a></c26><c4>)</c4><c3>;</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;921</ln><a id="921">&nbsp;</a><a id="n93626"><a id="n93627">&nbsp;</a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>unsafe</c21><c22><a href="#912_1_refs">&nbsp;</a></c22><c3>{</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;922</ln><a id="922">&nbsp;</a><a id="n93618"><a id="n93619"><a id="n93624"><a id="n93623"><a id="n93620"><a id="n93625"><a id="n93622">&nbsp;</a></a></a></a></a></a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517486">llvm::LLVMAddAttribute</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#920">llarg</a></c26><c3>,</c3><c13><a href="#912_1_refs">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#919">attr</a></c26><c21><a href="#912_1_refs">&nbsp;as&nbsp;</a></c21><c8><a href="../../../libstd/libc.rs.html#n127571">c_uint</a></c8><c4>)</c4><c3>;</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;923</ln><a id="923">&nbsp;</a>&nbsp;<c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;924</ln><a id="924">&nbsp;</a>&nbsp;<c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#912_1_refs">
</a></c21><br/><ln>&nbsp;925</ln><a id="925">&nbsp;</a><a id="n93631"><a id="n93629"><a id="n93630">&nbsp;</a></a></a><c21><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#912_1_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#912_1_refs">&nbsp;</a></c21><c3>{}</c3><c21><a href="#912_1_refs">
</a></c21><br/><ln>&nbsp;926</ln><a id="926">&nbsp;</a>&nbsp;<c21><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;927</ln><a id="927">&nbsp;</a>&nbsp;<c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;928</ln><a id="928">&nbsp;</a><a id="n93636"><a id="n93634"><a id="n93637"><a id="n93635">&nbsp;</a></a></a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#915">i</a></c26><c13><a href="#912_1_refs">&nbsp;+=&nbsp;</a></c13><c12><a href="#912_1_refs">1</a></c12><c3>;</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;929</ln><a id="929">&nbsp;</a>&nbsp;<c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;930</ln><a id="930">&nbsp;</a>&nbsp;<c22><a href="#912_1_refs">
</a></c22><br/><ln>&nbsp;931</ln><a id="931">&nbsp;</a><a id="n93642"><a id="n93707"><a id="n93655"><a id="n93643"><a id="n93648"><a id="n93652"><a id="n93651"><a id="n93644"><a id="n93708"><a id="n93646"><a id="n93654"><a id="n93649"><a id="n93653"><a id="n93709"><a id="n93706"><a id="n93647"><a id="n93650"><a id="n93645"><a id="n93705">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22><a href="#912_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c10><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c10><c20><a href="../../../libstd/option.rs.html#n104337">&amp;</a></c20><c20><a href="#931_9_refs">arg_ty</a></c20><c10><a href="../../../libstd/slice.rs.html#n55129">&nbsp;in&nbsp;</a></c10><c26><a href="../../../librustc/middle/trans/foreign.rs.html#913">tys</a></c26><c24><a href="../../../librustc/middle/trans/foreign.rs.html#48">.fn_ty</a></c24><c24><a href="../../../librustc/middle/trans/cabi.rs.html#102">.arg_tys</a></c24><c10><a href="../../../libstd/vec.rs.html#n57688">.iter</a></c10><c4>()</c4><c10><a href="../../../libstd/slice.rs.html#n55129">&nbsp;</a></c10><c3>{</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">
</a></c22><br/><ln>&nbsp;932</ln><a id="932">&nbsp;</a><a id="n93656"><a id="n93662"><a id="n93657"><a id="n93661"><a id="n93660">&nbsp;</a></a></a></a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#931">arg_ty</a></c26><c10><a href="../../../librustc/middle/trans/cabi.rs.html#90">.is_ignore</a></c10><c4>()</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;933</ln><a id="933">&nbsp;</a><a id="n93658"><a id="n93659">&nbsp;</a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c13><a href="../../../libstd/option.rs.html#n104341">continue</a></c13><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;934</ln><a id="934">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">
</a></c22><br/><ln>&nbsp;935</ln><a id="935">&nbsp;</a>&nbsp;<c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;skip&nbsp;padding
</c40><br/><ln>&nbsp;936</ln><a id="936">&nbsp;</a><a id="n93663"><a id="n93667"><a id="n93668"><a id="n93665"><a id="n93664"><a id="n93666"><a id="n93669"><a id="n93671"><a id="n93672"><a id="n93670">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c13><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#931">arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#44">.pad</a></c24><c10><a href="../../../libstd/option.rs.html#n104931">.is_some</a></c10><c4>()</c4><c13><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;</a></c13><c3>{</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#915">i</a></c26><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;+=&nbsp;</a></c13><c12><a href="../../../libstd/option.rs.html#n104341">1</a></c12><c3>;</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;</a></c22><c3>}</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">
</a></c22><br/><ln>&nbsp;937</ln><a id="937">&nbsp;</a>&nbsp;<c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">
</a></c22><br/><ln>&nbsp;938</ln><a id="938">&nbsp;</a><a id="n93700"><a id="n93673"><a id="n93674"><a id="n93699">&nbsp;</a></a></a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c26><a href="../../../librustc/middle/trans/foreign.rs.html#931">arg_ty</a></c26><c24><a href="../../../librustc/middle/trans/cabi.rs.html#46">.attr</a></c24><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c21><a href="../../../libstd/option.rs.html#n104341">
</a></c21><br/><ln>&nbsp;939</ln><a id="939">&nbsp;</a><a id="n93685"><a id="n93696"><a id="n93676"><a id="n93675">&nbsp;</a></a></a></a><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#939_17_refs">attr</a></c20><c4>)</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;940</ln><a id="940">&nbsp;</a><a id="n93684"><a id="n93682"><a id="n93681"><a id="n93680"><a id="n93677"><a id="n93678"><a id="n93683"><a id="n93679">&nbsp;</a></a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c20><a href="#940_20_refs">llarg</a></c20><c16><a href="../../../libstd/option.rs.html#n104341">&nbsp;=&nbsp;</a></c16><c26><a href="../../../librustc/middle/trans/common.rs.html#663">get_param</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#914">llfn</a></c26><c3>,</c3><c27><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c27><c26><a href="../../../librustc/middle/trans/foreign.rs.html#915">i</a></c26><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;941</ln><a id="941">&nbsp;</a><a id="n93694"><a id="n93695">&nbsp;</a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>unsafe</c21><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c22><c3>{</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;942</ln><a id="942">&nbsp;</a><a id="n93690"><a id="n93692"><a id="n93686"><a id="n93691"><a id="n93688"><a id="n93687"><a id="n93693">&nbsp;</a></a></a></a></a></a></a><c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="c=0 n=517486">llvm::LLVMAddAttribute</a></c26><c4>(</c4><c26><a href="../../../librustc/middle/trans/foreign.rs.html#940">llarg</a></c26><c3>,</c3><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c13><c26><a href="../../../librustc/middle/trans/foreign.rs.html#939">attr</a></c26><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;as&nbsp;</a></c21><c8><a href="../../../libstd/libc.rs.html#n127571">c_uint</a></c8><c4>)</c4><c3>;</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;943</ln><a id="943">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../../../libstd/option.rs.html#n104341">
</a></c22><br/><ln>&nbsp;944</ln><a id="944">&nbsp;</a>&nbsp;<c22><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="../../../libstd/option.rs.html#n104341">
</a></c21><br/><ln>&nbsp;945</ln><a id="945">&nbsp;</a><a id="n93697"><a id="n93698">&nbsp;</a></a><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../../../libstd/option.rs.html#n104337">None</a></c20><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;</a></c21><c4>()</c4><c21><a href="../../../libstd/option.rs.html#n104341">
</a></c21><br/><ln>&nbsp;946</ln><a id="946">&nbsp;</a>&nbsp;<c21><a href="../../../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">
</a></c22><br/><ln>&nbsp;947</ln><a id="947">&nbsp;</a>&nbsp;<c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">
</a></c22><br/><ln>&nbsp;948</ln><a id="948">&nbsp;</a><a id="n93701"><a id="n93703"><a id="n93702"><a id="n93704">&nbsp;</a></a></a></a><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../../../librustc/middle/trans/foreign.rs.html#915">i</a></c26><c13><a href="../../../libstd/option.rs.html#n104341">&nbsp;+=&nbsp;</a></c13><c12><a href="../../../libstd/option.rs.html#n104341">1</a></c12><c3>;</c3><c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">
</a></c22><br/><ln>&nbsp;949</ln><a id="949">&nbsp;</a>&nbsp;<c22><a href="../../../librustc/middle/trans/foreign.rs.html#931">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c10><a href="../../../libstd/slice.rs.html#n55129">
</a></c10><br/><ln>&nbsp;950</ln><a id="950">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><div class="refblock"><br/><a id="230_1_refs"><a href="#230"><c40>librustc/middle/trans/foreign.rs:230:1-230:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;trans_native_call&lt;'a&gt;(
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/callee.rs.html"><c40>librustc/middle/trans/callee.rs:<br/></c40></a><a href="../../../librustc/middle/trans/callee.rs.html#732"><c40>732:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bcx&nbsp;=&nbsp;foreign::trans_native_call(bcx,&nbsp;callee_ty,
<br/></a><br/><br/><a id="56_1_refs"><a href="#56"><c40>librustc/middle/trans/foreign.rs:56:1-56:1&nbsp;-struct-&nbsp;definition:<br/></c40><pr>
<br/>struct&nbsp;LlvmSignature&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#51"><c40>51:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;llsig:&nbsp;LlvmSignature,
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#822"><c40>822:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;LlvmSignature&nbsp;{
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#811"><c40>811:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;LlvmSignature&nbsp;{
<br/></a><br/><br/><a id="182_1_refs"><a href="#182"><c40>librustc/middle/trans/foreign.rs:182:1-182:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;register_foreign_item_fn(ccx:&nbsp;&amp;CrateContext,&nbsp;abis:&nbsp;AbiSet,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#440"><c40>440:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;register_foreign_item_fn(ccx,&nbsp;abis,&nbsp;foreign_item);
<br/></a><a href="../../../librustc/middle/trans/base.rs.html"><c40>librustc/middle/trans/base.rs:<br/></c40></a><a href="../../../librustc/middle/trans/base.rs.html#2048"><c40>2048:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreign::register_foreign_item_fn(ccx,&nbsp;abis,&nbsp;ni)
<br/></a><br/><br/><a id="801_1_refs"><a href="#801"><c40>librustc/middle/trans/foreign.rs:801:1-801:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;link_name(i:&nbsp;&amp;ast::ForeignItem)&nbsp;-&gt;&nbsp;InternedString&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#208"><c40>208:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;lname&nbsp;=&nbsp;link_name(foreign_item);
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#137"><c40>137:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;ident&nbsp;=&nbsp;link_name(foreign_item);
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#446"><c40>446:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;lname&nbsp;=&nbsp;link_name(foreign_item);
<br/></a><br/><br/><a id="106_1_refs"><a href="#106"><c40>librustc/middle/trans/foreign.rs:106:1-106:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;llvm_linkage_by_name(name:&nbsp;&amp;str)&nbsp;-&gt;&nbsp;Option&lt;Linkage&gt;&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#146"><c40>146:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;linkage&nbsp;=&nbsp;match&nbsp;llvm_linkage_by_name(name.get())&nbsp;{
<br/></a><br/><br/><a id="432_1_refs"><a href="#432"><c40>librustc/middle/trans/foreign.rs:432:1-432:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;trans_foreign_mod(ccx:&nbsp;&amp;CrateContext,&nbsp;foreign_mod:&nbsp;&amp;ast::ForeignMod)&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/base.rs.html"><c40>librustc/middle/trans/base.rs:<br/></c40></a><a href="../../../librustc/middle/trans/base.rs.html#1705"><c40>1705:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreign::trans_foreign_mod(ccx,&nbsp;foreign_mod);
<br/></a><br/><br/><a id="500_1_refs"><a href="#500"><c40>librustc/middle/trans/foreign.rs:500:1-500:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;trans_rust_fn_with_foreign_abi(ccx:&nbsp;&amp;CrateContext,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/base.rs.html"><c40>librustc/middle/trans/base.rs:<br/></c40></a><a href="../../../librustc/middle/trans/base.rs.html#1654"><c40>1654:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreign::trans_rust_fn_with_foreign_abi(
<br/></a><br/><br/><a id="131_1_refs"><a href="#131"><c40>librustc/middle/trans/foreign.rs:131:1-131:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;register_static(ccx:&nbsp;&amp;CrateContext,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/base.rs.html"><c40>librustc/middle/trans/base.rs:<br/></c40></a><a href="../../../librustc/middle/trans/base.rs.html#2051"><c40>2051:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreign::register_static(ccx,&nbsp;ni)
<br/></a><br/><br/><a id="908_1_refs"><a href="#908"><c40>librustc/middle/trans/foreign.rs:908:1-908:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;lltype_for_foreign_fn(ccx:&nbsp;&amp;CrateContext,&nbsp;ty:&nbsp;ty::t)&nbsp;-&gt;&nbsp;Type&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/type_of.rs.html"><c40>librustc/middle/trans/type_of.rs:<br/></c40></a><a href="../../../librustc/middle/trans/type_of.rs.html#84"><c40>84:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreign::lltype_for_foreign_fn(cx,&nbsp;fty)
<br/></a><br/><br/><a id="562_4_refs"><a href="#562"><c40>librustc/middle/trans/foreign.rs:562:4-562:4&nbsp;-fn-&nbsp;definition:<br/></c40><pr>&nbsp;&nbsp;&nbsp;&nbsp;unsafe&nbsp;fn&nbsp;build_wrap_fn(ccx:&nbsp;&amp;CrateContext,
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llrustfn:&nbsp;ValueRef,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#515"><c40>515:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;build_wrap_fn(ccx,&nbsp;llrustfn,&nbsp;llwrapfn,&nbsp;&amp;tys);
<br/></a><br/><br/><a id="828_1_refs"><a href="#828"><c40>librustc/middle/trans/foreign.rs:828:1-828:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>fn&nbsp;foreign_types_for_id(ccx:&nbsp;&amp;CrateContext,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#508"><c40>508:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;tys&nbsp;=&nbsp;foreign_types_for_id(ccx,&nbsp;id);
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#484"><c40>484:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;tys&nbsp;=&nbsp;foreign_types_for_id(ccx,&nbsp;node_id);
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#209"><c40>209:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;tys&nbsp;=&nbsp;foreign_types_for_id(ccx,&nbsp;foreign_item.id);
<br/></a><br/><br/><a id="476_1_refs"><a href="#476"><c40>librustc/middle/trans/foreign.rs:476:1-476:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;register_rust_fn_with_foreign_abi(ccx:&nbsp;&amp;CrateContext,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/base.rs.html"><c40>librustc/middle/trans/base.rs:<br/></c40></a><a href="../../../librustc/middle/trans/base.rs.html#2000"><c40>2000:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreign::register_rust_fn_with_foreign_abi(ccx,
<br/></a><br/><br/><a id="74_1_refs"><a href="#74"><c40>librustc/middle/trans/foreign.rs:74:1-74:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;fn&nbsp;llvm_calling_convention(ccx:&nbsp;&amp;CrateContext,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#197"><c40>197:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;cc&nbsp;=&nbsp;match&nbsp;llvm_calling_convention(ccx,&nbsp;abis)&nbsp;{
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#357"><c40>357:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;cc&nbsp;=&nbsp;match&nbsp;llvm_calling_convention(ccx,&nbsp;fn_abis)&nbsp;{
<br/></a><a href="../../../librustc/middle/trans/base.rs.html"><c40>librustc/middle/trans/base.rs:<br/></c40></a><a href="../../../librustc/middle/trans/base.rs.html#874"><c40>874:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;c&nbsp;=&nbsp;foreign::llvm_calling_convention(ccx,&nbsp;fn_ty.abis);
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html"><c40>librustc/middle/trans/foreign.rs:<br/></c40></a><a href="../../../librustc/middle/trans/foreign.rs.html#489"><c40>489:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;c&nbsp;=&nbsp;llvm_calling_convention(ccx,&nbsp;fn_ty.abis);
<br/></a><br/><br/><a id="809_1_refs"><a href="#809"><c40>librustc/middle/trans/foreign.rs:809:1-809:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>fn&nbsp;foreign_signature(ccx:&nbsp;&amp;CrateContext,&nbsp;fn_sig:&nbsp;&amp;ty::FnSig,&nbsp;arg_tys:&nbsp;&amp;[ty::t])
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#840"><c40>840:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;llsig&nbsp;=&nbsp;foreign_signature(ccx,&nbsp;&amp;fn_sig,&nbsp;fn_sig.inputs.as_slice());
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#270"><c40>270:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;llsig&nbsp;=&nbsp;foreign_signature(ccx,&nbsp;&amp;fn_sig,&nbsp;passed_arg_tys.as_slice());
<br/></a><br/><br/><a id="41_1_refs"><a href="#41"><c40>librustc/middle/trans/foreign.rs:41:1-41:1&nbsp;-struct-&nbsp;definition:<br/></c40><pr>
<br/>struct&nbsp;ForeignTypes&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#830"><c40>830:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id:&nbsp;ast::NodeId)&nbsp;-&gt;&nbsp;ForeignTypes&nbsp;{
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#835"><c40>835:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ty:&nbsp;ty::t)&nbsp;-&gt;&nbsp;ForeignTypes&nbsp;{
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#858"><c40>858:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;ForeignTypes&nbsp;{
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#565"><c40>565:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tys:&nbsp;&amp;ForeignTypes)&nbsp;{
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#913"><c40>913:&nbsp;</c40>fn&nbsp;add_argument_attributes(tys:&nbsp;&amp;ForeignTypes,
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#866"><c40>866:&nbsp;</c40>fn&nbsp;lltype_for_fn_from_foreign_types(ccx:&nbsp;&amp;CrateContext,&nbsp;tys:&nbsp;&amp;ForeignTypes)&nbsp;-&gt;&nbsp;Type&nbsp;{
<br/></a><br/><br/><a id="865_1_refs"><a href="#865"><c40>librustc/middle/trans/foreign.rs:865:1-865:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>fn&nbsp;lltype_for_fn_from_foreign_types(ccx:&nbsp;&amp;CrateContext,&nbsp;tys:&nbsp;&amp;ForeignTypes)&nbsp;-&gt;&nbsp;Type&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#910"><c40>910:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;lltype_for_fn_from_foreign_types(ccx,&nbsp;&amp;foreign_types_for_fn_ty(ccx,&nbsp;ty))
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#485"><c40>485:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;llfn_ty&nbsp;=&nbsp;lltype_for_fn_from_foreign_types(ccx,&nbsp;&amp;tys);
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#218"><c40>218:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;llfn_ty&nbsp;=&nbsp;lltype_for_fn_from_foreign_types(ccx,&nbsp;&amp;tys);
<br/></a><br/><br/><a id="518_4_refs"><a href="#518"><c40>librustc/middle/trans/foreign.rs:518:4-518:4&nbsp;-fn-&nbsp;definition:<br/></c40><pr>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;build_rust_fn(ccx:&nbsp;&amp;CrateContext,
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decl:&nbsp;&amp;ast::FnDecl,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#512"><c40>512:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;llrustfn&nbsp;=&nbsp;build_rust_fn(ccx,&nbsp;decl,&nbsp;body,&nbsp;attrs,&nbsp;id);
<br/></a><br/><br/><a id="912_1_refs"><a href="#912"><c40>librustc/middle/trans/foreign.rs:912:1-912:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>fn&nbsp;add_argument_attributes(tys:&nbsp;&amp;ForeignTypes,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#495"><c40>495:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;add_argument_attributes(&amp;tys,&nbsp;llfn);
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#226"><c40>226:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;add_argument_attributes(&amp;tys,&nbsp;llfn);
<br/></a><br/><br/><a id="833_1_refs"><a href="#833"><c40>librustc/middle/trans/foreign.rs:833:1-833:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>fn&nbsp;foreign_types_for_fn_ty(ccx:&nbsp;&amp;CrateContext,
<br/></pr></a></a><c40>references:-</c40><br/><a href="../../../librustc/middle/trans/foreign.rs.html#910"><c40>910:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;lltype_for_fn_from_foreign_types(ccx,&nbsp;&amp;foreign_types_for_fn_ty(ccx,&nbsp;ty))
<br/></a><a href="../../../librustc/middle/trans/foreign.rs.html#831"><c40>831:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;foreign_types_for_fn_ty(ccx,&nbsp;ty::node_id_to_type(ccx.tcx(),&nbsp;id))
<br/></a><br/></div></maintext></div></body>