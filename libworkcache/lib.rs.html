<head><link href="../css/shCore.css" rel="stylesheet" type="text/css"/><link href="../css/shThemeDefault.css" rel="stylesheet" type="text/css"/><link href="../css/sourcestyle.css" rel="stylesheet" type="text/css"/></head><body><div><maintext><div><fileblock><br/>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./../index.html">(index&lt;-&nbsp;)</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./../">&nbsp;&nbsp;&nbsp;&nbsp;./</a><c0><a href="./../libworkcache/">libworkcache</a></c0><c1>/</c1><c0><a href="./../libworkcache/lib.rs.html">lib.rs</a></c0><br/><br/></fileblock></div><ln>&nbsp;&nbsp;&nbsp;1</ln><a id="1">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;Copyright&nbsp;2012-2013&nbsp;The&nbsp;Rust&nbsp;Project&nbsp;Developers.&nbsp;See&nbsp;the&nbsp;COPYRIGHT
</c40><br/><ln>&nbsp;&nbsp;&nbsp;2</ln><a id="2">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;file&nbsp;at&nbsp;the&nbsp;top-level&nbsp;directory&nbsp;of&nbsp;this&nbsp;distribution&nbsp;and&nbsp;at
</c40><br/><ln>&nbsp;&nbsp;&nbsp;3</ln><a id="3">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;http://rust-lang.org/COPYRIGHT.
</c40><br/><ln>&nbsp;&nbsp;&nbsp;4</ln><a id="4">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//
</c40><br/><ln>&nbsp;&nbsp;&nbsp;5</ln><a id="5">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;License,&nbsp;Version&nbsp;2.0&nbsp;&lt;LICENSE-APACHE&nbsp;or
</c40><br/><ln>&nbsp;&nbsp;&nbsp;6</ln><a id="6">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;http://www.apache.org/licenses/LICENSE-2.0&gt;&nbsp;or&nbsp;the&nbsp;MIT&nbsp;license
</c40><br/><ln>&nbsp;&nbsp;&nbsp;7</ln><a id="7">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;&lt;LICENSE-MIT&nbsp;or&nbsp;http://opensource.org/licenses/MIT&gt;,&nbsp;at&nbsp;your
</c40><br/><ln>&nbsp;&nbsp;&nbsp;8</ln><a id="8">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;option.&nbsp;This&nbsp;file&nbsp;may&nbsp;not&nbsp;be&nbsp;copied,&nbsp;modified,&nbsp;or&nbsp;distributed
</c40><br/><ln>&nbsp;&nbsp;&nbsp;9</ln><a id="9">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;except&nbsp;according&nbsp;to&nbsp;those&nbsp;terms.
</c40><br/><ln>&nbsp;&nbsp;10</ln><a id="10">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;11</ln><a id="11">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>crate_id&nbsp;=&nbsp;"workcache#0.10-pre"</c50><c3>];</c3><c50>
</c50><br/><ln>&nbsp;&nbsp;12</ln><a id="12">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>crate_type&nbsp;=&nbsp;"rlib"</c50><c3>];</c3><c50>
</c50><br/><ln>&nbsp;&nbsp;13</ln><a id="13">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>crate_type&nbsp;=&nbsp;"dylib"</c50><c3>];</c3><c50>
</c50><br/><ln>&nbsp;&nbsp;14</ln><a id="14">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>license&nbsp;=&nbsp;"MIT/ASL2"</c50><c3>];</c3><c50>
</c50><br/><ln>&nbsp;&nbsp;15</ln><a id="15">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>doc</c50><c4>(</c4><c50>html_logo_url&nbsp;=&nbsp;"http:</c50><c40>//www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png",
</c40><br/><ln>&nbsp;&nbsp;16</ln><a id="16">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_favicon_url&nbsp;=&nbsp;"http:</c0><c40>//www.rust-lang.org/favicon.ico",
</c40><br/><ln>&nbsp;&nbsp;17</ln><a id="17">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_root_url&nbsp;=&nbsp;"http:</c0><c40>//static.rust-lang.org/doc/master")];
</c40><br/><ln>&nbsp;&nbsp;18</ln><a id="18">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>feature</c50><c4>(</c4><c50>phase</c50><c4>)</c4><c3>];</c3><c50>
</c50><br/><ln>&nbsp;&nbsp;19</ln><a id="19">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>allow</c50><c4>(</c4><c50>visible_private_types</c50><c4>)</c4><c3>];</c3><c50>
</c50><br/><ln>&nbsp;&nbsp;20</ln><a id="20">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;21</ln><a id="21">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>phase</c50><c4>(</c4><c50>syntax</c50><c3>,</c3><c50>&nbsp;link</c50><c4>)</c4><c3>]</c3><c50>&nbsp;extern&nbsp;crate&nbsp;log</c50><c3>;</c3><c50>
</c50><br/><ln>&nbsp;&nbsp;22</ln><a id="22">&nbsp;</a><a id="n[]">&nbsp;</a><c21>extern</c21><c0>&nbsp;</c0><c21>crate</c21><c0>&nbsp;serialize</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;23</ln><a id="23">&nbsp;</a><a id="n[]">&nbsp;</a><c21>extern</c21><c0>&nbsp;</c0><c21>crate</c21><c0>&nbsp;collections</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;24</ln><a id="24">&nbsp;</a><a id="n[]">&nbsp;</a><c21>extern</c21><c0>&nbsp;</c0><c21>crate</c21><c0>&nbsp;sync</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;25</ln><a id="25">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;26</ln><a id="26">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;serialize::json</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;27</ln><a id="27">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;serialize::json::ToJson</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;28</ln><a id="28">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;serialize::</c0><c3>{</c3><c0>Encoder</c0><c3>,</c3><c0>&nbsp;Encodable</c0><c3>,</c3><c0>&nbsp;Decoder</c0><c3>,</c3><c0>&nbsp;Decodable</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;29</ln><a id="29">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;sync::</c0><c3>{</c3><c0>Arc</c0><c3>,</c3><c0>&nbsp;RWLock</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;30</ln><a id="30">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;collections::TreeMap</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;31</ln><a id="31">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::str</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;32</ln><a id="32">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::io</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;33</ln><a id="33">&nbsp;</a><a id="n[]">&nbsp;</a><c21>use</c21><c0>&nbsp;std::io::</c0><c3>{</c3><c0>File</c0><c3>,</c3><c0>&nbsp;MemWriter</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;34</ln><a id="34">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;35</ln><a id="35">&nbsp;</a><a id="n[]">&nbsp;</a><c41>/**
</c41><br/><ln>&nbsp;&nbsp;36</ln><a id="36">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;37</ln><a id="37">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;This&nbsp;is&nbsp;a&nbsp;loose&nbsp;clone&nbsp;of&nbsp;the&nbsp;[fbuild&nbsp;build&nbsp;system](https://github.com/felix-lang/fbuild),
</c41><br/><ln>&nbsp;&nbsp;38</ln><a id="38">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;made&nbsp;a&nbsp;touch&nbsp;more&nbsp;generic&nbsp;(not&nbsp;wired&nbsp;to&nbsp;special&nbsp;cases&nbsp;on&nbsp;files)&nbsp;and&nbsp;much
</c41><br/><ln>&nbsp;&nbsp;39</ln><a id="39">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;less&nbsp;metaprogram-y&nbsp;due&nbsp;to&nbsp;rust's&nbsp;comparative&nbsp;weakness&nbsp;there,&nbsp;relative&nbsp;to
</c41><br/><ln>&nbsp;&nbsp;40</ln><a id="40">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;python.
</c41><br/><ln>&nbsp;&nbsp;41</ln><a id="41">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;42</ln><a id="42">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;It's&nbsp;based&nbsp;around&nbsp;_imperative&nbsp;builds_&nbsp;that&nbsp;happen&nbsp;to&nbsp;have&nbsp;some&nbsp;function
</c41><br/><ln>&nbsp;&nbsp;43</ln><a id="43">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;calls&nbsp;cached.&nbsp;That&nbsp;is,&nbsp;it's&nbsp;_just_&nbsp;a&nbsp;mechanism&nbsp;for&nbsp;describing&nbsp;cached
</c41><br/><ln>&nbsp;&nbsp;44</ln><a id="44">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;functions.&nbsp;This&nbsp;makes&nbsp;it&nbsp;much&nbsp;simpler&nbsp;and&nbsp;smaller&nbsp;than&nbsp;a&nbsp;"build&nbsp;system"
</c41><br/><ln>&nbsp;&nbsp;45</ln><a id="45">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;that&nbsp;produces&nbsp;an&nbsp;IR&nbsp;and&nbsp;evaluates&nbsp;it.&nbsp;The&nbsp;evaluation&nbsp;order&nbsp;is&nbsp;normal
</c41><br/><ln>&nbsp;&nbsp;46</ln><a id="46">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;function&nbsp;calls.&nbsp;Some&nbsp;of&nbsp;them&nbsp;just&nbsp;return&nbsp;really&nbsp;quickly.
</c41><br/><ln>&nbsp;&nbsp;47</ln><a id="47">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;48</ln><a id="48">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;A&nbsp;cached&nbsp;function&nbsp;consumes&nbsp;and&nbsp;produces&nbsp;a&nbsp;set&nbsp;of&nbsp;_works_.&nbsp;A&nbsp;work&nbsp;has&nbsp;a
</c41><br/><ln>&nbsp;&nbsp;49</ln><a id="49">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;name,&nbsp;a&nbsp;kind&nbsp;(that&nbsp;determines&nbsp;how&nbsp;the&nbsp;value&nbsp;is&nbsp;to&nbsp;be&nbsp;checked&nbsp;for
</c41><br/><ln>&nbsp;&nbsp;50</ln><a id="50">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;freshness)&nbsp;and&nbsp;a&nbsp;value.&nbsp;Works&nbsp;must&nbsp;also&nbsp;be&nbsp;(de)serializable.&nbsp;Some
</c41><br/><ln>&nbsp;&nbsp;51</ln><a id="51">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;examples&nbsp;of&nbsp;works:
</c41><br/><ln>&nbsp;&nbsp;52</ln><a id="52">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;53</ln><a id="53">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;&nbsp;&nbsp;&nbsp;kind&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;value
</c41><br/><ln>&nbsp;&nbsp;54</ln><a id="54">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;&nbsp;&nbsp;------------------------
</c41><br/><ln>&nbsp;&nbsp;55</ln><a id="55">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;&nbsp;&nbsp;&nbsp;cfg&nbsp;&nbsp;&nbsp;&nbsp;os&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;linux
</c41><br/><ln>&nbsp;&nbsp;56</ln><a id="56">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;&nbsp;&nbsp;foo.c&nbsp;&nbsp;&nbsp;&lt;sha1&gt;
</c41><br/><ln>&nbsp;&nbsp;57</ln><a id="57">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;&nbsp;&nbsp;&nbsp;foo.com&nbsp;&lt;etag&gt;
</c41><br/><ln>&nbsp;&nbsp;58</ln><a id="58">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;59</ln><a id="59">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;Works&nbsp;are&nbsp;conceptually&nbsp;single&nbsp;units,&nbsp;but&nbsp;we&nbsp;store&nbsp;them&nbsp;most&nbsp;of&nbsp;the&nbsp;time
</c41><br/><ln>&nbsp;&nbsp;60</ln><a id="60">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;in&nbsp;maps&nbsp;of&nbsp;the&nbsp;form&nbsp;(type,name)&nbsp;=&gt;&nbsp;value.&nbsp;These&nbsp;are&nbsp;WorkMaps.
</c41><br/><ln>&nbsp;&nbsp;61</ln><a id="61">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;62</ln><a id="62">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;A&nbsp;cached&nbsp;function&nbsp;divides&nbsp;the&nbsp;works&nbsp;it's&nbsp;interested&nbsp;in&nbsp;into&nbsp;inputs&nbsp;and
</c41><br/><ln>&nbsp;&nbsp;63</ln><a id="63">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;outputs,&nbsp;and&nbsp;subdivides&nbsp;those&nbsp;into&nbsp;declared&nbsp;(input)&nbsp;works&nbsp;and
</c41><br/><ln>&nbsp;&nbsp;64</ln><a id="64">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;discovered&nbsp;(input&nbsp;and&nbsp;output)&nbsp;works.
</c41><br/><ln>&nbsp;&nbsp;65</ln><a id="65">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;66</ln><a id="66">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;A&nbsp;_declared_&nbsp;input&nbsp;or&nbsp;is&nbsp;one&nbsp;that&nbsp;is&nbsp;given&nbsp;to&nbsp;the&nbsp;workcache&nbsp;before
</c41><br/><ln>&nbsp;&nbsp;67</ln><a id="67">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;any&nbsp;work&nbsp;actually&nbsp;happens,&nbsp;in&nbsp;the&nbsp;"prep"&nbsp;phase.&nbsp;Even&nbsp;when&nbsp;a&nbsp;function's
</c41><br/><ln>&nbsp;&nbsp;68</ln><a id="68">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;work-doing&nbsp;part&nbsp;(the&nbsp;"exec"&nbsp;phase)&nbsp;never&nbsp;gets&nbsp;called,&nbsp;it&nbsp;has&nbsp;declared
</c41><br/><ln>&nbsp;&nbsp;69</ln><a id="69">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;inputs,&nbsp;which&nbsp;can&nbsp;be&nbsp;checked&nbsp;for&nbsp;freshness&nbsp;(and&nbsp;potentially
</c41><br/><ln>&nbsp;&nbsp;70</ln><a id="70">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;used&nbsp;to&nbsp;determine&nbsp;that&nbsp;the&nbsp;function&nbsp;can&nbsp;be&nbsp;skipped).
</c41><br/><ln>&nbsp;&nbsp;71</ln><a id="71">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;72</ln><a id="72">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;The&nbsp;workcache&nbsp;checks&nbsp;_all_&nbsp;works&nbsp;for&nbsp;freshness,&nbsp;but&nbsp;uses&nbsp;the&nbsp;set&nbsp;of
</c41><br/><ln>&nbsp;&nbsp;73</ln><a id="73">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;discovered&nbsp;outputs&nbsp;from&nbsp;the&nbsp;_previous_&nbsp;exec&nbsp;(which&nbsp;it&nbsp;will&nbsp;re-discover
</c41><br/><ln>&nbsp;&nbsp;74</ln><a id="74">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;and&nbsp;re-record&nbsp;each&nbsp;time&nbsp;the&nbsp;exec&nbsp;phase&nbsp;runs).
</c41><br/><ln>&nbsp;&nbsp;75</ln><a id="75">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;76</ln><a id="76">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;Therefore&nbsp;the&nbsp;discovered&nbsp;works&nbsp;cached&nbsp;in&nbsp;the&nbsp;db&nbsp;might&nbsp;be&nbsp;a
</c41><br/><ln>&nbsp;&nbsp;77</ln><a id="77">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;mis-approximation&nbsp;of&nbsp;the&nbsp;current&nbsp;discoverable&nbsp;works,&nbsp;but&nbsp;this&nbsp;is&nbsp;ok&nbsp;for
</c41><br/><ln>&nbsp;&nbsp;78</ln><a id="78">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;the&nbsp;following&nbsp;reason:&nbsp;we&nbsp;assume&nbsp;that&nbsp;if&nbsp;an&nbsp;artifact&nbsp;A&nbsp;changed&nbsp;from
</c41><br/><ln>&nbsp;&nbsp;79</ln><a id="79">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;depending&nbsp;on&nbsp;B,C,D&nbsp;to&nbsp;depending&nbsp;on&nbsp;B,C,D,E,&nbsp;then&nbsp;A&nbsp;itself&nbsp;changed&nbsp;(as
</c41><br/><ln>&nbsp;&nbsp;80</ln><a id="80">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;part&nbsp;of&nbsp;the&nbsp;change-in-dependencies),&nbsp;so&nbsp;we&nbsp;will&nbsp;be&nbsp;ok.
</c41><br/><ln>&nbsp;&nbsp;81</ln><a id="81">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;82</ln><a id="82">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;Each&nbsp;function&nbsp;has&nbsp;a&nbsp;single&nbsp;discriminated&nbsp;output&nbsp;work&nbsp;called&nbsp;its&nbsp;_result_.
</c41><br/><ln>&nbsp;&nbsp;83</ln><a id="83">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;This&nbsp;is&nbsp;only&nbsp;different&nbsp;from&nbsp;other&nbsp;works&nbsp;in&nbsp;that&nbsp;it&nbsp;is&nbsp;returned,&nbsp;by&nbsp;value,
</c41><br/><ln>&nbsp;&nbsp;84</ln><a id="84">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;from&nbsp;a&nbsp;call&nbsp;to&nbsp;the&nbsp;cacheable&nbsp;function;&nbsp;the&nbsp;other&nbsp;output&nbsp;works&nbsp;are&nbsp;used&nbsp;in
</c41><br/><ln>&nbsp;&nbsp;85</ln><a id="85">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;passing&nbsp;to&nbsp;invalidate&nbsp;dependencies&nbsp;elsewhere&nbsp;in&nbsp;the&nbsp;cache,&nbsp;but&nbsp;do&nbsp;not
</c41><br/><ln>&nbsp;&nbsp;86</ln><a id="86">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;otherwise&nbsp;escape&nbsp;from&nbsp;a&nbsp;function&nbsp;invocation.&nbsp;Most&nbsp;functions&nbsp;only&nbsp;have&nbsp;one
</c41><br/><ln>&nbsp;&nbsp;87</ln><a id="87">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;output&nbsp;work&nbsp;anyways.
</c41><br/><ln>&nbsp;&nbsp;88</ln><a id="88">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;89</ln><a id="89">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;A&nbsp;database&nbsp;(the&nbsp;central&nbsp;store&nbsp;of&nbsp;a&nbsp;workcache)&nbsp;stores&nbsp;a&nbsp;mappings:
</c41><br/><ln>&nbsp;&nbsp;90</ln><a id="90">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;91</ln><a id="91">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;(fn_name,{declared_input})&nbsp;=&gt;&nbsp;({discovered_input},
</c41><br/><ln>&nbsp;&nbsp;92</ln><a id="92">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{discovered_output},result)
</c41><br/><ln>&nbsp;&nbsp;93</ln><a id="93">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;&nbsp;94</ln><a id="94">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;(Note:&nbsp;fbuild,&nbsp;which&nbsp;workcache&nbsp;is&nbsp;based&nbsp;on,&nbsp;has&nbsp;the&nbsp;concept&nbsp;of&nbsp;a&nbsp;declared
</c41><br/><ln>&nbsp;&nbsp;95</ln><a id="95">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;output&nbsp;as&nbsp;separate&nbsp;from&nbsp;a&nbsp;discovered&nbsp;output.&nbsp;This&nbsp;distinction&nbsp;exists&nbsp;only
</c41><br/><ln>&nbsp;&nbsp;96</ln><a id="96">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;as&nbsp;an&nbsp;artifact&nbsp;of&nbsp;how&nbsp;fbuild&nbsp;works:&nbsp;via&nbsp;annotations&nbsp;on&nbsp;function&nbsp;types
</c41><br/><ln>&nbsp;&nbsp;97</ln><a id="97">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;and&nbsp;metaprogramming,&nbsp;with&nbsp;explicit&nbsp;dependency&nbsp;declaration&nbsp;as&nbsp;a&nbsp;fallback.
</c41><br/><ln>&nbsp;&nbsp;98</ln><a id="98">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;Workcache&nbsp;is&nbsp;more&nbsp;explicit&nbsp;about&nbsp;dependencies,&nbsp;and&nbsp;as&nbsp;such&nbsp;treats&nbsp;all
</c41><br/><ln>&nbsp;&nbsp;99</ln><a id="99">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*&nbsp;outputs&nbsp;the&nbsp;same,&nbsp;as&nbsp;discovered-during-the-last-run.)
</c41><br/><ln>&nbsp;100</ln><a id="100">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*
</c41><br/><ln>&nbsp;101</ln><a id="101">&nbsp;</a><a id="n[]">&nbsp;</a><c41>*/
</c41><br/><ln>&nbsp;102</ln><a id="102">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;103</ln><a id="103">&nbsp;</a><a id="n[206, 427, 562, 61, 541, 447, 373, 100, 386, 415, 130, 209, 88, 402, 403, 144, 149, 125, 583, 381, 43, 272, 102, 97, 123, 372, 469, 529, 453, 72, 202, 380, 599, 366, 456, 520, 122, 75, 321, 77, 273, 266, 199, 32, 549, 594, 544, 36, 390, 398, 375, 455, 335, 80, 312, 253, 129, 444, 71, 457, 498, 510, 131, 331, 395, 261, 127, 255, 394, 153, 276, 593, 595, 551, 515, 134, 132, 609, 60, 85, 204, 552, 217, 203, 474, 421, 406, 317, 396, 195, 516, 495, 214, 268, 326, 458, 596, 116, 213, 147, 426, 189, 70, 101, 207, 33, 117, 23, 557, 265, 397, 538, 438, 103, 493, 267, 325, 115, 208, 384, 511, 133, 441, 114, 501, 58, 391, 411, 332, 547, 82, 553, 508, 563, 505, 327, 429, 128, 581, 120, 389, 371, 509, 443, 506, 248, 425, 407, 588, 99, 497, 76, 140, 322, 137, 451, 585, 388, 385, 431, 124, 608, 378, 74, 67, 408, 490, 81, 121, 409, 119, 392, 494, 435, 424, 539, 450, 491, 87, 314, 57, 262, 404, 118, 98, 136, 420, 320, 148, 150, 35, 86, 63, 258, 540, 158, 587, 558, 307, 324, 271, 104, 446, 582, 405, 591, 485, 154, 330, 572, 417, 39, 145, 422, 554, 313, 432, 46, 519, 126, 263, 42, 548, 40, 377, 445, 452, 59, 492, 64, 418, 559, 514, 155, 416, 105, 254, 584, 143, 41, 504, 196, 212, 419, 434, 194, 442]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>deriving</c50><c4>(</c4><c50><a href="#103_11_refs">Clone</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libworkcache/lib.rs.html#103">Eq</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libworkcache/lib.rs.html#103">Encodable</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libserialize/serialize.rs.html#n1023">Decodable</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libworkcache/lib.rs.html#103">Ord</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="#103_49_refs">TotalOrd</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libworkcache/lib.rs.html#103">TotalEq</a></c50><c4>)</c4><c3>]</c3><c50>
</c50><br/><ln>&nbsp;104</ln><a id="104">&nbsp;</a><a id="n[]">&nbsp;</a><c31>struct</c31><c31><a href="#103_69_refs">&nbsp;WorkKey&nbsp;</a></c31><c3>{</c3><c31><a href="#103_69_refs">
</a></c31><br/><ln>&nbsp;105</ln><a id="105">&nbsp;</a><a id="n[564, 462, 221, 345, 350, 348, 523, 269, 156, 310, 78, 399, 210, 165, 282, 512, 95, 521, 570, 218, 285, 290, 369, 328, 471, 284, 227, 50, 222, 49, 231, 288, 339, 167, 571, 278, 600, 94, 289, 173, 464, 96, 287, 466, 83, 341, 215, 48, 159, 346, 161, 465, 232, 567, 560, 448, 193, 230, 91, 526, 281, 225, 251, 47, 27, 473, 277, 280, 340, 163, 26, 44, 93, 566, 555, 224, 410, 162, 522, 460, 463, 170, 524, 283, 400, 223, 565, 166, 151, 172, 527, 568, 168, 171, 286, 160, 169, 342, 220, 569, 192, 338, 219, 92, 337, 90, 51, 291, 274, 24, 602, 468, 336, 333, 470, 229, 343, 528, 226, 370, 347, 252, 349, 517, 601, 89, 525, 344, 603, 164, 311, 459, 279, 472, 228, 467, 597]">&nbsp;</a><c31><a href="#103_69_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c20><a href="#105_4_refs">kind:&nbsp;</a></c20><c8><a href="../libworkcache/lib.rs.html#105">~str</a></c8><c3>,</c3><c31><a href="#103_69_refs">
</a></c31><br/><ln>&nbsp;106</ln><a id="106">&nbsp;</a><a id="n[534, 363, 190, 604, 576, 178, 368, 489, 537, 532, 216, 358, 181, 362, 530, 176, 275, 187, 180, 536, 556, 235, 486, 298, 484, 308, 245, 518, 242, 478, 246, 238, 182, 479, 580, 364, 334, 487, 573, 365, 237, 111, 240, 367, 179, 412, 579, 185, 191, 152, 359, 45, 475, 598, 357, 244, 351, 107, 483, 413, 302, 353, 309, 294, 607, 606, 211, 481, 109, 605, 535, 352, 233, 241, 355, 295, 28, 476, 304, 175, 482, 305, 174, 54, 112, 361, 513, 250, 292, 84, 56, 236, 177, 449, 106, 301, 55, 249, 575, 574, 356, 270, 488, 243, 31, 303, 297, 480, 299, 296, 533, 184, 108, 329, 577, 578, 300, 239, 188, 354, 234, 247, 531, 79, 30, 186, 423, 113, 360, 306, 110, 183, 157, 293, 52, 53, 561]">&nbsp;</a><c31><a href="#103_69_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c20><a href="#106_4_refs">name:&nbsp;</a></c20><c8><a href="../libworkcache/lib.rs.html#106">~str</a></c8><c31><a href="#103_69_refs">
</a></c31><br/><ln>&nbsp;107</ln><a id="107">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;108</ln><a id="108">&nbsp;</a><a id="n[610]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;109</ln><a id="109">&nbsp;</a><a id="n[612]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#103">WorkKey</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;110</ln><a id="110">&nbsp;</a><a id="n[618, 625, 613, 623, 616, 621, 617, 622, 626]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#110_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#110_4_refs">&nbsp;new</a></c30><c4>(</c4><c20><a href="#110_15_refs">kind</a></c20><c18><a href="#110_4_refs">:&nbsp;</a></c18><c8><a href="#110_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#110_4_refs">&nbsp;</a></c18><c20><a href="#110_27_refs">name</a></c20><c18><a href="#110_4_refs">:&nbsp;</a></c18><c8><a href="#110_4_refs">&amp;str</a></c8><c4>)</c4><c18><a href="#110_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#110_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#103">WorkKey</a></c8><c18><a href="#110_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#110_4_refs">
</a></c22><br/><ln>&nbsp;111</ln><a id="111">&nbsp;</a><a id="n[631]">&nbsp;</a><c22><a href="#110_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c1><a href="../libworkcache/lib.rs.html#103">WorkKey&nbsp;</a></c1><c3>{</c3><c1><a href="../libworkcache/lib.rs.html#103">
</a></c1><br/><ln>&nbsp;112</ln><a id="112">&nbsp;</a><a id="n[628, 627]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#103">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kind:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#110">kind</a></c26><c10><a href="../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>()</c4><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#103">
</a></c1><br/><ln>&nbsp;113</ln><a id="113">&nbsp;</a><a id="n[630, 629]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#103">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#110">name</a></c26><c10><a href="../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>()</c4><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#103">
</a></c1><br/><ln>&nbsp;114</ln><a id="114">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#103">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c22><a href="#110_4_refs">
</a></c22><br/><ln>&nbsp;115</ln><a id="115">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#110_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;116</ln><a id="116">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;117</ln><a id="117">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;118</ln><a id="118">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;FIXME&nbsp;#8883:&nbsp;The&nbsp;key&nbsp;should&nbsp;be&nbsp;a&nbsp;WorkKey&nbsp;and&nbsp;not&nbsp;a&nbsp;~str.
</c40><br/><ln>&nbsp;119</ln><a id="119">&nbsp;</a><a id="n[]">&nbsp;</a><c40>//&nbsp;This&nbsp;is&nbsp;working&nbsp;around&nbsp;some&nbsp;JSON&nbsp;weirdness.
</c40><br/><ln>&nbsp;120</ln><a id="120">&nbsp;</a><a id="n[714, 734, 755, 780, 750, 800, 666, 695, 813, 805, 703, 684, 665, 733, 654, 814, 735, 702, 674, 748, 737, 707, 812, 753, 816, 744, 731, 700, 709, 749, 677, 757, 817, 663, 646, 689, 664, 682, 751, 649, 823, 672, 659, 681, 758, 711, 712, 686, 811, 776, 706, 653, 754, 769, 683, 806, 790, 667, 701, 650, 660, 699, 785, 801, 675, 778, 725, 668, 802, 698, 655, 679, 799, 803, 691, 783, 777, 661, 678, 644, 676, 704, 787, 782, 770, 789, 688, 658, 746, 708, 745, 738, 741, 786, 781, 647, 822, 657, 767, 692, 642, 773, 673, 730, 768, 809, 713, 632, 732]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>deriving</c50><c4>(</c4><c50><a href="#120_11_refs">Clone</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="#120_18_refs">Eq</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libserialize/serialize.rs.html#n273">Encodable</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="#120_33_refs">Decodable</a></c50><c4>)</c4><c3>]</c3><c50>
</c50><br/><ln>&nbsp;121</ln><a id="121">&nbsp;</a><a id="n[762, 794, 640, 793, 638, 798, 724, 729, 791, 763, 633, 723, 820, 728, 636, 726, 797, 760, 635, 815, 796, 784, 795, 761, 716, 721, 766, 819, 719, 765, 669, 788, 705, 670, 756, 715, 680, 722, 792, 821, 759, 764, 718, 720, 752, 727, 818]">&nbsp;</a><c31>struct</c31><c31><a href="#120_45_refs">&nbsp;WorkMap</a></c31><c4>(</c4><c8><a href="../libcollections/treemap.rs.html#n23577">TreeMap&lt;~str</a></c8><c3>,</c3><c8><a href="../libcollections/treemap.rs.html#n23577">&nbsp;</a></c8><c8><a href="../libworkcache/lib.rs.html#123">KindMap</a></c8><c8><a href="../libcollections/treemap.rs.html#n23577">&gt;</a></c8><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;122</ln><a id="122">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;123</ln><a id="123">&nbsp;</a><a id="n[931, 960, 835, 848, 983, 906, 995, 856, 872, 962, 893, 978, 996, 850, 982, 1010, 999, 969, 902, 951, 973, 853, 992, 877, 1016, 974, 851, 840, 905, 899, 1002, 874, 876, 837, 842, 943, 980, 907, 892, 946, 871, 857, 971, 884, 993, 937, 918, 998, 942, 847, 854, 824, 875, 930, 1006, 1009, 926, 891, 894, 939, 924, 1007, 866, 885, 867, 994, 947, 941, 923, 860, 948, 1005, 846, 852, 963, 865, 928, 927, 843, 970, 839, 966, 861, 979, 881, 904, 901, 882, 859, 897, 944, 950, 1015, 934, 869, 925, 868, 888, 976, 870, 975, 895, 879, 961, 858, 896, 938, 1004, 900]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>deriving</c50><c4>(</c4><c50><a href="../libworkcache/lib.rs.html#123">Clone</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libworkcache/lib.rs.html#123">Eq</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libworkcache/lib.rs.html#123">Encodable</a></c50><c3>,</c3><c50>&nbsp;</c50><c50><a href="../libworkcache/lib.rs.html#123">Decodable</a></c50><c4>)</c4><c3>]</c3><c50>
</c50><br/><ln>&nbsp;124</ln><a id="124">&nbsp;</a><a id="n[913, 912, 985, 916, 953, 956, 908, 986, 863, 862, 920, 828, 921, 945, 922, 831, 981, 988, 915, 1013, 917, 830, 954, 952, 898, 959, 1014, 958, 825, 991, 1012, 977, 990, 833, 949, 1011, 911, 919, 987, 984, 957, 914, 909, 1008, 955, 827, 873, 989]">&nbsp;</a><c31>struct</c31><c31><a href="#123_45_refs">&nbsp;KindMap</a></c31><c4>(</c4><c8><a href="../libcollections/treemap.rs.html#n23577">TreeMap&lt;</a></c8><c8><a href="#124_15_refs">~str</a></c8><c3>,</c3><c8><a href="../libcollections/treemap.rs.html#n23577">&nbsp;</a></c8><c8><a href="#124_15_refs">~str</a></c8><c8><a href="../libcollections/treemap.rs.html#n23577">&gt;</a></c8><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;125</ln><a id="125">&nbsp;</a><a id="n[1017]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;126</ln><a id="126">&nbsp;</a><a id="n[1019]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;127</ln><a id="127">&nbsp;</a><a id="n[1023, 1020, 1026, 1022, 1027, 1025, 1024]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#127_4_refs">&nbsp;new</a></c30><c4>()</c4><c18><a href="#127_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#127_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c18><a href="#127_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#127_4_refs">&nbsp;</a></c22><c26><a href="c=0 n=641">WorkMap</a></c26><c4>(</c4><c26><a href="../libcollections/treemap.rs.html#n24143">TreeMap::new</a></c26><c4>())</c4><c22><a href="#127_4_refs">&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;128</ln><a id="128">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;129</ln><a id="129">&nbsp;</a><a id="n[1034, 1041, 1095, 1031, 1028, 1040, 1035, 1038, 1039]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#129_4_refs">&nbsp;insert_work_key</a></c30><c4>(</c4><c20><a href="#129_23_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18><a href="#129_4_refs">&nbsp;</a></c18><c20><a href="#129_34_refs">k</a></c20><c18><a href="#129_4_refs">:&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#103">WorkKey</a></c8><c3>,</c3><c18><a href="#129_4_refs">&nbsp;</a></c18><c20><a href="#129_46_refs">val</a></c20><c18><a href="#129_4_refs">:&nbsp;</a></c18><c8><a href="#129_4_refs">~str</a></c8><c4>)</c4><c18><a href="#129_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#129_4_refs">
</a></c22><br/><ln>&nbsp;130</ln><a id="130">&nbsp;</a><a id="n[1044, 1047, 1042, 1045, 1043, 1046, 1048]">&nbsp;</a><c22><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#129_4_refs">&nbsp;</a></c22><c20><a href="../libworkcache/lib.rs.html#103">WorkKey&nbsp;</a></c20><c3>{</c3><c20><a href="../libworkcache/lib.rs.html#103">&nbsp;</a></c20><c20><a href="#130_22_refs">kind</a></c20><c3>,</c3><c20><a href="../libworkcache/lib.rs.html#103">&nbsp;</a></c20><c20><a href="#130_28_refs">name</a></c20><c20><a href="../libworkcache/lib.rs.html#103">&nbsp;</a></c20><c3>}</c3><c13><a href="#129_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#129">k</a></c26><c3>;</c3><c22><a href="#129_4_refs">
</a></c22><br/><ln>&nbsp;131</ln><a id="131">&nbsp;</a><a id="n[1052, 1054, 1049, 1053, 1051, 1050, 1055]">&nbsp;</a><c22><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#129_4_refs">&nbsp;</a></c22><c20><a href="c=0 n=641">WorkMap</a></c20><c4>(</c4><c20><a href="#131_20_refs">ref&nbsp;mut&nbsp;map</a></c20><c4>)</c4><c13><a href="#129_4_refs">&nbsp;=&nbsp;</a></c13><c5><a href="#129_4_refs">*</a></c5><c26><a href="../libworkcache/lib.rs.html#129">self</a></c26><c3>;</c3><c22><a href="#129_4_refs">
</a></c22><br/><ln>&nbsp;132</ln><a id="132">&nbsp;</a><a id="n[1059, 1056, 1076, 1058, 1057, 1075]">&nbsp;</a><c22><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#129_4_refs">&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#131">map</a></c26><c10><a href="../libcollections/treemap.rs.html#n24037">.find_mut</a></c10><c4>(</c4><c5><a href="../libcollections/treemap.rs.html#n24037">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#130">name</a></c26><c4>)</c4><c21><a href="#129_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#129_4_refs">
</a></c21><br/><ln>&nbsp;133</ln><a id="133">&nbsp;</a><a id="n[1060, 1066, 1065, 1071, 1067, 1063, 1061, 1072, 1068, 1070, 1069, 1064, 1062]">&nbsp;</a><c21><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="../libstd/option.rs.html#n104341">&amp;</a></c20><c20><a href="c=0 n=834">KindMap</a></c20><c4>(</c4><c20><a href="#133_26_refs">ref&nbsp;mut&nbsp;m</a></c20><c4>))</c4><c21><a href="#129_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#129_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#129_4_refs">&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#133">m</a></c26><c13><a href="c=5 n=30716">.insert</a></c13><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#130">kind</a></c26><c3>,</c3><c13><a href="c=5 n=30716">&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#129">val</a></c26><c4>)</c4><c3>;</c3><c22><a href="#129_4_refs">&nbsp;</a></c22><c1><a href="#129_4_refs">return</a></c1><c3>;</c3><c22><a href="#129_4_refs">&nbsp;</a></c22><c3>}</c3><c21><a href="#129_4_refs">
</a></c21><br/><ln>&nbsp;134</ln><a id="134">&nbsp;</a><a id="n[1073, 1074]">&nbsp;</a><c21><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#129_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#129_4_refs">&nbsp;</a></c21><c4>()</c4><c21><a href="#129_4_refs">
</a></c21><br/><ln>&nbsp;135</ln><a id="135">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#129_4_refs">
</a></c22><br/><ln>&nbsp;136</ln><a id="136">&nbsp;</a><a id="n[1077, 1082, 1079, 1080, 1078, 1081]">&nbsp;</a><c22><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#129_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#136_12_refs">&nbsp;new_map</a></c20><c13><a href="#129_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libcollections/treemap.rs.html#n24143">TreeMap::new</a></c26><c4>()</c4><c3>;</c3><c22><a href="#129_4_refs">
</a></c22><br/><ln>&nbsp;137</ln><a id="137">&nbsp;</a><a id="n[1087, 1084, 1085, 1086, 1083]">&nbsp;</a><c22><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#136">new_map</a></c26><c10><a href="c=5 n=30716">.insert</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#130">kind</a></c26><c3>,</c3><c10><a href="c=5 n=30716">&nbsp;</a></c10><c26><a href="../libworkcache/lib.rs.html#129">val</a></c26><c4>)</c4><c3>;</c3><c22><a href="#129_4_refs">
</a></c22><br/><ln>&nbsp;138</ln><a id="138">&nbsp;</a><a id="n[1090, 1088, 1089, 1094, 1092, 1091, 1093]">&nbsp;</a><c22><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#131">map</a></c26><c10><a href="c=5 n=30716">.insert</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#130">name</a></c26><c3>,</c3><c10><a href="c=5 n=30716">&nbsp;</a></c10><c26><a href="c=0 n=834">KindMap</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#136">new_map</a></c26><c4>))</c4><c3>;</c3><c22><a href="#129_4_refs">
</a></c22><br/><ln>&nbsp;139</ln><a id="139">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#129_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;140</ln><a id="140">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;141</ln><a id="141">&nbsp;</a><a id="n[1096]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;142</ln><a id="142">&nbsp;</a><a id="n[]">&nbsp;</a><c21>pub</c21><c31><a href="#141_1_refs">&nbsp;</a></c31><c31>struct</c31><c31><a href="#141_1_refs">&nbsp;Database&nbsp;</a></c31><c3>{</c3><c31><a href="#141_1_refs">
</a></c31><br/><ln>&nbsp;143</ln><a id="143">&nbsp;</a><a id="n[1099, 1097]">&nbsp;</a><c31><a href="#141_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#141_1_refs">&nbsp;</a></c31><c24><a href="#143_9_refs">db_filename:&nbsp;</a></c24><c8><a href="../libstd/path/posix.rs.html#n154239">Path</a></c8><c3>,</c3><c31><a href="#141_1_refs">
</a></c31><br/><ln>&nbsp;144</ln><a id="144">&nbsp;</a><a id="n[1102, 1108, 1103, 1106, 1105, 1100]">&nbsp;</a><c31><a href="#141_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#141_1_refs">&nbsp;</a></c31><c24><a href="#144_9_refs">db_cache:&nbsp;</a></c24><c8><a href="../libcollections/treemap.rs.html#n23577">TreeMap&lt;~str</a></c8><c3>,</c3><c8><a href="../libcollections/treemap.rs.html#n23577">&nbsp;~str&gt;</a></c8><c3>,</c3><c31><a href="#141_1_refs">
</a></c31><br/><ln>&nbsp;145</ln><a id="145">&nbsp;</a><a id="n[1109, 1111]">&nbsp;</a><c31><a href="#141_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c24><a href="#145_4_refs">db_dirty:&nbsp;</a></c24><c8><a href="#145_4_refs">bool</a></c8><c31><a href="#141_1_refs">
</a></c31><br/><ln>&nbsp;146</ln><a id="146">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;147</ln><a id="147">&nbsp;</a><a id="n[1112]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;148</ln><a id="148">&nbsp;</a><a id="n[1114]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#141">Database</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;149</ln><a id="149">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;150</ln><a id="150">&nbsp;</a><a id="n[1119, 1115, 1118, 1140, 1121]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;new</c30><c4>(</c4><c20><a href="#150_15_refs">p</a></c20><c18>:&nbsp;</c18><c8><a href="../libstd/path/posix.rs.html#n154239">Path</a></c8><c4>)</c4><c18>&nbsp;</c18><c4>-&gt;</c4><c18>&nbsp;</c18><c8><a href="../libworkcache/lib.rs.html#141">Database</a></c8><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;151</ln><a id="151">&nbsp;</a><a id="n[1123, 1122, 1130, 1129, 1124]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#151_12_refs">&nbsp;rslt</a></c20><c13>&nbsp;=&nbsp;</c13><c1><a href="../libworkcache/lib.rs.html#141">Database&nbsp;</a></c1><c3>{</c3><c1><a href="../libworkcache/lib.rs.html#141">
</a></c1><br/><ln>&nbsp;152</ln><a id="152">&nbsp;</a><a id="n[1125]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#141">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_filename:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#150">p</a></c26><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#141">
</a></c1><br/><ln>&nbsp;153</ln><a id="153">&nbsp;</a><a id="n[1127, 1126]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#141">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_cache:&nbsp;</a></c1><c26><a href="../libcollections/treemap.rs.html#n24143">TreeMap::new</a></c26><c4>()</c4><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#141">
</a></c1><br/><ln>&nbsp;154</ln><a id="154">&nbsp;</a><a id="n[1128]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#141">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_dirty:&nbsp;</a></c1><c12><a href="../libworkcache/lib.rs.html#141">false</a></c12><c1><a href="../libworkcache/lib.rs.html#141">
</a></c1><br/><ln>&nbsp;155</ln><a id="155">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#141">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>};</c3><c22>
</c22><br/><ln>&nbsp;156</ln><a id="156">&nbsp;</a><a id="n[1139, 1131, 1137, 1132, 1138, 1133]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c26><a href="../libworkcache/lib.rs.html#151">rslt</a></c26><c24><a href="../libworkcache/lib.rs.html#143">.db_filename</a></c24><c10><a href="../libstd/io/fs.rs.html#n141100">.exists</a></c10><c4>()</c4><c21>&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;157</ln><a id="157">&nbsp;</a><a id="n[1136, 1135, 1134]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#151">rslt</a></c26><c10><a href="../libworkcache/lib.rs.html#193">.load</a></c10><c4>()</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;158</ln><a id="158">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;159</ln><a id="159">&nbsp;</a><a id="n[1141]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#151">rslt</a></c26><c22>
</c22><br/><ln>&nbsp;160</ln><a id="160">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;161</ln><a id="161">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;162</ln><a id="162">&nbsp;</a><a id="n[1142, 1145]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#162_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#162_4_refs">&nbsp;prepare</a></c30><c4>(</c4><c20><a href="#162_19_refs">&amp;self</a></c20><c3>,</c3><c18><a href="#162_4_refs">
</a></c18><br/><ln>&nbsp;163</ln><a id="163">&nbsp;</a><a id="n[1149, 1148, 1150]">&nbsp;</a><c18><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#163_19_refs">fn_name</a></c20><c18><a href="#162_4_refs">:&nbsp;</a></c18><c8><a href="#162_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#162_4_refs">
</a></c18><br/><ln>&nbsp;164</ln><a id="164">&nbsp;</a><a id="n[1154, 1153, 1155]">&nbsp;</a><c18><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#164_19_refs">declared_inputs</a></c20><c18><a href="#162_4_refs">:&nbsp;</a></c18><c8><a href="#162_4_refs">&amp;</a></c8><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c4>)</c4><c18><a href="#162_4_refs">
</a></c18><br/><ln>&nbsp;165</ln><a id="165">&nbsp;</a><a id="n[1161, 1159, 1176, 1162, 1157, 1165, 1163]">&nbsp;</a><c18><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#162_4_refs">&nbsp;</a></c18><c8><a href="../libstd/option.rs.html#n104336">Option&lt;</a></c8><c4>(</c4><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c3>,</c3><c8><a href="../libstd/option.rs.html#n104336">&nbsp;</a></c8><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c3>,</c3><c8><a href="../libstd/option.rs.html#n104336">&nbsp;</a></c8><c8><a href="#162_4_refs">~str</a></c8><c4>)</c4><c8><a href="../libstd/option.rs.html#n104336">&gt;</a></c8><c18><a href="#162_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#162_4_refs">
</a></c22><br/><ln>&nbsp;166</ln><a id="166">&nbsp;</a><a id="n[1173, 1172, 1170, 1174, 1167, 1168, 1166, 1169, 1175, 1171]">&nbsp;</a><c22><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#162_4_refs">&nbsp;</a></c22><c20><a href="#166_12_refs">k</a></c20><c13><a href="#162_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#254">json_encode</a></c26><c4>(</c4><c5><a href="#162_4_refs">&amp;</a></c5><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#163">fn_name</a></c26><c3>,</c3><c14><a href="#162_4_refs">&nbsp;</a></c14><c26><a href="../libworkcache/lib.rs.html#164">declared_inputs</a></c26><c4>))</c4><c3>;</c3><c22><a href="#162_4_refs">
</a></c22><br/><ln>&nbsp;167</ln><a id="167">&nbsp;</a><a id="n[1192, 1181, 1178, 1177, 1179, 1180]">&nbsp;</a><c22><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#162_4_refs">&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#162">self</a></c26><c24><a href="../libworkcache/lib.rs.html#144">.db_cache</a></c24><c10><a href="../libcollections/treemap.rs.html#n23950">.find</a></c10><c4>(</c4><c5><a href="../libcollections/treemap.rs.html#n23950">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#166">k</a></c26><c4>)</c4><c21><a href="#162_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#162_4_refs">
</a></c21><br/><ln>&nbsp;168</ln><a id="168">&nbsp;</a><a id="n[1183, 1182]">&nbsp;</a><c21><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#162_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#162_4_refs">&nbsp;</a></c21><c26><a href="../libstd/option.rs.html#n104337">None</a></c26><c3>,</c3><c21><a href="#162_4_refs">
</a></c21><br/><ln>&nbsp;169</ln><a id="169">&nbsp;</a><a id="n[1189, 1190, 1188, 1185, 1184, 1191, 1186, 1187]">&nbsp;</a><c21><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#169_17_refs">v</a></c20><c4>)</c4><c21><a href="#162_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#162_4_refs">&nbsp;</a></c21><c26><a href="../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#262">json_decode</a></c26><c4>(</c4><c5><a href="#162_4_refs">*</a></c5><c26><a href="../libworkcache/lib.rs.html#169">v</a></c26><c4>))</c4><c21><a href="#162_4_refs">
</a></c21><br/><ln>&nbsp;170</ln><a id="170">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#162_4_refs">
</a></c22><br/><ln>&nbsp;171</ln><a id="171">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#162_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;172</ln><a id="172">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;173</ln><a id="173">&nbsp;</a><a id="n[1196, 1193]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#173_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#173_4_refs">&nbsp;cache</a></c30><c4>(</c4><c20><a href="#173_17_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18><a href="#173_4_refs">
</a></c18><br/><ln>&nbsp;174</ln><a id="174">&nbsp;</a><a id="n[1199, 1201, 1200]">&nbsp;</a><c18><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#174_17_refs">fn_name</a></c20><c18><a href="#173_4_refs">:&nbsp;</a></c18><c8><a href="#173_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#173_4_refs">
</a></c18><br/><ln>&nbsp;175</ln><a id="175">&nbsp;</a><a id="n[1204, 1205, 1206]">&nbsp;</a><c18><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#175_17_refs">declared_inputs</a></c20><c18><a href="#173_4_refs">:&nbsp;</a></c18><c8><a href="#173_4_refs">&amp;</a></c8><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c3>,</c3><c18><a href="#173_4_refs">
</a></c18><br/><ln>&nbsp;176</ln><a id="176">&nbsp;</a><a id="n[1210, 1209, 1211]">&nbsp;</a><c18><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#176_17_refs">discovered_inputs</a></c20><c18><a href="#173_4_refs">:&nbsp;</a></c18><c8><a href="#173_4_refs">&amp;</a></c8><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c3>,</c3><c18><a href="#173_4_refs">
</a></c18><br/><ln>&nbsp;177</ln><a id="177">&nbsp;</a><a id="n[1216, 1214, 1215]">&nbsp;</a><c18><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#177_17_refs">discovered_outputs</a></c20><c18><a href="#173_4_refs">:&nbsp;</a></c18><c8><a href="#173_4_refs">&amp;</a></c8><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c3>,</c3><c18><a href="#173_4_refs">
</a></c18><br/><ln>&nbsp;178</ln><a id="178">&nbsp;</a><a id="n[1221, 1219, 1220, 1222, 1250]">&nbsp;</a><c18><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#178_17_refs">result</a></c20><c18><a href="#173_4_refs">:&nbsp;</a></c18><c8><a href="#173_4_refs">&amp;str</a></c8><c4>)</c4><c18><a href="#173_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#173_4_refs">
</a></c22><br/><ln>&nbsp;179</ln><a id="179">&nbsp;</a><a id="n[1231, 1230, 1232, 1228, 1229, 1225, 1227, 1224, 1223, 1226]">&nbsp;</a><c22><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#173_4_refs">&nbsp;</a></c22><c20><a href="#179_12_refs">k</a></c20><c16><a href="#173_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libworkcache/lib.rs.html#254">json_encode</a></c26><c4>(</c4><c5><a href="#173_4_refs">&amp;</a></c5><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#174">fn_name</a></c26><c3>,</c3><c14><a href="#173_4_refs">&nbsp;</a></c14><c26><a href="../libworkcache/lib.rs.html#175">declared_inputs</a></c26><c4>))</c4><c3>;</c3><c22><a href="#173_4_refs">
</a></c22><br/><ln>&nbsp;180</ln><a id="180">&nbsp;</a><a id="n[1242, 1237, 1235, 1236, 1233, 1241, 1234, 1240, 1243]">&nbsp;</a><c22><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#173_4_refs">&nbsp;</a></c22><c20><a href="#180_12_refs">v</a></c20><c13><a href="#173_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#254">json_encode</a></c26><c4>(</c4><c5><a href="#173_4_refs">&amp;</a></c5><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#176">discovered_inputs</a></c26><c3>,</c3><c14><a href="#173_4_refs">
</a></c14><br/><ln>&nbsp;181</ln><a id="181">&nbsp;</a><a id="n[1238]">&nbsp;</a><c14><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c14><c26><a href="../libworkcache/lib.rs.html#177">discovered_outputs</a></c26><c3>,</c3><c14><a href="#173_4_refs">
</a></c14><br/><ln>&nbsp;182</ln><a id="182">&nbsp;</a><a id="n[1239]">&nbsp;</a><c14><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c14><c26><a href="../libworkcache/lib.rs.html#178">result</a></c26><c4>))</c4><c3>;</c3><c22><a href="#173_4_refs">
</a></c22><br/><ln>&nbsp;183</ln><a id="183">&nbsp;</a><a id="n[1246, 1244, 1248, 1247, 1245, 1249]">&nbsp;</a><c22><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#173">self</a></c26><c24><a href="../libworkcache/lib.rs.html#144">.db_cache</a></c24><c13><a href="c=5 n=30716">.insert</a></c13><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#179">k</a></c26><c3>,</c3><c26><a href="../libworkcache/lib.rs.html#180">v</a></c26><c4>)</c4><c3>;</c3><c22><a href="#173_4_refs">
</a></c22><br/><ln>&nbsp;184</ln><a id="184">&nbsp;</a><a id="n[1253, 1251, 1254, 1252]">&nbsp;</a><c22><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#173">self</a></c26><c24><a href="../libworkcache/lib.rs.html#145">.db_dirty</a></c24><c5><a href="#173_4_refs">&nbsp;=&nbsp;</a></c5><c12><a href="#173_4_refs">true</a></c12><c22><a href="#173_4_refs">
</a></c22><br/><ln>&nbsp;185</ln><a id="185">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#173_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;186</ln><a id="186">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;187</ln><a id="187">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c40>//&nbsp;FIXME&nbsp;#4330:&nbsp;This&nbsp;should&nbsp;have&nbsp;&amp;mut&nbsp;self&nbsp;and&nbsp;should&nbsp;set&nbsp;self.db_dirty&nbsp;to&nbsp;false.
</c40><br/><ln>&nbsp;188</ln><a id="188">&nbsp;</a><a id="n[1258, 1271, 1261, 1259, 1255]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#188_4_refs">&nbsp;save</a></c30><c4>(</c4><c20><a href="#188_12_refs">&amp;self</a></c20><c4>)</c4><c18><a href="#188_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#188_4_refs">&nbsp;</a></c18><c8><a href="../libstd/io/mod.rs.html#n148915">io::IoResult&lt;</a></c8><c4>()</c4><c8><a href="../libstd/io/mod.rs.html#n148915">&gt;</a></c8><c18><a href="#188_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#188_4_refs">
</a></c22><br/><ln>&nbsp;189</ln><a id="189">&nbsp;</a><a id="n[1267, 1268, 1270, 1264, 1266, 1269, 1265, 1262, 1263]">&nbsp;</a><c22><a href="#188_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#188_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#189_12_refs">&nbsp;f</a></c20><c16><a href="#188_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libstd/io/fs.rs.html#n140019">File::create</a></c26><c4>(</c4><c5><a href="#188_4_refs">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#188">self</a></c26><c24><a href="../libworkcache/lib.rs.html#143">.db_filename</a></c24><c4>)</c4><c3>;</c3><c22><a href="#188_4_refs">
</a></c22><br/><ln>&nbsp;190</ln><a id="190">&nbsp;</a><a id="n[1277, 1276, 1272, 1275, 1273, 1274]">&nbsp;</a><c22><a href="#188_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#188">self</a></c26><c24><a href="../libworkcache/lib.rs.html#144">.db_cache</a></c24><c10><a href="../libserialize/json.rs.html#n34588">.to_json</a></c10><c4>()</c4><c10><a href="../libserialize/json.rs.html#n28750">.to_pretty_writer</a></c10><c4>(</c4><c5><a href="../libserialize/json.rs.html#n28750">&amp;mut&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#189">f</a></c26><c4>)</c4><c22><a href="#188_4_refs">
</a></c22><br/><ln>&nbsp;191</ln><a id="191">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#188_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;192</ln><a id="192">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;193</ln><a id="193">&nbsp;</a><a id="n[1281, 1278, 1437, 1282]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#193_4_refs">&nbsp;load</a></c30><c4>(</c4><c20><a href="#193_12_refs">&amp;mut&nbsp;self</a></c20><c4>)</c4><c18><a href="#193_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;194</ln><a id="194">&nbsp;</a><a id="n[1284, 1285, 1283]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert!</a></c22><c4>(</c4><c5><a href="#193_4_refs">!</a></c5><c26><a href="../libworkcache/lib.rs.html#193">self</a></c26><c24><a href="../libworkcache/lib.rs.html#145">.db_dirty</a></c24><c4>)</c4><c3>;</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;195</ln><a id="195">&nbsp;</a><a id="n[1361, 1362, 1360]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert!</a></c22><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#193">self</a></c26><c24><a href="../libworkcache/lib.rs.html#143">.db_filename</a></c24><c10><a href="../libstd/io/fs.rs.html#n141100">.exists</a></c10><c4>())</c4><c3>;</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;196</ln><a id="196">&nbsp;</a><a id="n[1442, 1440, 1438, 1662, 1441, 1439]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#193_4_refs">&nbsp;</a></c21><c26><a href="../libstd/io/fs.rs.html#n140003">File::open</a></c26><c4>(</c4><c5><a href="#193_4_refs">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#193">self</a></c26><c24><a href="../libworkcache/lib.rs.html#143">.db_filename</a></c24><c4>)</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#193_4_refs">
</a></c21><br/><ln>&nbsp;197</ln><a id="197">&nbsp;</a><a id="n[1473, 1505, 1479, 1488, 1444, 1532, 1518, 1504, 1486, 1499, 1521, 1490, 1489, 1517, 1500, 1476, 1522, 1530, 1480, 1478, 1525, 1443, 1520, 1491, 1483, 1475, 1469, 1485, 1477, 1501, 1466, 1496, 1535, 1484, 1537, 1487, 1524, 1519, 1493, 1492, 1527, 1495, 1474, 1523, 1506, 1528, 1508, 1503, 1526, 1529, 1482, 1498, 1497, 1502, 1494, 1481, 1470, 1507]">&nbsp;</a><c21><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/result.rs.html#n105801">Err</a></c20><c4>(</c4><c20><a href="#197_16_refs">e</a></c20><c4>)</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c22><a href="#193_4_refs">fail!</a></c22><c4>(</c4><c8><a href="#197_28_refs">"Couldn't&nbsp;load&nbsp;workcache&nbsp;database&nbsp;</a></c8><c3>{}</c3><c8><a href="#197_28_refs">:&nbsp;</a></c8><c3>{}</c3><c8><a href="#197_28_refs">"</a></c8><c3>,</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;198</ln><a id="198">&nbsp;</a><a id="n[1461, 1510, 1460, 1509, 1467, 1511, 1462, 1512, 1463]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#193">self</a></c26><c24><a href="../libworkcache/lib.rs.html#143">.db_filename</a></c24><c5><a href="c=1 n=252273">.display</a></c5><c4>()</c4><c3>,</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;199</ln><a id="199">&nbsp;</a><a id="n[1464, 1513, 1465, 1516, 1515, 1468, 1514]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n169877">e</a></c26><c4>)</c4><c3>,</c3><c21><a href="#193_4_refs">
</a></c21><br/><ln>&nbsp;200</ln><a id="200">&nbsp;</a><a id="n[1540, 1538, 1539, 1661]">&nbsp;</a><c21><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/result.rs.html#n105797">Ok</a></c20><c4>(</c4><c20><a href="#200_15_refs">mut&nbsp;stream</a></c20><c4>)</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;201</ln><a id="201">&nbsp;</a><a id="n[1544, 1541, 1543, 1542, 1660]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#193_4_refs">&nbsp;</a></c21><c26><a href="../libserialize/json.rs.html#n30514">json::from_reader</a></c26><c4>(</c4><c5><a href="#193_4_refs">&amp;mut&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#200">stream</a></c26><c4>)</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#193_4_refs">
</a></c21><br/><ln>&nbsp;202</ln><a id="202">&nbsp;</a><a id="n[1546, 1577, 1632, 1609, 1590, 1599, 1624, 1625, 1592, 1621, 1623, 1581, 1573, 1583, 1582, 1622, 1627, 1578, 1587, 1626, 1630, 1605, 1596, 1611, 1600, 1591, 1598, 1593, 1545, 1640, 1629, 1589, 1580, 1601, 1576, 1602, 1572, 1633, 1635, 1588, 1586, 1569, 1584, 1603, 1595, 1607, 1608, 1594, 1597, 1631, 1610, 1620, 1606, 1604, 1628, 1579, 1585, 1638]">&nbsp;</a><c21><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/result.rs.html#n105801">Err</a></c20><c4>(</c4><c20><a href="#202_24_refs">e</a></c20><c4>)</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c22><a href="#193_4_refs">fail!</a></c22><c4>(</c4><c22><a href="../libstd/fmt/parse.rs.html#n166363">"Couldn't&nbsp;parse&nbsp;workcache&nbsp;database&nbsp;</a></c22><c4>(</c4><c22><a href="../libstd/fmt/parse.rs.html#n166363">from&nbsp;file&nbsp;</a></c22><c3>{}</c3><c4>)</c4><c22><a href="../libstd/fmt/parse.rs.html#n166363">:&nbsp;</a></c22><c3>{}</c3><c22><a href="../libstd/fmt/parse.rs.html#n166363">"</a></c22><c3>,</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;203</ln><a id="203">&nbsp;</a><a id="n[1618, 1615, 1570, 1614, 1571, 1568, 1567, 1612, 1563, 1617, 1619, 1566, 1613, 1562, 1616, 1564, 1565]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#193">self</a></c26><c24><a href="../libworkcache/lib.rs.html#143">.db_filename</a></c24><c5><a href="c=1 n=252273">.display</a></c5><c4>()</c4><c3>,</c3><c22><a href="#193_4_refs">&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#202">e</a></c26><c26><a href="../libstd/fmt/mod.rs.html#n171474">.to_str</a></c26><c4>())</c4><c3>,</c3><c21><a href="#193_4_refs">
</a></c21><br/><ln>&nbsp;204</ln><a id="204">&nbsp;</a><a id="n[1658, 1642, 1659, 1641]">&nbsp;</a><c21><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/result.rs.html#n105797">Ok</a></c20><c4>(</c4><c20><a href="#204_23_refs">r</a></c20><c4>)</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#193_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;205</ln><a id="205">&nbsp;</a><a id="n[1645, 1643, 1648, 1646, 1647, 1644, 1649]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#193_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#205_28_refs">&nbsp;decoder</a></c20><c13><a href="#193_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libserialize/json.rs.html#n30607">json::Decoder::new</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#204">r</a></c26><c4>)</c4><c3>;</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;206</ln><a id="206">&nbsp;</a><a id="n[1655, 1651, 1652, 1650, 1653, 1656, 1654, 1657]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#193">self</a></c26><c24><a href="../libworkcache/lib.rs.html#144">.db_cache</a></c24><c13><a href="#193_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libserialize/serialize.rs.html#n1023">Decodable::decode</a></c26><c4>(</c4><c5><a href="#193_4_refs">&amp;mut&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#205">decoder</a></c26><c4>)</c4><c3>;</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;207</ln><a id="207">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#193_4_refs">
</a></c21><br/><ln>&nbsp;208</ln><a id="208">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;209</ln><a id="209">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#193_4_refs">
</a></c21><br/><ln>&nbsp;210</ln><a id="210">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#193_4_refs">
</a></c22><br/><ln>&nbsp;211</ln><a id="211">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#193_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;212</ln><a id="212">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;213</ln><a id="213">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;214</ln><a id="214">&nbsp;</a><a id="n[1663]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>unsafe_destructor</c50><c3>]</c3><c50>
</c50><br/><ln>&nbsp;215</ln><a id="215">&nbsp;</a><a id="n[1664, 1666]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../libstd/ops.rs.html#n75082">Drop</a></c33><c33>&nbsp;for&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#141">Database</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;216</ln><a id="216">&nbsp;</a><a id="n[1667, 1672, 1671, 1670]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn&nbsp;drop</c30><c4>(</c4><c20><a href="#216_12_refs">&amp;mut&nbsp;self</a></c20><c4>)</c4><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;217</ln><a id="217">&nbsp;</a><a id="n[1680, 1674, 1673, 1679]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c26><a href="../libworkcache/lib.rs.html#216">self</a></c26><c24><a href="../libworkcache/lib.rs.html#145">.db_dirty</a></c24><c21>&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;218</ln><a id="218">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;FIXME:&nbsp;is&nbsp;failing&nbsp;the&nbsp;right&nbsp;thing&nbsp;to&nbsp;do&nbsp;here
</c40><br/><ln>&nbsp;219</ln><a id="219">&nbsp;</a><a id="n[1677, 1676, 1678, 1675]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#216">self</a></c26><c10><a href="../libworkcache/lib.rs.html#188">.save</a></c10><c4>()</c4><c13><a href="../libstd/result.rs.html#n106923">.unwrap</a></c13><c4>()</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;220</ln><a id="220">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;221</ln><a id="221">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;222</ln><a id="222">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;223</ln><a id="223">&nbsp;</a><a id="n[1681]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;224</ln><a id="224">&nbsp;</a><a id="n[1692, 1696, 1697, 1688, 1699, 1684, 1687, 1683, 1693]">&nbsp;</a><c21>pub</c21><c8><a href="#223_1_refs">&nbsp;</a></c8><c35>type</c35><c35><a href="#223_1_refs">&nbsp;FreshnessMap&nbsp;=&nbsp;</a></c35><c35><a href="../libcollections/treemap.rs.html#n23577">TreeMap</a></c35><c5><a href="../libcollections/treemap.rs.html#n23577">&lt;~str</a></c5><c5>,</c5><c5><a href="../libcollections/treemap.rs.html#n23577">extern&nbsp;fn</a></c5><c4>(</c4><c8><a href="../libcollections/treemap.rs.html#n23577">&amp;str</a></c8><c3>,</c3><c8><a href="../libcollections/treemap.rs.html#n23577">&amp;str</a></c8><c4>)-&gt;</c4><c8><a href="../libcollections/treemap.rs.html#n23577">bool&gt;</a></c8><c3>;</c3><c0>
</c0><br/><ln>&nbsp;225</ln><a id="225">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;226</ln><a id="226">&nbsp;</a><a id="n[1734, 1747, 1700, 1729, 1727, 1722, 1725, 1719, 1721, 1730, 1728, 1718, 1748]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>deriving</c50><c4>(</c4><c50><a href="../libworkcache/lib.rs.html#226">Clone</a></c50><c4>)</c4><c3>]</c3><c50>
</c50><br/><ln>&nbsp;227</ln><a id="227">&nbsp;</a><a id="n[]">&nbsp;</a><c21>pub</c21><c31><a href="#226_19_refs">&nbsp;</a></c31><c31>struct</c31><c31><a href="#226_19_refs">&nbsp;Context&nbsp;</a></c31><c3>{</c3><c31><a href="#226_19_refs">
</a></c31><br/><ln>&nbsp;228</ln><a id="228">&nbsp;</a><a id="n[1705, 1737, 1736, 1735, 1701, 1731, 1738, 1703, 1707]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c10><a href="../libsync/arc.rs.html#n139">db:&nbsp;</a></c10><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libsync/lock.rs.html#n1551">RWLock&lt;</a></c8><c8><a href="../libworkcache/lib.rs.html#141">Database</a></c8><c8><a href="../libsync/lock.rs.html#n1551">&gt;</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c3>,</c3><c31><a href="#226_19_refs">
</a></c31><br/><ln>&nbsp;229</ln><a id="229">&nbsp;</a><a id="n[1739, 1742, 1708, 1740, 1710, 1741, 1712, 1732]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#226_19_refs">&nbsp;</a></c31><c20><a href="#229_9_refs">cfg:&nbsp;</a></c20><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libserialize/json.rs.html#n22076">json::Object</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c3>,</c3><c31><a href="#226_19_refs">
</a></c31><br/><ln>&nbsp;230</ln><a id="230">&nbsp;</a><a id="n[]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;Map&nbsp;from&nbsp;kinds&nbsp;(source,&nbsp;exe,&nbsp;url,&nbsp;etc.)&nbsp;to&nbsp;a&nbsp;freshness&nbsp;function.
</c42><br/><ln>&nbsp;231</ln><a id="231">&nbsp;</a><a id="n[]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;The&nbsp;freshness&nbsp;function&nbsp;takes&nbsp;a&nbsp;name&nbsp;(e.g.&nbsp;file&nbsp;path)&nbsp;and&nbsp;value
</c42><br/><ln>&nbsp;232</ln><a id="232">&nbsp;</a><a id="n[]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;(e.g.&nbsp;hash&nbsp;of&nbsp;file&nbsp;contents)&nbsp;and&nbsp;determines&nbsp;whether&nbsp;it's&nbsp;up-to-date.
</c42><br/><ln>&nbsp;233</ln><a id="233">&nbsp;</a><a id="n[]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;file&nbsp;case,&nbsp;this&nbsp;would&nbsp;read&nbsp;the&nbsp;file&nbsp;off&nbsp;disk,
</c42><br/><ln>&nbsp;234</ln><a id="234">&nbsp;</a><a id="n[]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;hash&nbsp;it,&nbsp;and&nbsp;return&nbsp;the&nbsp;result&nbsp;of&nbsp;comparing&nbsp;the&nbsp;given&nbsp;hash&nbsp;and&nbsp;the
</c42><br/><ln>&nbsp;235</ln><a id="235">&nbsp;</a><a id="n[]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c42>///&nbsp;read&nbsp;hash&nbsp;for&nbsp;equality.
</c42><br/><ln>&nbsp;236</ln><a id="236">&nbsp;</a><a id="n[1745, 1717, 1733, 1713, 1746, 1743, 1744, 1715]">&nbsp;</a><c31><a href="#226_19_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#226_19_refs">&nbsp;</a></c31><c5><a href="../libworkcache/lib.rs.html#236">freshness:&nbsp;</a></c5><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libworkcache/lib.rs.html#223">FreshnessMap</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c31><a href="#226_19_refs">
</a></c31><br/><ln>&nbsp;237</ln><a id="237">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;238</ln><a id="238">&nbsp;</a><a id="n[1749]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;239</ln><a id="239">&nbsp;</a><a id="n[]">&nbsp;</a><c21>pub</c21><c31><a href="#238_1_refs">&nbsp;</a></c31><c31>struct</c31><c31><a href="#238_1_refs">&nbsp;Prep</a></c31><c5><a href="#238_1_refs">&lt;'a&gt;</a></c5><c31><a href="#238_1_refs">&nbsp;</a></c31><c3>{</c3><c31><a href="#238_1_refs">
</a></c31><br/><ln>&nbsp;240</ln><a id="240">&nbsp;</a><a id="n[1750, 1753, 1754]">&nbsp;</a><c31><a href="#238_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#238_1_refs">&nbsp;</a></c31><c24><a href="#240_9_refs">ctxt:&nbsp;</a></c24><c8><a href="#240_9_refs">&amp;'a&nbsp;</a></c8><c8><a href="../libworkcache/lib.rs.html#226">Context</a></c8><c3>,</c3><c31><a href="#238_1_refs">
</a></c31><br/><ln>&nbsp;241</ln><a id="241">&nbsp;</a><a id="n[1758, 1755, 1759]">&nbsp;</a><c31><a href="#238_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#238_1_refs">&nbsp;</a></c31><c24><a href="#241_9_refs">fn_name:&nbsp;</a></c24><c8><a href="#241_9_refs">&amp;'a&nbsp;str</a></c8><c3>,</c3><c31><a href="#238_1_refs">
</a></c31><br/><ln>&nbsp;242</ln><a id="242">&nbsp;</a><a id="n[1762, 1760]">&nbsp;</a><c31><a href="#238_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#238_1_refs">&nbsp;</a></c31><c24><a href="#242_9_refs">declared_inputs:&nbsp;</a></c24><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c3>,</c3><c31><a href="#238_1_refs">
</a></c31><br/><ln>&nbsp;243</ln><a id="243">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;244</ln><a id="244">&nbsp;</a><a id="n[1764]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;245</ln><a id="245">&nbsp;</a><a id="n[]">&nbsp;</a><c21>pub</c21><c31><a href="#244_1_refs">&nbsp;</a></c31><c31>struct</c31><c31><a href="#244_1_refs">&nbsp;Exec&nbsp;</a></c31><c3>{</c3><c31><a href="#244_1_refs">
</a></c31><br/><ln>&nbsp;246</ln><a id="246">&nbsp;</a><a id="n[1767, 1765]">&nbsp;</a><c31><a href="#244_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#244_1_refs">&nbsp;</a></c31><c24><a href="#246_9_refs">discovered_inputs:&nbsp;</a></c24><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c3>,</c3><c31><a href="#244_1_refs">
</a></c31><br/><ln>&nbsp;247</ln><a id="247">&nbsp;</a><a id="n[1768, 1770]">&nbsp;</a><c31><a href="#244_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c31><c21>priv</c21><c31><a href="#244_1_refs">&nbsp;</a></c31><c24><a href="#247_9_refs">discovered_outputs:&nbsp;</a></c24><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c31><a href="#244_1_refs">
</a></c31><br/><ln>&nbsp;248</ln><a id="248">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;249</ln><a id="249">&nbsp;</a><a id="n[1771]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;250</ln><a id="250">&nbsp;</a><a id="n[]">&nbsp;</a><c34>enum</c34><c34><a href="#249_1_refs">&nbsp;Work</a></c34><c5><a href="#249_1_refs">&lt;'a</a></c5><c5>,</c5><c5><a href="#249_1_refs">&nbsp;T&gt;</a></c5><c34><a href="#249_1_refs">&nbsp;</a></c34><c3>{</c3><c34><a href="#249_1_refs">
</a></c34><br/><ln>&nbsp;251</ln><a id="251">&nbsp;</a><a id="n[1773, 1775]">&nbsp;</a><c34><a href="#249_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c34><c28><a href="#251_4_refs">WorkValue</a></c28><c4>(</c4><c8><a href="c=0 n=1791">T</a></c8><c4>)</c4><c3>,</c3><c34><a href="#249_1_refs">
</a></c34><br/><ln>&nbsp;252</ln><a id="252">&nbsp;</a><a id="n[1788, 1779, 1783, 1785, 1780, 1786, 1790]">&nbsp;</a><c34><a href="#249_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c34><c28><a href="#252_4_refs">WorkFromTask</a></c28><c4>(</c4><c8><a href="#249_1_refs">&amp;'a&nbsp;</a></c8><c8><a href="../libworkcache/lib.rs.html#238">Prep&lt;'a&gt;</a></c8><c3>,</c3><c28><a href="#252_4_refs">&nbsp;</a></c28><c8><a href="../libstd/comm/mod.rs.html#n118154">Receiver&lt;</a></c8><c4>(</c4><c8><a href="../libworkcache/lib.rs.html#244">Exec</a></c8><c3>,</c3><c8><a href="../libstd/comm/mod.rs.html#n118154">&nbsp;</a></c8><c8><a href="c=0 n=1791">T</a></c8><c4>)</c4><c8><a href="../libstd/comm/mod.rs.html#n118154">&gt;</a></c8><c4>)</c4><c3>,</c3><c34><a href="#249_1_refs">
</a></c34><br/><ln>&nbsp;253</ln><a id="253">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;254</ln><a id="254">&nbsp;</a><a id="n[1793]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;255</ln><a id="255">&nbsp;</a><a id="n[1805, 1798, 1800, 1801, 1831, 1806, 1797, 1796]">&nbsp;</a><c30>fn</c30><c30><a href="#254_1_refs">&nbsp;json_encode</a></c30><c5><a href="#254_1_refs">&lt;'a</a></c5><c5>,</c5><c5><a href="#254_1_refs">&nbsp;T:</a></c5><c5><a href="../libserialize/serialize.rs.html#n1009">Encodable&lt;</a></c5><c5><a href="../libserialize/json.rs.html#n22392">json::Encoder&lt;'a&gt;</a></c5><c5><a href="../libserialize/serialize.rs.html#n1009">&gt;</a></c5><c5><a href="#254_1_refs">&gt;</a></c5><c4>(</c4><c20><a href="#255_51_refs">t</a></c20><c1><a href="#254_1_refs">:&nbsp;</a></c1><c8><a href="#254_1_refs">&amp;</a></c8><c8><a href="c=0 n=1802">T</a></c8><c4>)</c4><c1><a href="#254_1_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#254_1_refs">&nbsp;</a></c1><c8><a href="#254_1_refs">~str</a></c8><c1><a href="#254_1_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#254_1_refs">
</a></c22><br/><ln>&nbsp;256</ln><a id="256">&nbsp;</a><a id="n[1809, 1810, 1813, 1808, 1812, 1811]">&nbsp;</a><c22><a href="#254_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#254_1_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#256_8_refs">&nbsp;writer</a></c20><c16><a href="#254_1_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libstd/io/mem.rs.html#n137262">MemWriter::new</a></c26><c4>()</c4><c3>;</c3><c22><a href="#254_1_refs">
</a></c22><br/><ln>&nbsp;257</ln><a id="257">&nbsp;</a><a id="n[1815, 1814, 1817, 1824, 1822, 1819, 1818, 1816, 1823, 1825, 1821]">&nbsp;</a><c22><a href="#254_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#254_1_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#257_8_refs">&nbsp;encoder</a></c20><c13><a href="#254_1_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libserialize/json.rs.html#n22408">json::Encoder::new</a></c26><c4>(</c4><c5><a href="#254_1_refs">&amp;mut&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#256">writer</a></c26><c21><a href="#254_1_refs">&nbsp;as&nbsp;</a></c21><c8><a href="#254_1_refs">&amp;mut&nbsp;</a></c8><c8><a href="../libstd/io/mod.rs.html#n151716">io::Writer</a></c8><c4>)</c4><c3>;</c3><c22><a href="#254_1_refs">
</a></c22><br/><ln>&nbsp;258</ln><a id="258">&nbsp;</a><a id="n[1830, 1827, 1829, 1826, 1828]">&nbsp;</a><c22><a href="#254_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#255">t</a></c26><c10><a href="../libserialize/serialize.rs.html#n1010">.encode</a></c10><c4>(</c4><c5><a href="../libserialize/serialize.rs.html#n1010">&amp;mut&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#257">encoder</a></c26><c4>)</c4><c3>;</c3><c22><a href="#254_1_refs">
</a></c22><br/><ln>&nbsp;259</ln><a id="259">&nbsp;</a><a id="n[1836, 1835, 1832, 1833, 1834]">&nbsp;</a><c22><a href="#254_1_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libstd/str.rs.html#n58881">str::from_utf8_owned</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#256">writer</a></c26><c10><a href="../libstd/io/mem.rs.html#n137297">.unwrap</a></c10><c4>())</c4><c10><a href="../libstd/option.rs.html#n105073">.unwrap</a></c10><c4>()</c4><c22><a href="#254_1_refs">
</a></c22><br/><ln>&nbsp;260</ln><a id="260">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;261</ln><a id="261">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;262</ln><a id="262">&nbsp;</a><a id="n[1837]">&nbsp;</a><c40>//&nbsp;FIXME(#5121)
</c40><br/><ln>&nbsp;263</ln><a id="263">&nbsp;</a><a id="n[1840, 1847, 1965, 1841, 1848, 1842, 1844]">&nbsp;</a><c30>fn</c30><c30><a href="#262_16_refs">&nbsp;json_decode</a></c30><c5><a href="#262_16_refs">&lt;T:</a></c5><c5><a href="../libserialize/serialize.rs.html#n1022">Decodable&lt;</a></c5><c5><a href="../libserialize/json.rs.html#n30598">json::Decoder</a></c5><c5><a href="../libserialize/serialize.rs.html#n1022">&gt;</a></c5><c5><a href="#262_16_refs">&gt;</a></c5><c4>(</c4><c20><a href="#263_43_refs">s</a></c20><c1><a href="#262_16_refs">:&nbsp;</a></c1><c8><a href="#262_16_refs">&amp;str</a></c8><c4>)</c4><c1><a href="#262_16_refs">&nbsp;</a></c1><c4>-&gt;</c4><c1><a href="#262_16_refs">&nbsp;</a></c1><c8><a href="c=0 n=1845">T</a></c8><c1><a href="#262_16_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#262_16_refs">
</a></c22><br/><ln>&nbsp;264</ln><a id="264">&nbsp;</a><a id="n[1941, 1922, 1893, 1928, 1899, 1916, 1924, 1925, 1944, 1921, 1891, 1886, 1883, 1885, 1918, 1927, 1903, 1900, 1911, 1889, 1914, 1882, 1920, 1895, 1892, 1905, 1910, 1919, 1898, 1896, 1909, 1912, 1926, 1908, 1881, 1904, 1897, 1894, 1907, 1923, 1913, 1917, 1884, 1890, 1902, 1915, 1906, 1901]">&nbsp;</a><c22><a href="#262_16_refs">&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../libstd/fmt/rt.rs.html#n169505">"json&nbsp;decoding:&nbsp;</a></c26><c3>{}</c3><c26><a href="../libstd/fmt/rt.rs.html#n169505">"</a></c26><c3>,</c3><c22><a href="#262_16_refs">&nbsp;</a></c22><c20><a href="#264_32_refs">s</a></c20><c4>)</c4><c3>;</c3><c22><a href="#262_16_refs">
</a></c22><br/><ln>&nbsp;265</ln><a id="265">&nbsp;</a><a id="n[1957, 1955, 1950, 1952, 1951, 1953, 1954, 1956]">&nbsp;</a><c22><a href="#262_16_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#262_16_refs">&nbsp;</a></c22><c20><a href="#265_8_refs">j</a></c20><c16><a href="#262_16_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libserialize/json.rs.html#n30575">json::from_str</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#263">s</a></c26><c4>)</c4><c10><a href="../libstd/result.rs.html#n106923">.unwrap</a></c10><c4>()</c4><c3>;</c3><c22><a href="#262_16_refs">
</a></c22><br/><ln>&nbsp;266</ln><a id="266">&nbsp;</a><a id="n[1963, 1958, 1959, 1962, 1961, 1960, 1964]">&nbsp;</a><c22><a href="#262_16_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#262_16_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#266_8_refs">&nbsp;decoder</a></c20><c13><a href="#262_16_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libserialize/json.rs.html#n30607">json::Decoder::new</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#265">j</a></c26><c4>)</c4><c3>;</c3><c22><a href="#262_16_refs">
</a></c22><br/><ln>&nbsp;267</ln><a id="267">&nbsp;</a><a id="n[1968, 1969, 1967, 1966]">&nbsp;</a><c22><a href="#262_16_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libserialize/serialize.rs.html#n1023">Decodable::decode</a></c26><c4>(</c4><c5><a href="#262_16_refs">&amp;mut&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#266">decoder</a></c26><c4>)</c4><c22><a href="#262_16_refs">
</a></c22><br/><ln>&nbsp;268</ln><a id="268">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;269</ln><a id="269">&nbsp;</a><a id="n[1970]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;270</ln><a id="270">&nbsp;</a><a id="n[1972]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#226">Context</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;271</ln><a id="271">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;272</ln><a id="272">&nbsp;</a><a id="n[1980, 1978, 1973, 1981, 1976]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;new</c30><c4>(</c4><c20><a href="#272_15_refs">db</a></c20><c18>:&nbsp;</c18><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libsync/lock.rs.html#n1551">RWLock&lt;</a></c8><c8><a href="../libworkcache/lib.rs.html#141">Database</a></c8><c8><a href="../libsync/lock.rs.html#n1551">&gt;</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c3>,</c3><c18>
</c18><br/><ln>&nbsp;273</ln><a id="273">&nbsp;</a><a id="n[1990, 1987, 1984, 1989, 1986]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#273_15_refs">cfg</a></c20><c18>:&nbsp;</c18><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libserialize/json.rs.html#n22076">json::Object</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c4>)</c4><c18>&nbsp;</c18><c4>-&gt;</c4><c18>&nbsp;</c18><c8><a href="../libworkcache/lib.rs.html#226">Context</a></c8><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;274</ln><a id="274">&nbsp;</a><a id="n[1994, 1992, 1996, 1998, 1997, 1991, 1995, 1993]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#277">Context::new_with_freshness</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#272">db</a></c26><c3>,</c3><c27>&nbsp;</c27><c26><a href="../libworkcache/lib.rs.html#273">cfg</a></c26><c3>,</c3><c27>&nbsp;</c27><c26><a href="../libsync/arc.rs.html#n63">Arc::new</a></c26><c4>(</c4><c26><a href="../libcollections/treemap.rs.html#n24143">TreeMap::new</a></c26><c4>()))</c4><c22>
</c22><br/><ln>&nbsp;275</ln><a id="275">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;276</ln><a id="276">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;277</ln><a id="277">&nbsp;</a><a id="n[2006, 2004, 2007, 2002, 1999]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#277_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#277_4_refs">&nbsp;new_with_freshness</a></c30><c4>(</c4><c20><a href="#277_30_refs">db</a></c20><c18><a href="#277_4_refs">:&nbsp;</a></c18><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libsync/lock.rs.html#n1551">RWLock&lt;</a></c8><c8><a href="../libworkcache/lib.rs.html#141">Database</a></c8><c8><a href="../libsync/lock.rs.html#n1551">&gt;</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c3>,</c3><c18><a href="#277_4_refs">
</a></c18><br/><ln>&nbsp;278</ln><a id="278">&nbsp;</a><a id="n[2012, 2010, 2013]">&nbsp;</a><c18><a href="#277_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#278_30_refs">cfg</a></c20><c18><a href="#277_4_refs">:&nbsp;</a></c18><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libserialize/json.rs.html#n22076">json::Object</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c3>,</c3><c18><a href="#277_4_refs">
</a></c18><br/><ln>&nbsp;279</ln><a id="279">&nbsp;</a><a id="n[2022, 2018, 2021, 2019, 2016]">&nbsp;</a><c18><a href="#277_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#279_30_refs">freshness</a></c20><c18><a href="#277_4_refs">:&nbsp;</a></c18><c8><a href="../libsync/arc.rs.html#n28">Arc&lt;</a></c8><c8><a href="../libworkcache/lib.rs.html#223">FreshnessMap</a></c8><c8><a href="../libsync/arc.rs.html#n28">&gt;</a></c8><c4>)</c4><c18><a href="#277_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#277_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#226">Context</a></c8><c18><a href="#277_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#277_4_refs">
</a></c22><br/><ln>&nbsp;280</ln><a id="280">&nbsp;</a><a id="n[2026]">&nbsp;</a><c22><a href="#277_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c1><a href="../libworkcache/lib.rs.html#226">Context&nbsp;</a></c1><c3>{</c3><c1><a href="../libworkcache/lib.rs.html#226">
</a></c1><br/><ln>&nbsp;281</ln><a id="281">&nbsp;</a><a id="n[2023]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#226">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#277">db</a></c26><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#226">
</a></c1><br/><ln>&nbsp;282</ln><a id="282">&nbsp;</a><a id="n[2024]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#226">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cfg:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#278">cfg</a></c26><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#226">
</a></c1><br/><ln>&nbsp;283</ln><a id="283">&nbsp;</a><a id="n[2025]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#226">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freshness:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#279">freshness</a></c26><c1><a href="../libworkcache/lib.rs.html#226">
</a></c1><br/><ln>&nbsp;284</ln><a id="284">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#226">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c22><a href="#277_4_refs">
</a></c22><br/><ln>&nbsp;285</ln><a id="285">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#277_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;286</ln><a id="286">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;287</ln><a id="287">&nbsp;</a><a id="n[2032, 2042, 2038, 2027, 2037, 2036, 2041]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#287_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#287_4_refs">&nbsp;prep</a></c30><c5><a href="#287_4_refs">&lt;'a&gt;</a></c5><c4>(</c4><c20><a href="#287_20_refs">&amp;'a&nbsp;self</a></c20><c3>,</c3><c18><a href="#287_4_refs">&nbsp;</a></c18><c20><a href="#287_30_refs">fn_name</a></c20><c18><a href="#287_4_refs">:&nbsp;</a></c18><c8><a href="#287_4_refs">&amp;'a&nbsp;str</a></c8><c4>)</c4><c18><a href="#287_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#287_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#238">Prep&lt;'a&gt;</a></c8><c18><a href="#287_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#287_4_refs">
</a></c22><br/><ln>&nbsp;288</ln><a id="288">&nbsp;</a><a id="n[2045, 2043, 2044, 2046]">&nbsp;</a><c22><a href="#287_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#336">Prep::new</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#287">self</a></c26><c3>,</c3><c27><a href="#287_4_refs">&nbsp;</a></c27><c26><a href="../libworkcache/lib.rs.html#287">fn_name</a></c26><c4>)</c4><c22><a href="#287_4_refs">
</a></c22><br/><ln>&nbsp;289</ln><a id="289">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#287_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;290</ln><a id="290">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;291</ln><a id="291">&nbsp;</a><a id="n[2047]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;with_prep</c30><c5>&lt;'a,
</c5><br/><ln>&nbsp;292</ln><a id="292">&nbsp;</a><a id="n[]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T&gt;</c18><c4>(</c4><c18>
</c18><br/><ln>&nbsp;293</ln><a id="293">&nbsp;</a><a id="n[2053]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#293_21_refs">&amp;'a&nbsp;self</a></c20><c3>,</c3><c18>
</c18><br/><ln>&nbsp;294</ln><a id="294">&nbsp;</a><a id="n[2057, 2059, 2058]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#294_21_refs">fn_name</a></c20><c18>:&nbsp;</c18><c8>&amp;'a&nbsp;str</c8><c3>,</c3><c18>
</c18><br/><ln>&nbsp;295</ln><a id="295">&nbsp;</a><a id="n[2063, 2067, 2069, 2068, 2064]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#295_21_refs">blk</a></c20><c18>:&nbsp;</c18><c8>|p:&nbsp;&amp;mut&nbsp;</c8><c8><a href="../libworkcache/lib.rs.html#238">Prep</a></c8><c8>|&nbsp;</c8><c4>-&gt;</c4><c8>&nbsp;</c8><c8><a href="c=0 n=2048">T</a></c8><c4>)</c4><c18>
</c18><br/><ln>&nbsp;296</ln><a id="296">&nbsp;</a><a id="n[2079, 2071]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c4>-&gt;</c4><c18>&nbsp;</c18><c8><a href="c=0 n=2048">T</a></c8><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;297</ln><a id="297">&nbsp;</a><a id="n[2074, 2076, 2073, 2072, 2078, 2075, 2077]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#297_12_refs">&nbsp;p</a></c20><c13>&nbsp;=&nbsp;</c13><c26><a href="../libworkcache/lib.rs.html#293">self</a></c26><c10><a href="../libworkcache/lib.rs.html#287">.prep</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#294">fn_name</a></c26><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;298</ln><a id="298">&nbsp;</a><a id="n[2080, 2082, 2083, 2081]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#295">blk</a></c26><c4>(</c4><c5>&amp;mut&nbsp;</c5><c26><a href="../libworkcache/lib.rs.html#297">p</a></c26><c4>)</c4><c22>
</c22><br/><ln>&nbsp;299</ln><a id="299">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;300</ln><a id="300">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;301</ln><a id="301">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;302</ln><a id="302">&nbsp;</a><a id="n[2084]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;303</ln><a id="303">&nbsp;</a><a id="n[2086]">&nbsp;</a><c33>impl&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#244">Exec</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;304</ln><a id="304">&nbsp;</a><a id="n[2090, 2087]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;discover_input</c30><c4>(</c4><c20><a href="#304_26_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18>
</c18><br/><ln>&nbsp;305</ln><a id="305">&nbsp;</a><a id="n[2095, 2094, 2093]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#305_26_refs">dependency_kind</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c3>,</c3><c18>
</c18><br/><ln>&nbsp;306</ln><a id="306">&nbsp;</a><a id="n[2100, 2099, 2098]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#306_26_refs">dependency_name</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c3>,</c3><c18>
</c18><br/><ln>&nbsp;307</ln><a id="307">&nbsp;</a><a id="n[2105, 2103, 2106, 2104, 2260]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#307_26_refs">dependency_val</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c4>)</c4><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;308</ln><a id="308">&nbsp;</a><a id="n[2161, 2162, 2225, 2174, 2175, 2147, 2177, 2213, 2156, 2149, 2226, 2164, 2153, 2212, 2194, 2143, 2150, 2144, 2222, 2206, 2244, 2167, 2185, 2197, 2205, 2211, 2192, 2227, 2154, 2184, 2209, 2186, 2172, 2146, 2193, 2160, 2145, 2140, 2157, 2203, 2163, 2200, 2178, 2201, 2214, 2224, 2158, 2191, 2173, 2221, 2219, 2190, 2139, 2183, 2215, 2196, 2179, 2142, 2171, 2141, 2210, 2220, 2155, 2180, 2169, 2218, 2148, 2166, 2202, 2182, 2208, 2204, 2159, 2170, 2187, 2207, 2165, 2198, 2216, 2168, 2188, 2181, 2217, 2241, 2228, 2223, 2195, 2189, 2199, 2176]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</c22><c4>(</c4><c26><a href="../libstd/fmt/parse.rs.html#n166363">"Discovering&nbsp;input&nbsp;</a></c26><c3>{}</c3><c26><a href="../libstd/fmt/parse.rs.html#n166363">&nbsp;</a></c26><c3>{}</c3><c26><a href="../libstd/fmt/parse.rs.html#n166363">&nbsp;</a></c26><c3>{}</c3><c26><a href="../libstd/fmt/parse.rs.html#n166363">"</a></c26><c3>,</c3><c22>&nbsp;</c22><c26><a href="../libstd/fmt/mod.rs.html#n169877">dependency_kind</a></c26><c3>,</c3><c22>&nbsp;</c22><c26><a href="../libstd/fmt/mod.rs.html#n171474">dependency_name</a></c26><c3>,</c3><c22>&nbsp;</c22><c20><a href="#308_79_refs">dependency_val</a></c20><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;309</ln><a id="309">&nbsp;</a><a id="n[2259, 2255, 2254, 2250, 2253, 2251, 2252, 2258]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#304">self</a></c26><c24><a href="../libworkcache/lib.rs.html#246">.discovered_inputs</a></c24><c10><a href="../libworkcache/lib.rs.html#129">.insert_work_key</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#110">WorkKey::new</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#305">dependency_kind</a></c26><c3>,</c3><c27><a href="../libworkcache/lib.rs.html#129">&nbsp;</a></c27><c26><a href="../libworkcache/lib.rs.html#306">dependency_name</a></c26><c4>)</c4><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#129">
</a></c10><br/><ln>&nbsp;310</ln><a id="310">&nbsp;</a><a id="n[2256, 2257]">&nbsp;</a><c10><a href="../libworkcache/lib.rs.html#129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c10><c26><a href="../libworkcache/lib.rs.html#307">dependency_val</a></c26><c10><a href="../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>())</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;311</ln><a id="311">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;312</ln><a id="312">&nbsp;</a><a id="n[2261, 2264]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;discover_output</c30><c4>(</c4><c20><a href="#312_27_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18>
</c18><br/><ln>&nbsp;313</ln><a id="313">&nbsp;</a><a id="n[2268, 2269, 2267]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#313_27_refs">dependency_kind</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c3>,</c3><c18>
</c18><br/><ln>&nbsp;314</ln><a id="314">&nbsp;</a><a id="n[2273, 2272, 2274]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#314_27_refs">dependency_name</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c3>,</c3><c18>
</c18><br/><ln>&nbsp;315</ln><a id="315">&nbsp;</a><a id="n[2278, 2434, 2277, 2279, 2280]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#315_27_refs">dependency_val</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c4>)</c4><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;316</ln><a id="316">&nbsp;</a><a id="n[2389, 2316, 2384, 2346, 2341, 2375, 2356, 2318, 2361, 2378, 2370, 2415, 2342, 2320, 2362, 2321, 2353, 2327, 2314, 2418, 2388, 2333, 2401, 2386, 2332, 2334, 2402, 2315, 2380, 2337, 2340, 2364, 2385, 2391, 2328, 2348, 2395, 2355, 2338, 2360, 2398, 2357, 2330, 2374, 2349, 2382, 2373, 2377, 2383, 2369, 2376, 2354, 2339, 2371, 2335, 2347, 2379, 2394, 2399, 2324, 2381, 2359, 2336, 2351, 2329, 2390, 2358, 2393, 2331, 2400, 2397, 2392, 2368, 2363, 2323, 2345, 2352, 2313, 2319, 2317, 2350, 2366, 2372, 2344, 2322, 2396, 2367, 2343, 2365, 2387]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</c22><c4>(</c4><c12><a href="../libstd/fmt/rt.rs.html#n169505">"Discovering&nbsp;output&nbsp;</a></c12><c3>{}</c3><c12><a href="../libstd/fmt/rt.rs.html#n169505">&nbsp;</a></c12><c3>{}</c3><c12><a href="../libstd/fmt/rt.rs.html#n169505">&nbsp;</a></c12><c3>{}</c3><c12><a href="../libstd/fmt/rt.rs.html#n169505">"</a></c12><c3>,</c3><c22>&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#313">dependency_kind</a></c26><c3>,</c3><c22>&nbsp;</c22><c26><a href="../libstd/fmt/mod.rs.html#n171474">dependency_name</a></c26><c3>,</c3><c22>&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#316">dependency_val</a></c26><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;317</ln><a id="317">&nbsp;</a><a id="n[2425, 2426, 2432, 2427, 2433, 2424, 2429, 2428]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#312">self</a></c26><c24><a href="../libworkcache/lib.rs.html#247">.discovered_outputs</a></c24><c13><a href="../libworkcache/lib.rs.html#129">.insert_work_key</a></c13><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#110">WorkKey::new</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#313">dependency_kind</a></c26><c3>,</c3><c27><a href="../libworkcache/lib.rs.html#129">&nbsp;</a></c27><c26><a href="../libworkcache/lib.rs.html#314">dependency_name</a></c26><c4>)</c4><c3>,</c3><c13><a href="../libworkcache/lib.rs.html#129">
</a></c13><br/><ln>&nbsp;318</ln><a id="318">&nbsp;</a><a id="n[2430, 2431]">&nbsp;</a><c13><a href="../libworkcache/lib.rs.html#129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#315">dependency_val</a></c26><c10><a href="../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>())</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;319</ln><a id="319">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;320</ln><a id="320">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;321</ln><a id="321">&nbsp;</a><a id="n[]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c40>//&nbsp;returns&nbsp;pairs&nbsp;of&nbsp;(kind,&nbsp;name)
</c40><br/><ln>&nbsp;322</ln><a id="322">&nbsp;</a><a id="n[2441, 2445, 2447, 2435, 2438, 2513, 2443, 2446, 2444, 2440]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;lookup_discovered_inputs</c30><c4>(</c4><c20><a href="#322_36_refs">&amp;self</a></c20><c4>)</c4><c18>&nbsp;</c18><c4>-&gt;</c4><c18>&nbsp;</c18><c8>~</c8><c3>[</c3><c4>(</c4><c8>~str</c8><c3>,</c3><c8>&nbsp;~str</c8><c4>)</c4><c3>]</c3><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;323</ln><a id="323">&nbsp;</a><a id="n[2450, 2453, 2452, 2451, 2449, 2448]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#323_12_refs">&nbsp;rs</a></c20><c16>&nbsp;=&nbsp;~</c16><c3>[];</c3><c22>
</c22><br/><ln>&nbsp;324</ln><a id="324">&nbsp;</a><a id="n[2459, 2455, 2458, 2460, 2456, 2454, 2457]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="c=0 n=641">WorkMap</a></c20><c4>(</c4><c20><a href="#324_20_refs">ref&nbsp;discovered_inputs</a></c20><c4>)</c4><c16>&nbsp;=&nbsp;</c16><c26><a href="../libworkcache/lib.rs.html#322">self</a></c26><c24><a href="../libworkcache/lib.rs.html#246">.discovered_inputs</a></c24><c3>;</c3><c22>
</c22><br/><ln>&nbsp;325</ln><a id="325">&nbsp;</a><a id="n[2463, 2465, 2509, 2462, 2472, 2466, 2468, 2470, 2512, 2464, 2469, 2508, 2461, 2473, 2510, 2467, 2511, 2471, 2481]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>for</c21><c21><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c21><c4>(</c4><c20><a href="#325_13_refs">k</a></c20><c3>,</c3><c20><a href="../libworkcache/lib.rs.html#325">&nbsp;</a></c20><c20><a href="#325_16_refs">v</a></c20><c4>)</c4><c21><a href="../libcollections/treemap.rs.html#n24997">&nbsp;in&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#324">discovered_inputs</a></c26><c10><a href="../libcollections/treemap.rs.html#n24154">.iter</a></c10><c4>()</c4><c21><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c21><c3>{</c3><c22><a href="#325_8_refs">
</a></c22><br/><ln>&nbsp;326</ln><a id="326">&nbsp;</a><a id="n[2480, 2475, 2479, 2477, 2476, 2478, 2474]">&nbsp;</a><c22><a href="#325_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#325_8_refs">&nbsp;</a></c22><c20><a href="c=0 n=834">KindMap</a></c20><c4>(</c4><c20><a href="#326_24_refs">ref&nbsp;vmap</a></c20><c4>)</c4><c16><a href="../libworkcache/lib.rs.html#325">&nbsp;=&nbsp;</a></c16><c5><a href="../libworkcache/lib.rs.html#325">*</a></c5><c26><a href="../libworkcache/lib.rs.html#325">v</a></c26><c3>;</c3><c22><a href="#325_8_refs">
</a></c22><br/><ln>&nbsp;327</ln><a id="327">&nbsp;</a><a id="n[2505, 2504, 2486, 2507, 2485, 2492, 2488, 2506, 2484, 2482, 2493, 2487, 2503, 2483, 2489, 2490, 2494, 2491]">&nbsp;</a><c22><a href="#325_8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c20><a href="../libstd/option.rs.html#n104341">&nbsp;</a></c20><c4>(</c4><c20><a href="#327_17_refs">k1</a></c20><c3>,</c3><c20><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c20><c20><a href="#327_12_refs">_</a></c20><c4>)</c4><c20><a href="../libstd/option.rs.html#n104341">&nbsp;in&nbsp;</a></c20><c26><a href="../libworkcache/lib.rs.html#326">vmap</a></c26><c10><a href="../libcollections/treemap.rs.html#n24154">.iter</a></c10><c4>()</c4><c20><a href="../libstd/option.rs.html#n104341">&nbsp;</a></c20><c3>{</c3><c22><a href="../libworkcache/lib.rs.html#325">
</a></c22><br/><ln>&nbsp;328</ln><a id="328">&nbsp;</a><a id="n[2499, 2496, 2502, 2495, 2501, 2498, 2500, 2497]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#325">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#323">rs</a></c26><c10><a href="../libstd/slice.rs.html#n50952">.push</a></c10><c4>((</c4><c26><a href="../libworkcache/lib.rs.html#327">k1</a></c26><c10><a href="../libstd/str.rs.html#n69206">.clone</a></c10><c4>()</c4><c3>,</c3><c14><a href="../libstd/slice.rs.html#n50952">&nbsp;</a></c14><c26><a href="../libworkcache/lib.rs.html#325">k</a></c26><c10><a href="../libstd/str.rs.html#n69206">.clone</a></c10><c4>()))</c4><c3>;</c3><c22><a href="../libworkcache/lib.rs.html#325">
</a></c22><br/><ln>&nbsp;329</ln><a id="329">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#325">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c20><a href="../libstd/option.rs.html#n104341">
</a></c20><br/><ln>&nbsp;330</ln><a id="330">&nbsp;</a><a id="n[]">&nbsp;</a><c20><a href="../libstd/option.rs.html#n104341">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c20><c3>}</c3><c21><a href="../libcollections/treemap.rs.html#n24997">
</a></c21><br/><ln>&nbsp;331</ln><a id="331">&nbsp;</a><a id="n[2514]">&nbsp;</a><c21><a href="../libcollections/treemap.rs.html#n24997">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#323">rs</a></c26><c22>
</c22><br/><ln>&nbsp;332</ln><a id="332">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;333</ln><a id="333">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;334</ln><a id="334">&nbsp;</a><a id="n[2515]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;335</ln><a id="335">&nbsp;</a><a id="n[2519]">&nbsp;</a><c33>impl</c33><c5>&lt;'a&gt;</c5><c33>&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#238">Prep</a></c33><c5><a href="../libworkcache/lib.rs.html#238">&lt;'a&gt;</a></c5><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;336</ln><a id="336">&nbsp;</a><a id="n[2536, 2525, 2526, 2535, 2532, 2520, 2530, 2531, 2524]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#336_4_refs">&nbsp;new</a></c30><c4>(</c4><c20><a href="#336_11_refs">ctxt</a></c20><c18><a href="#336_4_refs">:&nbsp;</a></c18><c8><a href="#336_4_refs">&amp;'a&nbsp;</a></c8><c8><a href="../libworkcache/lib.rs.html#226">Context</a></c8><c3>,</c3><c18><a href="#336_4_refs">&nbsp;</a></c18><c20><a href="#336_30_refs">fn_name</a></c20><c18><a href="#336_4_refs">:&nbsp;</a></c18><c8><a href="#336_4_refs">&amp;'a&nbsp;str</a></c8><c4>)</c4><c18><a href="#336_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#336_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#238">Prep&lt;'a&gt;</a></c8><c18><a href="#336_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#336_4_refs">
</a></c22><br/><ln>&nbsp;337</ln><a id="337">&nbsp;</a><a id="n[2541]">&nbsp;</a><c22><a href="#336_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c1><a href="../libworkcache/lib.rs.html#238">Prep&nbsp;</a></c1><c3>{</c3><c1><a href="../libworkcache/lib.rs.html#238">
</a></c1><br/><ln>&nbsp;338</ln><a id="338">&nbsp;</a><a id="n[2537]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#238">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctxt:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#336">ctxt</a></c26><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#238">
</a></c1><br/><ln>&nbsp;339</ln><a id="339">&nbsp;</a><a id="n[2538]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#238">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn_name:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#336">fn_name</a></c26><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#238">
</a></c1><br/><ln>&nbsp;340</ln><a id="340">&nbsp;</a><a id="n[2539, 2540]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#238">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;declared_inputs:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#127">WorkMap::new</a></c26><c4>()</c4><c1><a href="../libworkcache/lib.rs.html#238">
</a></c1><br/><ln>&nbsp;341</ln><a id="341">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#238">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c22><a href="#336_4_refs">
</a></c22><br/><ln>&nbsp;342</ln><a id="342">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#336_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;343</ln><a id="343">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;344</ln><a id="344">&nbsp;</a><a id="n[2549, 2545, 2542, 2548, 2613, 2547, 2550]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;lookup_declared_inputs</c30><c4>(</c4><c20><a href="#344_34_refs">&amp;self</a></c20><c4>)</c4><c18>&nbsp;</c18><c4>-&gt;</c4><c18>&nbsp;</c18><c8>~</c8><c3>[</c3><c8>~str</c8><c3>]</c3><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;345</ln><a id="345">&nbsp;</a><a id="n[2554, 2552, 2551, 2553, 2556, 2555]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#345_12_refs">&nbsp;rs</a></c20><c13>&nbsp;=&nbsp;</c13><c16>~</c16><c3>[];</c3><c22>
</c22><br/><ln>&nbsp;346</ln><a id="346">&nbsp;</a><a id="n[2557, 2558, 2562, 2559, 2561, 2560, 2563]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="c=0 n=641">WorkMap</a></c20><c4>(</c4><c20><a href="#346_20_refs">ref&nbsp;declared_inputs</a></c20><c4>)</c4><c13>&nbsp;=&nbsp;</c13><c26><a href="../libworkcache/lib.rs.html#344">self</a></c26><c24><a href="../libworkcache/lib.rs.html#242">.declared_inputs</a></c24><c3>;</c3><c22>
</c22><br/><ln>&nbsp;347</ln><a id="347">&nbsp;</a><a id="n[2584, 2575, 2572, 2571, 2573, 2567, 2564, 2612, 2565, 2576, 2569, 2610, 2574, 2611, 2570, 2608, 2609, 2568, 2566]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>for</c21><c5><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c5><c4>(</c4><c20><a href="../libstd/option.rs.html#n104337">_</a></c20><c3>,</c3><c20><a href="../libstd/option.rs.html#n104337">&nbsp;</a></c20><c20><a href="#347_16_refs">v</a></c20><c4>)</c4><c5><a href="../libcollections/treemap.rs.html#n24997">&nbsp;in&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#346">declared_inputs</a></c26><c10><a href="../libcollections/treemap.rs.html#n24154">.iter</a></c10><c4>()</c4><c5><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c5><c3>{</c3><c22><a href="../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;348</ln><a id="348">&nbsp;</a><a id="n[2582, 2577, 2580, 2583, 2579, 2578, 2581]">&nbsp;</a><c22><a href="../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../libstd/option.rs.html#n104337">&nbsp;</a></c22><c20><a href="c=0 n=834">KindMap</a></c20><c4>(</c4><c20><a href="#348_24_refs">ref&nbsp;vmap</a></c20><c4>)</c4><c13><a href="../libstd/option.rs.html#n104337">&nbsp;=&nbsp;</a></c13><c5><a href="../libstd/option.rs.html#n104337">*</a></c5><c26><a href="../libworkcache/lib.rs.html#347">v</a></c26><c3>;</c3><c22><a href="../libstd/option.rs.html#n104337">
</a></c22><br/><ln>&nbsp;349</ln><a id="349">&nbsp;</a><a id="n[2587, 2597, 2588, 2603, 2585, 2592, 2590, 2596, 2591, 2589, 2594, 2595, 2586, 2607, 2605, 2604, 2606, 2593]">&nbsp;</a><c22><a href="../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c1><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c1><c4>(</c4><c20><a href="#349_17_refs">inp</a></c20><c3>,</c3><c20><a href="../libworkcache/lib.rs.html#349">&nbsp;_</a></c20><c4>)</c4><c1><a href="../libcollections/treemap.rs.html#n24997">&nbsp;in&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#348">vmap</a></c26><c10><a href="../libcollections/treemap.rs.html#n24154">.iter</a></c10><c4>()</c4><c1><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c1><c3>{</c3><c22><a href="#349_12_refs">
</a></c22><br/><ln>&nbsp;350</ln><a id="350">&nbsp;</a><a id="n[2602, 2600, 2601, 2598, 2599]">&nbsp;</a><c22><a href="#349_12_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#345">rs</a></c26><c10><a href="../libstd/slice.rs.html#n50952">.push</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#349">inp</a></c26><c10><a href="../libstd/str.rs.html#n69206">.clone</a></c10><c4>())</c4><c3>;</c3><c22><a href="#349_12_refs">
</a></c22><br/><ln>&nbsp;351</ln><a id="351">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#349_12_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c1><a href="../libcollections/treemap.rs.html#n24997">
</a></c1><br/><ln>&nbsp;352</ln><a id="352">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../libcollections/treemap.rs.html#n24997">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>}</c3><c5><a href="../libcollections/treemap.rs.html#n24997">
</a></c5><br/><ln>&nbsp;353</ln><a id="353">&nbsp;</a><a id="n[2614]">&nbsp;</a><c5><a href="../libcollections/treemap.rs.html#n24997">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#345">rs</a></c26><c22>
</c22><br/><ln>&nbsp;354</ln><a id="354">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;355</ln><a id="355">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;356</ln><a id="356">&nbsp;</a><a id="n[2615]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;357</ln><a id="357">&nbsp;</a><a id="n[2619]">&nbsp;</a><c33>impl</c33><c5>&lt;'a&gt;</c5><c33>&nbsp;</c33><c33><a href="../libworkcache/lib.rs.html#238">Prep</a></c33><c5><a href="../libworkcache/lib.rs.html#238">&lt;'a&gt;</a></c5><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;358</ln><a id="358">&nbsp;</a><a id="n[2623, 2636, 2632, 2793, 2620, 2639, 2627, 2626, 2638, 2637, 2628, 2633, 2631]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;declare_input</c30><c4>(</c4><c20><a href="#358_25_refs">&amp;mut&nbsp;self</a></c20><c3>,</c3><c18>&nbsp;</c18><c20><a href="#358_36_refs">kind</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c3>,</c3><c18>&nbsp;</c18><c20><a href="#358_48_refs">name</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c3>,</c3><c18>&nbsp;</c18><c20><a href="#358_60_refs">val</a></c20><c18>:&nbsp;</c18><c8>&amp;str</c8><c4>)</c4><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;359</ln><a id="359">&nbsp;</a><a id="n[2703, 2715, 2777, 2680, 2720, 2714, 2752, 2748, 2725, 2708, 2735, 2728, 2696, 2739, 2721, 2746, 2672, 2727, 2760, 2705, 2734, 2674, 2711, 2753, 2718, 2700, 2683, 2757, 2709, 2751, 2677, 2702, 2704, 2740, 2678, 2741, 2737, 2723, 2736, 2732, 2756, 2759, 2745, 2754, 2713, 2707, 2687, 2749, 2744, 2761, 2694, 2747, 2710, 2693, 2688, 2673, 2686, 2726, 2706, 2712, 2758, 2676, 2724, 2691, 2742, 2755, 2675, 2731, 2679, 2733, 2729, 2699, 2692, 2701, 2690, 2681, 2774, 2717, 2750, 2743, 2716, 2722, 2738, 2719, 2695, 2689, 2697, 2698, 2730, 2682]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</c22><c4>(</c4><c20><a href="../libstd/fmt/rt.rs.html#n169505">"Declaring&nbsp;input&nbsp;</a></c20><c3>{}</c3><c20><a href="../libstd/fmt/rt.rs.html#n169505">&nbsp;</a></c20><c3>{}</c3><c20><a href="../libstd/fmt/rt.rs.html#n169505">&nbsp;</a></c20><c3>{}</c3><c20><a href="../libstd/fmt/rt.rs.html#n169505">"</a></c20><c3>,</c3><c22>&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#359">kind</a></c26><c3>,</c3><c22>&nbsp;</c22><c27><a href="../libworkcache/lib.rs.html#359">name</a></c27><c3>,</c3><c22>&nbsp;</c22><c20><a href="#359_55_refs">val</a></c20><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;360</ln><a id="360">&nbsp;</a><a id="n[2784, 2792, 2785, 2787, 2786, 2791, 2788, 2783]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#358">self</a></c26><c24><a href="../libworkcache/lib.rs.html#242">.declared_inputs</a></c24><c10><a href="../libworkcache/lib.rs.html#129">.insert_work_key</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#110">WorkKey::new</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#358">kind</a></c26><c3>,</c3><c27><a href="../libworkcache/lib.rs.html#129">&nbsp;</a></c27><c26><a href="../libworkcache/lib.rs.html#358">name</a></c26><c4>)</c4><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#129">
</a></c10><br/><ln>&nbsp;361</ln><a id="361">&nbsp;</a><a id="n[2789, 2790]">&nbsp;</a><c10><a href="../libworkcache/lib.rs.html#129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c10><c26><a href="../libworkcache/lib.rs.html#358">val</a></c26><c10><a href="../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>())</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;362</ln><a id="362">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;363</ln><a id="363">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;364</ln><a id="364">&nbsp;</a><a id="n[2801, 2806, 2797, 2794, 2800, 2802, 2805, 2807]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#364_4_refs">&nbsp;is_fresh</a></c30><c4>(</c4><c20><a href="#364_16_refs">&amp;self</a></c20><c3>,</c3><c18><a href="#364_4_refs">&nbsp;</a></c18><c20><a href="#364_23_refs">cat</a></c20><c18><a href="#364_4_refs">:&nbsp;</a></c18><c8><a href="#364_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#364_4_refs">&nbsp;</a></c18><c20><a href="#364_34_refs">kind</a></c20><c18><a href="#364_4_refs">:&nbsp;</a></c18><c8><a href="#364_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#364_4_refs">
</a></c18><br/><ln>&nbsp;365</ln><a id="365">&nbsp;</a><a id="n[2817, 2812, 3375, 2819, 2811, 2815, 2810, 2816]">&nbsp;</a><c18><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#365_16_refs">name</a></c20><c18><a href="#364_4_refs">:&nbsp;</a></c18><c8><a href="#364_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#364_4_refs">&nbsp;</a></c18><c20><a href="#365_28_refs">val</a></c20><c18><a href="#364_4_refs">:&nbsp;</a></c18><c8><a href="#364_4_refs">&amp;str</a></c8><c4>)</c4><c18><a href="#364_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#364_4_refs">&nbsp;</a></c18><c8><a href="#364_4_refs">bool</a></c8><c18><a href="#364_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;366</ln><a id="366">&nbsp;</a><a id="n[2824, 2821, 2825, 2820, 2822, 2823]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#364_4_refs">&nbsp;</a></c22><c20><a href="#366_12_refs">k</a></c20><c16><a href="#364_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libworkcache/lib.rs.html#364">kind</a></c26><c10><a href="../libstd/str.rs.html#n66924">.to_owned</a></c10><c4>()</c4><c3>;</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;367</ln><a id="367">&nbsp;</a><a id="n[2833, 2831, 2829, 2826, 2828, 2836, 2827, 2835, 2830, 2832, 2834]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#364_4_refs">&nbsp;</a></c22><c20><a href="#367_12_refs">f</a></c20><c13><a href="#364_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#364">self</a></c26><c24><a href="../libworkcache/lib.rs.html#240">.ctxt</a></c24><c24><a href="../libworkcache/lib.rs.html#236">.freshness</a></c24><c10><a href="../libsync/arc.rs.html#n167">.deref</a></c10><c4>()</c4><c10><a href="../libcollections/treemap.rs.html#n23950">.find</a></c10><c4>(</c4><c5><a href="../libcollections/treemap.rs.html#n23950">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#366">k</a></c26><c4>)</c4><c3>;</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;368</ln><a id="368">&nbsp;</a><a id="n[2943, 2977, 2871, 2927, 2968, 2941, 2888, 2906, 2966, 2928, 2953, 2938, 2900, 2892, 2874, 2869, 2936, 2972, 2960, 2893, 2967, 2922, 2940, 2894, 2970, 2937, 2891, 2962, 2896, 2887, 2872, 2880, 2903, 2901, 2949, 2908, 2881, 2964, 2995, 2912, 2877, 2931, 2948, 2905, 2965, 2875, 2975, 2911, 2969, 2930, 2950, 2895, 2919, 2878, 2958, 2925, 2974, 2955, 2889, 2910, 2883, 2935, 2873, 2918, 2932, 2952, 2961, 2946, 2882, 2959, 2904, 2898, 2947, 2870, 2921, 2886, 2902, 2899, 2924, 2907, 2914, 2923, 2909, 2933, 2939, 2915, 2876, 2879, 2992, 2973, 2916, 2976, 2917, 2957, 2945, 2926, 2934, 2913, 2956, 2920, 2951, 2971, 2890, 2978, 2897, 2944, 2954, 2942, 2963, 2979, 2929]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c1><a href="../libstd/fmt/rt.rs.html#n169463">"freshness&nbsp;for:&nbsp;</a></c1><c3>{}</c3><c1><a href="../libstd/fmt/rt.rs.html#n169463">/</a></c1><c3>{}</c3><c1><a href="../libstd/fmt/rt.rs.html#n169463">/</a></c1><c3>{}</c3><c1><a href="../libstd/fmt/rt.rs.html#n169463">/</a></c1><c3>{}</c3><c1><a href="../libstd/fmt/rt.rs.html#n169463">"</a></c1><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n169877">cat</a></c26><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n171474">kind</a></c26><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n169877">name</a></c26><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n169877">val</a></c26><c4>)</c4><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;369</ln><a id="369">&nbsp;</a><a id="n[3003, 3002, 3001, 3087, 3088, 3004]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#364_4_refs">&nbsp;</a></c22><c20><a href="#369_12_refs">fresh</a></c20><c13><a href="#364_4_refs">&nbsp;=&nbsp;</a></c13><c21><a href="#364_4_refs">match&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#367">f</a></c26><c21><a href="#364_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#364_4_refs">
</a></c21><br/><ln>&nbsp;370</ln><a id="370">&nbsp;</a><a id="n[3023, 3047, 3024, 3052, 3063, 3045, 3069, 3064, 3049, 3040, 3034, 3078, 3062, 3039, 3031, 3055, 3061, 3057, 3044, 3030, 3029, 3035, 3070, 3046, 3056, 3041, 3005, 3025, 3050, 3032, 3038, 3033, 3068, 3037, 3076, 3066, 3065, 3073, 3026, 3053, 3021, 3058, 3071, 3060, 3036, 3048, 3043, 3067, 3022, 3051, 3054, 3059, 3042]">&nbsp;</a><c21><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/option.rs.html#n104337">None</a></c20><c21><a href="#364_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#364_4_refs">&nbsp;</a></c21><c22><a href="#364_4_refs">fail!</a></c22><c4>(</c4><c1><a href="../libstd/fmt/rt.rs.html#n169479">"missing&nbsp;freshness-function&nbsp;for&nbsp;'</a></c1><c3>{}</c3><c1><a href="../libstd/fmt/rt.rs.html#n169479">'"</a></c1><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n171474">kind</a></c26><c4>)</c4><c3>,</c3><c21><a href="#364_4_refs">
</a></c21><br/><ln>&nbsp;371</ln><a id="371">&nbsp;</a><a id="n[3082, 3085, 3079, 3084, 3083, 3086, 3080, 3081]">&nbsp;</a><c21><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/option.rs.html#n104341">Some</a></c20><c4>(</c4><c20><a href="#371_17_refs">f</a></c20><c4>)</c4><c21><a href="#364_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#364_4_refs">&nbsp;</a></c21><c4>(</c4><c5><a href="#364_4_refs">*</a></c5><c26><a href="../libworkcache/lib.rs.html#371">f</a></c26><c4>)(</c4><c26><a href="../libworkcache/lib.rs.html#365">name</a></c26><c3>,</c3><c27><a href="#364_4_refs">&nbsp;</a></c27><c26><a href="../libworkcache/lib.rs.html#365">val</a></c26><c4>)</c4><c21><a href="#364_4_refs">
</a></c21><br/><ln>&nbsp;372</ln><a id="372">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>};</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;373</ln><a id="373">&nbsp;</a><a id="n[3374, 3230, 3089, 3373]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="#364_4_refs">&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#369">fresh</a></c26><c21><a href="#364_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;374</ln><a id="374">&nbsp;</a><a id="n[3162, 3147, 3192, 3163, 3158, 3130, 3150, 3169, 3195, 3189, 3196, 3139, 3197, 3122, 3120, 3164, 3137, 3154, 3182, 3138, 3156, 3175, 3160, 3167, 3225, 3157, 3141, 3134, 3180, 3131, 3151, 3165, 3126, 3127, 3191, 3149, 3209, 3128, 3145, 3187, 3199, 3124, 3179, 3142, 3136, 3121, 3208, 3188, 3143, 3152, 3202, 3140, 3201, 3172, 3190, 3194, 3144, 3168, 3184, 3153, 3159, 3173, 3178, 3186, 3185, 3174, 3177, 3176, 3135, 3148, 3125, 3161, 3198, 3181, 3200, 3129, 3166, 3123, 3207, 3171, 3146, 3204, 3193, 3155, 3203, 3205, 3183, 3170, 3222, 3206]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info!</a></c22><c4>(</c4><c27><a href="../libworkcache/lib.rs.html#374">"</a></c27><c3>{}</c3><c27><a href="../libworkcache/lib.rs.html#374">&nbsp;</a></c27><c3>{}</c3><c27><a href="../libworkcache/lib.rs.html#374">:</a></c27><c3>{}</c3><c27><a href="../libworkcache/lib.rs.html#374">&nbsp;is&nbsp;fresh"</a></c27><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n169877">cat</a></c26><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c5><a href="../libworkcache/lib.rs.html#374">kind</a></c5><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n169877">name</a></c26><c4>)</c4><c3>;</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;375</ln><a id="375">&nbsp;</a><a id="n[3372, 3371]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#364_4_refs">&nbsp;</a></c21><c21>else</c21><c21><a href="#364_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;376</ln><a id="376">&nbsp;</a><a id="n[3276, 3308, 3326, 3366, 3322, 3265, 3342, 3325, 3320, 3335, 3299, 3270, 3292, 3317, 3363, 3275, 3287, 3313, 3327, 3311, 3305, 3271, 3314, 3336, 3341, 3282, 3278, 3296, 3312, 3293, 3309, 3284, 3297, 3349, 3330, 3285, 3318, 3279, 3321, 3288, 3283, 3346, 3295, 3340, 3294, 3332, 3310, 3263, 3300, 3307, 3350, 3268, 3262, 3345, 3280, 3298, 3266, 3334, 3328, 3272, 3302, 3304, 3316, 3281, 3324, 3286, 3267, 3319, 3303, 3306, 3301, 3339, 3347, 3323, 3344, 3333, 3338, 3264, 3337, 3329, 3261, 3315, 3343, 3291, 3290, 3277, 3289, 3269, 3348, 3331]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info!</a></c22><c4>(</c4><c22><a href="../libstd/fmt/rt.rs.html#n169453">"</a></c22><c3>{}</c3><c22><a href="../libstd/fmt/rt.rs.html#n169453">&nbsp;</a></c22><c3>{}</c3><c22><a href="../libstd/fmt/rt.rs.html#n169453">:</a></c22><c3>{}</c3><c22><a href="../libstd/fmt/rt.rs.html#n169453">&nbsp;is&nbsp;not&nbsp;fresh"</a></c22><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#364">cat</a></c26><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#376">kind</a></c26><c3>,</c3><c22><a href="#364_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n171474">name</a></c26><c4>)</c4><c3>;</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;377</ln><a id="377">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;378</ln><a id="378">&nbsp;</a><a id="n[3376]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#369">fresh</a></c26><c22><a href="#364_4_refs">
</a></c22><br/><ln>&nbsp;379</ln><a id="379">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#364_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;380</ln><a id="380">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;381</ln><a id="381">&nbsp;</a><a id="n[3462, 3383, 3385, 3388, 3392, 3380, 3390, 3389, 3384, 3377]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#381_4_refs">&nbsp;all_fresh</a></c30><c4>(</c4><c20><a href="#381_17_refs">&amp;self</a></c20><c3>,</c3><c18><a href="#381_4_refs">&nbsp;</a></c18><c20><a href="#381_24_refs">cat</a></c20><c18><a href="#381_4_refs">:&nbsp;</a></c18><c8><a href="#381_4_refs">&amp;str</a></c8><c3>,</c3><c18><a href="#381_4_refs">&nbsp;</a></c18><c20><a href="#381_35_refs">map</a></c20><c18><a href="#381_4_refs">:&nbsp;</a></c18><c8><a href="#381_4_refs">&amp;</a></c8><c8><a href="../libworkcache/lib.rs.html#120">WorkMap</a></c8><c4>)</c4><c18><a href="#381_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#381_4_refs">&nbsp;</a></c18><c8><a href="#381_4_refs">bool</a></c8><c18><a href="#381_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#381_4_refs">
</a></c22><br/><ln>&nbsp;382</ln><a id="382">&nbsp;</a><a id="n[3395, 3399, 3396, 3397, 3393, 3398, 3394]">&nbsp;</a><c22><a href="#381_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#381_4_refs">&nbsp;</a></c22><c20><a href="c=0 n=641">WorkMap</a></c20><c4>(</c4><c20><a href="#382_20_refs">ref&nbsp;map</a></c20><c4>)</c4><c16><a href="#381_4_refs">&nbsp;=&nbsp;</a></c16><c5><a href="#381_4_refs">*</a></c5><c26><a href="../libworkcache/lib.rs.html#381">map</a></c26><c3>;</c3><c22><a href="#381_4_refs">
</a></c22><br/><ln>&nbsp;383</ln><a id="383">&nbsp;</a><a id="n[3457, 3404, 3409, 3400, 3455, 3401, 3402, 3456, 3403, 3410, 3405, 3420, 3458, 3412, 3406, 3454, 3408, 3411, 3407]">&nbsp;</a><c22><a href="#381_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c20><a href="../libstd/option.rs.html#n104337">&nbsp;</a></c20><c4>(</c4><c20><a href="#383_13_refs">k_name</a></c20><c3>,</c3><c20><a href="../libcollections/treemap.rs.html#n24997">&nbsp;</a></c20><c20><a href="#383_21_refs">kindmap</a></c20><c4>)</c4><c20><a href="../libstd/option.rs.html#n104337">&nbsp;in&nbsp;</a></c20><c26><a href="../libworkcache/lib.rs.html#382">map</a></c26><c10><a href="../libcollections/treemap.rs.html#n24154">.iter</a></c10><c4>()</c4><c20><a href="../libstd/option.rs.html#n104337">&nbsp;</a></c20><c3>{</c3><c22><a href="../libworkcache/lib.rs.html#383">
</a></c22><br/><ln>&nbsp;384</ln><a id="384">&nbsp;</a><a id="n[3413, 3419, 3417, 3414, 3418, 3415, 3416]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#383">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="../libworkcache/lib.rs.html#383">&nbsp;</a></c22><c20><a href="c=0 n=834">KindMap</a></c20><c4>(</c4><c20><a href="#384_24_refs">ref&nbsp;kindmap_</a></c20><c4>)</c4><c13><a href="#383_8_refs">&nbsp;=&nbsp;</a></c13><c5><a href="#383_8_refs">*</a></c5><c26><a href="../libworkcache/lib.rs.html#383">kindmap</a></c26><c3>;</c3><c22><a href="../libworkcache/lib.rs.html#383">
</a></c22><br/><ln>&nbsp;385</ln><a id="385">&nbsp;</a><a id="n[3430, 3423, 3453, 3452, 3426, 3421, 3422, 3432, 3450, 3451, 3431, 3433, 3429, 3427, 3428, 3425, 3424, 3434]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#383">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>for</c21><c20><a href="#385_12_refs">&nbsp;</a></c20><c4>(</c4><c20><a href="#385_17_refs">k_kind</a></c20><c3>,</c3><c20><a href="../libworkcache/lib.rs.html#385">&nbsp;</a></c20><c20><a href="#385_25_refs">v</a></c20><c4>)</c4><c20><a href="#385_12_refs">&nbsp;in&nbsp;</a></c20><c26><a href="../libworkcache/lib.rs.html#384">kindmap_</a></c26><c10><a href="../libcollections/treemap.rs.html#n24154">.iter</a></c10><c4>()</c4><c20><a href="#385_12_refs">&nbsp;</a></c20><c3>{</c3><c22><a href="../libworkcache/lib.rs.html#385">
</a></c22><br/><ln>&nbsp;386</ln><a id="386">&nbsp;</a><a id="n[3444, 3438, 3439, 3448, 3437, 3441, 3435, 3436, 3440, 3449, 3442, 3443]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#385">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>if</c21><c21><a href="../libworkcache/lib.rs.html#385">&nbsp;</a></c21><c5><a href="../libworkcache/lib.rs.html#385">!&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#381">self</a></c26><c10><a href="../libworkcache/lib.rs.html#364">.is_fresh</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#381">cat</a></c26><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#364">&nbsp;</a></c10><c5><a href="../libworkcache/lib.rs.html#385">*</a></c5><c26><a href="../libworkcache/lib.rs.html#385">k_kind</a></c26><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#364">&nbsp;</a></c10><c5><a href="../libworkcache/lib.rs.html#385">*</a></c5><c26><a href="../libworkcache/lib.rs.html#383">k_name</a></c26><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#364">&nbsp;</a></c10><c5><a href="../libworkcache/lib.rs.html#385">*</a></c5><c26><a href="../libworkcache/lib.rs.html#385">v</a></c26><c4>)</c4><c21><a href="../libworkcache/lib.rs.html#385">&nbsp;</a></c21><c3>{</c3><c22><a href="../libworkcache/lib.rs.html#385">
</a></c22><br/><ln>&nbsp;387</ln><a id="387">&nbsp;</a><a id="n[3447, 3446, 3445]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#385">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>return</c21><c1><a href="../libworkcache/lib.rs.html#385">&nbsp;</a></c1><c12><a href="../libworkcache/lib.rs.html#385">false</a></c12><c3>;</c3><c22><a href="../libworkcache/lib.rs.html#385">
</a></c22><br/><ln>&nbsp;388</ln><a id="388">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#385">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22><a href="../libworkcache/lib.rs.html#385">
</a></c22><br/><ln>&nbsp;389</ln><a id="389">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="../libworkcache/lib.rs.html#385">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c20><a href="#385_12_refs">
</a></c20><br/><ln>&nbsp;390</ln><a id="390">&nbsp;</a><a id="n[]">&nbsp;</a><c20><a href="#385_12_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c20><c3>}</c3><c20><a href="../libstd/option.rs.html#n104337">
</a></c20><br/><ln>&nbsp;391</ln><a id="391">&nbsp;</a><a id="n[3459, 3460, 3461]">&nbsp;</a><c20><a href="../libstd/option.rs.html#n104337">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c20><c21>return</c21><c13><a href="#381_4_refs">&nbsp;</a></c13><c12><a href="#381_4_refs">true</a></c12><c3>;</c3><c22><a href="#381_4_refs">
</a></c22><br/><ln>&nbsp;392</ln><a id="392">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#381_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;393</ln><a id="393">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;394</ln><a id="394">&nbsp;</a><a id="n[3463, 3465]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18>&nbsp;</c18><c30>fn&nbsp;exec</c30><c5>&lt;'a,&nbsp;T:</c5><c5><a href="../libstd/kinds.rs.html#n74367">Send</a></c5><c5>&nbsp;+
</c5><br/><ln>&nbsp;395</ln><a id="395">&nbsp;</a><a id="n[3468, 3469]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c1><a href="../libserialize/serialize.rs.html#n1009">Encodable&lt;</a></c1><c8><a href="../libserialize/json.rs.html#n22392">json::Encoder&lt;'a&gt;</a></c8><c1><a href="../libserialize/serialize.rs.html#n1009">&gt;</a></c1><c18>&nbsp;+
</c18><br/><ln>&nbsp;396</ln><a id="396">&nbsp;</a><a id="n[3472, 3471]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c1><a href="../libserialize/serialize.rs.html#n1022">Decodable&lt;</a></c1><c8><a href="../libserialize/json.rs.html#n30598">json::Decoder</a></c8><c1><a href="../libserialize/serialize.rs.html#n1022">&gt;</a></c1><c18>&gt;</c18><c4>(</c4><c18>
</c18><br/><ln>&nbsp;397</ln><a id="397">&nbsp;</a><a id="n[3490, 3489, 3487, 3481, 3486, 3477, 3482, 3485]">&nbsp;</a><c18>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c18><c20><a href="#397_12_refs">&amp;'a&nbsp;self</a></c20><c3>,</c3><c18>&nbsp;</c18><c20><a href="#397_22_refs">blk</a></c20><c18>:&nbsp;</c18><c8>proc</c8><c4>(</c4><c8>&amp;mut&nbsp;</c8><c8><a href="../libworkcache/lib.rs.html#244">Exec</a></c8><c4>)</c4><c8>&nbsp;</c8><c4>-&gt;</c4><c8>&nbsp;</c8><c8><a href="c=0 n=3464">T</a></c8><c4>)</c4><c18>&nbsp;</c18><c4>-&gt;</c4><c18>&nbsp;</c18><c8><a href="c=0 n=3464">T</a></c8><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;398</ln><a id="398">&nbsp;</a><a id="n[3491, 3492, 3493, 3494]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="../libworkcache/lib.rs.html#397">self</a></c26><c10><a href="../libworkcache/lib.rs.html#401">.exec_work</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#397">blk</a></c26><c4>)</c4><c10><a href="../libworkcache/lib.rs.html#458">.unwrap</a></c10><c4>()</c4><c22>
</c22><br/><ln>&nbsp;399</ln><a id="399">&nbsp;</a><a id="n[]">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;400</ln><a id="400">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;401</ln><a id="401">&nbsp;</a><a id="n[3495, 3497]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn</c30><c30><a href="#401_4_refs">&nbsp;exec_work</a></c30><c5><a href="#401_4_refs">&lt;'a</a></c5><c5>,</c5><c5><a href="#401_4_refs">&nbsp;T:</a></c5><c5><a href="../libstd/kinds.rs.html#n74367">Send</a></c5><c5><a href="#401_4_refs">&nbsp;+
</a></c5><br/><ln>&nbsp;402</ln><a id="402">&nbsp;</a><a id="n[3500, 3501]">&nbsp;</a><c18><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c1><a href="../libserialize/serialize.rs.html#n1009">Encodable&lt;</a></c1><c8><a href="../libserialize/json.rs.html#n22392">json::Encoder&lt;'a&gt;</a></c8><c1><a href="../libserialize/serialize.rs.html#n1009">&gt;</a></c1><c18><a href="#401_4_refs">&nbsp;+
</a></c18><br/><ln>&nbsp;403</ln><a id="403">&nbsp;</a><a id="n[3503, 3504]">&nbsp;</a><c18><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c1><a href="../libserialize/serialize.rs.html#n1022">Decodable&lt;</a></c1><c8><a href="../libserialize/json.rs.html#n30598">json::Decoder</a></c8><c1><a href="../libserialize/serialize.rs.html#n1022">&gt;</a></c1><c18><a href="#401_4_refs">&gt;</a></c18><c4>(</c4><c18><a href="#401_4_refs">&nbsp;</a></c18><c40>//&nbsp;FIXME(#5121)
</c40><br/><ln>&nbsp;404</ln><a id="404">&nbsp;</a><a id="n[3524, 3513, 3517, 3522, 3509, 3519, 3518, 3679, 3514]">&nbsp;</a><c18><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c20><a href="#404_12_refs">&amp;'a&nbsp;self</a></c20><c3>,</c3><c18><a href="#401_4_refs">&nbsp;</a></c18><c20><a href="#404_22_refs">blk</a></c20><c18><a href="#401_4_refs">:&nbsp;</a></c18><c8><a href="#401_4_refs">proc</a></c8><c4>(</c4><c8><a href="#401_4_refs">&amp;mut&nbsp;</a></c8><c8><a href="../libworkcache/lib.rs.html#244">Exec</a></c8><c4>)</c4><c8><a href="#401_4_refs">&nbsp;</a></c8><c4>-&gt;</c4><c8><a href="#401_4_refs">&nbsp;</a></c8><c8><a href="c=0 n=3496">T</a></c8><c4>)</c4><c18><a href="#401_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#401_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#249">Work&lt;'a</a></c8><c3>,</c3><c8><a href="../libworkcache/lib.rs.html#249">&nbsp;</a></c8><c8><a href="c=0 n=3496">T</a></c8><c8><a href="../libworkcache/lib.rs.html#249">&gt;</a></c8><c18><a href="#401_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;405</ln><a id="405">&nbsp;</a><a id="n[3526, 3525, 3530, 3528, 3527, 3531, 3529]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#401_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#405_12_refs">&nbsp;bo</a></c20><c13><a href="#401_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libstd/option.rs.html#n104341">Some</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#404">blk</a></c26><c4>)</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;406</ln><a id="406">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;407</ln><a id="407">&nbsp;</a><a id="n[3608, 3599, 3600, 3632, 3631, 3622, 3601, 3585, 3571, 3564, 3574, 3611, 3610, 3614, 3605, 3587, 3604, 3607, 3613, 3580, 3621, 3573, 3595, 3566, 3582, 3584, 3597, 3570, 3598, 3623, 3602, 3594, 3590, 3591, 3596, 3586, 3634, 3579, 3650, 3606, 3627, 3609, 3629, 3615, 3589, 3612, 3624, 3578, 3626, 3581, 3630, 3628, 3616, 3583, 3633, 3577, 3603, 3565, 3625, 3592, 3647, 3588, 3593]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c27><a href="../libstd/fmt/rt.rs.html#n169505">"exec_work:&nbsp;looking&nbsp;up&nbsp;</a></c27><c3>{}</c3><c27><a href="../libstd/fmt/rt.rs.html#n169505">&nbsp;and&nbsp;</a></c27><c3>{</c3><c27><a href="../libstd/fmt/rt.rs.html#n169505">:?</a></c27><c3>}</c3><c27><a href="../libstd/fmt/rt.rs.html#n169505">"</a></c27><c3>,</c3><c22><a href="#401_4_refs">&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c24><a href="../libworkcache/lib.rs.html#241">.fn_name</a></c24><c3>,</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;408</ln><a id="408">&nbsp;</a><a id="n[3620, 3619, 3567, 3568, 3569, 3572, 3617, 3618]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c26><a href="../libstd/fmt/mod.rs.html#n170067">.declared_inputs</a></c26><c4>)</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;409</ln><a id="409">&nbsp;</a><a id="n[3677, 3658, 3657, 3656, 3668, 3678]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#401_4_refs">&nbsp;</a></c22><c20><a href="#409_12_refs">cached</a></c20><c13><a href="#401_4_refs">&nbsp;=&nbsp;</a></c13><c3>{</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;410</ln><a id="410">&nbsp;</a><a id="n[3663, 3665, 3667, 3662, 3659, 3666, 3661, 3664, 3660]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#401_4_refs">&nbsp;</a></c22><c20><a href="#410_16_refs">db</a></c20><c16><a href="#401_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c24><a href="../libworkcache/lib.rs.html#240">.ctxt</a></c24><c24><a href="../libworkcache/lib.rs.html#228">.db</a></c24><c10><a href="../libsync/arc.rs.html#n167">.deref</a></c10><c4>()</c4><c10><a href="../libsync/lock.rs.html#n1688">.read</a></c10><c4>()</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;411</ln><a id="411">&nbsp;</a><a id="n[3673, 3669, 3670, 3675, 3672, 3671, 3676, 3674]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#410">db</a></c26><c10><a href="../libsync/lock.rs.html#n1791">.deref</a></c10><c4>()</c4><c10><a href="../libworkcache/lib.rs.html#162">.prepare</a></c10><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c24><a href="../libworkcache/lib.rs.html#241">.fn_name</a></c24><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#162">&nbsp;</a></c10><c5><a href="../libworkcache/lib.rs.html#162">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c24><a href="../libworkcache/lib.rs.html#242">.declared_inputs</a></c24><c4>)</c4><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;412</ln><a id="412">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>};</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;413</ln><a id="413">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;414</ln><a id="414">&nbsp;</a><a id="n[4072, 3680]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#401_4_refs">&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#409">cached</a></c26><c21><a href="#401_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#401_4_refs">
</a></c21><br/><ln>&nbsp;415</ln><a id="415">&nbsp;</a><a id="n[3685, 3682, 3684, 3683, 3681]">&nbsp;</a><c21><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libstd/option.rs.html#n104341">Some</a></c20><c4>((</c4><c20><a href="#415_18_refs">ref&nbsp;disc_in</a></c20><c3>,</c3><c20><a href="../libstd/option.rs.html#n104341">&nbsp;</a></c20><c20><a href="#415_31_refs">ref&nbsp;disc_out</a></c20><c3>,</c3><c20><a href="../libstd/option.rs.html#n104341">&nbsp;</a></c20><c20><a href="#415_45_refs">ref&nbsp;res</a></c20><c4>))</c4><c21><a href="#401_4_refs">
</a></c21><br/><ln>&nbsp;416</ln><a id="416">&nbsp;</a><a id="n[3687, 3701, 3689, 3688, 3696, 3690, 3686, 3691]">&nbsp;</a><c21><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c21>if</c21><c21><a href="#401_4_refs">&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c10><a href="../libworkcache/lib.rs.html#381">.all_fresh</a></c10><c4>(</c4><c12><a href="../libworkcache/lib.rs.html#381">"declared&nbsp;input"</a></c12><c3>,</c3><c5><a href="../libworkcache/lib.rs.html#381">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c24><a href="../libworkcache/lib.rs.html#242">.declared_inputs</a></c24><c4>)</c4><c1><a href="#401_4_refs">&nbsp;&amp;&amp;
</a></c1><br/><ln>&nbsp;417</ln><a id="417">&nbsp;</a><a id="n[3693, 3695, 3692, 3694]">&nbsp;</a><c1><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c10><a href="../libworkcache/lib.rs.html#381">.all_fresh</a></c10><c4>(</c4><c12><a href="../libworkcache/lib.rs.html#381">"discovered&nbsp;input"</a></c12><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#381">&nbsp;</a></c10><c26><a href="../libworkcache/lib.rs.html#415">disc_in</a></c26><c4>)</c4><c1><a href="#401_4_refs">&nbsp;&amp;&amp;
</a></c1><br/><ln>&nbsp;418</ln><a id="418">&nbsp;</a><a id="n[3700, 3698, 3929, 3936, 3697, 3699]">&nbsp;</a><c1><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c10><a href="../libworkcache/lib.rs.html#381">.all_fresh</a></c10><c4>(</c4><c12><a href="../libworkcache/lib.rs.html#381">"discovered&nbsp;output"</a></c12><c3>,</c3><c10><a href="../libworkcache/lib.rs.html#381">&nbsp;</a></c10><c26><a href="../libworkcache/lib.rs.html#415">disc_out</a></c26><c4>)</c4><c21><a href="#401_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#401_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;419</ln><a id="419">&nbsp;</a><a id="n[3763, 3746, 3757, 3755, 3743, 3741, 3759, 3739, 3749, 3754, 3761, 3758, 3753, 3744, 3734, 3750, 3740, 3751, 3756, 3748, 3762, 3736, 3742, 3760, 3735, 3779, 3747, 3776, 3752, 3745]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c1><a href="../libworkcache/lib.rs.html#419">"Cache&nbsp;hit!"</a></c1><c4>)</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;420</ln><a id="420">&nbsp;</a><a id="n[3836, 3863, 3852, 3853, 3907, 3895, 3868, 3869, 3837, 3845, 3832, 3850, 3846, 3905, 3839, 3838, 3873, 3881, 3898, 3875, 3847, 3871, 3833, 3859, 3828, 3860, 3874, 3903, 3848, 3844, 3866, 3841, 3906, 3865, 3870, 3904, 3857, 3902, 3856, 3835, 3824, 3877, 3878, 3854, 3920, 3897, 3864, 3879, 3842, 3849, 3867, 3894, 3851, 3858, 3862, 3899, 3900, 3840, 3834, 3876, 3896, 3880, 3861, 3923, 3829, 3901, 3872, 3855, 3843]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c26><a href="../libstd/fmt/rt.rs.html#n169505">"Trying&nbsp;to&nbsp;decode:&nbsp;</a></c26><c3>{</c3><c26><a href="../libstd/fmt/rt.rs.html#n169505">:?</a></c26><c3>}</c3><c26><a href="../libstd/fmt/rt.rs.html#n169505">&nbsp;/&nbsp;</a></c26><c3>{</c3><c26><a href="../libstd/fmt/rt.rs.html#n169505">:?</a></c26><c3>}</c3><c26><a href="../libstd/fmt/rt.rs.html#n169505">&nbsp;/&nbsp;</a></c26><c3>{}</c3><c26><a href="../libstd/fmt/rt.rs.html#n169505">"</a></c26><c3>,</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;421</ln><a id="421">&nbsp;</a><a id="n[3891, 3886, 3826, 3817, 3820, 3883, 3818, 3893, 3827, 3890, 3821, 3889, 3825, 3888, 3823, 3885, 3822, 3882, 3819, 3887, 3892, 3884]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#421">disc_in</a></c26><c3>,</c3><c22><a href="#401_4_refs">&nbsp;</a></c22><c26><a href="../libstd/fmt/mod.rs.html#n170067">disc_out</a></c26><c3>,</c3><c22><a href="#401_4_refs">&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#421">*</a></c26><c26><a href="../libworkcache/lib.rs.html#415">res</a></c26><c4>)</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;422</ln><a id="422">&nbsp;</a><a id="n[3930, 3933, 3931, 3934, 3935, 3932]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#450">Work::from_value</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#262">json_decode</a></c26><c4>(</c4><c5><a href="#401_4_refs">*</a></c5><c26><a href="../libworkcache/lib.rs.html#415">res</a></c26><c4>))</c4><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;423</ln><a id="423">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#401_4_refs">
</a></c21><br/><ln>&nbsp;424</ln><a id="424">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#401_4_refs">
</a></c21><br/><ln>&nbsp;425</ln><a id="425">&nbsp;</a><a id="n[3937, 4071, 4066]">&nbsp;</a><c21><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#401_4_refs">_</a></c20><c21><a href="#401_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#401_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;426</ln><a id="426">&nbsp;</a><a id="n[3975, 3984, 3983, 3978, 3986, 3998, 3994, 3972, 3988, 3971, 3987, 3980, 3985, 4012, 3995, 3976, 3991, 3993, 3970, 3992, 3989, 3982, 3979, 3997, 3977, 3981, 4015, 3990, 3996, 3999]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug!</a></c22><c4>(</c4><c22><a href="../libstd/fmt/mod.rs.html#n169654">"Cache&nbsp;miss!"</a></c22><c4>)</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;427</ln><a id="427">&nbsp;</a><a id="n[4023, 4024, 4028, 4026, 4022, 4021, 4025, 4027]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#401_4_refs">&nbsp;</a></c22><c4>(</c4><c20><a href="#427_21_refs">tx</a></c20><c3>,</c3><c20><a href="#401_4_refs">&nbsp;</a></c20><c20><a href="#427_25_refs">rx</a></c20><c4>)</c4><c16><a href="#401_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libstd/comm/mod.rs.html#n118975">channel</a></c26><c4>()</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;428</ln><a id="428">&nbsp;</a><a id="n[4033, 4029, 4032, 4034, 4031, 4030]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#401_4_refs">&nbsp;</a></c22><c20><a href="#428_20_refs">blk</a></c20><c13><a href="#401_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#405">bo</a></c26><c10><a href="../libstd/option.rs.html#n105495">.take_unwrap</a></c10><c4>()</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;429</ln><a id="429">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;430</ln><a id="430">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c40>//&nbsp;FIXME:&nbsp;What&nbsp;happens&nbsp;if&nbsp;the&nbsp;task&nbsp;fails?
</c40><br/><ln>&nbsp;431</ln><a id="431">&nbsp;</a><a id="n[4035, 4065, 4061, 4062, 4063, 4064, 4037, 4036]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libstd/task.rs.html#n108455">spawn</a></c26><c4>(</c4><c1><a href="#401_4_refs">proc</a></c1><c4>()</c4><c1><a href="#401_4_refs">&nbsp;</a></c1><c3>{</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;432</ln><a id="432">&nbsp;</a><a id="n[4038, 4040, 4045, 4039, 4046]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#401_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#432_24_refs">&nbsp;exe</a></c20><c13><a href="#401_4_refs">&nbsp;=&nbsp;</a></c13><c1><a href="../libworkcache/lib.rs.html#244">Exec&nbsp;</a></c1><c3>{</c3><c1><a href="../libworkcache/lib.rs.html#244">
</a></c1><br/><ln>&nbsp;433</ln><a id="433">&nbsp;</a><a id="n[4041, 4042]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#244">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovered_inputs:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#127">WorkMap::new</a></c26><c4>()</c4><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#244">
</a></c1><br/><ln>&nbsp;434</ln><a id="434">&nbsp;</a><a id="n[4043, 4044]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#244">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovered_outputs:&nbsp;</a></c1><c26><a href="../libworkcache/lib.rs.html#127">WorkMap::new</a></c26><c4>()</c4><c3>,</c3><c1><a href="../libworkcache/lib.rs.html#244">
</a></c1><br/><ln>&nbsp;435</ln><a id="435">&nbsp;</a><a id="n[]">&nbsp;</a><c1><a href="../libworkcache/lib.rs.html#244">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c1><c3>};</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;436</ln><a id="436">&nbsp;</a><a id="n[4051, 4053, 4054, 4047, 4049, 4052, 4048, 4050]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#401_4_refs">&nbsp;</a></c22><c20><a href="#436_24_refs">v</a></c20><c16><a href="#401_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libworkcache/lib.rs.html#428">blk</a></c26><c4>(</c4><c5><a href="#401_4_refs">&amp;mut&nbsp;</a></c5><c26><a href="../libworkcache/lib.rs.html#432">exe</a></c26><c4>)</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;437</ln><a id="437">&nbsp;</a><a id="n[4060, 4058, 4056, 4055, 4057, 4059]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#427">tx</a></c26><c10><a href="../libstd/comm/mod.rs.html#n119071">.send</a></c10><c4>((</c4><c26><a href="../libworkcache/lib.rs.html#432">exe</a></c26><c3>,</c3><c14><a href="../libstd/comm/mod.rs.html#n119071">&nbsp;</a></c14><c26><a href="../libworkcache/lib.rs.html#436">v</a></c26><c4>))</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;438</ln><a id="438">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c4>)</c4><c3>;</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;439</ln><a id="439">&nbsp;</a><a id="n[4067, 4068, 4070, 4069]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#453">Work::from_task</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#404">self</a></c26><c3>,</c3><c27><a href="#401_4_refs">&nbsp;</a></c27><c26><a href="../libworkcache/lib.rs.html#427">rx</a></c26><c4>)</c4><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;440</ln><a id="440">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#401_4_refs">
</a></c21><br/><ln>&nbsp;441</ln><a id="441">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#401_4_refs">
</a></c22><br/><ln>&nbsp;442</ln><a id="442">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#401_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;443</ln><a id="443">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;444</ln><a id="444">&nbsp;</a><a id="n[4073]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;445</ln><a id="445">&nbsp;</a><a id="n[4075]">&nbsp;</a><c33>impl</c33><c5>&lt;'a,&nbsp;T:</c5><c5><a href="../libstd/kinds.rs.html#n74367">Send</a></c5><c5>&nbsp;+
</c5><br/><ln>&nbsp;446</ln><a id="446">&nbsp;</a><a id="n[4078, 4079]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c33><c1><a href="../libserialize/serialize.rs.html#n1009">Encodable&lt;</a></c1><c8><a href="../libserialize/json.rs.html#n22392">json::Encoder&lt;'a&gt;</a></c8><c1><a href="../libserialize/serialize.rs.html#n1009">&gt;</a></c1><c33>&nbsp;+
</c33><br/><ln>&nbsp;447</ln><a id="447">&nbsp;</a><a id="n[4082, 4081]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c33><c1><a href="../libserialize/serialize.rs.html#n1022">Decodable&lt;</a></c1><c8><a href="../libserialize/json.rs.html#n30598">json::Decoder</a></c8><c1><a href="../libserialize/serialize.rs.html#n1022">&gt;</a></c1><c33>&gt;
</c33><br/><ln>&nbsp;448</ln><a id="448">&nbsp;</a><a id="n[4086, 4088]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c8><a href="../libworkcache/lib.rs.html#249">Work&lt;'a</a></c8><c3>,</c3><c8><a href="../libworkcache/lib.rs.html#249">&nbsp;</a></c8><c8><a href="c=0 n=4074">T</a></c8><c8><a href="../libworkcache/lib.rs.html#249">&gt;</a></c8><c33>&nbsp;</c33><c3>{</c3><c33>&nbsp;</c33><c40>//&nbsp;FIXME(#5121)
</c40><br/><ln>&nbsp;449</ln><a id="449">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;450</ln><a id="450">&nbsp;</a><a id="n[4092, 4096, 4093, 4099, 4089, 4098]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#450_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#450_4_refs">&nbsp;from_value</a></c30><c4>(</c4><c20><a href="#450_22_refs">elt</a></c20><c18><a href="#450_4_refs">:&nbsp;</a></c18><c8><a href="c=0 n=4074">T</a></c8><c4>)</c4><c18><a href="#450_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#450_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#249">Work&lt;'a</a></c8><c3>,</c3><c8><a href="../libworkcache/lib.rs.html#249">&nbsp;</a></c8><c8><a href="c=0 n=4074">T</a></c8><c8><a href="../libworkcache/lib.rs.html#249">&gt;</a></c8><c18><a href="#450_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#450_4_refs">
</a></c22><br/><ln>&nbsp;451</ln><a id="451">&nbsp;</a><a id="n[4100, 4101, 4102]">&nbsp;</a><c22><a href="#450_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#251">WorkValue</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#450">elt</a></c26><c4>)</c4><c22><a href="#450_4_refs">
</a></c22><br/><ln>&nbsp;452</ln><a id="452">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#450_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;453</ln><a id="453">&nbsp;</a><a id="n[4109, 4115, 4113, 4119, 4110, 4108, 4118, 4116, 4103]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#453_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#453_4_refs">&nbsp;from_task</a></c30><c4>(</c4><c20><a href="#453_21_refs">prep</a></c20><c18><a href="#453_4_refs">:&nbsp;</a></c18><c8><a href="#453_4_refs">&amp;'a&nbsp;</a></c8><c8><a href="../libworkcache/lib.rs.html#238">Prep&lt;'a&gt;</a></c8><c3>,</c3><c18><a href="#453_4_refs">&nbsp;</a></c18><c20><a href="#453_41_refs">port</a></c20><c18><a href="#453_4_refs">:&nbsp;</a></c18><c8><a href="../libstd/comm/mod.rs.html#n118154">Receiver&lt;</a></c8><c4>(</c4><c8><a href="../libworkcache/lib.rs.html#244">Exec</a></c8><c3>,</c3><c8><a href="../libstd/comm/mod.rs.html#n118154">&nbsp;</a></c8><c8><a href="c=0 n=4074">T</a></c8><c4>)</c4><c8><a href="../libstd/comm/mod.rs.html#n118154">&gt;</a></c8><c4>)</c4><c18><a href="#453_4_refs">
</a></c18><br/><ln>&nbsp;454</ln><a id="454">&nbsp;</a><a id="n[4122, 4125, 4124]">&nbsp;</a><c18><a href="#453_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#453_4_refs">&nbsp;</a></c18><c8><a href="../libworkcache/lib.rs.html#249">Work&lt;'a</a></c8><c3>,</c3><c8><a href="../libworkcache/lib.rs.html#249">&nbsp;</a></c8><c8><a href="c=0 n=4074">T</a></c8><c8><a href="../libworkcache/lib.rs.html#249">&gt;</a></c8><c18><a href="#453_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#453_4_refs">
</a></c22><br/><ln>&nbsp;455</ln><a id="455">&nbsp;</a><a id="n[4127, 4129, 4126, 4128]">&nbsp;</a><c22><a href="#453_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#252">WorkFromTask</a></c26><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#453">prep</a></c26><c3>,</c3><c27><a href="#453_4_refs">&nbsp;</a></c27><c26><a href="../libworkcache/lib.rs.html#453">port</a></c26><c4>)</c4><c22><a href="#453_4_refs">
</a></c22><br/><ln>&nbsp;456</ln><a id="456">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#453_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;457</ln><a id="457">&nbsp;</a><a id="n[]">&nbsp;</a><c33>
</c33><br/><ln>&nbsp;458</ln><a id="458">&nbsp;</a><a id="n[4130, 4135, 4136, 4133]">&nbsp;</a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c21>pub</c21><c18><a href="#458_4_refs">&nbsp;</a></c18><c30>fn</c30><c30><a href="#458_4_refs">&nbsp;unwrap</a></c30><c4>(</c4><c20><a href="#458_18_refs">self</a></c20><c4>)</c4><c18><a href="#458_4_refs">&nbsp;</a></c18><c4>-&gt;</c4><c18><a href="#458_4_refs">&nbsp;</a></c18><c8><a href="c=0 n=4074">T</a></c8><c18><a href="#458_4_refs">&nbsp;</a></c18><c3>{</c3><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;459</ln><a id="459">&nbsp;</a><a id="n[4137, 4188]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#458_4_refs">&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#458">self</a></c26><c21><a href="#458_4_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#458_4_refs">
</a></c21><br/><ln>&nbsp;460</ln><a id="460">&nbsp;</a><a id="n[4140, 4138, 4139]">&nbsp;</a><c21><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libworkcache/lib.rs.html#251">WorkValue</a></c20><c4>(</c4><c20><a href="#460_22_refs">v</a></c20><c4>)</c4><c21><a href="#458_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#458_4_refs">&nbsp;</a></c21><c26><a href="../libworkcache/lib.rs.html#460">v</a></c26><c3>,</c3><c21><a href="#458_4_refs">
</a></c21><br/><ln>&nbsp;461</ln><a id="461">&nbsp;</a><a id="n[4142, 4143, 4187, 4141, 4185]">&nbsp;</a><c21><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="../libworkcache/lib.rs.html#252">WorkFromTask</a></c20><c4>(</c4><c20><a href="#461_25_refs">prep</a></c20><c3>,</c3><c20><a href="../libworkcache/lib.rs.html#252">&nbsp;</a></c20><c20><a href="#461_31_refs">port</a></c20><c4>)</c4><c21><a href="#458_4_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#458_4_refs">&nbsp;</a></c21><c3>{</c3><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;462</ln><a id="462">&nbsp;</a><a id="n[4147, 4148, 4146, 4150, 4144, 4151, 4145, 4149]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#458_4_refs">&nbsp;</a></c22><c4>(</c4><c20><a href="#462_21_refs">exe</a></c20><c3>,</c3><c20><a href="#458_4_refs">&nbsp;</a></c20><c20><a href="#462_26_refs">v</a></c20><c4>)</c4><c13><a href="#458_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#461">port</a></c26><c10><a href="../libstd/comm/mod.rs.html#n119707">.recv</a></c10><c4>()</c4><c3>;</c3><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;463</ln><a id="463">&nbsp;</a><a id="n[4158, 4153, 4156, 4155, 4152, 4159, 4157, 4154]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#458_4_refs">&nbsp;</a></c22><c20><a href="#463_20_refs">s</a></c20><c13><a href="#458_4_refs">&nbsp;=&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#254">json_encode</a></c26><c4>(</c4><c5><a href="#458_4_refs">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#462">v</a></c26><c4>)</c4><c3>;</c3><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;464</ln><a id="464">&nbsp;</a><a id="n[4167, 4164, 4162, 4165, 4161, 4163, 4168, 4166, 4160]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>let</c21><c22><a href="#458_4_refs">&nbsp;</a></c22><c21>mut</c21><c20><a href="#464_20_refs">&nbsp;db</a></c20><c16><a href="#458_4_refs">&nbsp;=&nbsp;</a></c16><c26><a href="../libworkcache/lib.rs.html#461">prep</a></c26><c24><a href="../libworkcache/lib.rs.html#240">.ctxt</a></c24><c24><a href="../libworkcache/lib.rs.html#228">.db</a></c24><c10><a href="../libsync/arc.rs.html#n167">.deref</a></c10><c4>()</c4><c10><a href="../libsync/lock.rs.html#n1636">.write</a></c10><c4>()</c4><c3>;</c3><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;465</ln><a id="465">&nbsp;</a><a id="n[4172, 4169, 4183, 4171, 4184, 4170]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#464">db</a></c26><c10><a href="../libsync/lock.rs.html#n1841">.deref_mut</a></c10><c4>()</c4><c13><a href="../libworkcache/lib.rs.html#173">.cache</a></c13><c4>(</c4><c26><a href="../libworkcache/lib.rs.html#461">prep</a></c26><c24><a href="../libworkcache/lib.rs.html#241">.fn_name</a></c24><c3>,</c3><c13><a href="../libworkcache/lib.rs.html#173">
</a></c13><br/><ln>&nbsp;466</ln><a id="466">&nbsp;</a><a id="n[4175, 4174, 4173]">&nbsp;</a><c13><a href="../libworkcache/lib.rs.html#173">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c5><a href="#458_4_refs">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#461">prep</a></c26><c24><a href="../libworkcache/lib.rs.html#242">.declared_inputs</a></c24><c3>,</c3><c13><a href="../libworkcache/lib.rs.html#173">
</a></c13><br/><ln>&nbsp;467</ln><a id="467">&nbsp;</a><a id="n[4177, 4176, 4178]">&nbsp;</a><c13><a href="../libworkcache/lib.rs.html#173">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c5><a href="../libworkcache/lib.rs.html#173">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#462">exe</a></c26><c24><a href="../libworkcache/lib.rs.html#246">.discovered_inputs</a></c24><c3>,</c3><c13><a href="../libworkcache/lib.rs.html#173">
</a></c13><br/><ln>&nbsp;468</ln><a id="468">&nbsp;</a><a id="n[4180, 4179, 4181]">&nbsp;</a><c13><a href="../libworkcache/lib.rs.html#173">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c5><a href="../libworkcache/lib.rs.html#173">&amp;</a></c5><c26><a href="../libworkcache/lib.rs.html#462">exe</a></c26><c24><a href="../libworkcache/lib.rs.html#247">.discovered_outputs</a></c24><c3>,</c3><c13><a href="../libworkcache/lib.rs.html#173">
</a></c13><br/><ln>&nbsp;469</ln><a id="469">&nbsp;</a><a id="n[4182]">&nbsp;</a><c13><a href="../libworkcache/lib.rs.html#173">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c13><c26><a href="../libworkcache/lib.rs.html#463">s</a></c26><c4>)</c4><c3>;</c3><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;470</ln><a id="470">&nbsp;</a><a id="n[4186]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c26><a href="../libworkcache/lib.rs.html#462">v</a></c26><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;471</ln><a id="471">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c21><a href="#458_4_refs">
</a></c21><br/><ln>&nbsp;472</ln><a id="472">&nbsp;</a><a id="n[]">&nbsp;</a><c21><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#458_4_refs">
</a></c22><br/><ln>&nbsp;473</ln><a id="473">&nbsp;</a><a id="n[]">&nbsp;</a><c22><a href="#458_4_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;474</ln><a id="474">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><ln>&nbsp;475</ln><a id="475">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;476</ln><a id="476">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;477</ln><a id="477">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>test</c50><c3>]</c3><c50>
</c50><br/><ln>&nbsp;478</ln><a id="478">&nbsp;</a><a id="n[]">&nbsp;</a><c50>#</c50><c3>[</c3><c50>cfg</c50><c4>(</c4><c50>not</c50><c4>(</c4><c50>target_os="android"</c50><c4>))</c4><c3>]</c3><c50>&nbsp;</c50><c40>//&nbsp;FIXME(#10455)
</c40><br/><ln>&nbsp;479</ln><a id="479">&nbsp;</a><a id="n[]">&nbsp;</a><c30>fn&nbsp;test</c30><c4>()</c4><c0>&nbsp;</c0><c3>{</c3><c0>
</c0><br/><ln>&nbsp;480</ln><a id="480">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>use</c21><c0>&nbsp;std::os</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;481</ln><a id="481">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>use</c21><c0>&nbsp;std::io::</c0><c3>{</c3><c0>fs</c0><c3>,</c3><c0>&nbsp;Process</c0><c3>};</c3><c0>
</c0><br/><ln>&nbsp;482</ln><a id="482">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>use</c21><c0>&nbsp;std::str::from_utf8_owned</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;483</ln><a id="483">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;484</ln><a id="484">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c40>//&nbsp;Create&nbsp;a&nbsp;path&nbsp;to&nbsp;a&nbsp;new&nbsp;file&nbsp;'filename'&nbsp;in&nbsp;the&nbsp;directory&nbsp;in&nbsp;which
</c40><br/><ln>&nbsp;485</ln><a id="485">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c40>//&nbsp;this&nbsp;test&nbsp;is&nbsp;running.
</c40><br/><ln>&nbsp;486</ln><a id="486">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c30>fn&nbsp;make_path</c30><c4>(</c4><c0>filename:&nbsp;~str</c0><c4>)</c4><c0>&nbsp;</c0><c4>-&gt;</c4><c0>&nbsp;Path&nbsp;</c0><c3>{</c3><c0>
</c0><br/><ln>&nbsp;487</ln><a id="487">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;pth&nbsp;=&nbsp;os::self_exe_path</c0><c4>()</c4><c0>.expect</c0><c4>(</c4><c0>"workcache::test&nbsp;failed"</c0><c4>)</c4><c0>.with_filename</c0><c4>(</c4><c0>filename</c0><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;488</ln><a id="488">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>if</c21><c0>&nbsp;pth.exists</c0><c4>()</c4><c0>&nbsp;</c0><c3>{</c3><c0>
</c0><br/><ln>&nbsp;489</ln><a id="489">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fs::unlink</c0><c4>(</c4><c0>&amp;pth</c0><c4>)</c4><c0>.unwrap</c0><c4>()</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;490</ln><a id="490">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c3>}</c3><c0>
</c0><br/><ln>&nbsp;491</ln><a id="491">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>return</c21><c0>&nbsp;pth</c0><c3>;</c3><c0>
</c0><br/><ln>&nbsp;492</ln><a id="492">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c3>}</c3><c0>
</c0><br/><ln>&nbsp;493</ln><a id="493">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;494</ln><a id="494">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;pth&nbsp;=&nbsp;make_path</c0><c4>(</c4><c0>~"foo.c"</c0><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;495</ln><a id="495">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;File::create</c0><c4>(</c4><c0>&amp;pth</c0><c4>)</c4><c0>.write</c0><c4>(</c4><c0>bytes!</c0><c4>(</c4><c0>"int&nbsp;main</c0><c4>()</c4><c0>&nbsp;</c0><c3>{</c3><c0>&nbsp;return&nbsp;0</c0><c3>;</c3><c0>&nbsp;</c0><c3>}</c3><c0>"</c0><c4>))</c4><c0>.unwrap</c0><c4>()</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;496</ln><a id="496">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;497</ln><a id="497">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;db_path&nbsp;=&nbsp;make_path</c0><c4>(</c4><c0>~"db.json"</c0><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;498</ln><a id="498">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;499</ln><a id="499">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;cx&nbsp;=&nbsp;Context::new</c0><c4>(</c4><c0>Arc::new</c0><c4>(</c4><c0>RWLock::new</c0><c4>(</c4><c0>Database::new</c0><c4>(</c4><c0>db_path</c0><c4>)))</c4><c3>,</c3><c0>
</c0><br/><ln>&nbsp;500</ln><a id="500">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arc::new</c0><c4>(</c4><c0>TreeMap::new</c0><c4>()))</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;501</ln><a id="501">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;502</ln><a id="502">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;s&nbsp;=&nbsp;cx.with_prep</c0><c4>(</c4><c0>"test1"</c0><c3>,</c3><c0>&nbsp;|prep|&nbsp;</c0><c3>{</c3><c0>
</c0><br/><ln>&nbsp;503</ln><a id="503">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;504</ln><a id="504">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;subcx&nbsp;=&nbsp;cx.clone</c0><c4>()</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;505</ln><a id="505">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;pth&nbsp;=&nbsp;pth.clone</c0><c4>()</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;506</ln><a id="506">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;507</ln><a id="507">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;contents&nbsp;=&nbsp;File::open</c0><c4>(</c4><c0>&amp;pth</c0><c4>)</c4><c0>.read_to_end</c0><c4>()</c4><c0>.unwrap</c0><c4>()</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;508</ln><a id="508">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;file_content&nbsp;=&nbsp;from_utf8_owned</c0><c4>(</c4><c0>contents</c0><c4>)</c4><c0>.unwrap</c0><c4>()</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;509</ln><a id="509">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;510</ln><a id="510">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c40>//&nbsp;FIXME&nbsp;(#9639):&nbsp;This&nbsp;needs&nbsp;to&nbsp;handle&nbsp;non-utf8&nbsp;paths
</c40><br/><ln>&nbsp;511</ln><a id="511">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prep.declare_input</c0><c4>(</c4><c0>"file"</c0><c3>,</c3><c0>&nbsp;pth.as_str</c0><c4>()</c4><c0>.unwrap</c0><c4>()</c4><c3>,</c3><c0>&nbsp;file_content</c0><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;512</ln><a id="512">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prep.exec</c0><c4>(</c4><c0>proc</c0><c4>(</c4><c0>_exe</c0><c4>)</c4><c0>&nbsp;</c0><c3>{</c3><c0>
</c0><br/><ln>&nbsp;513</ln><a id="513">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;out&nbsp;=&nbsp;make_path</c0><c4>(</c4><c0>~"foo.o"</c0><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;514</ln><a id="514">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c40>//&nbsp;FIXME&nbsp;(#9639):&nbsp;This&nbsp;needs&nbsp;to&nbsp;handle&nbsp;non-utf8&nbsp;paths
</c40><br/><ln>&nbsp;515</ln><a id="515">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process::status</c0><c4>(</c4><c0>"gcc"</c0><c3>,</c3><c0>&nbsp;</c0><c3>[</c3><c0>pth.as_str</c0><c4>()</c4><c0>.unwrap</c0><c4>()</c4><c0>.to_owned</c0><c4>()</c4><c3>,</c3><c0>
</c0><br/><ln>&nbsp;516</ln><a id="516">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~"-o"</c0><c3>,</c3><c0>
</c0><br/><ln>&nbsp;517</ln><a id="517">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.as_str</c0><c4>()</c4><c0>.unwrap</c0><c4>()</c4><c0>.to_owned</c0><c4>()</c4><c3>]</c3><c4>)</c4><c0>.unwrap</c0><c4>()</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;518</ln><a id="518">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;519</ln><a id="519">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c21>let</c21><c0>&nbsp;_proof_of_concept&nbsp;=&nbsp;subcx.prep</c0><c4>(</c4><c0>"subfn"</c0><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;520</ln><a id="520">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c40>//&nbsp;Could&nbsp;run&nbsp;sub-rules&nbsp;inside&nbsp;here.
</c40><br/><ln>&nbsp;521</ln><a id="521">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;522</ln><a id="522">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c40>//&nbsp;FIXME&nbsp;(#9639):&nbsp;This&nbsp;needs&nbsp;to&nbsp;handle&nbsp;non-utf8&nbsp;paths
</c40><br/><ln>&nbsp;523</ln><a id="523">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.as_str</c0><c4>()</c4><c0>.unwrap</c0><c4>()</c4><c0>.to_owned</c0><c4>()</c4><c0>
</c0><br/><ln>&nbsp;524</ln><a id="524">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c0><c3>}</c3><c4>)</c4><c0>
</c0><br/><ln>&nbsp;525</ln><a id="525">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;</c0><c3>}</c3><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;526</ln><a id="526">&nbsp;</a><a id="n[]">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;527</ln><a id="527">&nbsp;</a><a id="n[]">&nbsp;</a><c0>&nbsp;&nbsp;&nbsp;&nbsp;println!</c0><c4>(</c4><c0>"</c0><c3>{}</c3><c0>"</c0><c3>,</c3><c0>&nbsp;s</c0><c4>)</c4><c3>;</c3><c0>
</c0><br/><ln>&nbsp;528</ln><a id="528">&nbsp;</a><a id="n[]">&nbsp;</a><c3>}</c3><c0>
</c0><br/><div class="refblock"><br/><a id="226_19_refs"><a href="#226"><c40>libworkcache/lib.rs:226:19-226:19&nbsp;-struct-&nbsp;definition:<br/></c40><pr>#[deriving(Clone)]
<br/>pub&nbsp;struct&nbsp;Context&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#279"><c40>279:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freshness:&nbsp;Arc&lt;FreshnessMap&gt;)&nbsp;-&gt;&nbsp;Context&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#273"><c40>273:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cfg:&nbsp;Arc&lt;json::Object&gt;)&nbsp;-&gt;&nbsp;Context&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#336"><c40>336:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;new(ctxt:&nbsp;&amp;'a&nbsp;Context,&nbsp;fn_name:&nbsp;&amp;'a&nbsp;str)&nbsp;-&gt;&nbsp;Prep&lt;'a&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#270"><c40>270:&nbsp;</c40>impl&nbsp;Context&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#226"><c40>226:&nbsp;</c40>#[deriving(Clone)]
<br/></a><a href="../libworkcache/lib.rs.html#226"><c40>226:&nbsp;</c40>#[deriving(Clone)]
<br/></a><a href="../libworkcache/lib.rs.html#226"><c40>226:&nbsp;</c40>#[deriving(Clone)]
<br/></a><a href="../libworkcache/lib.rs.html#280"><c40>280:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Context&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#226"><c40>226:&nbsp;</c40>#[deriving(Clone)]
<br/></a><a href="../libworkcache/lib.rs.html#240"><c40>240:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;priv&nbsp;ctxt:&nbsp;&amp;'a&nbsp;Context,
<br/></a><br/><br/><a id="262_16_refs"><a href="#262"><c40>libworkcache/lib.rs:262:16-262:16&nbsp;-fn-&nbsp;definition:<br/></c40><pr>//&nbsp;FIXME(#5121)
<br/>fn&nbsp;json_decode&lt;T:Decodable&lt;json::Decoder&gt;&gt;(s:&nbsp;&amp;str)&nbsp;-&gt;&nbsp;T&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#422"><c40>422:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Work::from_value(json_decode(*res))
<br/></a><a href="../libworkcache/lib.rs.html#169"><c40>169:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some(v)&nbsp;=&gt;&nbsp;Some(json_decode(*v))
<br/></a><br/><br/><a id="103_69_refs"><a href="#103"><c40>libworkcache/lib.rs:103:69-103:69&nbsp;-struct-&nbsp;definition:<br/></c40><pr>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/>struct&nbsp;WorkKey&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#130"><c40>130:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;WorkKey&nbsp;{&nbsp;kind,&nbsp;name&nbsp;}&nbsp;=&nbsp;k;
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#109"><c40>109:&nbsp;</c40>impl&nbsp;WorkKey&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#129"><c40>129:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;insert_work_key(&amp;mut&nbsp;self,&nbsp;k:&nbsp;WorkKey,&nbsp;val:&nbsp;~str)&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#111"><c40>111:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WorkKey&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>103:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable,&nbsp;Ord,&nbsp;TotalOrd,&nbsp;TotalEq)]
<br/></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#103"><c40>(103)</c40></a><a href="../libworkcache/lib.rs.html#110"><c40>(110)</c40></a><br/><br/><a id="254_1_refs"><a href="#254"><c40>libworkcache/lib.rs:254:1-254:1&nbsp;-fn-&nbsp;definition:<br/></c40><pr>
<br/>fn&nbsp;json_encode&lt;'a,&nbsp;T:Encodable&lt;json::Encoder&lt;'a&gt;&gt;&gt;(t:&nbsp;&amp;T)&nbsp;-&gt;&nbsp;~str&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#166"><c40>166:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;k&nbsp;=&nbsp;json_encode(&amp;(fn_name,&nbsp;declared_inputs));
<br/></a><a href="../libworkcache/lib.rs.html#179"><c40>179:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;k&nbsp;=&nbsp;json_encode(&amp;(fn_name,&nbsp;declared_inputs));
<br/></a><a href="../libworkcache/lib.rs.html#180"><c40>180:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;v&nbsp;=&nbsp;json_encode(&amp;(discovered_inputs,
<br/></a><a href="../libworkcache/lib.rs.html#463"><c40>463:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;s&nbsp;=&nbsp;json_encode(&amp;v);
<br/></a><br/><br/><a id="238_1_refs"><a href="#238"><c40>libworkcache/lib.rs:238:1-238:1&nbsp;-struct-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;struct&nbsp;Prep&lt;'a&gt;&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#357"><c40>357:&nbsp;</c40>impl&lt;'a&gt;&nbsp;Prep&lt;'a&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#336"><c40>336:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;new(ctxt:&nbsp;&amp;'a&nbsp;Context,&nbsp;fn_name:&nbsp;&amp;'a&nbsp;str)&nbsp;-&gt;&nbsp;Prep&lt;'a&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#453"><c40>453:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;from_task(prep:&nbsp;&amp;'a&nbsp;Prep&lt;'a&gt;,&nbsp;port:&nbsp;Receiver&lt;(Exec,&nbsp;T)&gt;)
<br/></a><a href="../libworkcache/lib.rs.html#252"><c40>252:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;WorkFromTask(&amp;'a&nbsp;Prep&lt;'a&gt;,&nbsp;Receiver&lt;(Exec,&nbsp;T)&gt;),
<br/></a><a href="../libworkcache/lib.rs.html#337"><c40>337:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prep&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#287"><c40>287:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;prep&lt;'a&gt;(&amp;'a&nbsp;self,&nbsp;fn_name:&nbsp;&amp;'a&nbsp;str)&nbsp;-&gt;&nbsp;Prep&lt;'a&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#335"><c40>335:&nbsp;</c40>impl&lt;'a&gt;&nbsp;Prep&lt;'a&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#295"><c40>295:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blk:&nbsp;|p:&nbsp;&amp;mut&nbsp;Prep|&nbsp;-&gt;&nbsp;T)
<br/></a><br/><br/><a id="123_45_refs"><a href="#123"><c40>libworkcache/lib.rs:123:45-123:45&nbsp;-struct-&nbsp;definition:<br/></c40><pr>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/>struct&nbsp;KindMap(TreeMap&lt;~str,&nbsp;~str&gt;);
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#121"><c40>121:&nbsp;</c40>struct&nbsp;WorkMap(TreeMap&lt;~str,&nbsp;KindMap&gt;);
<br/></a><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#123"><c40>123:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><br/><br/><a id="244_1_refs"><a href="#244"><c40>libworkcache/lib.rs:244:1-244:1&nbsp;-struct-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;struct&nbsp;Exec&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#303"><c40>303:&nbsp;</c40>impl&nbsp;Exec&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#404"><c40>404:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'a&nbsp;self,&nbsp;blk:&nbsp;proc(&amp;mut&nbsp;Exec)&nbsp;-&gt;&nbsp;T)&nbsp;-&gt;&nbsp;Work&lt;'a,&nbsp;T&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#453"><c40>453:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;from_task(prep:&nbsp;&amp;'a&nbsp;Prep&lt;'a&gt;,&nbsp;port:&nbsp;Receiver&lt;(Exec,&nbsp;T)&gt;)
<br/></a><a href="../libworkcache/lib.rs.html#432"><c40>432:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;exe&nbsp;=&nbsp;Exec&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#252"><c40>252:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;WorkFromTask(&amp;'a&nbsp;Prep&lt;'a&gt;,&nbsp;Receiver&lt;(Exec,&nbsp;T)&gt;),
<br/></a><a href="../libworkcache/lib.rs.html#397"><c40>397:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'a&nbsp;self,&nbsp;blk:&nbsp;proc(&amp;mut&nbsp;Exec)&nbsp;-&gt;&nbsp;T)&nbsp;-&gt;&nbsp;T&nbsp;{
<br/></a><br/><br/><a id="249_1_refs"><a href="#249"><c40>libworkcache/lib.rs:249:1-249:1&nbsp;-enum-&nbsp;definition:<br/></c40><pr>
<br/>enum&nbsp;Work&lt;'a,&nbsp;T&gt;&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#454"><c40>454:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Work&lt;'a,&nbsp;T&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#450"><c40>450:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;from_value(elt:&nbsp;T)&nbsp;-&gt;&nbsp;Work&lt;'a,&nbsp;T&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#404"><c40>404:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'a&nbsp;self,&nbsp;blk:&nbsp;proc(&amp;mut&nbsp;Exec)&nbsp;-&gt;&nbsp;T)&nbsp;-&gt;&nbsp;Work&lt;'a,&nbsp;T&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#448"><c40>448:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;Work&lt;'a,&nbsp;T&gt;&nbsp;{&nbsp;//&nbsp;FIXME(#5121)
<br/></a><br/><br/><a id="223_1_refs"><a href="#223"><c40>libworkcache/lib.rs:223:1-223:1&nbsp;-ty-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;type&nbsp;FreshnessMap&nbsp;=&nbsp;TreeMap&lt;~str,extern&nbsp;fn(&amp;str,&amp;str)-&gt;bool&gt;;
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#279"><c40>279:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freshness:&nbsp;Arc&lt;FreshnessMap&gt;)&nbsp;-&gt;&nbsp;Context&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#236"><c40>236:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;priv&nbsp;freshness:&nbsp;Arc&lt;FreshnessMap&gt;
<br/></a><br/><br/><a id="141_1_refs"><a href="#141"><c40>libworkcache/lib.rs:141:1-141:1&nbsp;-struct-&nbsp;definition:<br/></c40><pr>
<br/>pub&nbsp;struct&nbsp;Database&nbsp;{
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#150"><c40>150:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;new(p:&nbsp;Path)&nbsp;-&gt;&nbsp;Database&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#151"><c40>151:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;rslt&nbsp;=&nbsp;Database&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#272"><c40>272:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;new(db:&nbsp;Arc&lt;RWLock&lt;Database&gt;&gt;,
<br/></a><a href="../libworkcache/lib.rs.html#215"><c40>215:&nbsp;</c40>impl&nbsp;Drop&nbsp;for&nbsp;Database&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#228"><c40>228:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;db:&nbsp;Arc&lt;RWLock&lt;Database&gt;&gt;,
<br/></a><a href="../libworkcache/lib.rs.html#148"><c40>148:&nbsp;</c40>impl&nbsp;Database&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#277"><c40>277:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;new_with_freshness(db:&nbsp;Arc&lt;RWLock&lt;Database&gt;&gt;,
<br/></a><br/><br/><a id="120_45_refs"><a href="#120"><c40>libworkcache/lib.rs:120:45-120:45&nbsp;-struct-&nbsp;definition:<br/></c40><pr>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/>struct&nbsp;WorkMap(TreeMap&lt;~str,&nbsp;KindMap&gt;);
<br/></pr></a></a><c40>references:-</c40><br/><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#165"><c40>165:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Option&lt;(WorkMap,&nbsp;WorkMap,&nbsp;~str)&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#247"><c40>247:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;priv&nbsp;discovered_outputs:&nbsp;WorkMap
<br/></a><a href="../libworkcache/lib.rs.html#127"><c40>127:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;new()&nbsp;-&gt;&nbsp;WorkMap&nbsp;{&nbsp;WorkMap(TreeMap::new())&nbsp;}
<br/></a><a href="../libworkcache/lib.rs.html#175"><c40>175:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;declared_inputs:&nbsp;&amp;WorkMap,
<br/></a><a href="../libworkcache/lib.rs.html#242"><c40>242:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;priv&nbsp;declared_inputs:&nbsp;WorkMap,
<br/></a><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#176"><c40>176:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovered_inputs:&nbsp;&amp;WorkMap,
<br/></a><a href="../libworkcache/lib.rs.html#246"><c40>246:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;priv&nbsp;discovered_inputs:&nbsp;WorkMap,
<br/></a><a href="../libworkcache/lib.rs.html#381"><c40>381:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;all_fresh(&amp;self,&nbsp;cat:&nbsp;&amp;str,&nbsp;map:&nbsp;&amp;WorkMap)&nbsp;-&gt;&nbsp;bool&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#126"><c40>126:&nbsp;</c40>impl&nbsp;WorkMap&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#164"><c40>164:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;declared_inputs:&nbsp;&amp;WorkMap)
<br/></a><a href="../libworkcache/lib.rs.html#177"><c40>177:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovered_outputs:&nbsp;&amp;WorkMap,
<br/></a><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><a href="../libworkcache/lib.rs.html#165"><c40>165:&nbsp;</c40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Option&lt;(WorkMap,&nbsp;WorkMap,&nbsp;~str)&gt;&nbsp;{
<br/></a><a href="../libworkcache/lib.rs.html#120"><c40>120:&nbsp;</c40>#[deriving(Clone,&nbsp;Eq,&nbsp;Encodable,&nbsp;Decodable)]
<br/></a><br/></div></maintext></div></body>