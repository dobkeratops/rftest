<head><link href="css/shCore.css" rel="stylesheet" type="text/css"/><link href="css/shThemeDefault.css" rel="stylesheet" type="text/css"/></head><style type="text/css">maintext {color:#f0f0f0; font-size:12px; font-family:"Courier New"}
a:link{ color:#f0f0f0; font-style:normal;   text-decoration:none;}
a:visited{ color:#f0f0f0; font-style:normal;   text-decoration:none;}
a:link:hover{ color:#f0f0f0; font-style:normal; background-color:#606060; }
pr{font-weight:bold}
ln{color:#606060; }
c24{color:#ffffff; font-style:italic; opacity:0.5}
c25{color:#ffffff; opacity:0.92}
c26{color:#ffffff; font-weight:bold; }
c27{color:#ffffa0; font-weight:bold; }
c28{color:#afffff; font-weight:bold; }
c29{color:#afffaf; font-weight:bold; }
c30{color:#cfcfff; font-weight:bold; }
c31{color:#ffffff; font-style:italic; opacity:0.6}
c1{color:#ffffc0;   font-weight:bold; }
c2{color:#60f0c0}
c3{color:#50e0ff; }
c4{color:#f090f0}
c5{color:#50ff80; }
c6{color:#f0f0e0}
c7{color:#fff0d0}
c8{color:#e0d0f0}
c9{color:#70f0f0}
c10{color:#f0f070}
c11{color:#c0f070}
c12{color:#70c0f0}
c13{color:#c0f070}
c14{color:#f0ffc0}
c15{color:#f0f0e0}
c16{color:#c0ffe0}
c17{color:#90d0f0}
c18{color:#f0a0d0}
c19{color:#d0f0a0}
c20{color:#0f0ff}
c21{color:#dde009; font-weight:bold}
c22{color:#e0f0d0; font-weight:bold}
c23{color:#e0f0ff; font-weight:bold}
</style><body style="background-color:#343c38;"><maintext><ln> &nbsp;1</ln><a id="1">&emsp;</a><c0>
</c0><br/><ln> &nbsp;2</ln><a id="2">&emsp;</a><c31>///&nbsp;tags:&nbsp;pretty&nbsp;print,code&nbsp;formatting,brace&nbsp;indentation,&nbsp;json&nbsp;braces,&nbsp;brackets,nesting
</c31><br/><ln> &nbsp;3</ln><a id="3">&emsp;</a><a href="text_formatting.html#1_88_refs"><c18>pub&nbsp;</c18><c1>trait&nbsp;Indent&nbsp;</c1><c18>{
</c18><br/><ln> &nbsp;4</ln><a id="4">&emsp;</a><a href="text_formatting.html#1_88_refs"><c18>&nbsp;&nbsp;&nbsp;&nbsp;</c18><c26>fn&nbsp;indent</c26><c22>(&amp;self</c22><c4>,</c4><c22>tab_size:</c22><c3>int</c3><c4>,</c4><c22>max_line_size:</c22><c3>int</c3><c25>)</c25><c22>-&gt;</c22><a href="text_formatting.html#3"><c3>Self</c3></a><a href="text_formatting.html#1_88_refs"><c4>;</c4><c18>
</c18><br/><ln> &nbsp;5</ln><a id="5">&emsp;</a><a href="text_formatting.html#1_88_refs"><c4>}</c4><c0>
</c0><br/><ln> &nbsp;6</ln><a id="6">&emsp;</a><c0>
</c0><br/><ln> &nbsp;7</ln><a id="7">&emsp;</a><c29>impl&nbsp;Indent&nbsp;for&nbsp;~str&nbsp;</c29><c17>{
</c17><br/><ln> &nbsp;8</ln><a id="8">&emsp;</a><c17>&nbsp;&nbsp;&nbsp;&nbsp;</c17><c22>pub&nbsp;</c22><c26>fn&nbsp;indent</c26><c22>(&amp;self</c22><c4>,</c4><a href="text_formatting.html#7_21_refs"><c20>tabsize</c20><c22>:</c22><c3>int</c3><c4>,</c4><c22>&nbsp;</c22><a href="text_formatting.html#7_34_refs"><c20>linesize</c20><c22>:</c22><c3>int</c3><c25>)</c25><c22>-&gt;</c22><c3>~str</c3><c22>&nbsp;</c22><c4>{</c4><c21>
</c21><br/><ln> &nbsp;9</ln><a id="9">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c24>//&nbsp;todo-write&nbsp;as&nbsp;iterators.
</c24><br/><ln> 10</ln><a id="10">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#9_2_refs"><c26>fn&nbsp;change_indent</c26><c1>(</c1><a href="text_formatting.html#9_19_refs"><c20>c</c20><a href="text_formatting.html#9_2_refs"><c1>:</c1><c3>u8</c3><c25>)</c25><c1>-&gt;</c1><c3>int</c3><c4>{</c4><c21>
</c21><br/><ln> 11</ln><a id="11">&emsp;</a><a href="text_formatting.html#9_2_refs"><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>match&nbsp;</c7><a href="text_formatting.html#11"><c8>c</c8></a><a href="text_formatting.html#9_2_refs"><c7>&nbsp;as&nbsp;</c7><c3>char</c3><c7>&nbsp;</c7><c4>{</c4><c7>
</c7><br/><ln> 12</ln><a id="12">&emsp;</a><a href="text_formatting.html#9_2_refs"><c7>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c7><c20>'</c20><c4>{</c4><c20>'</c20><c12>|</c12><c20>'</c20><c25>(</c25><c20>'</c20><c12>|</c12><c20>'</c20><c4>[</c4><c20>'</c20><c12>=&gt;</c12><c7>&nbsp;</c7><c12>1</c12><c4>,</c4><c7>
</c7><br/><ln> 13</ln><a id="13">&emsp;</a><a href="text_formatting.html#9_2_refs"><c7>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c7><c20>'</c20><c4>}</c4><c20>'</c20><c12>|</c12><c20>'</c20><c25>)</c25><c20>'</c20><c12>|</c12><c20>'</c20><c4>]</c4><c20>'</c20><c12>=&gt;</c12><c7>&nbsp;</c7><c2>-</c2><c12>1</c12><c4>,</c4><c7>
</c7><br/><ln> 14</ln><a id="14">&emsp;</a><a href="text_formatting.html#9_2_refs"><c7>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c7><c20>_</c20><c7>&nbsp;=&gt;&nbsp;</c7><c21>0</c21><c7>
</c7><br/><ln> 15</ln><a id="15">&emsp;</a><a href="text_formatting.html#9_2_refs"><c7>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c7><c4>}</c4><c21>
</c21><br/><ln> 16</ln><a id="16">&emsp;</a><a href="text_formatting.html#9_2_refs"><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</c21><br/><ln> 17</ln><a id="17">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#16_10_refs"><c20>a</c20><c16>:</c16><c3>~str</c3><c16>=~</c16><c12>""</c12><c4>;</c4><c21>
</c21><br/><ln> 18</ln><a id="18">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#17_10_refs"><c20>i</c20><c16>=</c16><c12>0</c12><c4>;</c4><c21>
</c21><br/><ln> 19</ln><a id="19">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#18_10_refs"><c20>indent</c20><c16>=</c16><c12>0</c12><c4>;</c4><c21>
</c21><br/><ln> 20</ln><a id="20">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;</c13><a href="text_formatting.html#19_6_refs"><c20>len</c20><c16>=</c16><c0>s</c0><c0>e</c0><c0>l</c0><c0>f</c0><c0>.</c0><c10>l</c10><c10>e</c10><c10>n</c10><c25>(</c25><c25>)</c25><c4>;</c4><c21>
</c21><br/><ln> 21</ln><a id="21">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>while&nbsp;</c7><a href="text_formatting.html#19"><c8>i</c8></a><c0>&lt;</c0><a href="text_formatting.html#21"><c8>len</c8></a><c7>&nbsp;</c7><c4>{</c4><c21>
</c21><br/><ln> 22</ln><a id="22">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c24>//&nbsp;skip&nbsp;leading&nbsp;whitespace.&nbsp;we&nbsp;are&nbsp;on&nbsp;a&nbsp;newline.
</c24><br/><ln> 23</ln><a id="23">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>while&nbsp;</c7><a href="text_formatting.html#19"><c8>i</c8></a><c0>&lt;</c0><a href="text_formatting.html#21"><c8>len</c8></a><c0>&nbsp;&amp;&amp;&nbsp;</c0><c25>(</c25><c0>self</c0><c4>[</c4><a href="text_formatting.html#19"><c8>i</c8></a><c4>]</c4><c2>==</c2><c12>'&nbsp;'</c12><c7>as&nbsp;</c7><c3>u8</c3><c0>&nbsp;||&nbsp;self</c0><c4>[</c4><a href="text_formatting.html#19"><c8>i</c8></a><c4>]</c4><c2>==</c2><c12>'\t'</c12><c7>as&nbsp;</c7><c3>u8</c3><c25>)</c25><c0>&nbsp;</c0><c4>{</c4><c21>&nbsp;</c21><a href="text_formatting.html#19"><c8>i</c8></a><c0>+=</c0><c12>1</c12><c4>;}</c4><c21>
</c21><br/><ln> 24</ln><a id="24">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c24>//&nbsp;measure&nbsp;line&nbsp;size&nbsp;from&nbsp;here
</c24><br/><ln> 25</ln><a id="25">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#24_11_refs"><c20>dii</c20><c16>=</c16><c12>0</c12><c4>;</c4><c21>
</c21><br/><ln> 26</ln><a id="26">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>if&nbsp;</c7><a href="text_formatting.html#11"><c8>change_indent</c8></a><c25>(</c25><c0>self</c0><c4>[</c4><a href="text_formatting.html#19"><c8>i</c8></a><c4>]</c4><c25>)</c25><c9>&lt;</c9><c12>0</c12><c7>&nbsp;</c7><c4>{</c4><c21>&nbsp;</c21><a href="text_formatting.html#20"><c8>indent</c8></a><c13>-=</c13><c12>1</c12><c4>;</c4><a href="text_formatting.html#26"><c8>dii</c8></a><c2>=</c2><c12>1</c12><c4>}</c4><c21>/*TODO-more&nbsp;elegant*/
</c21><br/><ln> 27</ln><a id="27">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#26_11_refs"><c20>cur_linesize</c20><c16>=</c16><a href="text_formatting.html#20"><c8>indent</c8></a><c2>*</c2><a href="text_formatting.html#9"><c8>tabsize</c8></a><c4>;</c4><c21>
</c21><br/><ln> 28</ln><a id="28">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#27_11_refs"><c20>ii</c20><c16>=</c16><a href="text_formatting.html#19"><c8>i</c8></a><c4>;</c4><c21>
</c21><br/><ln> 29</ln><a id="29">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#28_11_refs"><c20>inner_brace_level</c20><c16>=</c16><a href="text_formatting.html#20"><c8>indent</c8></a><c4>;</c4><c21>
</c21><br/><ln> 30</ln><a id="30">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#29_11_refs"><c20>last_open</c20><c16>=</c16><a href="text_formatting.html#21"><c8>len</c8></a><c4>;</c4><c21>
</c21><br/><ln> 31</ln><a id="31">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#30_11_refs"><c20>first_base_delim</c20><c16>=</c16><a href="text_formatting.html#21"><c8>len</c8></a><c4>;</c4><c21>
</c21><br/><ln> 32</ln><a id="32">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</c21><br/><ln> 33</ln><a id="33">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>while&nbsp;</c13><a href="text_formatting.html#30"><c8>inner_brace_level</c8></a><c2>&gt;=</c2><a href="text_formatting.html#20"><c8>indent</c8></a><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#29"><c8>ii</c8></a><c0>&lt;</c0><a href="text_formatting.html#21"><c8>len</c8></a><c13>&nbsp;&nbsp;</c13><c4>{</c4><c21>
</c21><br/><ln> 34</ln><a id="34">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;</c13><a href="text_formatting.html#33_8_refs"><c20>c</c20><c16>=</c16><c0>self</c0><c4>[</c4><a href="text_formatting.html#29"><c8>ii</c8></a><c4>];</c4><c21>
</c21><br/><ln> 35</ln><a id="35">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>if&nbsp;</c7><a href="text_formatting.html#35"><c8>c</c8></a><c2>==</c2><c12>'\n'</c12><c7>as&nbsp;</c7><c3>u8</c3><c7>&nbsp;</c7><c4>{</c4><c0>break</c0><c4>};</c4><c21>
</c21><br/><ln> 36</ln><a id="36">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>if&nbsp;</c7><a href="text_formatting.html#28"><c8>cur_linesize</c8></a><c2>&nbsp;&gt;=&nbsp;</c2><a href="text_formatting.html#9"><c8>linesize</c8></a><c7>&nbsp;</c7><c4>{</c4><c0>break</c0><c4>};</c4><c21>
</c21><br/><ln> 37</ln><a id="37">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#28"><c8>cur_linesize</c8></a><c13>+=</c13><c12>1</c12><c4>;</c4><c21>
</c21><br/><ln> 38</ln><a id="38">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;</c13><a href="text_formatting.html#37_8_refs"><c20>di</c20><c16>=</c16><a href="text_formatting.html#11"><c8>change_indent</c8></a><c25>(</c25><a href="text_formatting.html#35"><c8>c</c8></a><c25>)</c25><c4>;</c4><c21>
</c21><br/><ln> 39</ln><a id="39">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>if&nbsp;</c13><a href="text_formatting.html#39"><c8>di</c8></a><c2>&gt;</c2><c12>0</c12><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#30"><c8>inner_brace_level</c8></a><c2>==</c2><a href="text_formatting.html#20"><c8>indent</c8></a><c13>&nbsp;</c13><c4>{</c4><a href="text_formatting.html#31"><c8>last_open</c8></a><c2>=</c2><a href="text_formatting.html#29"><c8>ii</c8></a><c4>;};</c4><c21>
</c21><br/><ln> 40</ln><a id="40">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#30"><c8>inner_brace_level</c8></a><c0>+=</c0><a href="text_formatting.html#39"><c8>di</c8></a><c4>;</c4><c21>
</c21><br/><ln> 41</ln><a id="41">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>if&nbsp;</c7><a href="text_formatting.html#30"><c8>inner_brace_level</c8></a><c2>==</c2><a href="text_formatting.html#20"><c8>indent</c8></a><c7>&nbsp;</c7><c4>{</c4><c21>
</c21><br/><ln> 42</ln><a id="42">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>if&nbsp;</c7><c25>(</c25><a href="text_formatting.html#39"><c8>di</c8></a><c0>&lt;</c0><c12>0</c12><c0>&nbsp;||</c0><a href="text_formatting.html#35"><c8>c</c8></a><c2>==</c2><c12>'</c12><c4>,</c4><c12>'</c12><c7>as&nbsp;</c7><c3>u8</c3><c0>||</c0><a href="text_formatting.html#35"><c8>c</c8></a><c2>==</c2><c12>'</c12><c4>;</c4><c12>'</c12><c7>as&nbsp;</c7><c3>u8</c3><c25>)</c25><c4>{</c4><a href="text_formatting.html#31"><c8>last_open</c8></a><c2>=</c2><a href="text_formatting.html#29"><c8>ii</c8></a><c4>;};</c4><c21>
</c21><br/><ln> 43</ln><a id="43">&emsp;</a><c21>&nbsp;
</c21><br/><ln> 44</ln><a id="44">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>if&nbsp;</c7><a href="text_formatting.html#35"><c8>c</c8></a><c2>==</c2><c12>'</c12><c4>,</c4><c12>'</c12><c7>as&nbsp;</c7><c3>u8</c3><c0>||</c0><a href="text_formatting.html#35"><c8>c</c8></a><c2>==</c2><c12>'</c12><c4>;</c4><c12>'</c12><c7>as&nbsp;</c7><c3>u8</c3><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#32"><c8>first_base_delim</c8></a><c2>==</c2><a href="text_formatting.html#21"><c8>len</c8></a><c4>{</c4><c21>&nbsp;&nbsp;&nbsp;&nbsp;
</c21><br/><ln> 45</ln><a id="45">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c24>//first_base_delim=ii;
</c24><br/><ln> 46</ln><a id="46">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>
</c21><br/><ln> 47</ln><a id="47">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>
</c21><br/><ln> 48</ln><a id="48">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#29"><c8>ii</c8></a><c0>+=</c0><c12>1</c12><c21>
</c21><br/><ln> 49</ln><a id="49">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>
</c21><br/><ln> 50</ln><a id="50">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>{</c4><c13>
</c13><br/><ln> 51</ln><a id="51">&emsp;</a><c13>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;</c13><a href="text_formatting.html#50_12_refs"><c20>ii</c20><c16>=</c16><c12>0</c12><c4>;</c4><c13>
</c13><br/><ln> 52</ln><a id="52">&emsp;</a><c13>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c13><c7>while&nbsp;</c7><a href="text_formatting.html#52"><c8>ii</c8></a><c0>&lt;</c0><a href="text_formatting.html#9"><c8>tabsize</c8></a><c2>*</c2><a href="text_formatting.html#20"><c8>indent</c8></a><c7>&nbsp;</c7><c4>{</c4><c21>&nbsp;</c21><a href="text_formatting.html#18"><c8>a</c8></a><c10>.</c10><c10>p</c10><c10>u</c10><c10>s</c10><c10>h</c10><c10>_</c10><c10>c</c10><c10>h</c10><c10>a</c10><c10>r</c10><c25>(</c25><c12>'</c12><c12>&nbsp;</c12><c12>'</c12><c25>)</c25><c4>;</c4><c21>&nbsp;</c21><a href="text_formatting.html#52"><c8>ii</c8></a><c0>+=</c0><c12>1</c12><c21>&nbsp;</c21><c4>}</c4><c13>
</c13><br/><ln> 53</ln><a id="53">&emsp;</a><c13>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c13><c4>}</c4><c21>
</c21><br/><ln> 54</ln><a id="54">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#20"><c8>indent</c8></a><c0>+=</c0><a href="text_formatting.html#26"><c8>dii</c8></a><c4>;</c4><c21>&nbsp;&nbsp;&nbsp;&nbsp;</c21><c24>//&nbsp;the&nbsp;extra&nbsp;one&nbsp;we&nbsp;considered.
</c24><br/><ln> 55</ln><a id="55">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;</c13><a href="text_formatting.html#54_7_refs"><c20>init_indent</c20><c16>=</c16><a href="text_formatting.html#20"><c8>indent</c8></a><c4>;</c4><c21>
</c21><br/><ln> 56</ln><a id="56">&emsp;</a><c21>
</c21><br/><ln> 57</ln><a id="57">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>if&nbsp;</c13><a href="text_formatting.html#28"><c8>cur_linesize</c8></a><c0>&lt;</c0><a href="text_formatting.html#9"><c8>linesize</c8></a><c13>&nbsp;
</c13><br/><ln> 58</ln><a id="58">&emsp;</a><c13>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c13><c4>{</c4><c21>
</c21><br/><ln> 59</ln><a id="59">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c24>//&nbsp;copy&nbsp;the&nbsp;line.&nbsp;we&nbsp;dont&nbsp;overstep
</c24><br/><ln> 60</ln><a id="60">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>while&nbsp;</c7><a href="text_formatting.html#19"><c8>i</c8></a><c0>&lt;</c0><a href="text_formatting.html#21"><c8>len</c8></a><c0>&nbsp;&amp;&amp;&nbsp;self</c0><c4>[</c4><a href="text_formatting.html#19"><c8>i</c8></a><c4>]</c4><c2>!=</c2><c12>'\n'</c12><c7>as&nbsp;</c7><c3>u8</c3><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#20"><c8>indent</c8></a><c2>&gt;=</c2><a href="text_formatting.html#56"><c8>init_indent</c8></a><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#19"><c8>i</c8></a><c2>&lt;=</c2><a href="text_formatting.html#32"><c8>first_base_delim</c8></a><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#19"><c8>i</c8></a><c2>&lt;=</c2><a href="text_formatting.html#31"><c8>last_open</c8></a><c4>{</c4><c21>
</c21><br/><ln> 61</ln><a id="61">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;</c13><a href="text_formatting.html#60_9_refs"><c20>c</c20><c16>=</c16><c0>self</c0><c4>[</c4><a href="text_formatting.html#19"><c8>i</c8></a><c4>];</c4><c21>
</c21><br/><ln> 62</ln><a id="62">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#20"><c8>indent</c8></a><c0>+=</c0><a href="text_formatting.html#11"><c8>change_indent</c8></a><c25>(</c25><a href="text_formatting.html#62"><c8>c</c8></a><c25>)</c25><c4>;</c4><c21>
</c21><br/><ln> 63</ln><a id="63">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#18"><c8>a</c8></a><c13>.</c13><c13>p</c13><c13>u</c13><c13>s</c13><c13>h</c13><c13>_</c13><c13>c</c13><c13>h</c13><c13>a</c13><c13>r</c13><c25>(</c25><a href="text_formatting.html#62"><c8>c</c8></a><c7>&nbsp;</c7><c7>a</c7><c7>s</c7><c7>&nbsp;</c7><c3>c</c3><c3>h</c3><c3>a</c3><c3>r</c3><c25>)</c25><c4>;</c4><c21>
</c21><br/><ln> 64</ln><a id="64">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#19"><c8>i</c8></a><c13>+=</c13><c12>1</c12><c4>;</c4><c21>
</c21><br/><ln> 65</ln><a id="65">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>
</c21><br/><ln> 66</ln><a id="66">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>if&nbsp;</c7><c0>self</c0><c4>[</c4><a href="text_formatting.html#19"><c8>i</c8></a><c4>]</c4><c2>==</c2><c12>'\n'</c12><c7>as&nbsp;</c7><c3>u8</c3><c7>&nbsp;</c7><c4>{</c4><a href="text_formatting.html#29"><c8>ii</c8></a><c0>+=</c0><c12>1</c12><c4>;}</c4><c21>
</c21><br/><ln> 67</ln><a id="67">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c13>
</c13><br/><ln> 68</ln><a id="68">&emsp;</a><c13>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</c13><c4>{</c4><c21>
</c21><br/><ln> 69</ln><a id="69">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c24>//&nbsp;copy&nbsp;the&nbsp;line&nbsp;until&nbsp;the&nbsp;lines'&nbsp;last&nbsp;opening
</c24><br/><ln> 70</ln><a id="70">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c7>while&nbsp;</c7><a href="text_formatting.html#19"><c8>i</c8></a><c0>&lt;</c0><a href="text_formatting.html#21"><c8>len</c8></a><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#20"><c8>indent</c8></a><c2>&gt;=</c2><a href="text_formatting.html#56"><c8>init_indent</c8></a><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#19"><c8>i</c8></a><c2>&lt;=</c2><a href="text_formatting.html#31"><c8>last_open</c8></a><c0>&nbsp;&amp;&amp;&nbsp;</c0><a href="text_formatting.html#19"><c8>i</c8></a><c2>&lt;=</c2><a href="text_formatting.html#32"><c8>first_base_delim</c8></a><c4>{</c4><c21>
</c21><br/><ln> 71</ln><a id="71">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c13>let&nbsp;</c13><a href="text_formatting.html#70_9_refs"><c20>c</c20><c16>=</c16><c0>self</c0><c4>[</c4><a href="text_formatting.html#19"><c8>i</c8></a><c4>];</c4><c21>
</c21><br/><ln> 72</ln><a id="72">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#20"><c8>indent</c8></a><c13>+=</c13><a href="text_formatting.html#11"><c8>change_indent</c8></a><c25>(</c25><a href="text_formatting.html#72"><c8>c</c8></a><c25>)</c25><c4>;</c4><c21>
</c21><br/><ln> 73</ln><a id="73">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#18"><c8>a</c8></a><c10>.</c10><c10>p</c10><c10>u</c10><c10>s</c10><c10>h</c10><c10>_</c10><c10>c</c10><c10>h</c10><c10>a</c10><c10>r</c10><c25>(</c25><a href="text_formatting.html#72"><c8>c</c8></a><c7>&nbsp;</c7><c7>a</c7><c7>s</c7><c7>&nbsp;</c7><c3>c</c3><c3>h</c3><c3>a</c3><c3>r</c3><c25>)</c25><c4>;</c4><c21>
</c21><br/><ln> 74</ln><a id="74">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#19"><c8>i</c8></a><c13>+=</c13><c12>1</c12><c4>;</c4><c21>
</c21><br/><ln> 75</ln><a id="75">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>
</c21><br/><ln> 76</ln><a id="76">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>
</c21><br/><ln> 77</ln><a id="77">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#18"><c8>a</c8></a><c10>.</c10><c10>p</c10><c10>u</c10><c10>s</c10><c10>h</c10><c10>_</c10><c10>c</c10><c10>h</c10><c10>a</c10><c10>r</c10><c25>(</c25><c12>'</c12><c12>\</c12><c12>n</c12><c12>'</c12><c25>)</c25><c4>;</c4><c21>
</c21><br/><ln> 78</ln><a id="78">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c21>
</c21><br/><ln> 79</ln><a id="79">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><a href="text_formatting.html#18"><c8>a</c8></a><c21>
</c21><br/><ln> 80</ln><a id="80">&emsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;</c21><c4>}</c4><c17>
</c17><br/><ln> 81</ln><a id="81">&emsp;</a><c4>}</c4><c0>
</c0><br/><ln> 82</ln><a id="82">&emsp;</a><c0>
</c0><br/><div/><br/><a id="9_2_refs"><c24>text_formatting.rs:10:2-16:3<br/></c24><a href="text_formatting.html#10"><pr>		fn change_indent(c:u8)->int{
<br/>			match c as char {
<br/></pr></a></a><a href="text_formatting.html#72"><c24>72: </c24>					indent+=change_indent(c);
<br/></a><a href="text_formatting.html#62"><c24>62: </c24>					indent+=change_indent(c);
<br/></a><a href="text_formatting.html#26"><c24>26: </c24>			if change_indent(self[i])<0 { indent-=1;dii=1}/*TODO-more elegant*/
<br/></a><a href="text_formatting.html#38"><c24>38: </c24>				let di=change_indent(c);
<br/></a><br/><br/><a id="1_88_refs"><c24>text_formatting.rs:2:88-5:1<br/></c24><a href="text_formatting.html#2"><pr>/// tags: pretty print,code formatting,brace indentation, json braces, brackets,nesting
<br/>pub trait Indent {
<br/></pr></a></a><a href="text_formatting.html#4"><c24>4: </c24>	fn indent(&self,tab_size:int,max_line_size:int)->Self;
<br/></a><br/></maintext></body>