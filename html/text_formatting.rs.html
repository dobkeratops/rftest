<head><link href="css/shCore.css" rel="stylesheet" type="text/css"/><link href="css/shThemeDefault.css" rel="stylesheet" type="text/css"/><link href="css/sourcestyle.css" rel="stylesheet" type="text/css"/></head><body><div><maintext><div><fileblock><br/>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./index.html">(index&lt;-&nbsp;)</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="./">&nbsp;&nbsp;&nbsp;&nbsp;./</a><c0><a href="./text_formatting.rs.html">text_formatting.rs</a></c0><br/><br/><c40>&nbsp;&nbsp;&nbsp;&nbsp;git&nbsp;branch:&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;master&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a0b2257&nbsp;[ahead&nbsp;153]&nbsp;generalizing&nbsp;callgraph&nbsp;node&nbsp;gather,&nbsp;crosscratemap&nbsp;item&nbsp;gets&nbsp;nodekind<br/></c40><c40>&nbsp;&nbsp;&nbsp;&nbsp;modified:&nbsp;&nbsp;&nbsp;&nbsp;Sat&nbsp;Apr&nbsp;19&nbsp;10:16:31&nbsp;2014<br/></c40></fileblock></div><ln>&nbsp;&nbsp;1</ln><a id="1">&nbsp;</a>&nbsp;<c0>
</c0><br/><ln>&nbsp;&nbsp;2</ln><a id="2">&nbsp;</a><a id="n7277">&nbsp;</a><c42>///&nbsp;tags:&nbsp;pretty&nbsp;print,code&nbsp;formatting,brace&nbsp;indentation,&nbsp;json&nbsp;braces,&nbsp;brackets,nesting
</c42><br/><ln>&nbsp;&nbsp;3</ln><a id="3">&nbsp;</a>&nbsp;<c21>pub</c21><c32><a href="#line2_col88_refs">&nbsp;</a></c32><c32>trait</c32><c32><a href="#line2_col88_refs">&nbsp;Indent&nbsp;</a></c32><c3>{</c3><c32><a href="#line2_col88_refs">
</a></c32><br/><ln>&nbsp;&nbsp;4</ln><a id="4">&nbsp;</a><a id="n7287"><a id="n7290"><a id="n7278"><a id="n7283">&nbsp;</a></a></a></a><c32><a href="#line2_col88_refs">&nbsp;&nbsp;&nbsp;&nbsp;</a></c32><c30>fn</c30><c30><a href="#line2_col88_refs">&nbsp;indent</a></c30><c4>(</c4><c18><a href="#line2_col88_refs">&amp;self</a></c18><c3>,</c3><c18><a href="#line2_col88_refs">tab_size:</a></c18><c1><a href="#line2_col88_refs">int</a></c1><c3>,</c3><c18><a href="#line2_col88_refs">max_line_size:</a></c18><c1><a href="#line2_col88_refs">int</a></c1><c4>)-&gt;</c4><c1><a href="text_formatting.rs.html#2">Self</a></c1><c3>;</c3><c32><a href="#line2_col88_refs">
</a></c32><br/><ln>&nbsp;&nbsp;5</ln><a id="5">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;&nbsp;6</ln><a id="6">&nbsp;</a><a id="n7292">&nbsp;</a><c0>
</c0><br/><ln>&nbsp;&nbsp;7</ln><a id="7">&nbsp;</a><a id="n7294"><a id="n7293">&nbsp;</a></a><c33>impl&nbsp;</c33><c33><a href="text_formatting.rs.html#2">Indent</a></c33><c33>&nbsp;for&nbsp;</c33><c33><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66288">StrBuf</a></c33><c33>&nbsp;</c33><c3>{</c3><c33>
</c33><br/><ln>&nbsp;&nbsp;8</ln><a id="8">&nbsp;</a><a id="n7296"><a id="n7303"><a id="n7299"><a id="n7305"><a id="n7307"><a id="n7308"><a id="n7310"><a id="n7301">&nbsp;</a></a></a></a></a></a></a></a><c33>&nbsp;&nbsp;&nbsp;&nbsp;</c33><c30>fn&nbsp;indent</c30><c4>(</c4><c20><a href="#line8_col14_refs">&amp;self</a></c20><c3>,</c3><c20><a href="#line8_col20_refs">tabsize</a></c20><c18>:</c18><c1>int</c1><c3>,</c3><c18>&nbsp;</c18><c20><a href="#line8_col33_refs">linesize</a></c20><c18>:</c18><c1>int</c1><c4>)-&gt;</c4><c1><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66288">StrBuf</a></c1><c18>&nbsp;</c18><c3>{</c3><c22>
</c22><br/><ln>&nbsp;&nbsp;9</ln><a id="9">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;todo-write&nbsp;as&nbsp;iterators.
</c40><br/><ln>&nbsp;10</ln><a id="10">&nbsp;</a><a id="n7319"><a id="n7316"><a id="n7317"><a id="n7312"><a id="n7314"><a id="n7311">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c30>fn</c30><c30><a href="#line10_col8_refs">&nbsp;change_indent</a></c30><c4>(</c4><c20><a href="text_formatting.rs.html#11">c</a></c20><c13><a href="#line10_col8_refs">:</a></c13><c1><a href="#line10_col8_refs">u8</a></c1><c4>)-&gt;</c4><c1><a href="#line10_col8_refs">int</a></c1><c3>{</c3><c22><a href="#line10_col8_refs">
</a></c22><br/><ln>&nbsp;11</ln><a id="11">&nbsp;</a><a id="n7323"><a id="n7322"><a id="n7321"><a id="n7320">&nbsp;</a></a></a></a><c22><a href="#line10_col8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c21>match</c21><c21><a href="#line10_col8_refs">&nbsp;</a></c21><c26><a href="text_formatting.rs.html#10">c</a></c26><c21><a href="#line10_col8_refs">&nbsp;as&nbsp;</a></c21><c1><a href="#line10_col8_refs">char</a></c1><c21><a href="#line10_col8_refs">&nbsp;</a></c21><c3>{</c3><c21><a href="#line10_col8_refs">
</a></c21><br/><ln>&nbsp;12</ln><a id="12">&nbsp;</a><a id="n7327"><a id="n7331"><a id="n7328"><a id="n7326"><a id="n7325"><a id="n7330"><a id="n7329">&nbsp;</a></a></a></a></a></a></a><c21><a href="#line10_col8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#line10_col8_refs">'</a></c20><c3>{</c3><c20><a href="#line10_col8_refs">'</a></c20><c12><a href="#line10_col8_refs">|</a></c12><c20><a href="#line10_col8_refs">'</a></c20><c4>(</c4><c20><a href="#line10_col8_refs">'</a></c20><c12><a href="#line10_col8_refs">|</a></c12><c20><a href="#line10_col8_refs">'</a></c20><c3>[</c3><c20><a href="#line10_col8_refs">'</a></c20><c4>=&gt;</c4><c21><a href="#line10_col8_refs">&nbsp;</a></c21><c12><a href="#line10_col8_refs">1</a></c12><c3>,</c3><c21><a href="#line10_col8_refs">
</a></c21><br/><ln>&nbsp;13</ln><a id="13">&nbsp;</a><a id="n7334"><a id="n7337"><a id="n7339"><a id="n7333"><a id="n7332"><a id="n7335"><a id="n7336"><a id="n7338">&nbsp;</a></a></a></a></a></a></a></a><c21><a href="#line10_col8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#line10_col8_refs">'</a></c20><c3>}</c3><c20><a href="#line10_col8_refs">'</a></c20><c12><a href="#line10_col8_refs">|</a></c12><c20><a href="#line10_col8_refs">'</a></c20><c4>)</c4><c20><a href="#line10_col8_refs">'</a></c20><c12><a href="#line10_col8_refs">|</a></c12><c20><a href="#line10_col8_refs">'</a></c20><c3>]</c3><c20><a href="#line10_col8_refs">'</a></c20><c4>=&gt;</c4><c21><a href="#line10_col8_refs">&nbsp;</a></c21><c5><a href="#line10_col8_refs">-</a></c5><c12><a href="#line10_col8_refs">1</a></c12><c3>,</c3><c21><a href="#line10_col8_refs">
</a></c21><br/><ln>&nbsp;14</ln><a id="14">&nbsp;</a><a id="n7340"><a id="n7341">&nbsp;</a></a><c21><a href="#line10_col8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c20><a href="#line10_col8_refs">_</a></c20><c21><a href="#line10_col8_refs">&nbsp;</a></c21><c4>=&gt;</c4><c21><a href="#line10_col8_refs">&nbsp;</a></c21><c12><a href="#line10_col8_refs">0</a></c12><c21><a href="#line10_col8_refs">
</a></c21><br/><ln>&nbsp;15</ln><a id="15">&nbsp;</a>&nbsp;<c21><a href="#line10_col8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c21><c3>}</c3><c22><a href="#line10_col8_refs">
</a></c22><br/><ln>&nbsp;16</ln><a id="16">&nbsp;</a>&nbsp;<c22><a href="#line10_col8_refs">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;17</ln><a id="17">&nbsp;</a><a id="n7346"><a id="n7345"><a id="n7342"><a id="n7348"><a id="n7343"><a id="n7344"><a id="n7347">&nbsp;</a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line17_col12_refs">&nbsp;a</a></c20><c16>=</c16><c26><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66663">StrBuf::from_str</a></c26><c4>(</c4><c12>""</c12><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;18</ln><a id="18">&nbsp;</a><a id="n7351"><a id="n7352"><a id="n7349"><a id="n7350"><a id="n7353">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line18_col12_refs">&nbsp;i</a></c20><c16>=</c16><c12>0</c12><c3>;</c3><c22>
</c22><br/><ln>&nbsp;19</ln><a id="19">&nbsp;</a><a id="n7358"><a id="n7356"><a id="n7355"><a id="n7354"><a id="n7357">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line19_col12_refs">&nbsp;indent</a></c20><c13>=</c13><c12>0</c12><c3>;</c3><c22>
</c22><br/><ln>&nbsp;20</ln><a id="20">&nbsp;</a><a id="n7360"><a id="n7361"><a id="n7363"><a id="n7359"><a id="n7362"><a id="n7364">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#line20_col12_refs">len</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n67219">.len</a></c10><c4>()</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;21</ln><a id="21">&nbsp;</a><a id="n7368"><a id="n7365"><a id="n7370"><a id="n7366"><a id="n7369"><a id="n7367">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>while&nbsp;</c21><c26><a href="text_formatting.rs.html#18">i</a></c26><c1>&lt;</c1><c26><a href="text_formatting.rs.html#20">len</a></c26><c21>&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;22</ln><a id="22">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;skip&nbsp;leading&nbsp;whitespace.&nbsp;we&nbsp;are&nbsp;on&nbsp;a&nbsp;newline.
</c40><br/><ln>&nbsp;23</ln><a id="23">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;todo&nbsp;-&nbsp;use&nbsp;iterator,&nbsp;rust&nbsp;strings&nbsp;can't&nbsp;be&nbsp;indexed&nbsp;efficiently,&nbsp;its&nbsp;utf8&nbsp;codepoints..
</c40><br/><ln>&nbsp;24</ln><a id="24">&nbsp;</a><a id="n7380"><a id="n7398"><a id="n7386"><a id="n7382"><a id="n7376"><a id="n7384"><a id="n7389"><a id="n7390"><a id="n7394"><a id="n7388"><a id="n7374"><a id="n7377"><a id="n7395"><a id="n7383"><a id="n7379"><a id="n7381"><a id="n7400"><a id="n7399"><a id="n7372"><a id="n7393"><a id="n7378"><a id="n7392"><a id="n7373"><a id="n7401"><a id="n7375"><a id="n7371"><a id="n7391"><a id="n7397"><a id="n7385">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>while</c21><c13>&nbsp;</c13><c26><a href="text_formatting.rs.html#18">i</a></c26><c1>&lt;</c1><c26><a href="text_formatting.rs.html#20">len</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c4>(</c4><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66991">.as_bytes</a></c10><c4>()</c4><c3>[</c3><c26><a href="text_formatting.rs.html#18">i</a></c26><c3>]</c3><c5>==</c5><c12>'&nbsp;'</c12><c21>as&nbsp;</c21><c1>u8&nbsp;||&nbsp;</c1><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66991">.as_bytes</a></c10><c4>()</c4><c3>[</c3><c26><a href="text_formatting.rs.html#18">i</a></c26><c3>]</c3><c5>==</c5><c12>'\t'</c12><c21>as&nbsp;</c21><c1>u8</c1><c4>)</c4><c13>&nbsp;</c13><c3>{</c3><c22>&nbsp;</c22><c26><a href="text_formatting.rs.html#18">i</a></c26><c1>+=</c1><c12>1</c12><c3>;}</c3><c22>
</c22><br/><ln>&nbsp;25</ln><a id="25">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;measure&nbsp;line&nbsp;size&nbsp;from&nbsp;here
</c40><br/><ln>&nbsp;26</ln><a id="26">&nbsp;</a><a id="n7405"><a id="n7404"><a id="n7403"><a id="n7406"><a id="n7402">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line26_col16_refs">&nbsp;dii</a></c20><c13>=</c13><c12>0</c12><c3>;</c3><c22>
</c22><br/><ln>&nbsp;27</ln><a id="27">&nbsp;</a><a id="n7408"><a id="n7417"><a id="n7413"><a id="n7423"><a id="n7422"><a id="n7410"><a id="n7411"><a id="n7420"><a id="n7409"><a id="n7418"><a id="n7407"><a id="n7415"><a id="n7412"><a id="n7424"><a id="n7416"><a id="n7419"><a id="n7414"><a id="n7421">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if</c21><c13>&nbsp;</c13><c26><a href="text_formatting.rs.html#10">change_indent</a></c26><c4>(</c4><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66991">.as_bytes</a></c10><c4>()</c4><c3>[</c3><c26><a href="text_formatting.rs.html#18">i</a></c26><c3>]</c3><c4>)</c4><c1>&lt;</c1><c12>0</c12><c13>&nbsp;</c13><c3>{</c3><c22>&nbsp;</c22><c26><a href="text_formatting.rs.html#19">indent</a></c26><c1>-=</c1><c12>1</c12><c3>;</c3><c26><a href="text_formatting.rs.html#26">dii</a></c26><c5>=</c5><c12>1</c12><c3>}</c3><c41>/*TODO-more&nbsp;elegant*/</c41><c22>
</c22><br/><ln>&nbsp;28</ln><a id="28">&nbsp;</a><a id="n7428"><a id="n7429"><a id="n7430"><a id="n7426"><a id="n7425"><a id="n7431"><a id="n7427">&nbsp;</a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line28_col16_refs">&nbsp;cur_linesize</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#19">indent</a></c26><c5>*</c5><c26><a href="text_formatting.rs.html#8">tabsize</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;29</ln><a id="29">&nbsp;</a><a id="n7435"><a id="n7434"><a id="n7433"><a id="n7432"><a id="n7436">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line29_col16_refs">&nbsp;ii</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#18">i</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;30</ln><a id="30">&nbsp;</a><a id="n7439"><a id="n7438"><a id="n7437"><a id="n7441"><a id="n7440">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line30_col16_refs">&nbsp;inner_brace_level</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#19">indent</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;31</ln><a id="31">&nbsp;</a><a id="n7446"><a id="n7444"><a id="n7443"><a id="n7445"><a id="n7442">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line31_col16_refs">&nbsp;last_open</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#20">len</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;32</ln><a id="32">&nbsp;</a><a id="n7450"><a id="n7449"><a id="n7451"><a id="n7447"><a id="n7448">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#line32_col16_refs">first_base_delim</a></c20><c16>=</c16><c26><a href="text_formatting.rs.html#20">len</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;33</ln><a id="33">&nbsp;</a>&nbsp;<c22>
</c22><br/><ln>&nbsp;34</ln><a id="34">&nbsp;</a><a id="n7459"><a id="n7455"><a id="n7452"><a id="n7453"><a id="n7454"><a id="n7460"><a id="n7456"><a id="n7458"><a id="n7457"><a id="n7461">&nbsp;</a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>while&nbsp;</c21><c26><a href="text_formatting.rs.html#30">inner_brace_level</a></c26><c5>&gt;=</c5><c26><a href="text_formatting.rs.html#19">indent</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#29">ii</a></c26><c1>&lt;</c1><c26><a href="text_formatting.rs.html#20">len</a></c26><c21>&nbsp;&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;35</ln><a id="35">&nbsp;</a><a id="n7468"><a id="n7466"><a id="n7469"><a id="n7464"><a id="n7463"><a id="n7462"><a id="n7467"><a id="n7465">&nbsp;</a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#line35_col20_refs">c</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66991">.as_bytes</a></c10><c4>()</c4><c3>[</c3><c26><a href="text_formatting.rs.html#29">ii</a></c26><c3>];</c3><c22>
</c22><br/><ln>&nbsp;36</ln><a id="36">&nbsp;</a><a id="n7478"><a id="n7472"><a id="n7476"><a id="n7479"><a id="n7470"><a id="n7475"><a id="n7473"><a id="n7471"><a id="n7474">&nbsp;</a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c26><a href="text_formatting.rs.html#35">c</a></c26><c5>==</c5><c12>'\n'</c12><c21>as&nbsp;</c21><c1>u8</c1><c21>&nbsp;</c21><c3>{</c3><c1>break</c1><c3>};</c3><c22>
</c22><br/><ln>&nbsp;37</ln><a id="37">&nbsp;</a><a id="n7484"><a id="n7483"><a id="n7486"><a id="n7480"><a id="n7485"><a id="n7482"><a id="n7481">&nbsp;</a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c26><a href="text_formatting.rs.html#28">cur_linesize</a></c26><c5>&nbsp;&gt;=&nbsp;</c5><c26><a href="text_formatting.rs.html#8">linesize</a></c26><c21>&nbsp;</c21><c3>{</c3><c1>break</c1><c3>};</c3><c22>
</c22><br/><ln>&nbsp;38</ln><a id="38">&nbsp;</a><a id="n7488"><a id="n7489"><a id="n7490"><a id="n7487">&nbsp;</a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#28">cur_linesize</a></c26><c13>+=</c13><c12>1</c12><c3>;</c3><c22>
</c22><br/><ln>&nbsp;39</ln><a id="39">&nbsp;</a><a id="n7491"><a id="n7497"><a id="n7493"><a id="n7492"><a id="n7494"><a id="n7495"><a id="n7496">&nbsp;</a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#line39_col20_refs">di</a></c20><c16>=</c16><c26><a href="text_formatting.rs.html#10">change_indent</a></c26><c4>(</c4><c26><a href="text_formatting.rs.html#35">c</a></c26><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;40</ln><a id="40">&nbsp;</a><a id="n7503"><a id="n7502"><a id="n7507"><a id="n7506"><a id="n7498"><a id="n7511"><a id="n7499"><a id="n7501"><a id="n7500"><a id="n7504"><a id="n7509"><a id="n7510"><a id="n7505"><a id="n7508">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c26><a href="text_formatting.rs.html#39">di</a></c26><c5>&gt;</c5><c12>0</c12><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#30">inner_brace_level</a></c26><c5>==</c5><c26><a href="text_formatting.rs.html#19">indent</a></c26><c21>&nbsp;</c21><c3>{</c3><c26><a href="text_formatting.rs.html#31">last_open</a></c26><c13>=</c13><c26><a href="text_formatting.rs.html#29">ii</a></c26><c3>;};</c3><c22>
</c22><br/><ln>&nbsp;41</ln><a id="41">&nbsp;</a><a id="n7515"><a id="n7513"><a id="n7514"><a id="n7512">&nbsp;</a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#30">inner_brace_level</a></c26><c13>+=</c13><c26><a href="text_formatting.rs.html#39">di</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;42</ln><a id="42">&nbsp;</a><a id="n7518"><a id="n7519"><a id="n7520"><a id="n7517"><a id="n7516"><a id="n7521">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if</c21><c13>&nbsp;</c13><c26><a href="text_formatting.rs.html#30">inner_brace_level</a></c26><c5>==</c5><c26><a href="text_formatting.rs.html#19">indent</a></c26><c13>&nbsp;</c13><c3>{</c3><c22>
</c22><br/><ln>&nbsp;43</ln><a id="43">&nbsp;</a><a id="n7538"><a id="n7525"><a id="n7535"><a id="n7531"><a id="n7526"><a id="n7528"><a id="n7536"><a id="n7524"><a id="n7539"><a id="n7541"><a id="n7532"><a id="n7529"><a id="n7527"><a id="n7537"><a id="n7530"><a id="n7533"><a id="n7523"><a id="n7522">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if</c21><c13>&nbsp;</c13><c26><a href="text_formatting.rs.html#39">di</a></c26><c1>&lt;</c1><c12>0</c12><c1>&nbsp;||</c1><c26><a href="text_formatting.rs.html#35">c</a></c26><c5>==</c5><c12>'</c12><c3>,</c3><c12>'</c12><c21>as&nbsp;</c21><c1>u8||</c1><c26><a href="text_formatting.rs.html#35">c</a></c26><c5>==</c5><c12>'</c12><c3>;</c3><c12>'</c12><c21>as&nbsp;</c21><c1>u8</c1><c13>&nbsp;</c13><c3>{</c3><c22>
</c22><br/><ln>&nbsp;44</ln><a id="44">&nbsp;</a><a id="n7545"><a id="n7544"><a id="n7543"><a id="n7542">&nbsp;</a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#31">last_open</a></c26><c13>=</c13><c26><a href="text_formatting.rs.html#29">ii</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;45</ln><a id="45">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;46</ln><a id="46">&nbsp;</a>&nbsp;<c22>
</c22><br/><ln>&nbsp;47</ln><a id="47">&nbsp;</a><a id="n7549"><a id="n7562"><a id="n7547"><a id="n7551"><a id="n7554"><a id="n7548"><a id="n7564"><a id="n7558"><a id="n7552"><a id="n7561"><a id="n7556"><a id="n7557"><a id="n7550"><a id="n7546"><a id="n7563"><a id="n7555"><a id="n7559">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c26><a href="text_formatting.rs.html#35">c</a></c26><c5>==</c5><c12>'</c12><c3>,</c3><c12>'</c12><c21>as&nbsp;</c21><c1>u8||</c1><c26><a href="text_formatting.rs.html#35">c</a></c26><c5>==</c5><c12>'</c12><c3>;</c3><c12>'</c12><c21>as&nbsp;</c21><c1>u8&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#32">first_base_delim</a></c26><c5>==</c5><c26><a href="text_formatting.rs.html#20">len</a></c26><c21>&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;48</ln><a id="48">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//first_base_delim=ii;
</c40><br/><ln>&nbsp;49</ln><a id="49">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;50</ln><a id="50">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;51</ln><a id="51">&nbsp;</a><a id="n7566"><a id="n7565"><a id="n7567">&nbsp;</a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#29">ii</a></c26><c1>+=</c1><c12>1</c12><c22>
</c22><br/><ln>&nbsp;52</ln><a id="52">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;53</ln><a id="53">&nbsp;</a><a id="n7569"><a id="n7568"><a id="n7570">&nbsp;</a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>{</c3><c22>
</c22><br/><ln>&nbsp;54</ln><a id="54">&nbsp;</a><a id="n7572"><a id="n7573"><a id="n7571"><a id="n7575"><a id="n7574">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c21>mut</c21><c20><a href="#line54_col20_refs">&nbsp;ii</a></c20><c13>=</c13><c12>0</c12><c3>;</c3><c22>
</c22><br/><ln>&nbsp;55</ln><a id="55">&nbsp;</a><a id="n7589"><a id="n7588"><a id="n7587"><a id="n7576"><a id="n7577"><a id="n7584"><a id="n7580"><a id="n7581"><a id="n7585"><a id="n7582"><a id="n7583"><a id="n7578"><a id="n7579"><a id="n7586">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>while&nbsp;</c21><c26><a href="text_formatting.rs.html#54">ii</a></c26><c1>&lt;</c1><c26><a href="text_formatting.rs.html#8">tabsize</a></c26><c5>*</c5><c26><a href="text_formatting.rs.html#19">indent</a></c26><c21>&nbsp;</c21><c3>{</c3><c22>&nbsp;</c22><c26><a href="text_formatting.rs.html#17">a</a></c26><c13><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">.push_char</a></c13><c4>(</c4><c12><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">'&nbsp;'</a></c12><c4>)</c4><c3>;</c3><c22>&nbsp;</c22><c26><a href="text_formatting.rs.html#54">ii</a></c26><c1>+=</c1><c12>1</c12><c22>&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;56</ln><a id="56">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;57</ln><a id="57">&nbsp;</a><a id="n7590"><a id="n7592"><a id="n7593"><a id="n7591">&nbsp;</a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#19">indent</a></c26><c1>+=</c1><c26><a href="text_formatting.rs.html#26">dii</a></c26><c3>;</c3><c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;the&nbsp;extra&nbsp;one&nbsp;we&nbsp;considered.
</c40><br/><ln>&nbsp;58</ln><a id="58">&nbsp;</a><a id="n7594"><a id="n7595"><a id="n7598"><a id="n7596"><a id="n7597">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#line58_col16_refs">init_indent</a></c20><c16>=</c16><c26><a href="text_formatting.rs.html#19">indent</a></c26><c3>;</c3><c22>
</c22><br/><ln>&nbsp;59</ln><a id="59">&nbsp;</a>&nbsp;<c22>
</c22><br/><ln>&nbsp;60</ln><a id="60">&nbsp;</a><a id="n7603"><a id="n7602"><a id="n7601"><a id="n7599"><a id="n7600">&nbsp;</a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>if&nbsp;</c21><c26><a href="text_formatting.rs.html#28">cur_linesize</a></c26><c1>&lt;</c1><c26><a href="text_formatting.rs.html#8">linesize</a></c26><c21>
</c21><br/><ln>&nbsp;61</ln><a id="61">&nbsp;</a><a id="n7604">&nbsp;</a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;62</ln><a id="62">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;copy&nbsp;the&nbsp;line.&nbsp;we&nbsp;dont&nbsp;overstep
</c40><br/><ln>&nbsp;63</ln><a id="63">&nbsp;</a><a id="n7608"><a id="n7629"><a id="n7630"><a id="n7609"><a id="n7624"><a id="n7612"><a id="n7619"><a id="n7610"><a id="n7617"><a id="n7628"><a id="n7607"><a id="n7620"><a id="n7611"><a id="n7615"><a id="n7613"><a id="n7626"><a id="n7606"><a id="n7605"><a id="n7622"><a id="n7623"><a id="n7625"><a id="n7631"><a id="n7627"><a id="n7616"><a id="n7614"><a id="n7618">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>while&nbsp;</c21><c26><a href="text_formatting.rs.html#18">i</a></c26><c1>&lt;</c1><c26><a href="text_formatting.rs.html#20">len</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66991">.as_bytes</a></c10><c4>()</c4><c3>[</c3><c26><a href="text_formatting.rs.html#18">i</a></c26><c3>]</c3><c5>!=</c5><c12>'\n'</c12><c21>as&nbsp;</c21><c1>u8&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#19">indent</a></c26><c5>&gt;=</c5><c26><a href="text_formatting.rs.html#58">init_indent</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#18">i</a></c26><c5>&lt;=</c5><c26><a href="text_formatting.rs.html#32">first_base_delim</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#18">i</a></c26><c5>&lt;=</c5><c26><a href="text_formatting.rs.html#31">last_open</a></c26><c3>{</c3><c22>
</c22><br/><ln>&nbsp;64</ln><a id="64">&nbsp;</a><a id="n7637"><a id="n7639"><a id="n7633"><a id="n7638"><a id="n7635"><a id="n7636"><a id="n7632"><a id="n7634">&nbsp;</a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#line64_col24_refs">c</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66991">.as_bytes</a></c10><c4>()</c4><c3>[</c3><c26><a href="text_formatting.rs.html#18">i</a></c26><c3>];</c3><c22>
</c22><br/><ln>&nbsp;65</ln><a id="65">&nbsp;</a><a id="n7641"><a id="n7643"><a id="n7640"><a id="n7642"><a id="n7644"><a id="n7645">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#19">indent</a></c26><c13>+=</c13><c26><a href="text_formatting.rs.html#10">change_indent</a></c26><c4>(</c4><c26><a href="text_formatting.rs.html#64">c</a></c26><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;66</ln><a id="66">&nbsp;</a><a id="n7649"><a id="n7651"><a id="n7647"><a id="n7646"><a id="n7648"><a id="n7650">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#17">a</a></c26><c13><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">.push_char</a></c13><c4>(</c4><c26><a href="text_formatting.rs.html#64">c</a></c26><c21><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">&nbsp;as&nbsp;</a></c21><c1><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">char</a></c1><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;67</ln><a id="67">&nbsp;</a><a id="n7655"><a id="n7654"><a id="n7656"><a id="n7653">&nbsp;</a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#18">i</a></c26><c13>+=</c13><c12>1</c12><c3>;</c3><c22>
</c22><br/><ln>&nbsp;68</ln><a id="68">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;69</ln><a id="69">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c21>
</c21><br/><ln>&nbsp;70</ln><a id="70">&nbsp;</a><a id="n7658"><a id="n7657">&nbsp;</a></a><c21>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</c21><c3>{</c3><c22>
</c22><br/><ln>&nbsp;71</ln><a id="71">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c40>//&nbsp;copy&nbsp;the&nbsp;line&nbsp;until&nbsp;the&nbsp;lines'&nbsp;last&nbsp;opening
</c40><br/><ln>&nbsp;72</ln><a id="72">&nbsp;</a><a id="n7662"><a id="n7663"><a id="n7675"><a id="n7674"><a id="n7672"><a id="n7665"><a id="n7673"><a id="n7670"><a id="n7661"><a id="n7666"><a id="n7659"><a id="n7660"><a id="n7667"><a id="n7671"><a id="n7668"><a id="n7664"><a id="n7669">&nbsp;</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>while&nbsp;</c21><c26><a href="text_formatting.rs.html#18">i</a></c26><c1>&lt;</c1><c26><a href="text_formatting.rs.html#20">len</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#19">indent</a></c26><c5>&gt;=</c5><c26><a href="text_formatting.rs.html#58">init_indent</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#18">i</a></c26><c5>&lt;=</c5><c26><a href="text_formatting.rs.html#31">last_open</a></c26><c1>&nbsp;&amp;&amp;&nbsp;</c1><c26><a href="text_formatting.rs.html#18">i</a></c26><c5>&lt;=</c5><c26><a href="text_formatting.rs.html#32">first_base_delim</a></c26><c3>{</c3><c22>
</c22><br/><ln>&nbsp;73</ln><a id="73">&nbsp;</a><a id="n7677"><a id="n7680"><a id="n7681"><a id="n7682"><a id="n7676"><a id="n7683"><a id="n7679"><a id="n7678">&nbsp;</a></a></a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c21>let</c21><c22>&nbsp;</c22><c20><a href="#line73_col24_refs">c</a></c20><c13>=</c13><c26><a href="text_formatting.rs.html#8">self</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66991">.as_bytes</a></c10><c4>()</c4><c3>[</c3><c26><a href="text_formatting.rs.html#18">i</a></c26><c3>];</c3><c22>
</c22><br/><ln>&nbsp;74</ln><a id="74">&nbsp;</a><a id="n7686"><a id="n7688"><a id="n7689"><a id="n7684"><a id="n7687"><a id="n7685">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#19">indent</a></c26><c1>+=</c1><c26><a href="text_formatting.rs.html#10">change_indent</a></c26><c4>(</c4><c26><a href="text_formatting.rs.html#73">c</a></c26><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;75</ln><a id="75">&nbsp;</a><a id="n7692"><a id="n7695"><a id="n7690"><a id="n7694"><a id="n7691"><a id="n7693">&nbsp;</a></a></a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#17">a</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">.push_char</a></c10><c4>(</c4><c26><a href="text_formatting.rs.html#73">c</a></c26><c21><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">&nbsp;as&nbsp;</a></c21><c1><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">char</a></c1><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;76</ln><a id="76">&nbsp;</a><a id="n7697"><a id="n7698"><a id="n7699"><a id="n7700">&nbsp;</a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#18">i</a></c26><c1>+=</c1><c12>1</c12><c3>;</c3><c22>
</c22><br/><ln>&nbsp;77</ln><a id="77">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;78</ln><a id="78">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;79</ln><a id="79">&nbsp;</a><a id="n7703"><a id="n7701"><a id="n7704"><a id="n7702">&nbsp;</a></a></a></a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#17">a</a></c26><c10><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">.push_char</a></c10><c4>(</c4><c12><a href="/home/walter/gplsrc/rust/src/libstd/strbuf.rs.html#n66922">'\n'</a></c12><c4>)</c4><c3>;</c3><c22>
</c22><br/><ln>&nbsp;80</ln><a id="80">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c22>
</c22><br/><ln>&nbsp;81</ln><a id="81">&nbsp;</a><a id="n7705">&nbsp;</a><c22>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c22><c26><a href="text_formatting.rs.html#17">a</a></c26><c22>
</c22><br/><ln>&nbsp;82</ln><a id="82">&nbsp;</a>&nbsp;<c22>&nbsp;&nbsp;&nbsp;&nbsp;</c22><c3>}</c3><c33>
</c33><br/><ln>&nbsp;83</ln><a id="83">&nbsp;</a>&nbsp;<c3>}</c3><c0>
</c0><br/><ln>&nbsp;84</ln><a id="84">&nbsp;</a>&nbsp;<c0>
</c0><br/><div class="refblock"><br/><br/><a id="line10_col8_refs"><c43>text_formatting.rs:10:8-10:8&nbsp;-fn-&nbsp;definition:<br/></c43><a href="#10"><pr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;change_indent(c:u8)-&gt;int{
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;c&nbsp;as&nbsp;char&nbsp;{
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'{'|'('|'['=&gt;&nbsp;1,
<br/></pr></a></a><c43>references:-&nbsp;4</c43><br/><a href="text_formatting.rs.html#39"><c40>38:&nbsp;</c40><c2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cur_linesize+=1;
</c2><br/><c41>39:&nbsp;</c41><c1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;di=change_indent(c);
</c1><br/><c40>40:&nbsp;</c40><c2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;di&gt;0&nbsp;&amp;&amp;&nbsp;inner_brace_level==indent&nbsp;{last_open=ii;};
</c2><br/></a>--<br/><a href="text_formatting.rs.html#65"><c40>64:&nbsp;</c40><c2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;c=self.as_bytes()[i];
</c2><br/><c41>65:&nbsp;</c41><c1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indent+=change_indent(c);
</c1><br/><c40>66:&nbsp;</c40><c2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.push_char(c&nbsp;as&nbsp;char);
</c2><br/></a>--<br/><a href="text_formatting.rs.html#74"><c40>73:&nbsp;</c40><c2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;c=self.as_bytes()[i];
</c2><br/><c41>74:&nbsp;</c41><c1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indent+=change_indent(c);
</c1><br/><c40>75:&nbsp;</c40><c2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.push_char(c&nbsp;as&nbsp;char);
</c2><br/></a><a href="text_formatting.rs.html#27"></a><br/><br/><a id="line2_col88_refs"><c43>text_formatting.rs:2:88-2:88&nbsp;-trait-&nbsp;definition:<br/></c43><a href="#2"><pr>///&nbsp;tags:&nbsp;pretty&nbsp;print,code&nbsp;formatting,brace&nbsp;indentation,&nbsp;json&nbsp;braces,&nbsp;brackets,nesting
<br/>pub&nbsp;trait&nbsp;Indent&nbsp;{
<br/>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;indent(&amp;self,tab_size:int,max_line_size:int)-&gt;Self;
<br/></pr></a></a><c43>references:-&nbsp;2</c43><br/><a href="text_formatting.rs.html#7"><c41>7:&nbsp;</c41><c1>impl&nbsp;Indent&nbsp;for&nbsp;StrBuf&nbsp;{
</c1><br/><c40>8:&nbsp;</c40><c2>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;indent(&amp;self,tabsize:int,&nbsp;linesize:int)-&gt;StrBuf&nbsp;{
</c2><br/></a><a href="text_formatting.rs.html#4"></a></div></maintext></div></body>